// meta={"simUrl":"https://trg-maker.userpxt.io/---simulator","cdnUrl":"https://pxt.azureedge.net","version":"v0","target":"maker","targetVersion":"0.15.18"}
// boardDefinition={"driveDisplayName":"","visual":{"image":"data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%20325%20163%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20stroke-linejoin%3D%22round%22%20stroke-miterlimit%3D%222%22%3E%3Cpath%20d%3D%22M282.403%20162.977a6.522%206.522%200%20006.519-6.519V6.519A6.522%206.522%200%2000282.403%200H14.839A6.522%206.522%200%20008.32%206.519v149.939a6.522%206.522%200%20006.519%206.519h267.564z%22%20fill%3D%22%232d2d2d%22%2F%3E%3Cpath%20d%3D%22M324.459%20134.082V29.13H140.458v104.952h184.001z%22%2F%3E%3Cpath%20d%3D%22M302.013%2076.811h17.743v-7.984h-17.743V49h17.743v-8.37h-22.811v-4.678h27.489v17.725H306.69v10.472h17.744v17.34H306.69v10.472h17.744v29.976h-35.659v-4.677h30.981v-8.364h-30.981v-4.678h30.981v-7.58h-17.743V76.811z%22%20fill%3D%22%23d09600%22%2F%3E%3Cpath%20d%3D%22M144.27%2035.464h140.55v61.951h-22.337v31.241H144.27V35.464z%22%20fill%3D%22%23c7c7c7%22%2F%3E%3Cpath%20d%3D%22M246.725%2039.493h5.658v2.805h-.668v-2.292h-1.733v2.146h-.663v-2.146h-1.926v2.382h-.668v-2.895zM248.543%2042.923l.062.484a2.077%202.077%200%2000-.697.16%201.027%201.027%200%2000-.44.39%201.09%201.09%200%2000-.168.596c0%20.196.043.368.128.518.085.15.201.262.349.335.148.073.309.11.484.11a.967.967%200%2000.465-.106.837.837%200%2000.334-.349c.059-.104.151-.334.276-.691.125-.356.243-.606.353-.749.142-.185.317-.323.527-.414a1.75%201.75%200%2001.704-.136c.286%200%20.553.055.801.166.248.112.437.274.565.487.129.214.193.451.193.712%200%20.288-.067.541-.202.761-.135.22-.334.389-.597.507a2.284%202.284%200%2001-.891.19l-.054-.492c.358-.026.628-.116.81-.268.183-.153.274-.378.274-.677%200-.31-.083-.536-.249-.678a.888.888%200%2000-.6-.213c-.203%200-.37.05-.501.15-.132.099-.266.357-.404.775-.137.417-.257.703-.36.858a1.392%201.392%200%2001-.577.5%201.894%201.894%200%2001-.805.162c-.301%200-.585-.059-.851-.177a1.421%201.421%200%2001-.621-.51%201.312%201.312%200%2001-.222-.747c0-.352.074-.646.224-.883.149-.237.373-.423.673-.558a2.57%202.57%200%20011.017-.213zM246.725%2046.712h5.658v1.464c0%20.257-.018.454-.054.59a.997.997%200%2001-.265.479%201.382%201.382%200%2001-.546.311%202.426%202.426%200%2001-.771.118c-.482%200-.889-.105-1.222-.315-.333-.21-.5-.59-.5-1.138v-.995h-2.3v-.514zm2.968.514v1.003c0%20.331.09.567.27.706.18.14.434.209.76.209.237%200%20.44-.041.608-.123.169-.082.28-.19.334-.324.033-.086.05-.246.05-.479v-.992h-2.022zM248.219%2050.137l.092.476c-.393.055-.677.148-.85.279-.174.132-.261.292-.261.481%200%20.224.113.413.34.567.226.155.506.232.841.232.319%200%20.582-.072.789-.215.207-.143.311-.324.311-.545a.987.987%200%2000-.077-.336l.609.053a.505.505%200%2000-.007.077c0%20.203.077.385.231.548.155.162.393.243.714.243.255%200%20.466-.059.633-.177a.54.54%200%2000.251-.458c0-.185-.085-.34-.255-.463-.17-.124-.424-.203-.764-.238l.124-.477c.465.059.826.191%201.082.397.256.207.384.463.384.77a.955.955%200%2001-.199.585%201.247%201.247%200%2001-.542.409%201.902%201.902%200%2001-.729.142c-.245%200-.467-.045-.668-.135a1.102%201.102%200%2001-.478-.4.938.938%200%2001-.481.535c-.243.127-.547.19-.913.19-.494%200-.912-.123-1.256-.37-.343-.247-.515-.56-.515-.937%200-.341.148-.623.444-.848.296-.225.679-.354%201.15-.385zM247.393%2055.652h-.668v-2.565c.168-.003.328.015.483.056.254.065.505.17.752.314.247.143.533.351.857.623.504.421.904.706%201.198.855.295.148.573.222.836.222.275%200%20.507-.068.696-.203a.622.622%200%2000.284-.528c0-.229-.1-.412-.301-.55-.201-.138-.479-.207-.834-.209l.074-.49c.532.034.938.16%201.217.379.279.219.419.512.419.881%200%20.372-.151.667-.452.884-.301.217-.674.325-1.119.325-.226%200-.449-.031-.667-.095a2.884%202.884%200%2001-.691-.316%209.922%209.922%200%2001-.996-.734c-.35-.286-.587-.47-.712-.551a2.411%202.411%200%2000-.376-.201v1.903zM248.423%2056.11h.699v1.463h-.699V56.11zM246.725%2058.838l5.658-1.029v.526l-3.709.59c-.388.064-.774.119-1.158.164.605.099.954.157%201.046.175l3.821.738v.62l-2.864.555c-.71.14-1.377.24-2.003.302.358.05.768.114%201.232.193l3.635.609v.516l-5.658-1.064v-.495l4.311-.817c.36-.069.581-.11.664-.122-.26-.041-.481-.079-.664-.114l-4.311-.823v-.524zM246.725%2063.284h5.658v1.72c0%20.346-.051.609-.153.789-.101.18-.281.324-.538.431a2.183%202.183%200%2001-.853.162c-.401%200-.739-.089-1.015-.268-.275-.178-.45-.453-.525-.825a1.397%201.397%200%2001-.281.309c-.201.15-.452.292-.753.426l-1.54.675v-.646l1.177-.513c.34-.15.6-.273.78-.37.18-.097.306-.184.378-.261a.7.7%200%2000.151-.234c.018-.059.027-.154.027-.286v-.596h-2.513v-.513zm3.161.513v1.104c0%20.235.035.418.106.55a.68.68%200%2000.34.302c.155.069.325.103.507.103.268%200%20.488-.066.66-.199.172-.134.259-.344.259-.632v-1.228h-1.872zM249.481%2067.034c.939%200%201.674.173%202.205.519.532.345.797.792.797%201.339%200%20.358-.125.681-.374.968-.25.288-.598.507-1.044.658a4.728%204.728%200%2001-1.519.226%204.626%204.626%200%2001-1.539-.238c-.453-.159-.796-.384-1.029-.675a1.478%201.478%200%2001-.349-.942c0-.365.129-.691.386-.979.257-.288.608-.506%201.053-.654a4.448%204.448%200%20011.413-.222zm-.012.529c-.682%200-1.219.126-1.611.377-.392.252-.588.567-.588.946%200%20.387.198.705.594.954.396.25.958.375%201.686.375.461%200%20.863-.053%201.206-.16.344-.107.61-.263.799-.469a.996.996%200%2000.284-.692c0-.363-.182-.676-.546-.938-.364-.262-.972-.393-1.824-.393zM246.725%2072.515l5.658-1.503v.555l-4.11%201.009c-.329.081-.638.149-.926.203.308.06.617.13.926.209l4.11%201.048v.524l-5.658-1.519v-.526zM246.725%2075.031h5.658v2.806h-.668v-2.292h-1.733v2.146h-.663v-2.146h-1.926v2.382h-.668v-2.896zM246.725%2078.644h5.658v1.72c0%20.346-.051.609-.153.789-.101.18-.281.323-.538.431a2.183%202.183%200%2001-.853.161c-.401%200-.739-.089-1.015-.267-.275-.178-.45-.453-.525-.826a1.405%201.405%200%2001-.281.31c-.201.15-.452.292-.753.426l-1.54.675v-.646l1.177-.513c.34-.15.6-.274.78-.371.18-.097.306-.184.378-.26a.693.693%200%2000.151-.235c.018-.058.027-.153.027-.285v-.596h-2.513v-.513zm3.161.513v1.104c0%20.234.035.418.106.55a.684.684%200%2000.34.302c.155.069.325.103.507.103.268%200%20.488-.067.66-.2.172-.133.259-.343.259-.631v-1.228h-1.872zM248.423%2082.304h.699v1.463h-.699v-1.463zM246.725%2084.365h5.658v2.805h-.668v-2.291h-1.733v2.146h-.663v-2.146h-1.926v2.381h-.668v-2.895zM268.666%2051.568h7.201v3.571h-.85v-2.917h-2.205v2.731h-.845v-2.731h-2.451v3.031h-.85v-3.685zM270.979%2055.934l.079.616c-.36.029-.656.097-.887.204-.23.107-.417.272-.56.497a1.387%201.387%200%2000-.213.758c0%20.249.054.469.162.66.108.191.256.333.444.426.189.093.394.14.617.14.226%200%20.423-.045.592-.135.168-.09.31-.238.425-.445.075-.132.192-.425.351-.879.159-.453.309-.771.449-.953.18-.236.404-.412.671-.527.267-.116.566-.174.896-.174.364%200%20.704.071%201.02.212.316.142.555.349.719.62.164.272.246.574.246.906%200%20.366-.086.689-.258.969a1.67%201.67%200%2001-.759.645%202.93%202.93%200%2001-1.135.242l-.068-.626c.455-.034.799-.148%201.031-.342.233-.194.349-.481.349-.861%200-.395-.106-.683-.317-.864a1.14%201.14%200%2000-.764-.271c-.259%200-.471.064-.638.192-.167.126-.338.454-.514.985-.175.532-.328.896-.459%201.094a1.772%201.772%200%2001-.734.636%202.42%202.42%200%2001-1.025.206c-.383%200-.744-.076-1.083-.226a1.802%201.802%200%2001-.79-.648%201.672%201.672%200%2001-.283-.952c0-.447.095-.821.285-1.123.19-.303.476-.539.857-.711a3.27%203.27%200%20011.294-.271zM268.666%2060.757h7.201v1.863c0%20.328-.023.578-.069.751a1.259%201.259%200%2001-.336.61c-.166.164-.397.296-.695.396-.298.1-.626.15-.983.15-.612%200-1.13-.134-1.554-.401-.424-.267-.636-.75-.636-1.449v-1.266h-2.928v-.654zm3.777.654v1.276c0%20.423.115.722.344.9.229.177.552.266.968.266.301%200%20.559-.052.773-.157.215-.104.357-.242.425-.412.043-.11.064-.314.064-.61v-1.263h-2.574zM268.666%2065.369h7.201v2.189c0%20.44-.065.775-.194%201.004-.129.229-.358.412-.685.549-.328.137-.69.206-1.086.206-.511%200-.941-.114-1.292-.341-.35-.226-.573-.577-.668-1.051-.121.173-.24.305-.358.395-.256.19-.575.371-.958.542l-1.96.859v-.822l1.498-.654c.432-.19.763-.348.992-.471.23-.124.39-.234.482-.332a.878.878%200%2000.191-.298%201.35%201.35%200%2000.035-.364v-.758h-3.198v-.653zm4.023.653v1.405c0%20.299.045.532.135.701a.87.87%200%2000.432.384c.198.087.414.131.646.131.341%200%20.621-.085.84-.254.22-.17.329-.438.329-.804v-1.563h-2.382zM268.666%2070.354h7.201v3.571h-.85v-2.917h-2.205v2.732h-.845v-2.732h-2.451v3.031h-.85v-3.685zM270.979%2074.72l.079.616c-.36.029-.656.097-.887.204-.23.107-.417.272-.56.497a1.387%201.387%200%2000-.213.758c0%20.249.054.469.162.66.108.191.256.333.444.426.189.093.394.14.617.14.226%200%20.423-.045.592-.135.168-.09.31-.238.425-.445.075-.132.192-.425.351-.879.159-.453.309-.771.449-.953.18-.236.404-.411.671-.527.267-.116.566-.174.896-.174.364%200%20.704.071%201.02.213.316.141.555.348.719.619.164.272.246.574.246.907%200%20.366-.086.688-.258.968-.172.28-.425.495-.759.645-.334.15-.712.231-1.135.243l-.068-.627c.455-.034.799-.148%201.031-.342.233-.194.349-.481.349-.861%200-.395-.106-.683-.317-.864a1.14%201.14%200%2000-.764-.271c-.259%200-.471.064-.638.192-.167.126-.338.454-.514.986-.175.531-.328.895-.459%201.093a1.772%201.772%200%2001-.734.636%202.42%202.42%200%2001-1.025.206c-.383%200-.744-.075-1.083-.226a1.802%201.802%200%2001-.79-.648%201.67%201.67%200%2001-.283-.952c0-.447.095-.821.285-1.123.19-.302.476-.539.857-.711a3.27%203.27%200%20011.294-.271zM270.979%2079.321l.079.617c-.36.029-.656.097-.887.203-.23.107-.417.273-.56.497a1.389%201.389%200%2000-.213.758c0%20.249.054.469.162.66.108.191.256.333.444.426.189.094.394.14.617.14.226%200%20.423-.045.592-.134.168-.09.31-.239.425-.445.075-.133.192-.426.351-.879.159-.454.309-.772.449-.954.18-.235.404-.411.671-.527.267-.115.566-.173.896-.173.364%200%20.704.07%201.02.212.316.141.555.348.719.62.164.271.246.574.246.906%200%20.366-.086.689-.258.968-.172.28-.425.495-.759.645a2.913%202.913%200%2001-1.135.243l-.068-.627c.455-.033.799-.147%201.031-.342.233-.194.349-.481.349-.86%200-.395-.106-.683-.317-.864a1.134%201.134%200%2000-.764-.271c-.259%200-.471.064-.638.192-.167.125-.338.454-.514.985-.175.531-.328.895-.459%201.093-.193.287-.438.5-.734.637a2.42%202.42%200%2001-1.025.205c-.383%200-.744-.075-1.083-.226a1.795%201.795%200%2001-.79-.648%201.67%201.67%200%2001-.283-.952c0-.446.095-.821.285-1.123.19-.302.476-.539.857-.711a3.27%203.27%200%20011.294-.271zM268.666%2084.256h7.201v.653h-7.201v-.653zM268.666%2086.095h7.201v3.332h-.85v-2.678h-2.23v2.317h-.85v-2.317h-3.271v-.654zM215.21%2048.507l-.561%201.525c-1.825-.32-3.217-.895-4.176-1.725-.958-.83-1.437-1.845-1.437-3.044%200-1.241.368-2.251%201.105-3.028.737-.778%201.804-1.37%203.202-1.776%201.398-.406%202.898-.609%204.502-.609%201.749%200%203.275.229%204.577.688%201.302.458%202.291%201.11%202.967%201.956.676.846%201.014%201.777%201.014%202.793%200%201.152-.428%202.121-1.283%202.906-.856.786-2.059%201.333-3.609%201.642l-.516-1.5c1.222-.267%202.112-.655%202.67-1.163.557-.508.836-1.147.836-1.917%200-.885-.309-1.625-.928-2.219-.619-.595-1.449-1.012-2.492-1.253a14.264%2014.264%200%2000-3.224-.362c-1.429%200-2.675.143-3.741.429-1.065.285-1.861.729-2.388%201.331-.527.602-.791%201.255-.791%201.956%200%20.854.359%201.577%201.077%202.169.718.591%201.783.992%203.196%201.201zM209.322%2051.94h16.794v8.328h-1.982v-6.803h-5.143v6.371h-1.971v-6.371h-5.716v7.07h-1.982V51.94z%22%20fill-rule%3D%22nonzero%22%2F%3E%3Cg%20fill%3D%22%23d09600%22%3E%3Cpath%20d%3D%22M284.82%208.559V5.287h-3.272v3.272h3.272zM269.882%208.559V5.287h-3.272v3.272h3.272zM254.944%208.559V5.287h-3.272v3.272h3.272zM240.007%208.559V5.287h-3.273v3.272h3.273zM225.069%208.559V5.287h-3.273v3.272h3.273zM210.131%208.559V5.287h-3.272v3.272h3.272zM195.193%208.559V5.287h-3.272v3.272h3.272zM180.255%208.559V5.287h-3.272v3.272h3.272zM165.317%208.559V5.287h-3.272v3.272h3.272zM150.379%208.559V5.287h-3.272v3.272h3.272zM135.441%208.559V5.287h-3.272v3.272h3.272zM120.503%208.559V5.287h-3.272v3.272h3.272zM105.566%208.559V5.287h-3.273v3.272h3.273zM90.628%208.559V5.287h-3.273v3.272h3.273zM75.69%208.559V5.287h-3.272v3.272h3.272zM60.752%208.559V5.287H57.48v3.272h3.272zM45.814%208.559V5.287h-3.272v3.272h3.272zM30.876%208.559V5.287h-3.272v3.272h3.272z%22%2F%3E%3Cpath%20d%3D%22M15.938%208.559V5.287h-3.272v3.272h3.272z%22%20fill-opacity%3D%22.5%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22%23d09600%22%3E%3Cpath%20d%3D%22M285.101%20157.776v-3.272h-3.272v3.272h3.272zM270.163%20157.776v-3.272h-3.272v3.272h3.272zM255.225%20157.776v-3.272h-3.272v3.272h3.272zM240.287%20157.776v-3.272h-3.272v3.272h3.272zM225.349%20157.776v-3.272h-3.272v3.272h3.272zM210.412%20157.776v-3.272h-3.273v3.272h3.273zM195.474%20157.776v-3.272h-3.272v3.272h3.272zM180.536%20157.776v-3.272h-3.272v3.272h3.272zM165.598%20157.776v-3.272h-3.272v3.272h3.272zM150.66%20157.776v-3.272h-3.272v3.272h3.272zM135.722%20157.776v-3.272h-3.272v3.272h3.272zM120.784%20157.776v-3.272h-3.272v3.272h3.272zM105.846%20157.776v-3.272h-3.272v3.272h3.272zM90.909%20157.776v-3.272h-3.273v3.272h3.273zM75.971%20157.776v-3.272h-3.273v3.272h3.273zM61.033%20157.776v-3.272h-3.272v3.272h3.272zM46.095%20157.776v-3.272h-3.272v3.272h3.272zM31.157%20157.776v-3.272h-3.272v3.272h3.272zM16.219%20157.776v-3.272h-3.272v3.272h3.272z%22%2F%3E%3C%2Fg%3E%3Cpath%20d%3D%22M38.53%20104.409V60.535H0v43.874h38.53zM50.056%2039.109v-8.983H9.737v8.983h40.319z%22%20fill%3D%22%23c7c7c7%22%2F%3E%3Cpath%20d%3D%22M40.685%2043.061V26.174H16.659v16.887h24.026z%22%20fill%3D%22%23969696%22%2F%3E%3Cpath%20d%3D%22M35.262%2034.617a5.368%205.368%200%2001-5.365%205.366%205.369%205.369%200%2001-5.366-5.366%205.368%205.368%200%20015.366-5.365%205.368%205.368%200%20015.365%205.365z%22%2F%3E%3Cpath%20d%3D%22M50.056%20133.266v-8.982H9.737v8.982h40.319z%22%20fill%3D%22%23c7c7c7%22%2F%3E%3Cpath%20d%3D%22M40.685%20137.218v-16.886H16.659v16.886h24.026z%22%20fill%3D%22%23969696%22%2F%3E%3Cpath%20d%3D%22M35.262%20128.775a5.368%205.368%200%2001-5.365%205.365%205.368%205.368%200%2001-5.366-5.365%205.368%205.368%200%20015.366-5.365%205.368%205.368%200%20015.365%205.365z%22%2F%3E%3Cg%20fill%3D%22%23adadad%22%3E%3Cpath%20d%3D%22M88.101%2098.514v-2.038h-1.413v2.038h1.413zM85.217%2098.514v-2.038h-1.413v2.038h1.413zM82.333%2098.514v-2.038H80.92v2.038h1.413zM79.449%2098.514v-2.038h-1.414v2.038h1.414zM76.565%2098.514v-2.038h-1.414v2.038h1.414zM73.68%2098.514v-2.038h-1.413v2.038h1.413zM70.796%2098.514v-2.038h-1.413v2.038h1.413z%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22%23adadad%22%3E%3Cpath%20d%3D%22M88.502%2066.646v-2.038h-1.413v2.038h1.413zM85.618%2066.646v-2.038h-1.413v2.038h1.413zM82.734%2066.646v-2.038H81.32v2.038h1.414zM79.85%2066.646v-2.038h-1.414v2.038h1.414zM76.965%2066.646v-2.038h-1.413v2.038h1.413zM74.081%2066.646v-2.038h-1.413v2.038h1.413zM71.197%2066.646v-2.038h-1.413v2.038h1.413z%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22%23adadad%22%3E%3Cpath%20d%3D%22M62.125%2072.202h2.038v1.413h-2.038zM62.125%2075.086h2.038v1.413h-2.038zM62.125%2077.97h2.038v1.413h-2.038zM62.125%2080.854h2.038v1.413h-2.038zM62.125%2083.739h2.038v1.413h-2.038zM62.125%2086.623h2.038v1.413h-2.038zM62.125%2089.507h2.038v1.413h-2.038z%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22%23adadad%22%3E%3Cpath%20d%3D%22M93.321%2072.202h2.038v1.413h-2.038zM93.321%2075.086h2.038v1.413h-2.038zM93.321%2077.97h2.038v1.413h-2.038zM93.321%2080.854h2.038v1.413h-2.038zM93.321%2083.739h2.038v1.413h-2.038zM93.321%2086.623h2.038v1.413h-2.038zM93.321%2089.507h2.038v1.413h-2.038z%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22%23adadad%22%3E%3Cpath%20d%3D%22M88.101%2066.646v-2.038h-1.413v2.038h1.413zM85.217%2066.646v-2.038h-1.413v2.038h1.413zM82.333%2066.646v-2.038H80.92v2.038h1.413zM79.449%2066.646v-2.038h-1.414v2.038h1.414zM76.565%2066.646v-2.038h-1.414v2.038h1.414zM73.68%2066.646v-2.038h-1.413v2.038h1.413zM70.796%2066.646v-2.038h-1.413v2.038h1.413z%22%2F%3E%3C%2Fg%3E%3Cpath%20d%3D%22M93.321%2096.476v-29.83H64.163v29.83h29.158z%22%2F%3E%3Cpath%20d%3D%22M290.06%2015.422l-1.124.13c-.036-.273-.133-.481-.29-.625a.814.814%200%2000-.571-.216.803.803%200%2000-.606.259c-.164.173-.246.406-.246.7%200%20.277.079.497.236.66a.77.77%200%2000.575.243c.149%200%20.327-.027.533-.082l-.128.9c-.314-.008-.554.057-.719.194a.677.677%200%2000-.248.549c0%20.193.06.348.182.463a.668.668%200%2000.483.173.72.72%200%2000.509-.196c.141-.131.226-.323.256-.574l1.072.173c-.075.348-.187.627-.338.835-.15.208-.359.372-.628.491a2.21%202.21%200%2001-.904.179c-.57%200-1.028-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.873-1.21a1.424%201.424%200%2001-.833-.476%201.33%201.33%200%2001-.313-.892c0-.505.195-.936.584-1.292.388-.357.872-.535%201.451-.535.549%200%201.004.15%201.365.45.361.3.57.692.628%201.177zM283.506%2013.893l2.167%205.761h-1.328l-1.534-4.263-1.485%204.263h-1.298l2.171-5.761h1.307zM279.701%2015.422l-1.125.13c-.036-.273-.132-.481-.289-.625a.816.816%200%2000-.571-.216.802.802%200%2000-.606.259c-.164.173-.246.406-.246.7%200%20.277.079.497.236.66a.77.77%200%2000.575.243c.149%200%20.326-.027.533-.082l-.128.9c-.314-.008-.554.057-.72.194a.68.68%200%2000-.248.549.61.61%200%2000.182.463.672.672%200%2000.484.173.72.72%200%2000.509-.196c.14-.131.226-.323.256-.574l1.071.173c-.074.348-.187.627-.337.835-.15.208-.36.372-.628.491a2.21%202.21%200%2001-.904.179c-.571%200-1.028-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.873-1.21a1.424%201.424%200%2001-.834-.476%201.335%201.335%200%2001-.312-.892c0-.505.194-.936.583-1.292.389-.357.873-.535%201.452-.535.548%200%201.003.15%201.364.45.362.3.571.692.629%201.177zM272.34%2013.893v5.761h-4.495v-.974h3.271v-1.277h-3.044v-.971h3.044v-1.568h-3.387v-.971h4.611zM266.678%2013.893v5.761h-1.191l-2.481-3.847v3.847h-1.137v-5.761h1.228l2.444%203.757v-3.757h1.137zM256.675%2013.893l2.167%205.761h-1.328l-1.534-4.263-1.485%204.263h-1.298l2.171-5.761h1.307zM252.572%2013.893v5.761h-1.964c-.744%200-1.229-.028-1.456-.086a1.6%201.6%200%2001-.872-.564c-.234-.29-.352-.664-.352-1.122%200-.354.068-.651.203-.892s.307-.43.515-.568c.208-.137.42-.228.635-.273.292-.055.715-.083%201.269-.083h.798v-2.173h1.224zm-1.224%204.787v-1.635h-.67c-.482%200-.805.03-.967.09a.751.751%200%2000-.521.731c0%20.21.064.383.194.519s.294.221.492.255c.146.027.44.04.881.04h.591zM243.177%2013.893l2.167%205.761h-1.328l-1.534-4.263-1.485%204.263h-1.298l2.171-5.761h1.307zM239.062%2013.893v5.761h-1.191l-2.481-3.847v3.847h-1.138v-5.761h1.229l2.444%203.757v-3.757h1.137zM226.197%2015.422l-1.125.13c-.036-.273-.133-.481-.29-.625a.813.813%200%2000-.57-.216.802.802%200%2000-.606.259c-.164.173-.246.406-.246.7%200%20.277.078.497.235.66a.77.77%200%2000.575.243c.149%200%20.327-.027.534-.082l-.129.9c-.314-.008-.554.057-.719.194a.677.677%200%2000-.248.549c0%20.193.06.348.182.463a.669.669%200%2000.484.173.717.717%200%2000.508-.196c.141-.131.226-.323.257-.574l1.071.173c-.075.348-.187.627-.337.835-.151.208-.36.372-.629.491a2.21%202.21%200%2001-.904.179c-.57%200-1.028-.173-1.372-.519-.284-.283-.426-.602-.426-.959%200-.505.29-.909.872-1.21a1.424%201.424%200%2001-.833-.476%201.335%201.335%200%2001-.312-.892c0-.505.194-.936.583-1.292.388-.357.872-.535%201.451-.535.549%200%201.004.15%201.365.45.361.3.571.692.629%201.177zM219.166%2013.893v1.16h2.482v.966l-2.631%203.659h-.976v-3.655h-.752v-.97h.752v-1.16h1.125zm0%202.13v1.969l1.394-1.969h-1.394zM212.07%2015.422l-1.125.13c-.036-.273-.132-.481-.289-.625a.817.817%200%2000-.571-.216.802.802%200%2000-.606.259c-.164.173-.246.406-.246.7%200%20.277.078.497.236.66a.769.769%200%2000.574.243c.149%200%20.327-.027.534-.082l-.128.9c-.315-.008-.554.057-.72.194a.68.68%200%2000-.248.549.61.61%200%2000.182.463.67.67%200%2000.484.173.721.721%200%2000.509-.196c.14-.131.226-.323.256-.574l1.071.173c-.074.348-.187.627-.337.835-.15.208-.36.372-.629.491-.268.119-.57.179-.903.179-.571%200-1.029-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.872-1.21a1.424%201.424%200%2001-.833-.476%201.335%201.335%200%2001-.312-.892c0-.505.194-.936.583-1.292.389-.357.873-.535%201.452-.535.548%200%201.003.15%201.364.45.361.3.571.692.629%201.177zM207.302%2015.375l-1.158.114a.927.927%200%2000-.294-.592.82.82%200%2000-.562-.218.797.797%200%2000-.616.281c-.169.188-.253.47-.253.847%200%20.354.084.619.25.796a.855.855%200%2000.652.265c.333%200%20.633-.14.897-.42l.943.129-.595%202.999h-3.073v-1.034h2.192l.182-.978a1.833%201.833%200%2001-.794.184c-.516%200-.953-.178-1.311-.534-.359-.356-.538-.819-.538-1.387%200-.474.145-.898.434-1.27.395-.508.942-.762%201.642-.762.56%200%201.016.143%201.369.428.353.286.564.67.633%201.152zM197.943%2015.422l-1.125.13c-.036-.273-.132-.481-.289-.625a.816.816%200%2000-.571-.216.802.802%200%2000-.606.259c-.164.173-.246.406-.246.7%200%20.277.079.497.236.66a.77.77%200%2000.575.243c.149%200%20.326-.027.533-.082l-.128.9c-.314-.008-.554.057-.72.194a.68.68%200%2000-.248.549.61.61%200%2000.182.463.672.672%200%2000.484.173.72.72%200%2000.509-.196c.14-.131.226-.323.256-.574l1.071.173c-.074.348-.186.627-.337.835-.15.208-.36.372-.628.491a2.21%202.21%200%2001-.904.179c-.571%200-1.028-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.873-1.21a1.427%201.427%200%2001-.834-.476%201.335%201.335%200%2001-.312-.892c0-.505.195-.936.583-1.292.389-.357.873-.535%201.452-.535.548%200%201.003.15%201.365.45.361.3.57.692.628%201.177zM189.267%2014.919v-1.026h4.073a2.577%202.577%200%2001-.397%201.103c-.22.347-.656.807-1.306%201.381-.524.464-.845.778-.964.943-.16.228-.24.453-.24.676%200%20.246.07.436.209.568.139.132.332.198.577.198.243%200%20.435-.069.579-.208.143-.139.226-.369.248-.692l1.158.11c-.069.608-.285%201.044-.649%201.309-.364.265-.819.397-1.365.397-.598%200-1.068-.153-1.41-.46a1.473%201.473%200%2001-.513-1.143c0-.26.049-.507.147-.741.098-.235.253-.48.465-.737.141-.17.394-.415.761-.735s.599-.532.697-.637c.098-.104.177-.206.238-.306h-2.308zM183.816%2015.422l-1.124.13c-.036-.273-.133-.481-.29-.625a.814.814%200%2000-.571-.216.801.801%200%2000-.605.259c-.164.173-.246.406-.246.7%200%20.277.078.497.235.66a.77.77%200%2000.575.243c.149%200%20.327-.027.534-.082l-.129.9c-.314-.008-.554.057-.719.194a.677.677%200%2000-.248.549c0%20.193.06.348.182.463a.668.668%200%2000.483.173.72.72%200%2000.509-.196c.141-.131.226-.323.257-.574l1.071.173c-.075.348-.187.627-.337.835-.151.208-.36.372-.629.491a2.21%202.21%200%2001-.904.179c-.57%200-1.028-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.873-1.21a1.424%201.424%200%2001-.833-.476%201.336%201.336%200%2001-.313-.892c0-.505.195-.936.584-1.292.388-.357.872-.535%201.451-.535.549%200%201.004.15%201.365.45.361.3.571.692.628%201.177zM179.106%2015.422l-1.125.13c-.036-.273-.132-.481-.289-.625a.816.816%200%2000-.571-.216.802.802%200%2000-.606.259c-.164.173-.246.406-.246.7%200%20.277.079.497.236.66a.77.77%200%2000.575.243c.149%200%20.326-.027.533-.082l-.128.9c-.314-.008-.554.057-.72.194a.68.68%200%2000-.248.549.61.61%200%2000.182.463.672.672%200%2000.484.173.72.72%200%2000.509-.196c.14-.131.226-.323.256-.574l1.071.173c-.074.348-.186.627-.337.835-.15.208-.36.372-.628.491a2.21%202.21%200%2001-.904.179c-.571%200-1.028-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.873-1.21a1.427%201.427%200%2001-.834-.476%201.335%201.335%200%2001-.312-.892c0-.505.195-.936.583-1.292.389-.357.873-.535%201.452-.535.548%200%201.003.15%201.365.45.361.3.57.692.628%201.177zM165.724%2014.919v-1.026h4.073a2.577%202.577%200%2001-.397%201.103c-.22.347-.656.807-1.307%201.381-.523.464-.845.778-.963.943-.16.228-.24.453-.24.676%200%20.246.07.436.209.568.139.132.331.198.577.198.242%200%20.435-.069.579-.208.143-.139.226-.369.248-.692l1.158.11c-.069.608-.286%201.044-.649%201.309-.364.265-.819.397-1.365.397-.598%200-1.069-.153-1.41-.46a1.473%201.473%200%2001-.513-1.143c0-.26.049-.507.147-.741.098-.235.253-.48.465-.737.14-.17.394-.415.761-.735.366-.32.599-.532.697-.637.097-.104.177-.206.237-.306h-2.307zM164.922%2015.375l-1.158.114a.927.927%200%2000-.294-.592.82.82%200%2000-.562-.218.8.8%200%2000-.617.281c-.168.188-.252.47-.252.847%200%20.354.084.619.25.796a.855.855%200%2000.652.265c.333%200%20.632-.14.897-.42l.943.129-.596%202.999h-3.072v-1.034h2.192l.182-.978c-.26.123-.524.184-.794.184-.516%200-.953-.178-1.311-.534-.359-.356-.538-.819-.538-1.387%200-.474.145-.898.434-1.27.394-.508.942-.762%201.642-.762.56%200%201.016.143%201.369.428.353.286.564.67.633%201.152zM149.244%2014.919v-1.026h4.073a2.577%202.577%200%2001-.397%201.103c-.22.347-.656.807-1.306%201.381-.524.464-.845.778-.964.943-.16.228-.24.453-.24.676%200%20.246.07.436.209.568.139.132.332.198.577.198.243%200%20.436-.069.579-.208.143-.139.226-.369.248-.692l1.158.11c-.069.608-.285%201.044-.649%201.309-.364.265-.819.397-1.365.397-.598%200-1.068-.153-1.41-.46a1.473%201.473%200%2001-.513-1.143c0-.26.049-.507.147-.741.098-.235.253-.48.465-.737.141-.17.394-.415.761-.735s.599-.532.697-.637c.098-.104.177-.206.238-.306h-2.308zM144.521%2018.244l1.125-.118c.028.22.099.382.215.487a.645.645%200%2000.451.157.774.774%200%2000.622-.314c.17-.21.277-.646.321-1.309-.29.325-.649.487-1.079.487-.486%200-.901-.175-1.247-.526-.346-.351-.519-.804-.519-1.36%200-.589.182-1.062.546-1.418.363-.357.831-.535%201.401-.535.613%200%201.116.226%201.51.678.394.452.591%201.193.591%202.222%200%201.056-.205%201.817-.616%202.283-.411.467-.944.7-1.6.7-.461%200-.842-.123-1.144-.368-.302-.244-.494-.6-.577-1.066zm2.635-2.409c0-.359-.087-.636-.261-.832-.174-.195-.372-.292-.595-.292a.695.695%200%2000-.538.239c-.143.16-.215.422-.215.786%200%20.375.077.649.232.824a.74.74%200%2000.578.261.74.74%200%2000.567-.25c.154-.166.232-.412.232-.736zM132.764%2014.919v-1.026h4.074a2.59%202.59%200%2001-.397%201.103c-.221.347-.656.807-1.307%201.381-.524.464-.845.778-.964.943-.16.228-.24.453-.24.676%200%20.246.07.436.209.568.14.132.332.198.577.198.243%200%20.436-.069.579-.208.144-.139.226-.369.248-.692l1.158.11c-.069.608-.285%201.044-.649%201.309-.364.265-.819.397-1.365.397-.598%200-1.068-.153-1.41-.46a1.473%201.473%200%2001-.513-1.143c0-.26.049-.507.147-.741.098-.235.253-.48.465-.737.141-.17.395-.415.761-.735.367-.32.599-.532.697-.637.098-.104.177-.206.238-.306h-2.308zM131.979%2018.55v1.026h-3.975v-.802c.328-.306.662-.747%201.001-1.32a7.502%207.502%200%2000.776-1.83c.177-.645.265-1.222.262-1.731h1.121c-.019.797-.192%201.609-.519%202.437a8.014%208.014%200%2001-1.309%202.22h2.643zM121.942%2013.893h1.162v4.162a4.06%204.06%200%20011.501-.837v1.002c-.303.094-.633.273-.988.536-.356.264-.6.571-.732.922h-.943v-5.785zM117.926%2013.893v1.16h2.482v.966l-2.631%203.659h-.976v-3.655h-.752v-.97h.752v-1.16h1.125zm0%202.13v1.969l1.394-1.969h-1.394zM107.815%2013.893h1.162v4.162a4.068%204.068%200%20011.501-.837v1.002c-.303.094-.632.273-.988.536-.356.264-.6.571-.732.922h-.943v-5.785zM102.154%2014.919v-1.026h4.073a2.577%202.577%200%2001-.397%201.103c-.221.347-.656.807-1.307%201.381-.524.464-.845.778-.963.943-.16.228-.24.453-.24.676%200%20.246.069.436.209.568.139.132.331.198.577.198.242%200%20.435-.069.579-.208.143-.139.226-.369.248-.692l1.158.11c-.069.608-.286%201.044-.65%201.309-.364.265-.818.397-1.364.397-.599%200-1.069-.153-1.411-.46a1.475%201.475%200%2001-.512-1.143c0-.26.049-.507.146-.741.098-.235.253-.48.466-.737.14-.17.394-.415.761-.735.366-.32.599-.532.696-.637a1.82%201.82%200%2000.238-.306h-2.307zM95.938%2016.011v.971H93.3v-2.295c.256-.236.628-.443%201.114-.623.487-.179.98-.269%201.479-.269.634%200%201.186.126%201.658.379a2.47%202.47%200%20011.063%201.085c.237.47.355.982.355%201.534%200%20.6-.132%201.134-.397%201.6a2.616%202.616%200%2001-1.162%201.073c-.388.191-.872.287-1.451.287-.753%200-1.341-.15-1.764-.45a2.027%202.027%200%2001-.817-1.244l1.216-.216c.085.283.246.506.482.67.236.163.53.245.883.245.535%200%20.96-.161%201.276-.483.315-.322.473-.8.473-1.434%200-.684-.16-1.197-.48-1.539-.319-.342-.739-.513-1.257-.513-.256%200-.513.048-.771.144a2.643%202.643%200%2000-.664.348v.73h1.402zM92.158%2013.893v5.761h-1.191l-2.481-3.847v3.847h-1.137v-5.761h1.228l2.444%203.757v-3.757h1.137zM86.058%2019.654h-2.237c-.504%200-.889-.036-1.154-.11a2.049%202.049%200%2001-.914-.53%202.505%202.505%200%2001-.579-.934c-.132-.368-.198-.822-.198-1.361%200-.474.062-.883.186-1.226.152-.419.368-.759.649-1.018.213-.197.499-.35.861-.46.27-.081.631-.122%201.083-.122h2.303v5.761zm-1.224-.974v-3.816h-.914c-.341%200-.588.018-.74.055a1.149%201.149%200%2000-.494.24c-.131.112-.238.298-.321.556-.082.258-.124.61-.124%201.055%200%20.445.042.787.124%201.026.083.238.199.424.348.558.149.133.338.224.566.271.171.036.506.055%201.005.055h.55zM74.868%2013.893h1.162v4.162a4.068%204.068%200%20011.501-.837v1.002c-.303.094-.633.273-.988.536-.356.264-.6.571-.732.922h-.943v-5.785zM73.172%2015.422l-1.124.13c-.036-.273-.133-.481-.29-.625a.814.814%200%2000-.571-.216.801.801%200%2000-.605.259c-.165.173-.247.406-.247.7%200%20.277.079.497.236.66a.77.77%200%2000.575.243c.149%200%20.327-.027.533-.082l-.128.9c-.314-.008-.554.057-.719.194a.677.677%200%2000-.248.549c0%20.193.06.348.182.463a.668.668%200%2000.483.173.72.72%200%2000.509-.196c.141-.131.226-.323.256-.574l1.072.173c-.075.348-.187.627-.337.835-.151.208-.36.372-.629.491a2.21%202.21%200%2001-.904.179c-.57%200-1.028-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.873-1.21a1.424%201.424%200%2001-.833-.476%201.336%201.336%200%2001-.313-.892c0-.505.195-.936.584-1.292.388-.357.872-.535%201.451-.535.549%200%201.004.15%201.365.45.361.3.57.692.628%201.177zM65.815%2019.654h-2.237c-.504%200-.889-.036-1.154-.11a2.049%202.049%200%2001-.914-.53%202.505%202.505%200%2001-.579-.934c-.132-.368-.198-.822-.198-1.361%200-.474.062-.883.186-1.226.152-.419.368-.759.649-1.018.213-.197.499-.35.86-.46.271-.081.632-.122%201.084-.122h2.303v5.761zm-1.224-.974v-3.816h-.914c-.341%200-.588.018-.74.055a1.149%201.149%200%2000-.494.24c-.131.112-.238.298-.321.556-.082.258-.124.61-.124%201.055%200%20.445.042.787.124%201.026.083.238.199.424.348.558.149.133.338.224.566.271.171.036.506.055%201.005.055h.55zM56.027%2014.919v-1.026H60.1a2.577%202.577%200%2001-.397%201.103c-.22.347-.656.807-1.307%201.381-.523.464-.845.778-.963.943-.16.228-.24.453-.24.676%200%20.246.07.436.209.568.139.132.331.198.577.198.242%200%20.435-.069.579-.208.143-.139.226-.369.248-.692l1.158.11c-.069.608-.286%201.044-.65%201.309-.363.265-.818.397-1.364.397-.598%200-1.069-.153-1.41-.46a1.473%201.473%200%2001-.513-1.143c0-.26.049-.507.147-.741.097-.235.253-.48.465-.737.14-.17.394-.415.761-.735.366-.32.599-.532.697-.637.097-.104.177-.206.237-.306h-2.307zM52.636%2019.654h-2.238c-.504%200-.889-.036-1.153-.11a2.038%202.038%200%2001-.914-.53%202.48%202.48%200%2001-.579-.934c-.133-.368-.199-.822-.199-1.361%200-.474.062-.883.186-1.226.152-.419.368-.759.65-1.018.212-.197.499-.35.86-.46.27-.081.631-.122%201.083-.122h2.304v5.761zm-1.224-.974v-3.816h-.914c-.342%200-.589.018-.741.055a1.149%201.149%200%2000-.494.24c-.131.112-.238.298-.32.556-.083.258-.124.61-.124%201.055%200%20.445.041.787.124%201.026.082.238.198.424.347.558.149.133.338.224.567.271.171.036.506.055%201.005.055h.55zM46.813%2015.422l-1.125.13c-.036-.273-.132-.481-.289-.625a.816.816%200%2000-.571-.216.802.802%200%2000-.606.259c-.164.173-.246.406-.246.7%200%20.277.079.497.236.66a.77.77%200%2000.575.243c.149%200%20.326-.027.533-.082l-.128.9c-.314-.008-.554.057-.72.194a.68.68%200%2000-.248.549.61.61%200%2000.182.463.67.67%200%2000.484.173.72.72%200%2000.509-.196c.14-.131.226-.323.256-.574l1.071.173c-.074.348-.187.627-.337.835-.15.208-.36.372-.628.491a2.21%202.21%200%2001-.904.179c-.571%200-1.028-.173-1.373-.519-.284-.283-.426-.602-.426-.959%200-.505.291-.909.873-1.21a1.424%201.424%200%2001-.834-.476%201.335%201.335%200%2001-.312-.892c0-.505.194-.936.583-1.292.389-.357.873-.535%201.452-.535.548%200%201.003.15%201.364.45.362.3.571.692.629%201.177zM35.573%2016.011l-1.187-.357c.182-.629.485-1.096.908-1.401.423-.305.96-.458%201.61-.458.805%200%201.467.261%201.985.784.519.523.778%201.237.778%202.144%200%20.959-.261%201.703-.782%202.234-.521.53-1.206.796-2.055.796-.742%200-1.344-.209-1.807-.625-.276-.247-.483-.6-.62-1.061l1.211-.275c.072.298.221.534.449.707.227.173.504.259.829.259.449%200%20.814-.153%201.094-.459.28-.307.42-.803.42-1.49%200-.728-.138-1.247-.414-1.556-.276-.309-.634-.464-1.075-.464a1.27%201.27%200%2000-.84.295c-.234.197-.402.506-.504.927zM33.352%2013.893v5.761H31.52l-1.1-3.929-1.088%203.929h-1.836v-5.761h1.138v4.535l1.203-4.535h1.179l1.199%204.535v-4.535h1.137zM26.285%2019.654h-2.238c-.504%200-.889-.036-1.153-.11a2.038%202.038%200%2001-.914-.53%202.48%202.48%200%2001-.579-.934c-.133-.368-.199-.822-.199-1.361%200-.474.062-.883.186-1.226.152-.419.368-.759.65-1.018.212-.197.499-.35.86-.46.27-.081.631-.122%201.083-.122h2.304v5.761zm-1.224-.974v-3.816h-.914c-.342%200-.589.018-.741.055a1.149%201.149%200%2000-.494.24c-.131.112-.238.298-.32.556-.083.258-.124.61-.124%201.055%200%20.445.041.787.124%201.026.082.238.198.424.347.558.149.133.338.224.567.271.171.036.505.055%201.005.055h.55zM18.051%2015.375l-1.158.114a.927.927%200%2000-.294-.592.819.819%200%2000-.562-.218.797.797%200%2000-.616.281c-.168.188-.252.47-.252.847%200%20.354.083.619.25.796a.854.854%200%2000.651.265c.334%200%20.633-.14.897-.42l.943.129-.595%202.999h-3.073v-1.034h2.192l.182-.978a1.833%201.833%200%2001-.794.184c-.516%200-.953-.178-1.311-.534-.358-.356-.538-.819-.538-1.387%200-.474.145-.898.435-1.27.394-.508.941-.762%201.641-.762.56%200%201.016.143%201.369.428.353.286.564.67.633%201.152zM11.554%2013.893l2.167%205.761h-1.327l-1.535-4.263-1.484%204.263H8.076l2.171-5.761h1.307zM53.573%2030.228h5.761v4.496h-.974v-3.272h-1.277v3.044h-.971v-3.044h-1.568v3.387h-.971v-4.611zM53.573%2035.89h5.761v1.191l-3.847%202.481h3.847v1.137h-5.761v-1.228l3.757-2.444h-3.757V35.89z%22%20fill%3D%22%23fff%22%20fill-rule%3D%22nonzero%22%2F%3E%3Cpath%20d%3D%22M60.586%20117.926v2.423c0%20.48-.019.837-.057%201.073a1.632%201.632%200%2001-.237.633%201.511%201.511%200%2001-.482.465c-.2.124-.425.186-.674.186-.27%200-.517-.076-.743-.229a1.402%201.402%200%2001-.506-.623c-.103.37-.277.654-.523.852a1.34%201.34%200%2001-.869.298c-.262%200-.516-.064-.764-.192a1.566%201.566%200%2001-.593-.526%201.787%201.787%200%2001-.273-.82c-.021-.204-.035-.697-.04-1.477v-2.063h5.761zm-.959%201.224h-1.332v.802c0%20.477.007.773.02.889.023.21.092.374.206.494.114.12.264.18.45.18a.613.613%200%2000.434-.155c.112-.103.179-.257.203-.461.013-.121.019-.47.019-1.046v-.703zm-2.291%200h-1.54v1.133c0%20.441.012.721.035.839.032.182.108.33.23.445a.687.687%200%2000.489.171.73.73%200%2000.441-.132.75.75%200%2000.263-.382c.055-.167.082-.529.082-1.086v-.988zM56.971%20123.761c.367%200%20.722.095%201.065.285.343.19.605.46.786.809.181.348.271.738.271%201.168%200%20.664-.205%201.209-.615%201.633-.41.425-.928.637-1.554.637-.632%200-1.155-.214-1.57-.643-.415-.429-.623-.968-.623-1.619%200-.402.086-.786.259-1.152.173-.365.427-.643.761-.833.334-.19.74-.285%201.22-.285zm-.059%201.191c-.414%200-.731.103-.951.31-.22.207-.33.462-.33.765s.11.558.33.763c.22.205.54.308.959.308.408%200%20.723-.103.943-.308.22-.205.33-.46.33-.763s-.11-.558-.33-.765c-.22-.207-.537-.31-.951-.31zM56.971%20128.934c.367%200%20.722.095%201.065.286.343.19.605.459.786.808.181.349.271.738.271%201.168%200%20.665-.205%201.209-.615%201.634-.41.424-.928.637-1.554.637-.632%200-1.155-.215-1.57-.643-.415-.429-.623-.969-.623-1.619%200-.403.086-.787.259-1.152.173-.365.427-.643.761-.833.334-.191.74-.286%201.22-.286zm-.059%201.191c-.414%200-.731.104-.951.31-.22.207-.33.462-.33.765a1%201%200%2000.33.763c.22.206.54.308.959.308.408%200%20.723-.102.943-.308a1%201%200%2000.33-.763c0-.303-.11-.558-.33-.765-.22-.206-.537-.31-.951-.31zM58.999%20136.39h-.881v-.794h-1.682c-.34%200-.539.008-.595.023a.24.24%200%2000-.139.104.335.335%200%2000-.055.196c0%20.107.035.263.106.467l-.857.1a2.424%202.424%200%2001-.165-.919c0-.209.033-.398.1-.566a.824.824%200%2001.259-.37c.107-.079.25-.133.431-.164.128-.024.388-.037.778-.037h1.819v-.533h.881v.533h.829l.644%201.166h-1.473v.794z%22%20fill%3D%22%23c6c6c6%22%20fill-rule%3D%22nonzero%22%2F%3E%3Cpath%20d%3D%22M134.901%2072.69V61.125h-4.721V72.69h4.721zM128.381%20102.06V90.494h-17.948v11.566h17.948zM121.674%2072.69V61.125h-4.721V72.69h4.721zM108.617%2072.69V61.125h-4.721V72.69h4.721z%22%20fill%3D%22%23adadad%22%2F%3E%3Cpath%20d%3D%22M136.708%2090.494V72.69h-34.79v17.804h34.79z%22%20fill%3D%22%23100b00%22%2F%3E%3Cpath%20d%3D%22M11.578%20146.932l1.186.358c-.182.629-.484%201.096-.907%201.401-.423.305-.96.458-1.611.458-.805%200-1.467-.262-1.985-.784-.518-.523-.778-1.237-.778-2.144%200-.959.261-1.703.782-2.234.521-.53%201.206-.796%202.055-.796.742%200%201.344.209%201.808.625.275.246.482.6.62%201.061l-1.212.275a1.212%201.212%200%2000-.448-.707%201.332%201.332%200%2000-.83-.26c-.449%200-.814.154-1.093.46-.28.307-.42.803-.42%201.49%200%20.728.138%201.247.413%201.556.276.309.634.464%201.076.464.325%200%20.605-.099.839-.295.234-.197.403-.506.505-.928zM13.848%20149.051v-5.714h1.224v4.743h3.044v.971h-4.268zM19.005%20149.051v-5.761h1.224v2.558l2.473-2.558h1.646l-2.283%202.243%202.407%203.518h-1.584l-1.667-2.704-.992.963v1.741h-1.224zM27.454%20143.29h2.237c.504%200%20.889.036%201.154.11.355.099.66.276.914.53.253.254.446.565.579.933.132.368.198.822.198%201.362%200%20.474-.062.883-.186%201.226-.152.419-.368.759-.649%201.018-.213.196-.499.35-.86.46-.271.081-.632.122-1.084.122h-2.303v-5.761zm1.224.974v3.816h.914c.341%200%20.588-.018.74-.055.198-.047.363-.127.494-.24.131-.112.238-.298.321-.556.082-.258.124-.61.124-1.055%200-.445-.042-.787-.124-1.026a1.314%201.314%200%2000-.348-.558%201.194%201.194%200%2000-.566-.271c-.171-.037-.506-.055-1.005-.055h-.55zM35.282%20143.266c.587%200%201.046.199%201.377.597.394.472.591%201.254.591%202.346%200%201.09-.198%201.874-.595%202.35-.328.393-.786.59-1.373.59-.59%200-1.066-.216-1.427-.647-.361-.431-.541-1.199-.541-2.304%200-1.085.198-1.866.595-2.343.328-.393.786-.589%201.373-.589zm0%20.916a.597.597%200%2000-.376.127c-.111.085-.196.238-.257.458-.08.286-.12.766-.12%201.442%200%20.676.036%201.141.108%201.393.072.253.162.422.271.505a.595.595%200%2000.374.126.592.592%200%2000.376-.128c.111-.085.196-.237.257-.457.08-.283.12-.763.12-1.439s-.036-1.14-.108-1.393c-.072-.253-.162-.422-.271-.507a.59.59%200%2000-.374-.127zM40.633%20143.29h2.238c.504%200%20.889.036%201.153.11.356.099.661.276.914.53.254.254.447.565.579.933.133.368.199.822.199%201.362%200%20.474-.062.883-.186%201.226-.152.419-.368.759-.65%201.018-.212.196-.499.35-.86.46-.27.081-.631.122-1.083.122h-2.304v-5.761zm1.224.974v3.816h.914c.342%200%20.589-.018.741-.055.198-.047.363-.127.494-.24.131-.112.238-.298.32-.556.083-.258.124-.61.124-1.055%200-.445-.041-.787-.124-1.026a1.304%201.304%200%2000-.347-.558%201.193%201.193%200%2000-.567-.271c-.171-.037-.506-.055-1.005-.055h-.55zM49.471%20149.051h-1.162v-4.162a4.064%204.064%200%2001-1.502.837v-1.002c.304-.094.633-.273.989-.537.356-.263.6-.57.732-.921h.943v5.785zM58.887%20149.051h-1.162v-4.162a4.06%204.06%200%2001-1.501.837v-1.002c.303-.094.633-.273.988-.537.356-.263.6-.57.732-.921h.943v5.785zM60.641%20147.569l1.158-.114a.92.92%200%2000.293.591c.163.146.35.219.563.219a.798.798%200%2000.616-.281c.168-.188.252-.47.252-.847%200-.354-.083-.619-.25-.796a.855.855%200%2000-.652-.265c-.333%200-.632.14-.897.42l-.943-.129.596-2.999h3.072v1.034h-2.191l-.182.978c.259-.123.523-.185.794-.185.515%200%20.952.179%201.311.535.358.356.537.819.537%201.387%200%20.474-.145.897-.434%201.269-.394.509-.942.763-1.642.763-.56%200-1.016-.143-1.369-.429-.353-.285-.563-.669-.632-1.151zM76.318%20148.025v1.026h-4.073c.044-.388.176-.756.397-1.103.22-.347.656-.807%201.306-1.381.524-.464.845-.778.964-.943.16-.228.24-.453.24-.676%200-.246-.07-.436-.209-.568-.139-.132-.331-.198-.577-.198-.242%200-.435.069-.579.208-.143.139-.226.369-.248.691l-1.158-.11c.069-.607.285-1.044.649-1.308.364-.265.819-.397%201.365-.397.598%200%201.068.153%201.41.46.342.306.513.687.513%201.143%200%20.26-.049.507-.147.741-.098.235-.253.48-.465.737-.141.17-.394.415-.761.735-.367.319-.599.532-.697.636a1.855%201.855%200%2000-.237.307h2.307zM88.48%20143.266c.588%200%201.047.199%201.378.597.394.472.591%201.254.591%202.346%200%201.09-.199%201.874-.596%202.35-.328.393-.785.59-1.373.59-.59%200-1.065-.216-1.426-.647-.361-.431-.542-1.199-.542-2.304%200-1.085.198-1.866.595-2.343.329-.393.786-.589%201.373-.589zm0%20.916a.6.6%200%2000-.376.127c-.11.085-.196.238-.256.458-.08.286-.12.766-.12%201.442%200%20.676.036%201.141.107%201.393.072.253.162.422.271.505a.597.597%200%2000.374.126.595.595%200%2000.377-.128c.11-.085.196-.237.256-.457.08-.283.12-.763.12-1.439s-.036-1.14-.107-1.393c-.072-.253-.162-.422-.271-.507a.593.593%200%2000-.375-.127zM102.917%20149.051v-1.16h-2.481v-.966l2.63-3.659h.976v3.655h.753v.97h-.753v1.16h-1.125zm0-2.13v-1.969l-1.393%201.969h1.393zM117.735%20149.051h-1.162v-4.162a4.064%204.064%200%2001-1.502.837v-1.002c.304-.094.633-.273.989-.537.355-.263.599-.57.732-.921h.943v5.785zM123.408%20144.7l-1.124.118c-.028-.22-.1-.382-.215-.487a.645.645%200%2000-.451-.157c-.246%200-.453.105-.623.314-.169.21-.276.646-.32%201.309a1.386%201.386%200%20011.079-.488c.486%200%20.901.176%201.247.527.346.351.519.804.519%201.36%200%20.589-.182%201.062-.546%201.418-.364.357-.831.535-1.402.535-.612%200-1.115-.226-1.509-.678-.394-.452-.591-1.193-.591-2.222%200-1.056.205-1.817.616-2.284.411-.466.944-.699%201.6-.699.461%200%20.842.122%201.144.367.301.245.494.601.576%201.067zm-2.634%202.409c0%20.359.087.636.261.831.173.196.372.293.595.293.215%200%20.394-.08.538-.24.143-.159.215-.421.215-.786%200-.374-.077-.649-.232-.823a.74.74%200%2000-.579-.261.743.743%200%2000-.566.249c-.155.167-.232.412-.232.737zM131.861%20149.051h-1.162v-4.162a4.06%204.06%200%2001-1.501.837v-1.002c.303-.094.633-.273.988-.537.356-.263.6-.57.732-.921h.943v5.785zM133.598%20144.394v-1.026h3.974v.802c-.328.306-.661.746-1%201.32a7.512%207.512%200%2000-.776%201.829c-.178.646-.265%201.223-.262%201.732h-1.121c.019-.797.192-1.609.519-2.437a8.014%208.014%200%20011.309-2.22h-2.643zM145.384%20147.569l1.158-.114a.922.922%200%2000.294.591c.162.146.35.219.562.219a.797.797%200%2000.616-.281c.169-.188.253-.47.253-.847%200-.354-.084-.619-.25-.796a.855.855%200%2000-.652-.265c-.333%200-.633.14-.897.42l-.943-.129.595-2.999h3.073v1.034h-2.192l-.182.978c.259-.123.524-.185.794-.185.516%200%20.953.179%201.311.535.359.356.538.819.538%201.387%200%20.474-.145.897-.434%201.269-.395.509-.942.763-1.642.763-.56%200-1.016-.143-1.369-.429-.353-.285-.564-.669-.633-1.151zM162.464%20149.051h-1.162v-4.162a4.064%204.064%200%2001-1.502.837v-1.002c.304-.094.633-.273.989-.537.355-.263.599-.57.732-.921h.943v5.785zM165.197%20145.942c-.3-.12-.519-.286-.655-.497a1.247%201.247%200%2001-.205-.694c0-.429.158-.784.474-1.065.315-.28.764-.42%201.346-.42.576%200%201.023.14%201.342.42.318.281.477.636.477%201.065%200%20.268-.073.505-.219.714a1.373%201.373%200%2001-.616.477c.336.128.592.316.767.562.175.246.263.531.263.853%200%20.532-.179.964-.536%201.297-.357.332-.832.499-1.425.499-.551%200-1.01-.138-1.377-.413-.433-.325-.649-.77-.649-1.336%200-.312.081-.598.244-.859.163-.26.419-.461.769-.603zm.24-1.112c0%20.22.066.392.197.515.13.123.305.184.523.184.22%200%20.397-.062.529-.186.132-.125.199-.297.199-.517a.653.653%200%2000-.197-.497.72.72%200%2000-.519-.187c-.223%200-.401.063-.533.189a.655.655%200%2000-.199.499zm-.107%202.468c0%20.304.082.541.246.711.164.17.368.256.614.256.24%200%20.438-.082.595-.246.157-.164.236-.4.236-.709%200-.27-.08-.487-.24-.651a.815.815%200%2000-.608-.245c-.284%200-.495.093-.635.279a.988.988%200%2000-.208.605zM176.59%20149.051h-1.162v-4.162a4.06%204.06%200%2001-1.501.837v-1.002c.303-.094.633-.273.989-.537.355-.263.599-.57.732-.921h.942v5.785zM178.352%20147.718l1.125-.118c.028.218.099.379.215.484a.657.657%200%2000.459.157c.24%200%20.444-.105.612-.314.168-.21.276-.645.323-1.305a1.42%201.42%200%2001-1.096.483%201.68%201.68%200%2001-1.235-.524c-.346-.35-.519-.805-.519-1.366%200-.584.183-1.055.548-1.413.366-.357.831-.536%201.396-.536.615%200%201.119.226%201.514.678.394.452.591%201.195.591%202.23%200%201.053-.205%201.813-.616%202.279-.411.467-.946.7-1.605.7-.474%200-.857-.12-1.149-.36-.293-.24-.48-.598-.563-1.075zm2.63-2.413c0-.356-.086-.632-.258-.829-.173-.196-.372-.294-.598-.294a.682.682%200%2000-.535.241c-.142.161-.213.425-.213.792%200%20.372.077.645.231.819a.741.741%200%2000.579.262.734.734%200%2000.565-.252c.153-.167.229-.414.229-.739zM188.467%20146.932v-.97h2.639v2.295c-.257.236-.628.443-1.115.623a4.25%204.25%200%2001-1.478.269c-.634%200-1.187-.127-1.658-.379a2.465%202.465%200%2001-1.063-1.085%203.362%203.362%200%2001-.356-1.535c0-.6.132-1.133.397-1.599a2.621%202.621%200%20011.162-1.073c.389-.191.873-.287%201.452-.287.752%200%201.34.15%201.764.45.423.3.695.715.816%201.244l-1.216.216a1.221%201.221%200%2000-.481-.67c-.236-.164-.53-.246-.883-.246-.535%200-.96.162-1.276.484-.316.322-.474.8-.474%201.434%200%20.684.16%201.197.48%201.539.32.342.739.513%201.257.513a2.2%202.2%200%2000.772-.144c.257-.096.479-.211.663-.348v-.731h-1.402zM192.247%20149.051v-5.761h1.191l2.482%203.847v-3.847h1.137v5.761h-1.228l-2.445-3.757v3.757h-1.137zM198.347%20143.29h2.237c.505%200%20.889.036%201.154.11.356.099.66.276.914.53s.447.565.579.933c.132.368.199.822.199%201.362%200%20.474-.063.883-.187%201.226a2.516%202.516%200%2001-.649%201.018c-.212.196-.499.35-.86.46-.27.081-.631.122-1.084.122h-2.303v-5.761zm1.224.974v3.816h.914c.342%200%20.589-.018.74-.055.199-.047.364-.127.494-.24.131-.112.238-.298.321-.556.083-.258.124-.61.124-1.055%200-.445-.041-.787-.124-1.026a1.323%201.323%200%2000-.347-.558%201.193%201.193%200%2000-.567-.271c-.171-.037-.506-.055-1.005-.055h-.55zM210.489%20148.025v1.026h-4.074c.044-.388.177-.756.397-1.103.221-.347.656-.807%201.307-1.381.524-.464.845-.778.964-.943.16-.228.24-.453.24-.676%200-.246-.07-.436-.209-.568-.14-.132-.332-.198-.577-.198-.243%200-.436.069-.579.208-.144.139-.226.369-.248.691l-1.158-.11c.069-.607.285-1.044.649-1.308.364-.265.819-.397%201.365-.397.598%200%201.068.153%201.41.46.342.306.513.687.513%201.143%200%20.26-.049.507-.147.741-.098.235-.253.48-.465.737-.141.17-.395.415-.761.735-.367.319-.599.532-.697.636a1.921%201.921%200%2000-.238.307h2.308zM214.248%20149.051h-1.162v-4.162a4.068%204.068%200%2001-1.501.837v-1.002c.303-.094.632-.273.988-.537.356-.263.6-.57.732-.921h.943v5.785zM218.598%20149.051v-5.761h2.577c.648%200%201.118.051%201.412.155.294.103.529.287.705.552.177.264.265.567.265.908%200%20.432-.134.789-.401%201.071-.268.281-.668.459-1.2.532.265.147.483.308.656.483.172.176.404.488.697.936l.74%201.124h-1.464l-.885-1.254c-.314-.448-.529-.73-.645-.847a.965.965%200%2000-.368-.24c-.13-.043-.335-.064-.616-.064h-.249v2.405h-1.224zm1.224-3.325h.906c.587%200%20.954-.024%201.1-.071a.654.654%200%2000.343-.243.724.724%200%2000.124-.433.666.666%200%2000-.163-.469.758.758%200%2000-.461-.226%2010.81%2010.81%200%2000-.893-.02h-.956v1.462zM224.094%20149.051l2.072-3.007-1.877-2.754h1.431l1.215%201.85%201.191-1.85h1.419l-1.886%202.798%202.072%202.963h-1.476l-1.344-1.993-1.349%201.993h-1.468zM234.077%20149.051v-4.787h-1.799v-.974h4.818v.974h-1.795v4.787h-1.224zM237.27%20149.051l2.072-3.007-1.878-2.754h1.431l1.216%201.85%201.191-1.85h1.418l-1.885%202.798%202.072%202.963h-1.477l-1.344-1.993-1.348%201.993h-1.468zM251.909%20148.025v1.026h-4.073c.044-.388.176-.756.397-1.103.221-.347.656-.807%201.307-1.381.524-.464.845-.778.963-.943.16-.228.24-.453.24-.676%200-.246-.069-.436-.209-.568-.139-.132-.331-.198-.577-.198-.242%200-.435.069-.578.208-.144.139-.227.369-.249.691l-1.158-.11c.069-.607.286-1.044.65-1.308.364-.265.819-.397%201.364-.397.599%200%201.069.153%201.411.46.341.306.512.687.512%201.143%200%20.26-.049.507-.146.741-.098.235-.253.48-.466.737-.14.17-.394.415-.761.735a12.06%2012.06%200%2000-.696.636%201.865%201.865%200%2000-.238.307h2.307zM256.62%20148.025v1.026h-4.074c.044-.388.177-.756.397-1.103.221-.347.656-.807%201.307-1.381.524-.464.845-.778.964-.943.16-.228.24-.453.24-.676%200-.246-.07-.436-.209-.568-.14-.132-.332-.198-.577-.198-.243%200-.436.069-.579.208-.144.139-.226.369-.248.691l-1.158-.11c.069-.607.285-1.044.649-1.308.364-.265.819-.397%201.365-.397.598%200%201.068.153%201.41.46.342.306.513.687.513%201.143%200%20.26-.049.507-.147.741-.098.235-.253.48-.465.737-.141.17-.395.415-.761.735-.367.319-.599.532-.697.636a1.921%201.921%200%2000-.238.307h2.308zM266.036%20148.025v1.026h-4.073c.044-.388.176-.756.397-1.103.22-.347.656-.807%201.307-1.381.523-.464.845-.778.963-.943.16-.228.24-.453.24-.676%200-.246-.07-.436-.209-.568-.139-.132-.331-.198-.577-.198-.242%200-.435.069-.579.208-.143.139-.226.369-.248.691l-1.158-.11c.069-.607.286-1.044.649-1.308.364-.265.819-.397%201.365-.397.598%200%201.068.153%201.41.46.342.306.513.687.513%201.143%200%20.26-.049.507-.147.741-.098.235-.253.48-.465.737-.141.17-.394.415-.761.735-.367.319-.599.532-.697.636a1.855%201.855%200%2000-.237.307h2.307zM266.781%20147.522l1.124-.13c.036.273.133.481.29.625a.814.814%200%2000.571.216.801.801%200%2000.605-.259c.164-.173.246-.406.246-.7%200-.277-.078-.497-.235-.66a.772.772%200%2000-.575-.244c-.149%200-.327.028-.534.083l.129-.9c.314.008.554-.057.719-.194a.677.677%200%2000.248-.549.605.605%200%2000-.182-.463.669.669%200%2000-.484-.173.717.717%200%2000-.508.196c-.141.131-.226.322-.257.574l-1.071-.173c.075-.348.187-.627.337-.835.151-.208.36-.372.629-.491a2.21%202.21%200%2001.904-.179c.57%200%201.028.173%201.373.519.284.283.425.602.425.959%200%20.505-.29.909-.872%201.21.347.071.625.229.833.475.208.247.312.544.312.892%200%20.506-.194.937-.583%201.293-.388.357-.872.535-1.451.535-.549%200-1.004-.15-1.365-.45a1.736%201.736%200%2001-.628-1.177zM276.962%20146.932v-.97h2.638v2.295c-.256.236-.627.443-1.114.623-.487.179-.98.269-1.479.269-.634%200-1.186-.127-1.658-.379a2.47%202.47%200%2001-1.063-1.085%203.361%203.361%200%2001-.355-1.535c0-.6.132-1.133.397-1.599a2.616%202.616%200%20011.162-1.073c.389-.191.872-.287%201.451-.287.753%200%201.341.15%201.764.45.423.3.696.715.817%201.244l-1.216.216a1.218%201.218%200%2000-.482-.67c-.235-.164-.53-.246-.883-.246-.535%200-.96.162-1.275.484-.316.322-.474.8-.474%201.434%200%20.684.16%201.197.48%201.539.32.342.739.513%201.257.513.256%200%20.513-.048.771-.144.258-.096.479-.211.664-.348v-.731h-1.402zM280.742%20149.051v-5.761h1.191l2.481%203.847v-3.847h1.137v5.761h-1.228l-2.444-3.757v3.757h-1.137zM286.842%20143.29h2.237c.504%200%20.889.036%201.154.11.355.099.66.276.914.53.253.254.446.565.579.933.132.368.198.822.198%201.362%200%20.474-.062.883-.186%201.226-.152.419-.368.759-.649%201.018-.213.196-.499.35-.86.46-.271.081-.632.122-1.084.122h-2.303v-5.761zm1.224.974v3.816h.914c.341%200%20.588-.018.74-.055.198-.047.363-.127.494-.24.131-.112.238-.298.321-.556.082-.258.124-.61.124-1.055%200-.445-.042-.787-.124-1.026a1.314%201.314%200%2000-.348-.558%201.194%201.194%200%2000-.566-.271c-.171-.037-.506-.055-1.005-.055h-.55z%22%20fill%3D%22%23fff%22%20fill-rule%3D%22nonzero%22%2F%3E%3Cpath%20d%3D%22M87.21%2038.79v-5.122h-7.406v5.122h7.406z%22%20fill%3D%22%23ff000c%22%2F%3E%3C%2Fsvg%3E","useCrocClips":false,"width":325,"height":163,"pinDist":15,"pinBlocks":[{"x":281.54592278455226,"y":5.286999757717413,"labels":["_3V"]},{"x":266.6081685923919,"y":5.286999757717413,"labels":["EN"]},{"x":251.67041440023158,"y":5.286999757717413,"labels":["VP"]},{"x":236.73269650528218,"y":5.286999757717413,"labels":["VN"]},{"x":221.7949786103328,"y":5.286999757717413,"labels":["P34"]},{"x":206.85820444286796,"y":5.286999757717413,"labels":["P35"]},{"x":191.9204683993131,"y":5.286999757717413,"labels":["P32"]},{"x":176.9827505043637,"y":5.286999757717413,"labels":["P33"]},{"x":162.04501446080883,"y":5.286999757717413,"labels":["P25"]},{"x":147.1072602686485,"y":5.286999757717413,"labels":["P26"]},{"x":132.16952422509362,"y":5.286999757717413,"labels":["P27"]},{"x":117.23178818153876,"y":5.286999757717413,"labels":["P14"]},{"x":102.29407028658937,"y":5.286999757717413,"labels":["P12"]},{"x":87.35631609442903,"y":5.286999757717413,"labels":["GND"]},{"x":72.41957822417514,"y":5.286999757717413,"labels":["P13"]},{"x":57.48186032922575,"y":5.286999757717413,"labels":["D2"]},{"x":42.54411521136815,"y":5.286999757717413,"labels":["D3"]},{"x":27.606379167813287,"y":5.286999757717413,"labels":["CMD"]},{"x":12.66864312425842,"y":5.286999757717413,"labels":["_5V"]},{"x":281.8268994944748,"y":154.50397984778954,"labels":["GND3"]},{"x":266.88914530231443,"y":154.50397984778954,"labels":["P23"]},{"x":251.95142740736503,"y":154.50397984778954,"labels":["P22"]},{"x":237.0136732152047,"y":154.50397984778954,"labels":["TX"]},{"x":222.07591902304438,"y":154.50397984778954,"labels":["RX"]},{"x":207.13821927670045,"y":154.50397984778954,"labels":["P21"]},{"x":192.20146325784108,"y":154.50397984778954,"labels":["GND2"]},{"x":177.26372721428623,"y":154.50397984778954,"labels":["P19"]},{"x":162.32600931933683,"y":154.50397984778954,"labels":["P18"]},{"x":147.38827327578196,"y":154.50397984778954,"labels":["P5"]},{"x":132.45051908362163,"y":154.50397984778954,"labels":["P17"]},{"x":117.51278304006675,"y":154.50397984778954,"labels":["P16"]},{"x":102.57504699651189,"y":154.50397984778954,"labels":["P4"]},{"x":87.63731095295702,"y":154.50397984778954,"labels":["P0"]},{"x":72.69957490940216,"y":154.50397984778954,"labels":["P2"]},{"x":57.76283703914827,"y":154.50397984778954,"labels":["P15"]},{"x":42.82511006989614,"y":154.50397984778954,"labels":["D1"]},{"x":27.887374026341277,"y":154.50397984778954,"labels":["D0"]},{"x":12.94963798278641,"y":154.50397984778954,"labels":["CLK"]},{"x":16.661572260040813,"y":26.173999092331044,"labels":["BTN_RESET"]}],"leds":[{"x":79.80546174743039,"y":33.66799892398028,"w":7.4058651378802605,"h":5.122007876856312,"color":"#ff0000","label":"LED"}],"touchPads":[],"buttons":[{"x":16.661572260040813,"y":120.33202156315024,"w":24.02557763939916,"h":16.885977984351396,"label":"BTN_BOOT"}]},"gpioPinMap":{"_3V":"_3V","":"_5V","3V":"_3V","EN":"EN","VP":"VP","VN":"VN","P34":"P34","P35":"P35","P32":"P32","P33":"P33","P25":"P25","P26":"P26","P27":"P27","P14":"P14","P12":"P12","GND":"GND","P13":"P13","D2":"D2","D3":"D3","CMD":"CMD","_5V":"_5V","5V":"_5V","GND3":"GND3","P23":"P23","P22":"P22","TX":"TX","RX":"RX","P21":"P21","GND2":"GND2","P19":"P19","P18":"P18","P5":"P5","P17":"P17","P16":"P16","P4":"P4","P0":"P0","P2":"P2","P15":"P15","D1":"D1","D0":"D0","CLK":"CLK","BTN_RESET":"BTN_RESET","BTN":"BTN_BOOT","RESET":"BTN_RESET","BTN_BOOT":"BTN_BOOT","BOOT":"BTN_BOOT","LED":"LED"},"groundPins":["GND","GND3","GND2"],"threeVoltPins":["_3V"],"fiveVoltPins":["_5V"],"i2cPins":{"SDA":"SDA","SCL":"SCL"},"onboardComponents":[],"marginWhenBreadboarding":[0,0,80,0],"id":"jacdac-iot-s2"}
// total=1283844 new=94.81% cached=0.00% other=5.19%
(function (ectx) {
'use strict';
const runtime = ectx.runtime;
const oops = ectx.oops;
const doNothing = ectx.doNothing;
const pxsim = ectx.pxsim;
const globals = ectx.globals;
const maybeYield = ectx.maybeYield;
const setupDebugger = ectx.setupDebugger;
const isBreakFrame = ectx.isBreakFrame;
const breakpoint = ectx.breakpoint;
const trace = ectx.trace;
const checkStack = ectx.checkStack;
const leave = ectx.leave;
const checkResumeConsumed = ectx.checkResumeConsumed;
const setupResume = ectx.setupResume;
const setupLambda = ectx.setupLambda;
const checkSubtype = ectx.checkSubtype;
const failedCast = ectx.failedCast;
const buildResume = ectx.buildResume;
const mkVTable = ectx.mkVTable;
const bind = ectx.bind;
const leaveAccessor = ectx.leaveAccessor;
const __this = runtime;
const pxtrt = pxsim.pxtrt;
let yieldSteps = 1;
ectx.setupYield(function() { yieldSteps = 100; })
pxsim.setTitle("jacdac-uploader");
pxsim.setConfigData({
 "13": 7,
 "52": 8,
 "53": 7,
 "54": 6,
 "60": 17,
 "400": 0,
 "401": 1,
 "402": 2,
 "403": 3,
 "404": 4,
 "405": 5,
 "412": 12,
 "413": 13,
 "414": 14,
 "415": 15,
 "416": 16,
 "417": 17,
 "418": 18,
 "419": 19,
 "421": 21,
 "422": 22,
 "423": 23,
 "425": 25,
 "426": 26,
 "427": 27,
 "1103": 65544,
 "1104": 65538,
 "1105": 13
}, {
 "PIN_LED": 13,
 "PIN_LED_R": 52,
 "PIN_LED_G": 53,
 "PIN_LED_B": 54,
 "PIN_JACK_TX": 60,
 "PIN_P0": 400,
 "PIN_P1": 401,
 "PIN_P2": 402,
 "PIN_P3": 403,
 "PIN_P4": 404,
 "PIN_P5": 405,
 "PIN_P12": 412,
 "PIN_P13": 413,
 "PIN_P14": 414,
 "PIN_P15": 415,
 "PIN_P16": 416,
 "PIN_P17": 417,
 "PIN_P18": 418,
 "PIN_P19": 419,
 "PIN_P21": 421,
 "PIN_P22": 422,
 "PIN_P23": 423,
 "PIN_P25": 425,
 "PIN_P26": 426,
 "PIN_P27": 427,
 "PIN_JDPWR_OVERLOAD_LED": 1103,
 "PIN_JDPWR_ENABLE": 1104,
 "PIN_JDPWR_FAULT": 1105
});
pxtrt.mapKeyNames = [
 "",
 "_attach",
 "_buffer",
 "_cached",
 "_closeHandler",
 "_closed",
 "_controller",
 "_data",
 "_destroy",
 "_detach",
 "_errorHandler",
 "_eventCounter",
 "_header",
 "_isConnected",
 "_lastListenerTime",
 "_localTime",
 "_messageHandler",
 "_myDevice",
 "_oldBindingsHash",
 "_onConnected",
 "_onDisconnected",
 "_openHandler",
 "_read_so_far",
 "_score",
 "_sendCmd",
 "_sendCmdId",
 "_sendCore",
 "_sendReport",
 "_sendWithAck",
 "_shortId",
 "_socknum",
 "_ssid",
 "_statusCode",
 "_timeout",
 "add",
 "addListenerInternal",
 "advertisementData",
 "allClients",
 "announceCallback",
 "announceflags",
 "applyTwinUpdate",
 "attachClient",
 "autoBind",
 "autoBindCnt",
 "bindRoles",
 "bindingHash",
 "bindings",
 "boundToDev",
 "boundToServiceIdx",
 "broadcast",
 "buf",
 "c0",
 "cancel",
 "checkChanges",
 "checkKw",
 "checkProxy",
 "clearAttachCache",
 "clientId",
 "clients",
 "close",
 "code",
 "compress",
 "computeReadings",
 "computeTwin",
 "condition",
 "config",
 "connect",
 "connectAP",
 "connected",
 "connectedBlink",
 "conntype",
 "content",
 "controlServer",
 "controller",
 "crc",
 "createSocket",
 "currIndent",
 "currentDevice",
 "data",
 "dataAvailableSrc",
 "dataAvailableValue",
 "delay",
 "deltaTimeMillis",
 "describe",
 "detachClient",
 "device",
 "deviceId",
 "deviceIdentifier",
 "devices",
 "disableLogger",
 "disableRoleManager",
 "disconnect",
 "div",
 "doArray",
 "doNumber",
 "doObject",
 "doString",
 "eid",
 "emit",
 "enabled",
 "encryption",
 "error",
 "errorMsg",
 "eventCode",
 "eventCounter",
 "eventId",
 "evid",
 "extract",
 "factory",
 "fields",
 "flags",
 "flushReadBuffer",
 "fmt",
 "fp",
 "frameCallbacks",
 "frameWorker",
 "framesInSample",
 "from",
 "fromBinary",
 "fullyBound",
 "func",
 "gcDevices",
 "go",
 "handleAnnounce",
 "handleConnected",
 "handleFloodPing",
 "handleInstanceName",
 "handleMessage",
 "handlePacket",
 "handlePacketOuter",
 "handleRegBool",
 "handleRegUInt32",
 "handleRegValue",
 "handleStatusCode",
 "handler",
 "handlers",
 "headers",
 "host",
 "hostServices",
 "id",
 "idleCallbacks",
 "inScan",
 "indent",
 "indentStep",
 "instanceName",
 "intData",
 "isArray",
 "isCommand",
 "isConnected",
 "isEvent",
 "isRegGet",
 "isRegSet",
 "isReport",
 "jdpacked",
 "jdunpack",
 "json",
 "key",
 "lastQuery",
 "lastReport",
 "lastSeen",
 "listeners",
 "log",
 "logError",
 "logPriority",
 "lookupQuery",
 "matchesRoleAt",
 "message",
 "minPriority",
 "mkEventCmd",
 "mode",
 "mqttHandlers",
 "multicommandClass",
 "name",
 "net",
 "networks",
 "nextChar",
 "nextCnt",
 "nextRetry",
 "nfmt",
 "nfmt2",
 "numTries",
 "on",
 "onAttach",
 "onClose",
 "onDetach",
 "onError",
 "onMessage",
 "onOpen",
 "once",
 "onlyHeader",
 "opt",
 "packFormat",
 "packetFlags",
 "packf",
 "parent",
 "parse",
 "password",
 "piId",
 "pid",
 "ping",
 "pkt",
 "pkts",
 "port",
 "prevTimeMillis",
 "process",
 "processPacket",
 "ptr",
 "publish",
 "qos",
 "queries",
 "query",
 "queueAnnounce",
 "raiseEvent",
 "read",
 "readLine",
 "readSecret",
 "readSecrets",
 "readings",
 "reason",
 "reattach",
 "reg",
 "regCode",
 "register",
 "registerHandler",
 "registers",
 "requiresAck",
 "resend",
 "resetCount",
 "resetIn",
 "respondForEach",
 "restartCounter",
 "retain",
 "role",
 "rssi",
 "running",
 "runningCallbacks",
 "s",
 "scanDone",
 "scanNetworks",
 "score",
 "scoreFor",
 "sct",
 "select",
 "selfDevice",
 "send",
 "sendAsMultiCommand",
 "sendChangeEvent",
 "sendCommand",
 "sendCtrlCommand",
 "sendEvent",
 "sendReport",
 "sendUptime",
 "service",
 "serviceClass",
 "serviceClassAt",
 "serviceClassLength",
 "serviceCommand",
 "serviceIdx",
 "serviceIndex",
 "services",
 "setTimeout",
 "setValue",
 "shortId",
 "size",
 "skipWS",
 "socket",
 "socketAvailable",
 "socketClose",
 "socketConnect",
 "socketRead",
 "socketWrite",
 "spec",
 "src",
 "srcId",
 "ssid",
 "start",
 "startClient",
 "started",
 "stateUpdated",
 "status",
 "status_code",
 "subscribe",
 "subscribeCore",
 "supressLog",
 "systemActive",
 "text",
 "tick",
 "timeInSample",
 "timeOut",
 "timeout",
 "timestamp",
 "timestamps",
 "toString",
 "topic",
 "unattachedClients",
 "updateQueue",
 "uptime",
 "username",
 "value",
 "vid",
 "wait",
 "wdId",
 "will",
 "withFrameStripped",
 "word",
 "work",
 "write",
 "writeAndClose",
 "writeEx"
];
__this.setupPerfCounters([]);
const pxsim_Array__getAt = pxsim.Array_.getAt;
const pxsim_Array__length = pxsim.Array_.length;
const pxsim_Array__mk = pxsim.Array_.mk;
const pxsim_Array__push = pxsim.Array_.push;
const pxsim_Boolean__bang = pxsim.Boolean_.bang;
const pxsim_String__concat = pxsim.String_.concat;
const pxsim_String__stringConv = pxsim.String_.stringConv;
const pxsim_numops_toBool = pxsim.numops.toBool;
const pxsim_numops_toBoolDecr = pxsim.numops.toBoolDecr;
const pxsim_pxtcore_mkAction = pxsim.pxtcore.mkAction;
const pxsim_pxtcore_mkClassInstance = pxsim.pxtcore.mkClassInstance;
const pxsim_pxtrt_ldlocRef = pxsim.pxtrt.ldlocRef;
const pxsim_pxtrt_mapGetByString = pxsim.pxtrt.mapGetByString;
const pxsim_pxtrt_stclo = pxsim.pxtrt.stclo;
const pxsim_pxtrt_stlocRef = pxsim.pxtrt.stlocRef;
const pxsim_Boolean_ = pxsim.Boolean_;
const pxsim_pxtcore = pxsim.pxtcore;
const pxsim_String_ = pxsim.String_;
const pxsim_ImageMethods = pxsim.ImageMethods;
const pxsim_Array_ = pxsim.Array_;
const pxsim_pxtrt = pxsim.pxtrt;
const pxsim_numops = pxsim.numops;


function _main___P2120(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    globals._b64___191 = ("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");
    globals._evSource___2169 = (32768);
    globals._intervals___2172 = (undefined);
    globals._pollEventQueue___2181 = (undefined);
    globals.minPriority___373 = (1);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, listeners_inline__P2184);
    globals.listeners___2185 = (s.tmp_0);
    globals.RUN_KEY___2228 = ("#run");
    globals.SCOPE_KEY___2229 = ("#scope");
    globals.DEVICE_SECRETS_KEY___2230 = ("#secrets");
    globals.SECRETS_KEY___2231 = ("__secrets");
    s.tmp_0 = settings_initScopes__P2240_mk(s);
    s.callLocIdx = 120; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkClassInstance(settings_SecretStore__C1092_VT);
    s.tmp_0 = r0;
    s.tmp_1 = settings_SecretStore_constructor__P1093_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = globals.DEVICE_SECRETS_KEY___2230;
    s.callLocIdx = 130; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    globals.deviceSecrets___1099 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(settings_SecretStore__C1092_VT);
    s.tmp_0 = r0;
    s.tmp_1 = settings_SecretStore_constructor__P1093_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = globals.SECRETS_KEY___2231;
    s.callLocIdx = 131; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    globals.programSecrets___1100 = (s.tmp_0);
    globals.logPriority___1148 = (-1);
    globals.AP_SECRETS_KEY___2257 = ("wifi");
    globals.SECRETS_KEY___1292 = ("azureiot");
    globals.logPriority___1293 = (0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_LoggerServer__C1572_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_LoggerServer_constructor__P1574_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 596; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    globals.loggerServer___1581 = (s.tmp_0);
    globals.roleSettingPrefix___2437 = ("#jdr:");
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_RoleManagerServer__C1657_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac__rolemgr_RoleManagerServer_constructor__P1659_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 671; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    globals.roleManagerServer___1664 = (s.tmp_0);
    globals.CHANGE___1716 = ("change");
    globals.DEVICE_CONNECT___1717 = ("deviceConnect");
    globals.DEVICE_DISCONNECT___1718 = ("deviceDisconnect");
    globals.DEVICE_CHANGE___1719 = ("deviceChange");
    globals.DEVICE_ANNOUNCE___1720 = ("deviceAnnounce");
    globals.SELF_ANNOUNCE___1721 = ("selfAnnounce");
    globals.PACKET_PROCESS___1722 = ("packetProcess");
    globals.REPORT_RECEIVE___1723 = ("reportReceive");
    globals.REPORT_UPDATE___1724 = ("reportUpdate");
    globals.RESTART___1725 = ("restart");
    globals.PACKET_RECEIVE___1726 = ("packetReceive");
    globals.EVENT___1727 = ("packetEvent");
    globals.STATUS_EVENT___1728 = ("statusEvent");
    globals.IDENTIFY___1729 = ("identify");
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Bus__C1730_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_Bus_constructor__P1735_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 746; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    globals.bus___1748 = (s.tmp_0);
    globals.logPriority___1749 = (0);
    globals.JACDAC_PROXY_SETTING___1823 = ("__jacdac_proxy");
    s.tmp_0 = jacdac___physStart__P1318_mk(s);
    s.callLocIdx = 946; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(globals.onPlatformStart___1715);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = lambda_1_mk(s);
    s.tmp_0.argL = globals.onPlatformStart___1715;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 947; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 1:
  case 2:
    s.tmp_0 = jacdac_startProxy__P2494_mk(s);
    s.callLocIdx = 948; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    r0 = pxsim.control.runInParallel(jacdac_inline__P2501);
    globals.ERROR___1828 = ("error");
    r0 = pxsim_pxtcore_mkClassInstance(net_Net__C1168_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_Net_constructor__P1169_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = net_inline__P2517;
    s.callLocIdx = 971; s.pc = 12; return s.tmp_1;
  case 12:
    r0 = s.retval;
    globals.pendingReadings___2623 = (0);
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "name", "streaming_interval");
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "code", 4);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "flags", 0);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "packf", "u32");
    globals.streamingIntervalSpec___2626 = (s.tmp_0);
    globals.logPriority___1749 = (1);
    s.tmp_0 = jacdac_start__P1824_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 1063; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.tmp_0 = net_Controller__C1102_v8_1_mk(s);
    s.tmp_1 = net_Net_controller__P1171_mk(s);
    r0 = globals.net_Net_instance___1170;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 1065; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.connect;
    s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.tmp_0 = jacdac_twins_init__P2118_mk(s);
    s.callLocIdx = 1066; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
_main___P2120.info = {"start":0,"length":0,"line":0,"column":0,"endLine":0,"endColumn":0,"fileName":"uploader.ts","functionName":"<main>","argumentNames":[]}
_main___P2120.continuations = [  ]

function _main___P2120_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: _main___P2120, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_inline__P2501(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_start__P1824_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 949; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_inline__P2501.info = {"start":46437,"length":13,"line":1390,"column":26,"endLine":1390,"endColumn":39,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_inline__P2501_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_inline__P2501, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_inline__P2517(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_pxtcore_mkClassInstance(net_WifiController__C1917_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_WifiController_constructor__P1918_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 970; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
net_inline__P2517.info = {"start":5323,"length":26,"line":152,"column":16,"endLine":152,"endColumn":42,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_inline__P2517_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_inline__P2517, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_twins_init__P2118(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.twins___2619);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_Array__mk();
    globals.twins___2619 = (r0);
    r0 = pxsim_Array__mk();
    globals.exclusions___2620 = (r0);
    r0 = pxsim_Array__push(globals.exclusions___2620, "control.uptime");
    r0 = pxsim_Array__push(globals.exclusions___2620, "control.mcu_temperature");
    r0 = pxsim.control.millis();
    globals.lastReadingsSent___2624 = (r0);
    s.tmp_0 = azureiot_connect__P1297_mk(s);
    s.callLocIdx = 1061; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = setInterval__P422_mk(s);
    s.tmp_0.arg0 = jacdac_twins_rescanDevices__P2645;
    s.tmp_0.arg1 = 1000;
    s.callLocIdx = 1062; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_init__P2118.info = {"start":10245,"length":308,"line":320,"column":4,"endLine":333,"endColumn":5,"fileName":"twins.ts","functionName":"init","argumentNames":[]}

function jacdac_twins_init__P2118_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_init__P2118, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_twins_rescanDevices__P2645(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___2674 = undefined;
    s.unnamed184___U1 = undefined;
    s.unnamed185___U2 = undefined;
    s.t___2692 = undefined;
    s.unnamed186___U4 = undefined;
    s.unnamed187___U5 = undefined;
    s.i___2696 = undefined;
    s.t___2701 = undefined;
    s.unnamed188___U8 = undefined;
    s.unnamed189___U9 = undefined;
    s.fullTwin___2709 = undefined;
    s.t___2712 = undefined;
    s.unnamed190___U12 = undefined;
    s.unnamed191___U13 = undefined;
    s.cloudTwin___2729 = undefined;
    s.patch___2732 = undefined;
    s.patch___2740 = undefined;
    s.readings___2775 = undefined;
    s.t___2778 = undefined;
    s.unnamed192___U19 = undefined;
    s.unnamed193___U20 = undefined;
    s.d___2674 = (undefined);
    r0 = globals.bus___1748.fields["devices"];
    s.unnamed184___U1 = (r0);
    s.unnamed185___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed185___U2;
    r0 = pxsim_Array__length(s.unnamed184___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed184___U1, s.unnamed185___U2);
    s.d___2674 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_rescanDevices_inline__P2679);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.d___2674);
    s.tmp_6 = helpers_arraySome__P107_mk(s);
    s.tmp_6.arg0 = globals.twins___2619;
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 1034; s.pc = 27; return s.tmp_6;
  case 27:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_twins_DeviceTwin__C2639_VT);
    s.tmp_7 = r0;
    s.tmp_8 = jacdac_twins_DeviceTwin_constructor__P2644_mk(s);
    s.tmp_8.arg0 = s.tmp_7;
    s.tmp_8.arg1 = s.d___2674;
    s.callLocIdx = 1035; s.pc = 28; return s.tmp_8;
  case 28:
    r0 = s.retval;
  case 2:
  case 3:
    r0 = (s.unnamed185___U2 + 1);
    s.unnamed185___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed184___U1 = (undefined);
    s.t___2692 = (undefined);
    s.unnamed186___U4 = (globals.twins___2619);
    s.unnamed187___U5 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed187___U5;
    r0 = pxsim_Array__length(s.unnamed186___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed186___U4, s.unnamed187___U5);
    s.t___2692 = (r0);
    s.tmp_2 = jacdac_twins_DeviceTwin_tick__P2641_mk(s);
    s.tmp_2.arg0 = s.t___2692;
    s.callLocIdx = 1036; s.pc = 29; return s.tmp_2;
  case 29:
    r0 = s.retval;
    r0 = (s.unnamed187___U5 + 1);
    s.unnamed187___U5 = (r0);
    { step = 5; continue; }
  case 6:
    s.unnamed186___U4 = (undefined);
    s.i___2696 = (0);
  case 7:
    r0 = (s.i___2696 < 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.t___2701 = (undefined);
    s.unnamed188___U8 = (globals.twins___2619);
    s.unnamed189___U9 = (0);
  case 8:
    s.tmp_0 = r0 = s.unnamed189___U9;
    r0 = pxsim_Array__length(s.unnamed188___U8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed188___U8, s.unnamed189___U9);
    s.t___2701 = (r0);
    s.tmp_2 = jacdac_twins_DeviceTwin_computeTwin__P2643_mk(s);
    s.tmp_2.arg0 = s.t___2701;
    s.tmp_2.arg1 = false;
    s.callLocIdx = 1037; s.pc = 30; return s.tmp_2;
  case 30:
    r0 = s.retval;
    r0 = (s.unnamed189___U9 + 1);
    s.unnamed189___U9 = (r0);
    { step = 8; continue; }
  case 9:
    s.unnamed188___U8 = (undefined);
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 1038; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
    r0 = (s.i___2696 + 1);
    s.i___2696 = (r0);
    { step = 7; continue; }
  case 10:
    r0 = pxsim_pxtrt.mkMap();
    s.fullTwin___2709 = (r0);
    s.t___2712 = (undefined);
    s.unnamed190___U12 = (globals.twins___2619);
    s.unnamed191___U13 = (0);
  case 11:
    s.tmp_0 = r0 = s.unnamed191___U13;
    r0 = pxsim_Array__length(s.unnamed190___U12);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_Array__getAt(s.unnamed190___U12, s.unnamed191___U13);
    s.t___2712 = (r0);
    s.tmp_2 = r0 = s.fullTwin___2709;
    r0 = s.t___2712.fields["id"];
    s.tmp_3 = r0;
    s.tmp_5 = jacdac_twins_DeviceTwin_computeTwin__P2643_mk(s);
    s.tmp_5.arg0 = s.t___2712;
    s.tmp_5.arg1 = true;
    s.callLocIdx = 1039; s.pc = 32; return s.tmp_5;
  case 32:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_2, s.tmp_3, s.tmp_4);
    r0 = (s.unnamed191___U13 + 1);
    s.unnamed191___U13 = (r0);
    { step = 11; continue; }
  case 12:
    s.unnamed190___U12 = (undefined);
    r0 = pxsim_numops_toBoolDecr(globals.currTwin___2621);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tmp_2 = console_log__P378_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.fullTwin___2709;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 1040; s.pc = 34; return s.tmp_3;
  case 34:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 1041; s.pc = 33; return s.tmp_2;
  case 33:
    r0 = s.retval;
    globals.currTwin___2621 = (s.fullTwin___2709);
    s.tmp_0 = azureiot_getTwin__P1306_mk(s);
    s.callLocIdx = 1042; s.pc = 35; return s.tmp_0;
  case 35:
    r0 = s.retval;
    s.cloudTwin___2729 = (r0);
    s.tmp_0 = azureiot_computePatch__P1308_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.cloudTwin___2729, "reported");
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = globals.currTwin___2621;
    s.callLocIdx = 1043; s.pc = 36; return s.tmp_0;
  case 36:
    r0 = s.retval;
    s.patch___2732 = (r0);
    s.tmp_0 = azureiot_patchTwin__P1307_mk(s);
    s.tmp_0.arg0 = s.patch___2732;
    s.callLocIdx = 1044; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
    s.tmp_0 = jacdac_twins_connectTwinUpdate__P2647_mk(s);
    s.callLocIdx = 1045; s.pc = 38; return s.tmp_0;
  case 38:
    r0 = s.retval;
    { step = 16; continue; }
  case 13:
    s.tmp_0 = azureiot_computePatch__P1308_mk(s);
    s.tmp_0.arg0 = globals.currTwin___2621;
    s.tmp_0.arg1 = s.fullTwin___2709;
    s.callLocIdx = 1046; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
    s.patch___2740 = (r0);
    r0 = pxsim_pxtrt.keysOf(s.patch___2740);
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_3 = console_log__P378_mk(s);
    s.tmp_4 = JSON_stringify__P385_mk(s);
    s.tmp_4.arg0 = s.patch___2740;
    s.tmp_4.arg1 = null;
    s.tmp_4.arg2 = 1;
    s.callLocIdx = 1047; s.pc = 41; return s.tmp_4;
  case 41:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 1048; s.pc = 40; return s.tmp_3;
  case 40:
    r0 = s.retval;
    s.tmp_0 = azureiot_patchTwin__P1307_mk(s);
    s.tmp_0.arg0 = s.patch___2740;
    s.callLocIdx = 1049; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
  case 14:
  case 15:
    globals.currTwin___2621 = (s.fullTwin___2709);
  case 16:
    r0 = (globals.pendingReadings___2623 > 100);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 17; continue; }
    r0 = s.tmp_0;
    { step = 20; continue; }
  case 17:
    r0 = (globals.pendingReadings___2623 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 18; continue; }
    r0 = s.tmp_1;
    { step = 19; continue; }
  case 18:
    r0 = pxsim.control.millis();
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - globals.lastReadingsSent___2624);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 5000);
  case 19:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 20:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 25; continue; }
    r0 = pxsim.control.millis();
    globals.lastReadingsSent___2624 = (r0);
    globals.pendingReadings___2623 = (0);
    r0 = pxsim_pxtrt.mkMap();
    s.readings___2775 = (r0);
    s.t___2778 = (undefined);
    s.unnamed192___U19 = (globals.twins___2619);
    s.unnamed193___U20 = (0);
  case 21:
    s.tmp_0 = r0 = s.unnamed193___U20;
    r0 = pxsim_Array__length(s.unnamed192___U19);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 22; continue; }
    r0 = pxsim_Array__getAt(s.unnamed192___U19, s.unnamed193___U20);
    s.t___2778 = (r0);
    s.tmp_2 = jacdac_twins_DeviceTwin_computeReadings__P2642_mk(s);
    s.tmp_2.arg0 = s.t___2778;
    s.tmp_2.arg1 = globals.lastReadingsSent___2624;
    s.tmp_2.arg2 = s.readings___2775;
    s.callLocIdx = 1050; s.pc = 43; return s.tmp_2;
  case 43:
    r0 = s.retval;
    r0 = (s.unnamed193___U20 + 1);
    s.unnamed193___U20 = (r0);
    { step = 21; continue; }
  case 22:
    s.unnamed192___U19 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.readings___2775);
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 23; continue; }
    s.tmp_3 = console_log__P378_mk(s);
    s.tmp_4 = JSON_stringify__P385_mk(s);
    s.tmp_4.arg0 = s.readings___2775;
    s.tmp_4.arg1 = null;
    s.tmp_4.arg2 = 1;
    s.callLocIdx = 1051; s.pc = 45; return s.tmp_4;
  case 45:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 1052; s.pc = 44; return s.tmp_3;
  case 44:
    r0 = s.retval;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "readings", s.readings___2775);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "deviceTime", globals.lastReadingsSent___2624);
    s.tmp_1 = azureiot_publishMessageJSON__P1300_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.callLocIdx = 1053; s.pc = 46; return s.tmp_1;
  case 46:
    r0 = s.retval;
  case 23:
  case 24:
  case 25:
  case 26:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_rescanDevices__P2645.info = {"start":7912,"length":1799,"line":249,"column":4,"endLine":299,"endColumn":5,"fileName":"twins.ts","functionName":"rescanDevices","argumentNames":[]}

function jacdac_twins_rescanDevices__P2645_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_rescanDevices__P2645, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  d___2674: undefined,
  unnamed184___U1: undefined,
  unnamed185___U2: undefined,
  t___2692: undefined,
  unnamed186___U4: undefined,
  unnamed187___U5: undefined,
  i___2696: undefined,
  t___2701: undefined,
  unnamed188___U8: undefined,
  unnamed189___U9: undefined,
  fullTwin___2709: undefined,
  t___2712: undefined,
  unnamed190___U12: undefined,
  unnamed191___U13: undefined,
  cloudTwin___2729: undefined,
  patch___2732: undefined,
  patch___2740: undefined,
  readings___2775: undefined,
  t___2778: undefined,
  unnamed192___U19: undefined,
  unnamed193___U20: undefined,
} }





function jacdac_twins_rescanDevices_inline__P2679(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_rescanDevices_inline__P2679.info = {"start":8013,"length":18,"line":251,"column":28,"endLine":251,"endColumn":46,"fileName":"twins.ts","functionName":"inline","argumentNames":["t"]}

function jacdac_twins_rescanDevices_inline__P2679_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_rescanDevices_inline__P2679, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function azureiot_publishMessageJSON__P1300(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___2799 = undefined;
    s.topic___2802 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_mqttClient__P1294_mk(s);
    s.callLocIdx = 427; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.c___2799 = (r0);
    s.tmp_3 = if_clientId_1_mk(s);
    r0 = s.c___2799.fields["opt"];
    s.tmp_3.arg0 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "clientId");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["clientId"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["clientId"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 428; s.pc = 4; return s.tmp_3; }
    }
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("devices/", s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "/messages/events/");
    s.topic___2802 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 1; continue; }
    if ((s.topic___2802) && (s.topic___2802).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.topic___2802);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.topic___2802) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = azureiot_encodeQuery__P2288_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 429; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.topic___2802 = (r0);
  case 1:
  case 2:
    s.tmp_0 = mqtt_Client_publish__P1283_mk(s);
    s.tmp_0.arg0 = s.c___2799;
    s.tmp_0.arg1 = s.topic___2802;
    s.tmp_1 = JSON_stringify__P385_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = null;
    s.tmp_1.arg2 = 0;
    s.callLocIdx = 430; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    s.tmp_0.arg3 = 0;
    s.tmp_0.arg4 = false;
    s.callLocIdx = 431; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_publishMessageJSON__P1300.info = {"start":5397,"length":332,"line":170,"column":4,"endLine":177,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"publishMessageJSON","argumentNames":["msg","sysProps"]}

function azureiot_publishMessageJSON__P1300_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_publishMessageJSON__P1300, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  c___2799: undefined,
  topic___2802: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_publish__P1283(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___2832 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    r0 = pxsim_pxtcore.typeOf(s.arg2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.createBufferFromUTF8(s.arg2);
    { step = 2; continue; }
  case 1:
    r0 = s.arg2;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.buf___2832 = (s.tmp_2);
    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("publish: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 345; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = mqtt_Client_send__P2273_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = mqtt_Protocol_createPublish__P1269_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = s.buf___2832;
    s.tmp_1.arg2 = s.arg3;
    s.tmp_1.arg3 = s.arg4;
    s.callLocIdx = 346; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 347; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_publish__P1283.info = {"start":13784,"length":354,"line":431,"column":8,"endLine":435,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"publish","argumentNames":["this","topic","message","qos","retained"]}

function mqtt_Client_publish__P1283_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_publish__P1283, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___2832: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function mqtt_Protocol_createPublish__P1269(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.byte1___2856 = undefined;
    s.pid___2868 = undefined;
    s.variable___2874 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg2 << 1);
    s.tmp_0 = r0;
    r0 = (48 | s.tmp_0);
    s.byte1___2856 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = (s.byte1___2856 | s.tmp_0);
    s.byte1___2856 = (r0);
    s.tmp_0 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_1 = mqtt_Protocol_getBytes__P2263_mk(s);
    s.tmp_1.arg0 = 1;
    s.callLocIdx = 281; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 282; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.pid___2868 = (r0);
    r0 = (s.arg2 === 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 283; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_3 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 284; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.pid___2868;
    s.callLocIdx = 285; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    s.variable___2874 = (s.tmp_4);
    s.tmp_0 = mqtt_Protocol_createPacket__P2265_mk(s);
    s.tmp_0.arg0 = s.byte1___2856;
    s.tmp_0.arg1 = s.variable___2874;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 286; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPublish__P1269.info = {"start":6502,"length":433,"line":213,"column":8,"endLine":221,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPublish","argumentNames":["topic","message","qos","retained"]}

function mqtt_Protocol_createPublish__P1269_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPublish__P1269, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  byte1___2856: undefined,
  pid___2868: undefined,
  variable___2874: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function mqtt_Protocol_createPacket__P2265(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.byte2___2897 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg2 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.createBuffer(0);
    s.arg2 = (r0);
  case 1:
  case 2:
    s.tmp_0 = mqtt_Protocol_encodeRemainingLength__P2261_mk(s);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg2);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 251; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.byte2___2897 = (r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    s.tmp_1 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_3 = helpers_bufferConcat__P184_mk(s);
    s.tmp_4 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_4.arg0 = s.tmp_0;
    s.callLocIdx = 252; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_5 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_5.arg0 = s.byte2___2897;
    s.callLocIdx = 253; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 254; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 255; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.arg2;
    s.callLocIdx = 256; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPacket__P2265.info = {"start":4470,"length":394,"line":157,"column":8,"endLine":164,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPacket","argumentNames":["byte1","variable","payload"]}

function mqtt_Protocol_createPacket__P2265_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPacket__P2265, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  byte2___2897: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Protocol_encodeRemainingLength__P2261(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.length___2916 = undefined;
    s.encBytes___2918 = undefined;
    s.encByte___2921 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.length___2916 = (s.arg0);
    r0 = pxsim_Array__mk();
    s.encBytes___2918 = (r0);
  case 1:
    r0 = (s.length___2916 & 127);
    s.encByte___2921 = (r0);
    r0 = (s.length___2916 >> 7);
    s.length___2916 = (r0);
    r0 = (s.length___2916 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = (s.encByte___2921 + 128);
    s.encByte___2921 = (r0);
  case 2:
  case 3:
    r0 = pxsim_Array__push(s.encBytes___2918, s.encByte___2921);
    r0 = (s.length___2916 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    { step = 1; continue; }
  case 4:
    r0 = s.encBytes___2918;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_encodeRemainingLength__P2261.info = {"start":2539,"length":551,"line":104,"column":8,"endLine":118,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"encodeRemainingLength","argumentNames":["remainingLength"]}

function mqtt_Protocol_encodeRemainingLength__P2261_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_encodeRemainingLength__P2261, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  length___2916: undefined,
  encBytes___2918: undefined,
  encByte___2921: undefined,
  arg0: undefined,
} }





function helpers_bufferConcat__P184(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___2942 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.r___2942 = (r0);
    r0 = pxsim.BufferMethods.write(s.r___2942, 0, s.arg0);
    s.tmp_0 = r0 = s.r___2942;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, s.tmp_1, s.arg1);
    r0 = s.r___2942;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferConcat__P184.info = {"start":3785,"length":179,"line":132,"column":4,"endLine":137,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferConcat","argumentNames":["a","b"]}

function helpers_bufferConcat__P184_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferConcat__P184, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___2942: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Protocol_pack__P2264(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___2962 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    s.buf___2962 = (r0);
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_1 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_2 = mqtt_Protocol_getBytes__P2263_mk(s);
    r0 = pxsim.BufferMethods.length(s.buf___2962);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 248; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 249; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.buf___2962;
    s.callLocIdx = 250; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_pack__P2264.info = {"start":4135,"length":162,"line":148,"column":8,"endLine":151,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"pack","argumentNames":["s"]}

function mqtt_Protocol_pack__P2264_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_pack__P2264, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___2962: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_getBytes__P2263(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = (s.arg0 >> 8);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = (s.arg0 & 255);
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_2);
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_getBytes__P2263.info = {"start":3855,"length":100,"line":140,"column":8,"endLine":142,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"getBytes","argumentNames":["int16"]}

function mqtt_Protocol_getBytes__P2263_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_getBytes__P2263, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_strChr__P2260(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = pins_createBufferFromArray__P174_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 239; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_strChr__P2260.info = {"start":2273,"length":105,"line":96,"column":8,"endLine":98,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"strChr","argumentNames":["codes"]}

function mqtt_Protocol_strChr__P2260_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_strChr__P2260, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function pins_createBufferFromArray__P174(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Buffer_fromArray__P208_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 20; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
pins_createBufferFromArray__P174.info = {"start":170,"length":101,"line":7,"column":4,"endLine":9,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"createBufferFromArray","argumentNames":["bytes"]}

function pins_createBufferFromArray__P174_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_createBufferFromArray__P174, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function Buffer_fromArray__P208(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___2985 = undefined;
    s.i___2990 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___2985 = (r0);
    s.i___2990 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___2990;
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_3 = r0 = s.buf___2985;
    s.tmp_4 = r0 = s.i___2990;
    r0 = pxsim_Array__getAt(s.arg0, s.i___2990);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_3, s.tmp_4, s.tmp_5);
    r0 = (s.i___2990 + 1);
    s.i___2990 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.buf___2985;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromArray__P208.info = {"start":11216,"length":192,"line":396,"column":4,"endLine":401,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromArray","argumentNames":["bytes"]}

function Buffer_fromArray__P208_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromArray__P208, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  buf___2985: undefined,
  i___2990: undefined,
  arg0: undefined,
} }





function mqtt_Client_send__P2273(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    r0 = s.arg0.fields["sct"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = mqtt_Client_log__P2270_mk(s);
    s.tmp_1.arg0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, 0);
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat("send: ", s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, " / ");
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_13 = r0;
    if ((s.tmp_13) && (s.tmp_13).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_13);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_13) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_12);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, " bytes: ");
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toHex(s.arg1);
    s.tmp_15 = r0;
    if ((s.tmp_15) && (s.tmp_15).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_15);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_15) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_14);
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 354; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = if_send_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 355; s.pc = 11; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 355; s.pc = 11; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 355; s.pc = 11; return s.tmp_0;; }
     else { s.callLocIdx = 355; s.pc = 11; return s.tmp_0; }
    }
  case 11:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_send__P2273.info = {"start":15703,"length":298,"line":474,"column":8,"endLine":480,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"send","argumentNames":["this","data"]}

function mqtt_Client_send__P2273_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_send__P2273, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_log__P2270(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    s.tmp_0 = console_add__P374_mk(s);
    r0 = s.arg0.fields["logPriority"];
    s.tmp_0.arg0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("mqtt: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 299; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_log__P2270.info = {"start":9764,"length":95,"line":313,"column":8,"endLine":315,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"log","argumentNames":["this","msg"]}

function mqtt_Client_log__P2270_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_log__P2270, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_add__P374(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.text___3054 = undefined;
    s.i___3063 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 < globals.minPriority___373);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    s.tmp_1 = console_inspect__P380_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = 20;
    s.callLocIdx = 56; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.text___3054 = (r0);
    if ((s.text___3054) && (s.text___3054).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.text___3054);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.text___3054) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\n");
    s.text___3054 = (r0);
    s.i___3063 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___3063;
    r0 = pxsim_Array__length(globals.listeners___2185);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = lambda_3_mk(s);
    r0 = pxsim_Array__getAt(globals.listeners___2185, s.i___3063);
    s.tmp_3.argL = r0;
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.text___3054;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 57; s.pc = 8; return s.tmp_3;
  case 8:
    r0 = s.retval;
    r0 = (s.i___3063 + 1);
    s.i___3063 = (r0);
    { step = 3; continue; }
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_add__P374.info = {"start":632,"length":317,"line":28,"column":4,"endLine":36,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"add","argumentNames":["priority","message"]}

function console_add__P374_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_add__P374, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  text___3054: undefined,
  i___3063: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function listeners_inline__P2184(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.__log(s.arg0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
listeners_inline__P2184.info = {"start":534,"length":85,"line":25,"column":8,"endLine":25,"endColumn":93,"fileName":"pxt_modules/base/console.ts","functionName":"inline","argumentNames":["priority","text"]}

function listeners_inline__P2184_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: listeners_inline__P2184, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function console_inspect__P380(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.asArr___3101 = undefined;
    s.asString___3119 = undefined;
    s.keys___3131 = undefined;
    s.snipped___3135 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 17; continue; }
    { step = 16; continue; }
  case 1:
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "number");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    { step = 17; continue; }
    { step = 15; continue; }
  case 2:
    r0 = pxsim_Array_.isArray(s.arg0);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 5; continue; }
    s.asArr___3101 = (s.arg0);
    r0 = pxsim_Array__length(s.asArr___3101);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = helpers_arrayJoin__P103_mk(s);
    s.tmp_2.arg0 = s.asArr___3101;
    s.tmp_2.arg1 = ",";
    s.callLocIdx = 60; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    { step = 17; continue; }
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    s.tmp_7 = helpers_arrayJoin__P103_mk(s);
    s.tmp_8 = helpers_arraySlice__P115_mk(s);
    s.tmp_8.arg0 = s.asArr___3101;
    s.tmp_8.arg1 = 0;
    s.tmp_8.arg2 = s.arg1;
    s.callLocIdx = 61; s.pc = 21; return s.tmp_8;
  case 21:
    r0 = s.retval;
    s.tmp_7.arg0 = r0;
    s.tmp_7.arg1 = ",";
    s.callLocIdx = 62; s.pc = 20; return s.tmp_7;
  case 20:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    { step = 17; continue; }
  case 4:
    { step = 14; continue; }
  case 5:
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_10);
    s.asString___3119 = (r0);
    r0 = (s.asString___3119 != "[object Object]");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 6:
    r0 = (s.asString___3119 != "[Object]");
  case 7:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = s.asString___3119;
    { step = 17; continue; }
  case 8:
  case 9:
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.keys___3131 = (r0);
    r0 = pxsim_Array__length(s.keys___3131);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > s.arg1);
    s.snipped___3135 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.snipped___3135);
    if (!r0) { step = 10; continue; }
    s.tmp_0 = helpers_arraySlice__P115_mk(s);
    s.tmp_0.arg0 = s.keys___3131;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 63; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.keys___3131 = (r0);
  case 10:
  case 11:
    r0 = pxsim_pxtcore_mkAction(1, console_inspect_inline__P3152);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_numops_toBoolDecr(s.snipped___3135);
    if (!r0) { step = 12; continue; }
    r0 = "\n    ...";
    { step = 13; continue; }
  case 12:
    r0 = pxsim_String_.mkEmpty();
  case 13:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_7 = helpers_arrayReduce__P112_mk(s);
    s.tmp_7.arg0 = s.keys___3131;
    s.tmp_7.arg1 = s.tmp_0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7.arg2 = r0;
    s.callLocIdx = 64; s.pc = 25; return s.tmp_7;
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("{", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "\n}");
    { step = 17; continue; }
  case 14:
  case 15:
  case 16:
    r0 = undefined;
  case 17:
    return leave(s, r0)
  default: oops()
} } }
console_inspect__P380.info = {"start":2271,"length":1190,"line":81,"column":4,"endLine":114,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"inspect","argumentNames":["obj","maxElements"]}

function console_inspect__P380_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_inspect__P380, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  asArr___3101: undefined,
  asString___3119: undefined,
  keys___3131: undefined,
  snipped___3135: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_inspect_inline__P3152(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 1);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("\n    ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ": ");
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg1);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_6);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
console_inspect_inline__P3152.info = {"start":3293,"length":61,"line":108,"column":20,"endLine":108,"endColumn":81,"fileName":"pxt_modules/base/console.ts","functionName":"inline","argumentNames":["prev","currKey"]}

function console_inspect_inline__P3152_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_inspect_inline__P3152, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayReduce__P112(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___3179 = undefined;
    s.i___3182 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___3179 = (r0);
    s.i___3182 = (0);
  case 1:
    r0 = (s.i___3182 < s.len___3179);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = lambda_4_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.arg2;
    r0 = pxsim_Array__getAt(s.arg0, s.i___3182);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.i___3182;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 10; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.arg2 = (r0);
    r0 = (s.i___3182 + 1);
    s.i___3182 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.arg2;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayReduce__P112.info = {"start":8316,"length":317,"line":280,"column":4,"endLine":286,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayReduce","argumentNames":["arr","callbackfn","initialValue"]}

function helpers_arrayReduce__P112_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayReduce__P112, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___3179: undefined,
  i___3182: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arraySlice__P115(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___3200 = undefined;
    s.len___3202 = undefined;
    s.i___3236 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___3200 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___3202 = (r0);
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.arg1 = (0);
    { step = 4; continue; }
  case 1:
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = Math_max__P130_mk(s);
    r0 = (s.len___3202 + s.arg1);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.callLocIdx = 11; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.arg1 = (r0);
  case 2:
  case 3:
  case 4:
    r0 = (s.arg1 > s.len___3202);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.res___3200;
    { step = 15; continue; }
  case 5:
  case 6:
    r0 = (s.arg2 === undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    s.arg2 = (s.len___3202);
    { step = 10; continue; }
  case 7:
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = (s.len___3202 + s.arg2);
    s.arg2 = (r0);
  case 8:
  case 9:
  case 10:
    r0 = (s.arg2 > s.len___3202);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.arg2 = (s.len___3202);
  case 11:
  case 12:
    s.i___3236 = (s.arg1);
  case 13:
    r0 = (s.i___3236 < s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_1 = r0 = s.res___3200;
    r0 = pxsim_Array__getAt(s.arg0, s.i___3236);
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = (s.i___3236 + 1);
    s.i___3236 = (r0);
    { step = 13; continue; }
  case 14:
    r0 = s.res___3200;
  case 15:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySlice__P115.info = {"start":9027,"length":690,"line":303,"column":4,"endLine":328,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySlice","argumentNames":["arr","start","end"]}

function helpers_arraySlice__P115_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySlice__P115, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  res___3200: undefined,
  len___3202: undefined,
  i___3236: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Math_max__P130(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 >= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_max__P130.info = {"start":16564,"length":105,"line":556,"column":4,"endLine":559,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"max","argumentNames":["a","b"]}

function Math_max__P130_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_max__P130, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayJoin__P103(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___3268 = undefined;
    s.len___3269 = undefined;
    s.i___3272 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 === null);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.arg1 = (",");
  case 3:
  case 4:
    r0 = pxsim_String_.mkEmpty();
    s.r___3268 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___3269 = (r0);
    s.i___3272 = (0);
  case 5:
    r0 = (s.i___3272 < s.len___3269);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = (s.i___3272 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_1;
    { step = 7; continue; }
  case 6:
    r0 = s.arg1;
  case 7:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 8; continue; }
    if ((s.r___3268) && (s.r___3268).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.r___3268);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___3268) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_3 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.r___3268 = (r0);
  case 8:
  case 9:
    r0 = pxsim_Array__getAt(s.arg0, s.i___3272);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    r0 = pxsim_Array__getAt(s.arg0, s.i___3272);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === null);
  case 11:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_String_.mkEmpty();
    { step = 13; continue; }
  case 12:
    r0 = pxsim_Array__getAt(s.arg0, s.i___3272);
  case 13:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    if ((s.r___3268) && (s.r___3268).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___3268);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___3268) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.r___3268 = (r0);
    r0 = (s.i___3272 + 1);
    s.i___3272 = (r0);
    { step = 5; continue; }
  case 14:
    r0 = s.r___3268;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayJoin__P103.info = {"start":4133,"length":432,"line":157,"column":4,"endLine":170,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayJoin","argumentNames":["arr","sep"]}

function helpers_arrayJoin__P103_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayJoin__P103, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  r___3268: undefined,
  len___3269: undefined,
  i___3272: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_encodeQuery__P2288(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.keys___3311 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.keys___3311 = (r0);
    r0 = pxsim_Array__length(s.keys___3311);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_String_.mkEmpty();
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkAction(1, join_inline__P3325);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.arg0);
    s.tmp_5 = helpers_arrayJoin__P103_mk(s);
    s.tmp_6 = helpers_arrayMap__P106_mk(s);
    s.tmp_6.arg0 = s.keys___3311;
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 423; s.pc = 5; return s.tmp_6;
  case 5:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = "&";
    s.callLocIdx = 424; s.pc = 4; return s.tmp_5;
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("?", s.tmp_3);
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_encodeQuery__P2288.info = {"start":3964,"length":271,"line":118,"column":4,"endLine":125,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"encodeQuery","argumentNames":["props"]}

function azureiot_encodeQuery__P2288_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_encodeQuery__P2288, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  keys___3311: undefined,
  arg0: undefined,
} }





function join_inline__P3325(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    s.tmp_5 = net_urlencode__P1180_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 421; s.pc = 1; return s.tmp_5;
  case 1:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "=");
    s.tmp_0 = r0;
    s.tmp_8 = net_urlencode__P1180_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg0);
    s.tmp_8.arg0 = r0;
    s.callLocIdx = 422; s.pc = 3; return s.tmp_8;
  case 3:
    r0 = s.retval;
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_6);
    return leave(s, r0)
  default: oops()
} } }
join_inline__P3325.info = {"start":4151,"length":53,"line":123,"column":17,"endLine":123,"endColumn":70,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["k"]}

function join_inline__P3325_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: join_inline__P3325, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
} }





function net_urlencode__P1180(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___3341 = undefined;
    s.r___3345 = undefined;
    s.i___3346 = undefined;
    s.c___3352 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    s.buf___3341 = (r0);
    r0 = pxsim_String_.mkEmpty();
    s.r___3345 = (r0);
    s.i___3346 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___3346;
    r0 = pxsim.BufferMethods.length(s.buf___3341);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = pxsim.BufferMethods.getByte(s.buf___3341, s.i___3346);
    s.c___3352 = (r0);
    r0 = (48 <= s.c___3352);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___3352 <= 57);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 7; continue; }
  case 4:
    r0 = (s.c___3352 | 32);
    s.tmp_3 = r0;
    r0 = (97 <= s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_2;
    { step = 6; continue; }
  case 5:
    r0 = (s.c___3352 | 32);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 <= 122);
  case 6:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
  case 7:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_6;
    { step = 15; continue; }
  case 8:
    r0 = (s.c___3352 == 45);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (!r0) { step = 9; continue; }
    r0 = s.tmp_7;
    { step = 10; continue; }
  case 9:
    r0 = (s.c___3352 == 46);
  case 10:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBool(s.tmp_8);
    if (!r0) { step = 11; continue; }
    r0 = s.tmp_8;
    { step = 12; continue; }
  case 11:
    r0 = (s.c___3352 == 95);
  case 12:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBool(s.tmp_9);
    if (!r0) { step = 13; continue; }
    r0 = s.tmp_9;
    { step = 14; continue; }
  case 13:
    r0 = (s.c___3352 == 126);
  case 14:
    // jmp value (already in r0)
    s.tmp_10 = r0;
    r0 = s.tmp_10;
  case 15:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_11);
    if (!r0) { step = 16; continue; }
    if ((s.r___3345) && (s.r___3345).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.r___3345);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___3345) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = pxsim_String_.fromCharCode(s.c___3352);
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_12, s.tmp_13);
    s.r___3345 = (r0);
    { step = 17; continue; }
  case 16:
    if ((s.r___3345) && (s.r___3345).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.r___3345);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___3345) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.buf___3341, s.i___3346, 1);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("%", s.tmp_3);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___3345 = (r0);
  case 17:
    r0 = (s.i___3346 + 1);
    s.i___3346 = (r0);
    { step = 1; continue; }
  case 18:
    r0 = s.r___3345;
    return leave(s, r0)
  default: oops()
} } }
net_urlencode__P1180.info = {"start":20,"length":477,"line":1,"column":4,"endLine":14,"endColumn":5,"fileName":"pxt_modules/net/netutil.ts","functionName":"urlencode","argumentNames":["s"]}

function net_urlencode__P1180_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_urlencode__P1180, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  buf___3341: undefined,
  r___3345: undefined,
  i___3346: undefined,
  c___3352: undefined,
  arg0: undefined,
} }





function helpers_arrayMap__P106(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___3415 = undefined;
    s.len___3417 = undefined;
    s.i___3420 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___3415 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___3417 = (r0);
    s.i___3420 = (0);
  case 1:
    r0 = (s.i___3420 < s.len___3417);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.res___3415;
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___3420);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.i___3420;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 4; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = (s.i___3420 + 1);
    s.i___3420 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.res___3415;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayMap__P106.info = {"start":6528,"length":299,"line":229,"column":4,"endLine":236,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayMap","argumentNames":["arr","callbackfn"]}

function helpers_arrayMap__P106_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayMap__P106, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  res___3415: undefined,
  len___3417: undefined,
  i___3420: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_mqttClient__P1294(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals._mqttClient___2277);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = azureiot_log__P2281_mk(s);
    s.tmp_2.arg0 = "creating mqtt client";
    s.callLocIdx = 384; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_0 = azureiot_createMQTTClient__P2283_mk(s);
    s.callLocIdx = 385; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    globals._mqttClient___2277 = (r0);
  case 1:
  case 2:
    r0 = globals._mqttClient___2277;
    return leave(s, r0)
  default: oops()
} } }
azureiot_mqttClient__P1294.info = {"start":583,"length":201,"line":24,"column":4,"endLine":30,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"mqttClient","argumentNames":[]}

function azureiot_mqttClient__P1294_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_mqttClient__P1294, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function azureiot_createMQTTClient__P2283(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.iotHubHostName___3444 = undefined;
    s.deviceId___3447 = undefined;
    s.connStringParts___3455 = undefined;
    s.sasToken___3458 = undefined;
    s.opts___3474 = undefined;
    s.c___3494 = undefined;
    s.tmp_0 = control_allocateEventSource__P332_mk(s);
    s.callLocIdx = 393; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    globals._messageBusId___2278 = (r0);
    s.tmp_0 = azureiot_hubName__P1295_mk(s);
    s.callLocIdx = 394; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.iotHubHostName___3444 = (r0);
    s.tmp_0 = azureiot_hubDeviceId__P1296_mk(s);
    s.callLocIdx = 395; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.deviceId___3447 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.iotHubHostName___3444);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.deviceId___3447);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.throwValue("invalid connection string");
  case 3:
  case 4:
    s.tmp_4 = azureiot_parseConnectionString__P2286_mk(s);
    s.callLocIdx = 396; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    s.connStringParts___3455 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.connStringParts___3455, "SharedAccessSignature");
    s.sasToken___3458 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.sasToken___3458);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = azureiot_generateSasToken__P2282_mk(s);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_5 = r0;
    if ((s.iotHubHostName___3444) && (s.iotHubHostName___3444).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.iotHubHostName___3444);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.iotHubHostName___3444) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "/devices/");
    s.tmp_3 = r0;
    if ((s.deviceId___3447) && (s.deviceId___3447).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.deviceId___3447);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.deviceId___3447) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_7);
    s.tmp_2.arg0 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.connStringParts___3455, "SharedAccessKey");
    s.tmp_2.arg1 = r0;
    s.tmp_2.arg2 = 9000000000;
    s.callLocIdx = 397; s.pc = 11; return s.tmp_2;
  case 11:
    r0 = s.retval;
    s.sasToken___3458 = (r0);
  case 5:
  case 6:
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "host", s.iotHubHostName___3444);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_5 = r0;
    if ((s.iotHubHostName___3444) && (s.iotHubHostName___3444).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.iotHubHostName___3444);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.iotHubHostName___3444) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "/");
    s.tmp_3 = r0;
    if ((s.deviceId___3447) && (s.deviceId___3447).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.deviceId___3447);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.deviceId___3447) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_7);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "/?api-version=2018-06-30");
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "username", s.tmp_1);
    if ((s.sasToken___3458) && (s.sasToken___3458).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.sasToken___3458);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.sasToken___3458) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat("SharedAccessSignature ", s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "password", s.tmp_8);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "clientId", s.deviceId___3447);
    s.opts___3474 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(mqtt_Client__C1276_VT);
    s.tmp_0 = r0;
    s.tmp_1 = mqtt_Client_constructor__P1280_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.opts___3474;
    s.callLocIdx = 398; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    s.c___3494 = (s.tmp_0);
    s.tmp_0 = mqtt_EventEmitter_on__P1275_mk(s);
    s.tmp_0.arg0 = s.c___3494;
    s.tmp_0.arg1 = "connected";
    s.tmp_0.arg2 = azureiot_createMQTTClient_inline__P3500;
    s.callLocIdx = 400; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_on__P1275_mk(s);
    s.tmp_0.arg0 = s.c___3494;
    s.tmp_0.arg1 = "disconnected";
    s.tmp_0.arg2 = azureiot_createMQTTClient_inline__P3508;
    s.callLocIdx = 402; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_on__P1275_mk(s);
    s.tmp_0.arg0 = s.c___3494;
    s.tmp_0.arg1 = "error";
    s.tmp_0.arg2 = azureiot_createMQTTClient_inline__P3516;
    s.callLocIdx = 404; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_on__P1275_mk(s);
    s.tmp_0.arg0 = s.c___3494;
    s.tmp_0.arg1 = "receive";
    s.tmp_0.arg2 = azureiot_createMQTTClient_inline__P3530;
    s.callLocIdx = 408; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.tmp_0 = mqtt_Client_connect__P1282_mk(s);
    s.tmp_0.arg0 = s.c___3494;
    s.callLocIdx = 409; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    r0 = s.c___3494;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient__P2283.info = {"start":1413,"length":1623,"line":49,"column":4,"endLine":88,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"createMQTTClient","argumentNames":[]}

function azureiot_createMQTTClient__P2283_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient__P2283, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  iotHubHostName___3444: undefined,
  deviceId___3447: undefined,
  connStringParts___3455: undefined,
  sasToken___3458: undefined,
  opts___3474: undefined,
  c___3494: undefined,
} }





function azureiot_createMQTTClient_inline__P3500(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = azureiot_log__P2281_mk(s);
    s.tmp_0.arg0 = "connected";
    s.callLocIdx = 399; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim.control.raiseEvent(globals._messageBusId___2278, 1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3500.info = {"start":2421,"length":117,"line":71,"column":26,"endLine":74,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":[]}

function azureiot_createMQTTClient_inline__P3500_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3500, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_createMQTTClient_inline__P3508(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = azureiot_log__P2281_mk(s);
    s.tmp_0.arg0 = "disconnected";
    s.callLocIdx = 401; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim.control.raiseEvent(globals._messageBusId___2278, 2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3508.info = {"start":2570,"length":123,"line":75,"column":29,"endLine":78,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":[]}

function azureiot_createMQTTClient_inline__P3508_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3508, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_createMQTTClient_inline__P3516(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_log__P2281_mk(s);
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("error: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 403; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim.control.raiseEvent(globals._messageBusId___2278, 3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3516.info = {"start":2718,"length":120,"line":79,"column":22,"endLine":82,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["msg"]}

function azureiot_createMQTTClient_inline__P3516_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3516, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_createMQTTClient_inline__P3530(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_log__P2281_mk(s);
    s.tmp_7 = if_topic_1_mk(s);
    s.tmp_7.arg0 = s.arg0;
    if (!s.tmp_7.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_7.arg0, "topic");
    } else {
      s.tmp_7.fn = s.tmp_7.arg0.vtable.iface["topic"];
      if (s.tmp_7.fn == null) { s.retval = s.tmp_7.arg0.fields["topic"]; }
      else if (!s.tmp_7.fn.isGetter) { s.retval = bind(s.tmp_7); }
     else { s.callLocIdx = 405; s.pc = 2; return s.tmp_7; }
    }
  case 2:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("unhandled msg: ", s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " / ");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_11 = if_content_1_mk(s);
    s.tmp_11.arg0 = s.arg0;
    if (!s.tmp_11.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_11.arg0, "content");
    } else {
      s.tmp_11.fn = s.tmp_11.arg0.vtable.iface["content"];
      if (s.tmp_11.fn == null) { s.retval = s.tmp_11.arg0.fields["content"]; }
      else if (!s.tmp_11.fn.isGetter) { s.retval = bind(s.tmp_11); }
     else { s.callLocIdx = 406; s.pc = 6; return s.tmp_11; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_8);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 407; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3530.info = {"start":2865,"length":124,"line":83,"column":24,"endLine":85,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["packet"]}

function azureiot_createMQTTClient_inline__P3530_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3530, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  arg0: undefined,
} }





function mqtt_Client_connect__P1282(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_5 = if_host_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_5.arg0 = r0;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "host");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["host"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["host"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 319; s.pc = 4; return s.tmp_5; }
    }
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("Connecting to ", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    s.tmp_8 = if_port_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_8.arg0 = r0;
    if (!s.tmp_8.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "port");
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["port"];
      if (s.tmp_8.fn == null) { s.retval = s.tmp_8.arg0.fields["port"]; }
      else if (!s.tmp_8.fn.isGetter) { s.retval = bind(s.tmp_8); }
     else { s.callLocIdx = 320; s.pc = 6; return s.tmp_8; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_6);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 321; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = s.arg0.fields["wdId"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === -123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3576);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.arg0);
    s.tmp_3 = r0 = s.arg0;
    s.tmp_5 = setInterval__P422_mk(s);
    s.tmp_5.arg0 = s.tmp_2;
    s.tmp_5.arg1 = 50000;
    s.callLocIdx = 326; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["wdId"] = (s.tmp_4);
  case 1:
  case 2:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = net_Net_createSocket__P1173_mk(s);
    r0 = s.arg0.fields["net"];
    s.tmp_2.arg0 = r0;
    s.tmp_3 = if_host_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_3.arg0 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "host");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["host"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["host"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 327; s.pc = 10; return s.tmp_3; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.tmp_4 = if_port_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_4.arg0 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "port");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["port"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["port"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 328; s.pc = 11; return s.tmp_4; }
    }
  case 11:
    r0 = s.retval;
    s.tmp_2.arg2 = r0;
    s.tmp_2.arg3 = true;
    s.callLocIdx = 329; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["sct"] = (s.tmp_1);
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3603);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onOpen_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onOpen"), 2);
      s.callLocIdx = 334; s.pc = 12; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onOpen"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onOpen"], 2); s.callLocIdx = 334; s.pc = 12; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 334; s.pc = 12; return s.tmp_1;; }
     else { s.callLocIdx = 334; s.pc = 12; return s.tmp_1; }
    }
  case 12:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3614);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onMessage_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onMessage"), 2);
      s.callLocIdx = 337; s.pc = 13; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onMessage"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onMessage"], 2); s.callLocIdx = 337; s.pc = 13; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 337; s.pc = 13; return s.tmp_1;; }
     else { s.callLocIdx = 337; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3632);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onError_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onError"), 2);
      s.callLocIdx = 340; s.pc = 14; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onError"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onError"], 2); s.callLocIdx = 340; s.pc = 14; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 340; s.pc = 14; return s.tmp_1;; }
     else { s.callLocIdx = 340; s.pc = 14; return s.tmp_1; }
    }
  case 14:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3639);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onClose_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onClose"), 2);
      s.callLocIdx = 343; s.pc = 15; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onClose"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onClose"], 2); s.callLocIdx = 343; s.pc = 15; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 343; s.pc = 15; return s.tmp_1;; }
     else { s.callLocIdx = 343; s.pc = 15; return s.tmp_1; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_0 = if_connect_1_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_0.arg0 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "connect"), 1);
      s.callLocIdx = 344; s.pc = 16; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["connect"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["connect"], 1); s.callLocIdx = 344; s.pc = 16; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 344; s.pc = 16; return s.tmp_0;; }
     else { s.callLocIdx = 344; s.pc = 16; return s.tmp_0; }
    }
  case 16:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect__P1282.info = {"start":12400,"length":1345,"line":395,"column":8,"endLine":428,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"connect","argumentNames":["this"]}

function mqtt_Client_connect__P1282_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect__P1282, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
} }





function mqtt_Client_connect_inline__P3576(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = s.caps[0].fields["connected"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_3.arg0 = s.caps[0];
    s.tmp_3.arg1 = "disconnected";
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 322; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "error";
    s.tmp_0.arg2 = "No connection. Retrying.";
    s.callLocIdx = 323; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = mqtt_Client_disconnect__P1281_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 324; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = mqtt_Client_connect__P1282_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 325; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3576.info = {"start":12595,"length":296,"line":398,"column":40,"endLine":405,"endColumn":17,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3576_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3576, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function mqtt_Client_connect_inline__P3603(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "Network connection established.";
    s.callLocIdx = 330; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "connect";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 331; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = mqtt_Client_send__P2273_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_1 = mqtt_Protocol_createConnect__P1267_mk(s);
    r0 = s.caps[0].fields["opt"];
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 332; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 333; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3603.info = {"start":13054,"length":181,"line":409,"column":28,"endLine":413,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3603_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3603, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function mqtt_Client_connect_inline__P3614(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("incoming ", s.tmp_3);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " bytes");
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 335; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = mqtt_Client_handleMessage__P2274_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 336; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3614.info = {"start":13269,"length":135,"line":414,"column":31,"endLine":417,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["msg"]}

function mqtt_Client_connect_inline__P3614_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3614, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function mqtt_Client_connect_inline__P3632(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "Error.";
    s.callLocIdx = 338; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "error";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 339; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3632.info = {"start":13436,"length":93,"line":418,"column":29,"endLine":421,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3632_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3632, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function mqtt_Client_connect_inline__P3639(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "Close.";
    s.callLocIdx = 341; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "disconnected";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 342; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = (s.caps[0]).fields["connected"] = (false);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3639.info = {"start":13561,"length":140,"line":422,"column":29,"endLine":426,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3639_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3639, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function mqtt_Client_handleMessage__P2274(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___3664 = undefined;
    s.payloadOff___3666 = undefined;
    s.payloadEnd___3689 = undefined;
    s.cmd___3700 = undefined;
    s.controlPacketType___3703 = undefined;
    s.payload___3706 = undefined;
    s.returnCode___3721 = undefined;
    s.connectionError___3741 = undefined;
    s.message___3753 = undefined;
    s.handled___3764 = undefined;
    s.cleanup___3765 = undefined;
    s.h___3770 = undefined;
    s.unnamed114___U12 = undefined;
    s.unnamed115___U13 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    r0 = s.arg0.fields["buf"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = helpers_bufferConcat__P184_mk(s);
    r0 = s.arg0.fields["buf"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 356; s.pc = 39; return s.tmp_1;
  case 39:
    r0 = s.retval;
    s.arg1 = (r0);
  case 1:
  case 2:
    r0 = (s.arg0).fields["buf"] = (s.arg1);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    { step = 38; continue; }
  case 3:
  case 4:
    r0 = pxsim.BufferMethods.getByte(s.arg1, 1);
    s.len___3664 = (r0);
    s.payloadOff___3666 = (2);
    r0 = (s.len___3664 & 128);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 < 3);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
    { step = 38; continue; }
  case 5:
  case 6:
    r0 = pxsim.BufferMethods.getByte(s.arg1, 2);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 128);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
    s.tmp_5 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.tmp_5.arg1 = "error";
    s.tmp_5.arg2 = "too large packet.";
    s.callLocIdx = 357; s.pc = 40; return s.tmp_5;
  case 40:
    r0 = s.retval;
    r0 = (s.arg0).fields["buf"] = (null);
    { step = 38; continue; }
  case 7:
  case 8:
    r0 = pxsim.BufferMethods.getByte(s.arg1, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 << 7);
    s.tmp_0 = r0;
    r0 = (s.len___3664 & 127);
    s.tmp_2 = r0;
    r0 = (s.tmp_0 | s.tmp_2);
    s.len___3664 = (r0);
    r0 = (s.payloadOff___3666 + 1);
    s.payloadOff___3666 = (r0);
  case 9:
  case 10:
    r0 = (s.payloadOff___3666 + s.len___3664);
    s.payloadEnd___3689 = (r0);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < s.payloadEnd___3689);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    { step = 38; continue; }
  case 11:
  case 12:
    r0 = (s.arg0).fields["buf"] = (null);
    r0 = pxsim.BufferMethods.getByte(s.arg1, 0);
    s.cmd___3700 = (r0);
    r0 = (s.cmd___3700 >> 4);
    s.controlPacketType___3703 = (r0);
    s.tmp_0 = r0 = s.arg1;
    s.tmp_1 = r0 = s.payloadOff___3666;
    r0 = (s.payloadEnd___3689 - s.payloadOff___3666);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, s.tmp_1, s.tmp_2);
    s.payload___3706 = (r0);
    s.tmp_0 = r0 = s.controlPacketType___3703;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 31; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 32; continue; }
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 33; continue; }
    r0 = s.tmp_0;
    { step = 34; continue; }
  case 13:
    r0 = pxsim.BufferMethods.getByte(s.payload___3706, 1);
    s.returnCode___3721 = (r0);
    r0 = (s.returnCode___3721 === 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_1 = mqtt_Client_log__P2270_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "MQTT connection accepted.";
    s.callLocIdx = 358; s.pc = 41; return s.tmp_1;
  case 41:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "connected";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 359; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
    r0 = (s.arg0).fields["connected"] = (true);
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_handleMessage_inline__P3736);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = setInterval__P422_mk(s);
    s.tmp_3.arg0 = s.tmp_0;
    s.tmp_3.arg1 = 40000;
    s.callLocIdx = 361; s.pc = 43; return s.tmp_3;
  case 43:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["piId"] = (s.tmp_2);
    { step = 15; continue; }
  case 14:
    s.tmp_0 = mqtt_Client_describe__P2271_mk(s);
    s.tmp_0.arg0 = s.returnCode___3721;
    s.callLocIdx = 362; s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
    s.connectionError___3741 = (r0);
    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if ((s.connectionError___3741) && (s.connectionError___3741).vtable) {
    setupResume(s, 46);
    pxsim_String__stringConv(s.connectionError___3741);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.connectionError___3741) + ""; }
  case 46:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("MQTT connection error: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 363; s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "error";
    s.tmp_0.arg2 = s.connectionError___3741;
    s.callLocIdx = 364; s.pc = 47; return s.tmp_0;
  case 47:
    r0 = s.retval;
  case 15:
    { step = 35; continue; }
  case 16:
    s.tmp_0 = mqtt_Protocol_parsePublish__P1270_mk(s);
    s.tmp_0.arg0 = s.cmd___3700;
    s.tmp_0.arg1 = s.payload___3706;
    s.callLocIdx = 365; s.pc = 48; return s.tmp_0;
  case 48:
    r0 = s.retval;
    s.message___3753 = (r0);
    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_3 = if_topic_1_mk(s);
    s.tmp_3.arg0 = s.message___3753;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "topic");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["topic"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["topic"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 366; s.pc = 50; return s.tmp_3; }
    }
  case 50:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 51);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 51:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("incoming: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 367; s.pc = 49; return s.tmp_0;
  case 49:
    r0 = s.retval;
    s.handled___3764 = (false);
    s.cleanup___3765 = (false);
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
    s.h___3770 = (undefined);
    r0 = s.arg0.fields["mqttHandlers"];
    s.unnamed114___U12 = (r0);
    s.unnamed115___U13 = (0);
  case 17:
    s.tmp_0 = r0 = s.unnamed115___U13;
    r0 = pxsim_Array__length(s.unnamed114___U12);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 22; continue; }
    r0 = pxsim_Array__getAt(s.unnamed114___U12, s.unnamed115___U13);
    s.h___3770 = (r0);
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_5 = if_topic_1_mk(s);
    s.tmp_5.arg0 = s.message___3753;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "topic");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["topic"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["topic"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 368; s.pc = 53; return s.tmp_5; }
    }
  case 53:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = 0;
    r0 = s.h___3770.fields["topic"];
    s.tmp_6 = r0;
    r0 = pxsim_String_.length(s.tmp_6);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 369; s.pc = 52; return s.tmp_4;
  case 52:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.h___3770.fields["topic"];
    s.tmp_7 = r0;
    r0 = (s.tmp_3 == s.tmp_7);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
    s.tmp_8 = if_handler_2_mk(s);
    s.tmp_8.arg0 = s.h___3770;
    s.tmp_8.arg1 = s.message___3753;
    if (!s.tmp_8.arg0.vtable.iface) {
      setupLambda(s.tmp_8, pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "handler"), 2);
      s.callLocIdx = 370; s.pc = 54; return s.tmp_8;
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["handler"];
      if (s.tmp_8.fn == null) { setupLambda(s.tmp_8, s.tmp_8.arg0.fields["handler"], 2); s.callLocIdx = 370; s.pc = 54; return s.tmp_8; }
      else if (s.tmp_8.fn.isGetter) { s.tmp_8.stage2Call = true; s.callLocIdx = 370; s.pc = 54; return s.tmp_8;; }
     else { s.callLocIdx = 370; s.pc = 54; return s.tmp_8; }
    }
  case 54:
    r0 = s.retval;
    s.handled___3764 = (true);
    r0 = s.h___3770.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = (s.h___3770).fields["status"] = (2);
    s.cleanup___3765 = (true);
  case 18:
  case 19:
  case 20:
  case 21:
    r0 = (s.unnamed115___U13 + 1);
    s.unnamed115___U13 = (r0);
    { step = 17; continue; }
  case 22:
    s.unnamed114___U12 = (undefined);
    r0 = pxsim_numops_toBoolDecr(s.cleanup___3765);
    if (!r0) { step = 23; continue; }
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = helpers_arrayFilter__P110_mk(s);
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = mqtt_Client_handleMessage_inline__P3806;
    s.callLocIdx = 371; s.pc = 55; return s.tmp_2;
  case 55:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["mqttHandlers"] = (s.tmp_1);
  case 23:
  case 24:
  case 25:
  case 26:
    r0 = pxsim_numops_toBoolDecr(s.handled___3764);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    s.tmp_2 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "receive";
    s.tmp_2.arg2 = s.message___3753;
    s.callLocIdx = 372; s.pc = 56; return s.tmp_2;
  case 56:
    r0 = s.retval;
  case 27:
  case 28:
    s.tmp_2 = if_qos_1_mk(s);
    s.tmp_2.arg0 = s.message___3753;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "qos");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["qos"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["qos"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 373; s.pc = 57; return s.tmp_2; }
    }
  case 57:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
    r0 = pxsim_pxtcore_mkAction(2, mqtt_Client_handleMessage_inline__P3820);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 1, s.message___3753);
    s.tmp_4 = setTimeout__P424_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    s.tmp_4.arg1 = 0;
    s.callLocIdx = 377; s.pc = 58; return s.tmp_4;
  case 58:
    r0 = s.retval;
  case 29:
  case 30:
    { step = 35; continue; }
  case 31:
  case 32:
  case 33:
    { step = 35; continue; }
  case 34:
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "error";
    if ((s.controlPacketType___3703) && (s.controlPacketType___3703).vtable) {
    setupResume(s, 60);
    pxsim_String__stringConv(s.controlPacketType___3703);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.controlPacketType___3703) + ""; }
  case 60:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("MQTT unexpected packet type: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, ".");
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 378; s.pc = 59; return s.tmp_0;
  case 59:
    r0 = s.retval;
  case 35:
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.payloadEnd___3689);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 36; continue; }
    s.tmp_2 = mqtt_Client_handleMessage__P2274_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.arg1, s.payloadEnd___3689, -1);
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 379; s.pc = 61; return s.tmp_2;
  case 61:
    r0 = s.retval;
  case 36:
  case 37:
  case 38:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage__P2274.info = {"start":16011,"length":3559,"line":482,"column":8,"endLine":564,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"handleMessage","argumentNames":["this","data"]}

function mqtt_Client_handleMessage__P2274_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage__P2274, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  len___3664: undefined,
  payloadOff___3666: undefined,
  payloadEnd___3689: undefined,
  cmd___3700: undefined,
  controlPacketType___3703: undefined,
  payload___3706: undefined,
  returnCode___3721: undefined,
  connectionError___3741: undefined,
  message___3753: undefined,
  handled___3764: undefined,
  cleanup___3765: undefined,
  h___3770: undefined,
  unnamed114___U12: undefined,
  unnamed115___U13: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_handleMessage_inline__P3736(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = mqtt_Client_ping__P2275_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 360; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage_inline__P3736.info = {"start":17484,"length":17,"line":521,"column":48,"endLine":521,"endColumn":65,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_handleMessage_inline__P3736_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage_inline__P3736, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function mqtt_Client_handleMessage_inline__P3806(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["status"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 != 2);
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage_inline__P3806.info = {"start":18758,"length":39,"line":544,"column":73,"endLine":544,"endColumn":112,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["h"]}

function mqtt_Client_handleMessage_inline__P3806_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage_inline__P3806, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function mqtt_Client_handleMessage_inline__P3820(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_1 = if_pid_1_mk(s);
    s.tmp_1.arg0 = s.caps[1];
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "pid");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["pid"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["pid"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 374; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = mqtt_Client_send__P2273_mk(s);
    s.tmp_3.arg0 = s.caps[0];
    s.tmp_4 = mqtt_Protocol_createPubAck__P1271_mk(s);
    s.tmp_4.arg0 = s.tmp_2;
    s.callLocIdx = 375; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 376; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage_inline__P3820.info = {"start":18988,"length":113,"line":549,"column":35,"endLine":551,"endColumn":25,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_handleMessage_inline__P3820_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage_inline__P3820, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
} }





function mqtt_Protocol_createPubAck__P1271(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = mqtt_Protocol_createPacket__P2265_mk(s);
    s.tmp_0.arg0 = 64;
    s.tmp_1 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_2 = mqtt_Protocol_getBytes__P2263_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 288; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 289; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 290; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPubAck__P1271.info = {"start":7848,"length":182,"line":249,"column":8,"endLine":253,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPubAck","argumentNames":["pid"]}

function mqtt_Protocol_createPubAck__P1271_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPubAck__P1271, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function setTimeout__P424(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = control_setInterval__P352_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 1;
    s.callLocIdx = 111; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
setTimeout__P424.info = {"start":610,"length":139,"line":26,"column":0,"endLine":28,"endColumn":1,"fileName":"pxt_modules/base/scheduling.ts","functionName":"setTimeout","argumentNames":["func","delay"]}

function setTimeout__P424_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: setTimeout__P424, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_setInterval__P352(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.interval___3872 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 < 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = 0;
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_numops_toBoolDecr(globals._intervals___2172);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__mk();
    globals._intervals___2172 = (r0);
  case 5:
  case 6:
    r0 = pxsim_pxtcore_mkClassInstance(control_Interval__C2173_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_Interval_constructor__P2176_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.tmp_1.arg3 = s.arg2;
    s.callLocIdx = 47; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.interval___3872 = (s.tmp_0);
    r0 = s.interval___3872.fields["id"];
  case 7:
    return leave(s, r0)
  default: oops()
} } }
control_setInterval__P352.info = {"start":1554,"length":266,"line":54,"column":4,"endLine":59,"endColumn":5,"fileName":"pxt_modules/base/interval.ts","functionName":"setInterval","argumentNames":["func","delay","mode"]}

function control_setInterval__P352_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_setInterval__P352, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  interval___3872: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function control_Interval_constructor__P2176(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C2173_VT)) failedCast(r0);
    r0 = pxsim_Array__length(globals._intervals___2172);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = r0 = globals._intervals___2172;
    r0 = pxsim_Array__length(globals._intervals___2172);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 - 1);
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_3, s.tmp_4);
    r0 = r0.fields["id"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
  case 2:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = (s.arg0).fields["id"] = (s.tmp_6);
    r0 = (s.arg0).fields["func"] = (s.arg1);
    r0 = (s.arg0).fields["delay"] = (s.arg2);
    r0 = (s.arg0).fields["mode"] = (s.arg3);
    r0 = pxsim_Array__push(globals._intervals___2172, s.arg0);
    r0 = pxsim_pxtcore_mkAction(1, control_Interval_inline__P3915);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.control.runInParallel(s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_constructor__P2176.info = {"start":283,"length":367,"line":15,"column":8,"endLine":24,"endColumn":9,"fileName":"pxt_modules/base/interval.ts","functionName":"inline","argumentNames":["this","func","delay","mode"]}

function control_Interval_constructor__P2176_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_constructor__P2176, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function control_Interval_inline__P3915(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_Interval_work__P2174_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 42; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_inline__P3915.info = {"start":621,"length":17,"line":23,"column":34,"endLine":23,"endColumn":51,"fileName":"pxt_modules/base/interval.ts","functionName":"inline","argumentNames":[]}

function control_Interval_inline__P3915_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_inline__P3915, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function control_Interval_work__P2174(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C2173_VT)) failedCast(r0);
    r0 = s.arg0.fields["mode"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 12; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["delay"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = pause__P411_mk(s);
    r0 = s.arg0.fields["delay"];
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 43; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = if_func_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "func"), 1);
      s.callLocIdx = 44; s.pc = 14; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["func"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["func"], 1); s.callLocIdx = 44; s.pc = 14; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 44; s.pc = 14; return s.tmp_2;; }
     else { s.callLocIdx = 44; s.pc = 14; return s.tmp_2; }
    }
  case 14:
    r0 = s.retval;
  case 5:
  case 6:
    { step = 12; continue; }
  case 7:
  case 8:
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_2 = pause__P411_mk(s);
    r0 = s.arg0.fields["delay"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 45; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_2 = if_func_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "func"), 1);
      s.callLocIdx = 46; s.pc = 16; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["func"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["func"], 1); s.callLocIdx = 46; s.pc = 16; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 46; s.pc = 16; return s.tmp_2;; }
     else { s.callLocIdx = 46; s.pc = 16; return s.tmp_2; }
    }
  case 16:
    r0 = s.retval;
  case 9:
  case 10:
    { step = 8; continue; }
  case 11:
  case 12:
    r0 = pxsim_Array_.removeElement(globals._intervals___2172, s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_work__P2174.info = {"start":660,"length":823,"line":26,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/base/interval.ts","functionName":"work","argumentNames":["this"]}

function control_Interval_work__P2174_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_work__P2174, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function helpers_arrayFilter__P110(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___3950 = undefined;
    s.len___3952 = undefined;
    s.i___3955 = undefined;
    s.v___3960 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___3950 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___3952 = (r0);
    s.i___3955 = (0);
  case 1:
    r0 = (s.i___3955 < s.len___3952);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___3955);
    s.v___3960 = (r0);
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___3960;
    s.tmp_1.arg1 = s.i___3955;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 8; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__push(s.res___3950, s.v___3960);
  case 2:
  case 3:
    r0 = (s.i___3955 + 1);
    s.i___3955 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = s.res___3950;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFilter__P110.info = {"start":7695,"length":317,"line":261,"column":4,"endLine":269,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayFilter","argumentNames":["arr","callbackfn"]}

function helpers_arrayFilter__P110_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFilter__P110, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  res___3950: undefined,
  len___3952: undefined,
  i___3955: undefined,
  v___3960: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_stringSlice__P119(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___3977 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.length(s.arg0);
    s.len___3977 = (r0);
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = Math_max__P130_mk(s);
    r0 = (s.len___3977 + s.arg1);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.callLocIdx = 12; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.arg1 = (r0);
  case 1:
  case 2:
    r0 = (s.arg2 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.arg2 = (s.len___3977);
    { step = 6; continue; }
  case 3:
    r0 = (s.arg2 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.arg2 = (0);
  case 4:
  case 5:
  case 6:
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = (s.len___3977 + s.arg2);
    s.arg2 = (r0);
  case 7:
  case 8:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.arg2 - s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_String_.substr(s.tmp_0, s.tmp_1, s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
helpers_stringSlice__P119.info = {"start":11496,"length":440,"line":384,"column":4,"endLine":402,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"stringSlice","argumentNames":["s","start","end"]}

function helpers_stringSlice__P119_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringSlice__P119, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  len___3977: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Protocol_parsePublish__P1270(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.qos___4011 = undefined;
    s.topicLength___4016 = undefined;
    s.variableLength___4021 = undefined;
    s.message___4031 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 & 6);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 1);
    s.qos___4011 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.arg1, 9, 0);
    s.topicLength___4016 = (r0);
    r0 = (2 + s.topicLength___4016);
    s.variableLength___4021 = (r0);
    r0 = (s.qos___4011 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.variableLength___4021 + 2);
    s.variableLength___4021 = (r0);
  case 1:
  case 2:
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.arg1, 2, s.topicLength___4016);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "topic", s.tmp_1);
    r0 = pxsim.BufferMethods.slice(s.arg1, s.variableLength___4021, -1);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "content", s.tmp_3);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "qos", s.qos___4011);
    r0 = (s.arg0 & 1);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "retain", s.tmp_4);
    s.message___4031 = (s.tmp_0);
    r0 = (s.qos___4011 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = if_pid_2_mk(s);
    s.tmp_1.arg0 = s.message___4031;
    s.tmp_2 = r0 = s.arg1;
    r0 = (s.variableLength___4021 - 2);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 9, s.tmp_3);
    s.tmp_1.arg1 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_1.arg0, "pid", s.tmp_1.arg1);
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["set/pid"];
      if (s.tmp_1.fn === null) { s.tmp_1.arg0.fields["pid"] = s.tmp_1.arg1; }
      else if (s.tmp_1.fn === undefined) { failedCast(s.tmp_1.arg0) } 
     else { s.callLocIdx = 287; s.pc = 5; return s.tmp_1; }
    }
  case 5:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = s.message___4031;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_parsePublish__P1270.info = {"start":6945,"length":733,"line":223,"column":8,"endLine":243,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"parsePublish","argumentNames":["cmd","payload"]}

function mqtt_Protocol_parsePublish__P1270_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_parsePublish__P1270, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  qos___4011: undefined,
  topicLength___4016: undefined,
  variableLength___4021: undefined,
  message___4031: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_describe__P2271(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.error___4059 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.error___4059 = ("Connection refused, ");
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 1:
    if ((s.error___4059) && (s.error___4059).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.error___4059);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4059) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "unacceptable protocol version.");
    s.error___4059 = (r0);
    { step = 7; continue; }
  case 2:
    if ((s.error___4059) && (s.error___4059).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.error___4059);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4059) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "identifier rejected.");
    s.error___4059 = (r0);
    { step = 7; continue; }
  case 3:
    if ((s.error___4059) && (s.error___4059).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.error___4059);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4059) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "server unavailable.");
    s.error___4059 = (r0);
    { step = 7; continue; }
  case 4:
    if ((s.error___4059) && (s.error___4059).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.error___4059);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4059) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "bad user name or password.");
    s.error___4059 = (r0);
    { step = 7; continue; }
  case 5:
    if ((s.error___4059) && (s.error___4059).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.error___4059);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4059) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "not authorized.");
    s.error___4059 = (r0);
    { step = 7; continue; }
  case 6:
    if ((s.error___4059) && (s.error___4059).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.error___4059);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4059) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("unknown return code: ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ".");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.error___4059 = (r0);
  case 7:
    r0 = s.error___4059;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_describe__P2271.info = {"start":10738,"length":991,"line":350,"column":8,"endLine":373,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"describe","argumentNames":["code"]}

function mqtt_Client_describe__P2271_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_describe__P2271, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  error___4059: undefined,
  arg0: undefined,
} }





function mqtt_Client_ping__P2275(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    s.tmp_0 = mqtt_Client_send__P2273_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = mqtt_Protocol_createPingReq__P1268_mk(s);
    s.callLocIdx = 380; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 381; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = mqtt_EventEmitter_emit__P2266_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "debug";
    s.tmp_0.arg2 = "Sent: Ping request.";
    s.callLocIdx = 382; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_ping__P2275.info = {"start":19580,"length":130,"line":566,"column":8,"endLine":569,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"ping","argumentNames":["this"]}

function mqtt_Client_ping__P2275_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_ping__P2275, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_createPingReq__P1268(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, 192);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    s.tmp_1 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 280; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPingReq__P1268.info = {"start":6232,"length":107,"line":205,"column":8,"endLine":207,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPingReq","argumentNames":[]}

function mqtt_Protocol_createPingReq__P1268_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPingReq__P1268, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function mqtt_Protocol_createConnect__P1267(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.protocolName___4124 = undefined;
    s.nums___4128 = undefined;
    s.payload___4143 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_0.arg0 = "MQTT";
    s.callLocIdx = 257; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.protocolName___4124 = (r0);
    r0 = pxsim.control.createBuffer(4);
    s.nums___4128 = (r0);
    r0 = pxsim.BufferMethods.setByte(s.nums___4128, 0, 4);
    s.tmp_0 = r0 = s.nums___4128;
    s.tmp_2 = mqtt_Protocol_createConnectFlags__P2262_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 258; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 1, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.nums___4128, 2, 0);
    r0 = pxsim.BufferMethods.setByte(s.nums___4128, 3, 60);
    s.tmp_0 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_1 = if_clientId_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "clientId");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["clientId"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["clientId"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 259; s.pc = 10; return s.tmp_1; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 260; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.payload___4143 = (r0);
    s.tmp_1 = if_will_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "will");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["will"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["will"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 261; s.pc = 11; return s.tmp_1; }
    }
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2.arg0 = s.payload___4143;
    s.tmp_3 = helpers_bufferConcat__P184_mk(s);
    s.tmp_4 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_5 = if_topic_1_mk(s);
    s.tmp_6 = if_will_1_mk(s);
    s.tmp_6.arg0 = s.arg0;
    if (!s.tmp_6.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_6.arg0, "will");
    } else {
      s.tmp_6.fn = s.tmp_6.arg0.vtable.iface["will"];
      if (s.tmp_6.fn == null) { s.retval = s.tmp_6.arg0.fields["will"]; }
      else if (!s.tmp_6.fn.isGetter) { s.retval = bind(s.tmp_6); }
     else { s.callLocIdx = 262; s.pc = 16; return s.tmp_6; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "topic");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["topic"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["topic"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 263; s.pc = 15; return s.tmp_5; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 264; s.pc = 14; return s.tmp_4;
  case 14:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_7 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_8 = if_message_1_mk(s);
    s.tmp_9 = if_will_1_mk(s);
    s.tmp_9.arg0 = s.arg0;
    if (!s.tmp_9.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_9.arg0, "will");
    } else {
      s.tmp_9.fn = s.tmp_9.arg0.vtable.iface["will"];
      if (s.tmp_9.fn == null) { s.retval = s.tmp_9.arg0.fields["will"]; }
      else if (!s.tmp_9.fn.isGetter) { s.retval = bind(s.tmp_9); }
     else { s.callLocIdx = 265; s.pc = 19; return s.tmp_9; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_8.arg0 = r0;
    if (!s.tmp_8.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "message");
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["message"];
      if (s.tmp_8.fn == null) { s.retval = s.tmp_8.arg0.fields["message"]; }
      else if (!s.tmp_8.fn.isGetter) { s.retval = bind(s.tmp_8); }
     else { s.callLocIdx = 266; s.pc = 18; return s.tmp_8; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_7.arg0 = r0;
    s.callLocIdx = 267; s.pc = 17; return s.tmp_7;
  case 17:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 268; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 269; s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.payload___4143 = (r0);
  case 1:
  case 2:
    s.tmp_1 = if_username_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "username");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["username"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["username"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 270; s.pc = 20; return s.tmp_1; }
    }
  case 20:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2.arg0 = s.payload___4143;
    s.tmp_3 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_4 = if_username_1_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "username");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["username"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["username"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 271; s.pc = 23; return s.tmp_4; }
    }
  case 23:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 272; s.pc = 22; return s.tmp_3;
  case 22:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 273; s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    s.payload___4143 = (r0);
    s.tmp_1 = if_password_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "password");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["password"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["password"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 274; s.pc = 24; return s.tmp_1; }
    }
  case 24:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2.arg0 = s.payload___4143;
    s.tmp_3 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_4 = if_password_1_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "password");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["password"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["password"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 275; s.pc = 27; return s.tmp_4; }
    }
  case 27:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 276; s.pc = 26; return s.tmp_3;
  case 26:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 277; s.pc = 25; return s.tmp_2;
  case 25:
    r0 = s.retval;
    s.payload___4143 = (r0);
  case 3:
  case 4:
  case 5:
  case 6:
    s.tmp_0 = mqtt_Protocol_createPacket__P2265_mk(s);
    s.tmp_0.arg0 = 16;
    s.tmp_1 = helpers_bufferConcat__P184_mk(s);
    s.tmp_1.arg0 = s.protocolName___4124;
    s.tmp_1.arg1 = s.nums___4128;
    s.callLocIdx = 278; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.payload___4143;
    s.callLocIdx = 279; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createConnect__P1267.info = {"start":5052,"length":1031,"line":170,"column":8,"endLine":200,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createConnect","argumentNames":["options"]}

function mqtt_Protocol_createConnect__P1267_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createConnect__P1267, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  protocolName___4124: undefined,
  nums___4128: undefined,
  payload___4143: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_createConnectFlags__P2262(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.flags___4184 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.flags___4184 = (0);
    s.tmp_1 = if_username_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "username");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["username"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["username"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 240; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 128;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = (s.flags___4184 | s.tmp_2);
    s.flags___4184 = (r0);
    s.tmp_1 = if_username_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "username");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["username"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["username"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 241; s.pc = 14; return s.tmp_1; }
    }
  case 14:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = if_password_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "password");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["password"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["password"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 242; s.pc = 15; return s.tmp_2; }
    }
  case 15:
    r0 = s.retval;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    r0 = 64;
    { step = 6; continue; }
  case 5:
    r0 = 0;
  case 6:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = (s.flags___4184 | s.tmp_4);
    s.flags___4184 = (r0);
    r0 = (s.flags___4184 | 2);
    s.flags___4184 = (r0);
    s.tmp_1 = if_will_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "will");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["will"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["will"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 243; s.pc = 16; return s.tmp_1; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    r0 = (s.flags___4184 | 4);
    s.flags___4184 = (r0);
    s.tmp_1 = if_qos_1_mk(s);
    s.tmp_2 = if_will_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "will");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["will"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["will"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 244; s.pc = 18; return s.tmp_2; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "qos");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["qos"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["qos"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 245; s.pc = 17; return s.tmp_1; }
    }
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = 0;
  case 8:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = r0 = s.flags___4184;
    r0 = (s.tmp_3 << 3);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 | s.tmp_5);
    s.flags___4184 = (r0);
    s.tmp_1 = if_retain_1_mk(s);
    s.tmp_2 = if_will_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "will");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["will"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["will"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 246; s.pc = 20; return s.tmp_2; }
    }
  case 20:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "retain");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["retain"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["retain"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 247; s.pc = 19; return s.tmp_1; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = 32;
    { step = 10; continue; }
  case 9:
    r0 = 0;
  case 10:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = (s.flags___4184 | s.tmp_3);
    s.flags___4184 = (r0);
  case 11:
  case 12:
    r0 = s.flags___4184;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createConnectFlags__P2262.info = {"start":3241,"length":568,"line":124,"column":8,"endLine":137,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createConnectFlags","argumentNames":["options"]}

function mqtt_Protocol_createConnectFlags__P2262_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createConnectFlags__P2262, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  flags___4184: undefined,
  arg0: undefined,
} }





function net_Net_createSocket__P1173(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___4231 = undefined;
    s.socket___4236 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Net__C1168_VT)) failedCast(r0);
    s.tmp_0 = net_Net_controller__P1171_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 166; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.c___4231 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.c___4231);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(net_ControllerSocket__C1127_VT);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 3; continue; }
    r0 = 2;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = net_ControllerSocket_constructor__P1136_mk(s);
    s.tmp_4.arg0 = s.tmp_2;
    s.tmp_4.arg1 = s.c___4231;
    s.tmp_4.arg2 = s.arg1;
    s.tmp_4.arg3 = s.arg2;
    s.tmp_4.arg4 = s.tmp_3;
    s.callLocIdx = 167; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.socket___4236 = (s.tmp_2);
    r0 = s.socket___4236;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
net_Net_createSocket__P1173.info = {"start":2256,"length":291,"line":80,"column":8,"endLine":85,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"createSocket","argumentNames":["this","host","port","secure"]}

function net_Net_createSocket__P1173_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Net_createSocket__P1173, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  c___4231: undefined,
  socket___4236: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function net_ControllerSocket_constructor__P1136(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = (s.arg0).fields["controller"] = (s.arg1);
    r0 = (s.arg0).fields["host"] = (s.arg2);
    r0 = (s.arg0).fields["port"] = (s.arg3);
    r0 = (s.arg0).fields["conntype"] = (s.arg4);
    r0 = s.arg0.fields["conntype"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["conntype"] = (0);
  case 1:
  case 2:
    r0 = (s.arg0).fields["_buffer"] = (_hex4261);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = net_Controller__C1102_v1_1_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_2.arg0 = r0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.socket;
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_socknum"] = (s.tmp_1);
    s.tmp_0 = net_ControllerSocket_setTimeout__P1145_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 132; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_constructor__P1136.info = {"start":672,"length":359,"line":22,"column":8,"endLine":29,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"inline","argumentNames":["this","controller","host","port","conntype"]}

function net_ControllerSocket_constructor__P1136_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_constructor__P1136, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }

const _hex4261 = pxsim.BufferMethods.createBufferFromHex("")




function net_ControllerSocket_setTimeout__P1145(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_timeout"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_setTimeout__P1145.info = {"start":6657,"length":78,"line":174,"column":8,"endLine":176,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"setTimeout","argumentNames":["this","value"]}

function net_ControllerSocket_setTimeout__P1145_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_setTimeout__P1145, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_socket__P1105(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socket__P1105.info = {"start":166,"length":58,"line":8,"column":8,"endLine":10,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socket","argumentNames":["this"]}

function net_Controller_socket__P1105_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socket__P1105, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function mqtt_Client_disconnect__P1281(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "disconnect";
    s.callLocIdx = 315; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = s.arg0.fields["wdId"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== -123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = clearInterval__P423_mk(s);
    r0 = s.arg0.fields["wdId"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 316; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    r0 = (s.arg0).fields["wdId"] = (-123);
  case 1:
  case 2:
    r0 = s.arg0.fields["piId"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== -123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = clearInterval__P423_mk(s);
    r0 = s.arg0.fields["piId"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 317; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    r0 = (s.arg0).fields["piId"] = (-123);
  case 3:
  case 4:
    r0 = s.arg0.fields["sct"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_1 = if_close_1_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "close"), 1);
      s.callLocIdx = 318; s.pc = 10; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["close"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["close"], 1); s.callLocIdx = 318; s.pc = 10; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 318; s.pc = 10; return s.tmp_1;; }
     else { s.callLocIdx = 318; s.pc = 10; return s.tmp_1; }
    }
  case 10:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_disconnect__P1281.info = {"start":11739,"length":651,"line":375,"column":8,"endLine":393,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"disconnect","argumentNames":["this"]}

function mqtt_Client_disconnect__P1281_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_disconnect__P1281, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function clearInterval__P423(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = control_clearInterval__P353_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 110; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
clearInterval__P423.info = {"start":404,"length":116,"line":16,"column":0,"endLine":18,"endColumn":1,"fileName":"pxt_modules/base/scheduling.ts","functionName":"clearInterval","argumentNames":["intervalId"]}

function clearInterval__P423_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: clearInterval__P423, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function control_clearInterval__P353(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___4311 = undefined;
    s.it___4317 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(globals._intervals___2172);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 9; continue; }
  case 1:
  case 2:
    s.i___4311 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___4311;
    r0 = pxsim_Array__length(globals._intervals___2172);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(globals._intervals___2172, s.i___4311);
    s.it___4317 = (r0);
    r0 = s.it___4317.fields["id"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    r0 = s.it___4317.fields["mode"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.arg1);
  case 5:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
    s.tmp_4 = control_Interval_cancel__P2175_mk(s);
    s.tmp_4.arg0 = s.it___4317;
    s.callLocIdx = 48; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    { step = 8; continue; }
  case 6:
  case 7:
    r0 = (s.i___4311 + 1);
    s.i___4311 = (r0);
    { step = 3; continue; }
  case 8:
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_clearInterval__P353.info = {"start":1826,"length":342,"line":61,"column":4,"endLine":70,"endColumn":5,"fileName":"pxt_modules/base/interval.ts","functionName":"clearInterval","argumentNames":["intervalId","mode"]}

function control_clearInterval__P353_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_clearInterval__P353, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  i___4311: undefined,
  it___4317: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_Interval_cancel__P2175(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C2173_VT)) failedCast(r0);
    r0 = (s.arg0).fields["delay"] = (-1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_cancel__P2175.info = {"start":1493,"length":49,"line":49,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/base/interval.ts","functionName":"cancel","argumentNames":["this"]}

function control_Interval_cancel__P2175_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_cancel__P2175, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function mqtt_EventEmitter_emit__P2266(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.listeners___4343 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_EventEmitter__C1273_VT)) failedCast(r0);
    r0 = s.arg0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_0, s.arg1);
    s.listeners___4343 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.listeners___4343);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkAction(1, mqtt_EventEmitter_emit_inline__P4351);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg2);
    s.tmp_1 = helpers_arrayForEach__P109_mk(s);
    s.tmp_1.arg0 = s.listeners___4343;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 298; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = true;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_emit__P2266.info = {"start":9067,"length":255,"line":286,"column":8,"endLine":292,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"emit","argumentNames":["this","event","arg"]}

function mqtt_EventEmitter_emit__P2266_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_emit__P2266, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  listeners___4343: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_EventEmitter_emit_inline__P4351(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.arg0;
    s.tmp_0.arg0 = s.caps[0];
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 297; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_emit_inline__P4351.info = {"start":9246,"length":25,"line":289,"column":34,"endLine":289,"endColumn":59,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["listener"]}

function mqtt_EventEmitter_emit_inline__P4351_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_emit_inline__P4351, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_arrayForEach__P109(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4357 = undefined;
    s.i___4360 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___4357 = (r0);
    s.i___4360 = (0);
  case 1:
    r0 = (s.i___4360 < s.len___4357);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___4360);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.i___4360;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 7; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    r0 = (s.i___4360 + 1);
    s.i___4360 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayForEach__P109.info = {"start":7439,"length":250,"line":254,"column":4,"endLine":259,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayForEach","argumentNames":["arr","callbackfn"]}

function helpers_arrayForEach__P109_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayForEach__P109, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___4357: undefined,
  i___4360: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_EventEmitter_on__P1275(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.listeners___4380 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_EventEmitter__C1273_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = s.arg0.fields["handlers"];
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_4, s.arg1);
    s.listeners___4380 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.listeners___4380);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    s.listeners___4380 = (r0);
    r0 = s.arg0.fields["handlers"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_3, s.arg1, s.tmp_2);
  case 5:
  case 6:
    r0 = pxsim_Array__push(s.listeners___4380, s.arg2);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_on__P1275.info = {"start":8775,"length":283,"line":278,"column":8,"endLine":285,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"on","argumentNames":["this","event","listener"]}

function mqtt_EventEmitter_on__P1275_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_on__P1275, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  listeners___4380: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Client_constructor__P1280(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    s.tmp_0 = mqtt_EventEmitter_constructor__P1274_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 300; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = (s.arg0).fields["wdId"] = (-123);
    r0 = (s.arg0).fields["piId"] = (-123);
    r0 = (s.arg0).fields["logPriority"] = (0);
    r0 = (s.arg0).fields["connected"] = (false);
    s.tmp_1 = if_port_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "port");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["port"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["port"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 301; s.pc = 10; return s.tmp_1; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 8883;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = if_port_2_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = s.tmp_2;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_3.arg0, "port", s.tmp_3.arg1);
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["set/port"];
      if (s.tmp_3.fn === null) { s.tmp_3.arg0.fields["port"] = s.tmp_3.arg1; }
      else if (s.tmp_3.fn === undefined) { failedCast(s.tmp_3.arg0) } 
     else { s.callLocIdx = 302; s.pc = 11; return s.tmp_3; }
    }
  case 11:
    r0 = s.retval;
    s.tmp_0 = if_clientId_2_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = if_clientId_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "clientId");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["clientId"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["clientId"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 303; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_0.arg0, "clientId", s.tmp_0.arg1);
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["set/clientId"];
      if (s.tmp_0.fn === null) { s.tmp_0.arg0.fields["clientId"] = s.tmp_0.arg1; }
      else if (s.tmp_0.fn === undefined) { failedCast(s.tmp_0.arg0) } 
     else { s.callLocIdx = 304; s.pc = 12; return s.tmp_0; }
    }
  case 12:
    r0 = s.retval;
    s.tmp_1 = if_will_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "will");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["will"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["will"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 305; s.pc = 14; return s.tmp_1; }
    }
  case 14:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_3 = if_qos_1_mk(s);
    s.tmp_4 = if_will_1_mk(s);
    s.tmp_4.arg0 = s.arg1;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "will");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["will"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["will"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 307; s.pc = 16; return s.tmp_4; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "qos");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["qos"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["qos"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 308; s.pc = 15; return s.tmp_3; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    s.tmp_6 = if_qos_2_mk(s);
    s.tmp_7 = if_will_1_mk(s);
    s.tmp_7.arg0 = s.arg1;
    if (!s.tmp_7.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_7.arg0, "will");
    } else {
      s.tmp_7.fn = s.tmp_7.arg0.vtable.iface["will"];
      if (s.tmp_7.fn == null) { s.retval = s.tmp_7.arg0.fields["will"]; }
      else if (!s.tmp_7.fn.isGetter) { s.retval = bind(s.tmp_7); }
     else { s.callLocIdx = 306; s.pc = 18; return s.tmp_7; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = s.tmp_5;
    if (!s.tmp_6.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_6.arg0, "qos", s.tmp_6.arg1);
    } else {
      s.tmp_6.fn = s.tmp_6.arg0.vtable.iface["set/qos"];
      if (s.tmp_6.fn === null) { s.tmp_6.arg0.fields["qos"] = s.tmp_6.arg1; }
      else if (s.tmp_6.fn === undefined) { failedCast(s.tmp_6.arg0) } 
     else { s.callLocIdx = 309; s.pc = 17; return s.tmp_6; }
    }
  case 17:
    r0 = s.retval;
    s.tmp_1 = if_retain_1_mk(s);
    s.tmp_2 = if_will_1_mk(s);
    s.tmp_2.arg0 = s.arg1;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "will");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["will"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["will"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 311; s.pc = 20; return s.tmp_2; }
    }
  case 20:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "retain");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["retain"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["retain"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 312; s.pc = 19; return s.tmp_1; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = false;
  case 6:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = if_retain_2_mk(s);
    s.tmp_5 = if_will_1_mk(s);
    s.tmp_5.arg0 = s.arg1;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "will");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["will"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["will"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 310; s.pc = 22; return s.tmp_5; }
    }
  case 22:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.tmp_3;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_4.arg0, "retain", s.tmp_4.arg1);
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["set/retain"];
      if (s.tmp_4.fn === null) { s.tmp_4.arg0.fields["retain"] = s.tmp_4.arg1; }
      else if (s.tmp_4.fn === undefined) { failedCast(s.tmp_4.arg0) } 
     else { s.callLocIdx = 313; s.pc = 21; return s.tmp_4; }
    }
  case 21:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.arg0).fields["opt"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = globals.net_Net_instance___1170;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["net"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_constructor__P1280.info = {"start":10148,"length":580,"line":331,"column":8,"endLine":348,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["this","opt"]}

function mqtt_Client_constructor__P1280_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_constructor__P1280, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_EventEmitter_constructor__P1274(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_EventEmitter__C1273_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handlers"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_constructor__P1274.info = {"start":8708,"length":57,"line":274,"column":8,"endLine":276,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["this"]}

function mqtt_EventEmitter_constructor__P1274_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_constructor__P1274, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_generateSasToken__P2282(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.key___4448 = undefined;
    s.toSign___4455 = undefined;
    s.sig___4465 = undefined;
    s.token___4475 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Buffer_fromBase64__P205_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 386; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.key___4448 = (r0);
    s.tmp_0 = net_urlencode__P1180_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 387; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.arg0 = (r0);
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "\n");
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_3);
    s.toSign___4455 = (r0);
    s.tmp_0 = net_urlencode__P1180_mk(s);
    s.tmp_1 = helpers_bufferToBase64__P192_mk(s);
    s.tmp_2 = crypto_sha256Hmac__P1077_mk(s);
    s.tmp_2.arg0 = s.key___4448;
    r0 = pxsim.control.createBufferFromUTF8(s.toSign___4455);
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 388; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 389; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 390; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.sig___4465 = (r0);
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("sr=", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "&se=");
    s.tmp_2 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "&sig=");
    s.tmp_0 = r0;
    if ((s.sig___4465) && (s.sig___4465).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.sig___4465);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.sig___4465) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_6);
    s.token___4475 = (r0);
    r0 = s.token___4475;
    return leave(s, r0)
  default: oops()
} } }
azureiot_generateSasToken__P2282.info = {"start":790,"length":439,"line":32,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"generateSasToken","argumentNames":["resourceUri","signingKey","expiresEpoch"]}

function azureiot_generateSasToken__P2282_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_generateSasToken__P2282, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  key___4448: undefined,
  toSign___4455: undefined,
  sig___4465: undefined,
  token___4475: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function crypto_sha256Hmac__P1077(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.paddedKey___4505 = undefined;
    s.i___4513 = undefined;
    s.h0___4526 = undefined;
    s.i___4532 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 64);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.arg0);
    (function(cb) { pxsim.crypto._sha256(s.tmp_2).then(cb) })(buildResume(s, 7));
    checkResumeConsumed();
    return;
  case 7:
    r0 = s.retval;
    s.arg0 = (r0);
  case 1:
  case 2:
    r0 = pxsim.control.createBuffer(64);
    s.paddedKey___4505 = (r0);
    r0 = pxsim.BufferMethods.write(s.paddedKey___4505, 0, s.arg0);
    s.i___4513 = (0);
  case 3:
    r0 = (s.i___4513 < 64);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_1 = r0 = s.paddedKey___4505;
    s.tmp_2 = r0 = s.i___4513;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, s.i___4513);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 ^ 54);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
    r0 = (s.i___4513 + 1);
    s.i___4513 = (r0);
    { step = 3; continue; }
  case 4:
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.paddedKey___4505);
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    (function(cb) { pxsim.crypto._sha256(s.tmp_0).then(cb) })(buildResume(s, 8));
    checkResumeConsumed();
    return;
  case 8:
    r0 = s.retval;
    s.h0___4526 = (r0);
    s.i___4532 = (0);
  case 5:
    r0 = (s.i___4532 < 64);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = r0 = s.paddedKey___4505;
    s.tmp_2 = r0 = s.i___4532;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, s.i___4532);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 ^ 106);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
    r0 = (s.i___4532 + 1);
    s.i___4532 = (r0);
    { step = 5; continue; }
  case 6:
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.paddedKey___4505);
    r0 = pxsim_Array__push(s.tmp_0, s.h0___4526);
    (function(cb) { pxsim.crypto._sha256(s.tmp_0).then(cb) })(buildResume(s, 9));
    checkResumeConsumed();
    return;
  case 9:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
crypto_sha256Hmac__P1077.info = {"start":333,"length":450,"line":11,"column":4,"endLine":20,"endColumn":5,"fileName":"pxt_modules/core---esp32s2/crypto.ts","functionName":"sha256Hmac","argumentNames":["key","msg"]}

function crypto_sha256Hmac__P1077_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: crypto_sha256Hmac__P1077, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  paddedKey___4505: undefined,
  i___4513: undefined,
  h0___4526: undefined,
  i___4532: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_bufferToBase64__P192(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4554 = undefined;
    s.r___4557 = undefined;
    s.i___4558 = undefined;
    s.x0___4563 = undefined;
    s.x1___4597 = undefined;
    s.x2___4637 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.len___4554 = (r0);
    r0 = pxsim_String_.mkEmpty();
    s.r___4557 = (r0);
    s.i___4558 = (0);
  case 1:
    r0 = (s.i___4558 < s.len___4554);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___4558);
    s.x0___4563 = (r0);
    if ((s.r___4557) && (s.r___4557).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.r___4557);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4557) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x0___4563 >> 2);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4557 = (r0);
    r0 = (s.i___4558 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= s.len___4554);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    if ((s.r___4557) && (s.r___4557).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.r___4557);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4557) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_2 = r0;
    s.tmp_7 = r0 = globals._b64___191;
    r0 = (s.x0___4563 & 3);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 << 4);
    s.tmp_8 = r0;
    r0 = pxsim_String_.charAt(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "==");
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.r___4557 = (r0);
    { step = 5; continue; }
  case 2:
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.i___4558 + 1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, s.tmp_1);
    s.x1___4597 = (r0);
    if ((s.r___4557) && (s.r___4557).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.r___4557);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4557) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x0___4563 & 3);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 << 4);
    s.tmp_5 = r0;
    r0 = (s.x1___4597 >> 4);
    s.tmp_7 = r0;
    r0 = (s.tmp_5 | s.tmp_7);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4557 = (r0);
    r0 = (s.i___4558 + 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= s.len___4554);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    if ((s.r___4557) && (s.r___4557).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.r___4557);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4557) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_2 = r0;
    s.tmp_7 = r0 = globals._b64___191;
    r0 = (s.x1___4597 & 15);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 << 2);
    s.tmp_8 = r0;
    r0 = pxsim_String_.charAt(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "=");
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.r___4557 = (r0);
    { step = 4; continue; }
  case 3:
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.i___4558 + 2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, s.tmp_1);
    s.x2___4637 = (r0);
    if ((s.r___4557) && (s.r___4557).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___4557);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4557) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x1___4597 & 15);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 << 2);
    s.tmp_5 = r0;
    r0 = (s.x2___4637 >> 6);
    s.tmp_7 = r0;
    r0 = (s.tmp_5 | s.tmp_7);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4557 = (r0);
    if ((s.r___4557) && (s.r___4557).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.r___4557);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4557) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x2___4637 & 63);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4557 = (r0);
  case 4:
  case 5:
    r0 = (s.i___4558 + 3);
    s.i___4558 = (r0);
    { step = 1; continue; }
  case 6:
    r0 = s.r___4557;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferToBase64__P192.info = {"start":5805,"length":708,"line":196,"column":4,"endLine":217,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferToBase64","argumentNames":["buf"]}

function helpers_bufferToBase64__P192_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferToBase64__P192, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  len___4554: undefined,
  r___4557: undefined,
  i___4558: undefined,
  x0___4563: undefined,
  x1___4597: undefined,
  x2___4637: undefined,
  arg0: undefined,
} }





function Buffer_fromBase64__P205(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sz___4672 = undefined;
    s.res___4677 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Buffer_fromBase64Core__P2146_mk(s);
    s.tmp_0.arg0 = null;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 33; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.sz___4672 = (r0);
    r0 = pxsim.control.createBuffer(s.sz___4672);
    s.res___4677 = (r0);
    s.tmp_0 = Buffer_fromBase64Core__P2146_mk(s);
    s.tmp_0.arg0 = s.res___4677;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 34; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = s.res___4677;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromBase64__P205.info = {"start":9796,"length":175,"line":344,"column":4,"endLine":349,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromBase64","argumentNames":["b64"]}

function Buffer_fromBase64__P205_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromBase64__P205, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  sz___4672: undefined,
  res___4677: undefined,
  arg0: undefined,
} }





function Buffer_fromBase64Core__P2146(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4687 = undefined;
    s.dp___4690 = undefined;
    s.i___4691 = undefined;
    s.x0___4696 = undefined;
    s.x1___4702 = undefined;
    s.x2___4710 = undefined;
    s.x3___4718 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.length(s.arg1);
    s.len___4687 = (r0);
    s.dp___4690 = (0);
    s.i___4691 = (0);
  case 1:
    r0 = (s.i___4691 < s.len___4687);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
    s.tmp_1 = Buffer_b64Idx__P2145_mk(s);
    r0 = pxsim_String_.charAt(s.arg1, s.i___4691);
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 29; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
    s.x0___4696 = (r0);
    s.tmp_0 = Buffer_b64Idx__P2145_mk(s);
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.i___4691 + 1);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.tmp_1, s.tmp_2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 30; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    s.x1___4702 = (r0);
    s.tmp_0 = Buffer_b64Idx__P2145_mk(s);
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.i___4691 + 2);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.tmp_1, s.tmp_2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 31; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
    s.x2___4710 = (r0);
    s.tmp_0 = Buffer_b64Idx__P2145_mk(s);
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.i___4691 + 3);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.tmp_1, s.tmp_2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 32; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.x3___4718 = (r0);
    r0 = (s.x0___4696 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.x1___4702 < 0);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.throwValue("Invalid Base64");
  case 4:
  case 5:
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 6; continue; }
    s.tmp_2 = r0 = s.arg0;
    s.tmp_3 = r0 = s.dp___4690;
    r0 = (s.x0___4696 << 2);
    s.tmp_5 = r0;
    r0 = (s.x1___4702 >> 4);
    s.tmp_6 = r0;
    r0 = (s.tmp_5 | s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, s.tmp_3, s.tmp_4);
  case 6:
  case 7:
    r0 = (s.dp___4690 + 1);
    s.dp___4690 = (r0);
    r0 = (s.x2___4710 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 8; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_2 = r0 = s.dp___4690;
    r0 = (s.x1___4702 << 4);
    s.tmp_4 = r0;
    r0 = (s.x2___4710 >> 2);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 | s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
  case 8:
  case 9:
    r0 = (s.dp___4690 + 1);
    s.dp___4690 = (r0);
    r0 = (s.x3___4718 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 10; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_2 = r0 = s.dp___4690;
    r0 = (s.x2___4710 << 6);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | s.x3___4718);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
  case 10:
  case 11:
    r0 = (s.dp___4690 + 1);
    s.dp___4690 = (r0);
  case 12:
  case 13:
    { step = 19; continue; }
  case 14:
    r0 = (s.x3___4718 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = s.tmp_0;
    { step = 16; continue; }
  case 15:
    r0 = (s.i___4691 + 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < s.len___4687);
  case 16:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 17; continue; }
    r0 = pxsim_pxtcore.throwValue("Invalid Base64");
  case 17:
  case 18:
  case 19:
    r0 = (s.i___4691 + 4);
    s.i___4691 = (r0);
    { step = 1; continue; }
  case 20:
    r0 = s.dp___4690;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromBase64Core__P2146.info = {"start":8837,"length":884,"line":312,"column":4,"endLine":339,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromBase64Core","argumentNames":["trg","b64"]}

function Buffer_fromBase64Core__P2146_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromBase64Core__P2146, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  len___4687: undefined,
  dp___4690: undefined,
  i___4691: undefined,
  x0___4696: undefined,
  x1___4702: undefined,
  x2___4710: undefined,
  x3___4718: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Buffer_b64Idx__P2145(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___4796 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg0 == "=");
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = -1;
    { step = 11; continue; }
  case 3:
  case 4:
    r0 = (s.arg0 == "-");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    r0 = 62;
    { step = 11; continue; }
  case 5:
  case 6:
    r0 = (s.arg0 == "_");
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
    r0 = 63;
    { step = 11; continue; }
  case 7:
  case 8:
    r0 = pxsim_String_.indexOf(globals._b64___191, s.arg0, undefined);
    s.r___4796 = (r0);
    r0 = (s.r___4796 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.throwValue("Invalid Base64");
  case 9:
  case 10:
    r0 = s.r___4796;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
Buffer_b64Idx__P2145.info = {"start":8539,"length":292,"line":299,"column":4,"endLine":310,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"b64Idx","argumentNames":["c"]}

function Buffer_b64Idx__P2145_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_b64Idx__P2145, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  r___4796: undefined,
  arg0: undefined,
} }





function azureiot_parseConnectionString__P2286(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.connString___4805 = undefined;
    s.connStringParts___4811 = undefined;
    s.tmp_0 = settings_SecretStore_readSecret__P1096_mk(s);
    s.tmp_0.arg0 = globals.programSecrets___1100;
    s.tmp_0.arg1 = globals.SECRETS_KEY___1292;
    s.tmp_0.arg2 = false;
    s.callLocIdx = 418; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.connString___4805 = (r0);
    s.tmp_0 = r0 = s.connString___4805;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.mkEmpty();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_2 = azureiot_parsePropertyBag__P2285_mk(s);
    s.tmp_2.arg0 = s.tmp_1;
    s.tmp_2.arg1 = ";";
    s.callLocIdx = 419; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.connStringParts___4811 = (r0);
    r0 = s.connStringParts___4811;
    return leave(s, r0)
  default: oops()
} } }
azureiot_parseConnectionString__P2286.info = {"start":3553,"length":220,"line":106,"column":4,"endLine":110,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"parseConnectionString","argumentNames":[]}

function azureiot_parseConnectionString__P2286_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parseConnectionString__P2286, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  connString___4805: undefined,
  connStringParts___4811: undefined,
} }





function azureiot_parsePropertyBag__P2285(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___4819 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtrt.mkMap();
    s.r___4819 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.mkEmpty();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_2 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    r0 = "&";
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_pxtcore_mkAction(1, azureiot_parsePropertyBag_inline__P4833);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_4, 0, s.r___4819);
    s.tmp_5 = helpers_arrayForEach__P109_mk(s);
    s.tmp_6 = helpers_arrayMap__P106_mk(s);
    s.tmp_7 = helpers_stringSplit__P122_mk(s);
    s.tmp_7.arg0 = s.tmp_1;
    s.tmp_7.arg1 = s.tmp_3;
    s.tmp_7.arg2 = undefined;
    s.callLocIdx = 412; s.pc = 7; return s.tmp_7;
  case 7:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = forEach_inline__P4829;
    s.callLocIdx = 414; s.pc = 6; return s.tmp_6;
  case 6:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = s.tmp_4;
    s.callLocIdx = 417; s.pc = 5; return s.tmp_5;
  case 5:
    r0 = s.retval;
    r0 = s.r___4819;
    return leave(s, r0)
  default: oops()
} } }
azureiot_parsePropertyBag__P2285.info = {"start":3246,"length":301,"line":98,"column":4,"endLine":104,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"parsePropertyBag","argumentNames":["msg","separator"]}

function azureiot_parsePropertyBag__P2285_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parsePropertyBag__P2285, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  r___4819: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function forEach_inline__P4829(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_splitPair__P2284_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 413; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
forEach_inline__P4829.info = {"start":3418,"length":19,"line":101,"column":17,"endLine":101,"endColumn":36,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["kv"]}

function forEach_inline__P4829_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: forEach_inline__P4829, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function azureiot_parsePropertyBag_inline__P4833(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.caps[0];
    s.tmp_2 = net_urldecode__P1181_mk(s);
    r0 = pxsim_Array__getAt(s.arg0, 0);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 415; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_4 = net_urldecode__P1181_mk(s);
    r0 = pxsim_Array__getAt(s.arg0, 1);
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 416; s.pc = 2; return s.tmp_4;
  case 2:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_0, s.tmp_1, s.tmp_3);
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
azureiot_parsePropertyBag_inline__P4833.info = {"start":3460,"length":61,"line":102,"column":21,"endLine":102,"endColumn":82,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["parts"]}

function azureiot_parsePropertyBag_inline__P4833_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parsePropertyBag_inline__P4833, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function net_urldecode__P1181(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___4843 = undefined;
    s.isUtf8___4844 = undefined;
    s.i___4845 = undefined;
    s.c___4851 = undefined;
    s.h___4857 = undefined;
    s.chcode___4867 = undefined;
    s.buf___4900 = undefined;
    s.i___4905 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.mkEmpty();
    s.r___4843 = (r0);
    s.isUtf8___4844 = (false);
    s.i___4845 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___4845;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_String_.charAt(s.arg0, s.i___4845);
    s.c___4851 = (r0);
    r0 = (s.c___4851 == "%");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_1.arg0 = s.arg0;
    r0 = (s.i___4845 + 1);
    s.tmp_1.arg1 = r0;
    r0 = (s.i___4845 + 3);
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 169; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.h___4857 = (r0);
    s.tmp_0 = parseInt__P97_mk(s);
    s.tmp_0.arg0 = s.h___4857;
    s.tmp_0.arg1 = 16;
    s.callLocIdx = 170; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.chcode___4867 = (r0);
    s.tmp_3 = isNaN__P93_mk(s);
    s.tmp_3.arg0 = s.chcode___4867;
    s.callLocIdx = 171; s.pc = 17; return s.tmp_3;
  case 17:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = (s.chcode___4867 > 127);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 2; continue; }
    s.isUtf8___4844 = (true);
  case 2:
  case 3:
    if ((s.r___4843) && (s.r___4843).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.r___4843);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4843) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String_.fromCharCode(s.chcode___4867);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4843 = (r0);
    r0 = (s.i___4845 + 2);
    s.i___4845 = (r0);
    { step = 8; continue; }
  case 4:
  case 5:
  case 6:
  case 7:
    if ((s.r___4843) && (s.r___4843).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.r___4843);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4843) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.c___4851) && (s.c___4851).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.c___4851);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.c___4851) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4843 = (r0);
  case 8:
    r0 = (s.i___4845 + 1);
    s.i___4845 = (r0);
    { step = 1; continue; }
  case 9:
    r0 = pxsim_numops_toBoolDecr(s.isUtf8___4844);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_String_.length(s.r___4843);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___4900 = (r0);
    s.i___4905 = (0);
  case 10:
    s.tmp_1 = r0 = s.i___4905;
    r0 = pxsim.BufferMethods.length(s.buf___4900);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_3 = r0 = s.buf___4900;
    s.tmp_4 = r0 = s.i___4905;
    r0 = pxsim_String_.charCodeAt(s.r___4843, s.i___4905);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_3, s.tmp_4, s.tmp_5);
    r0 = (s.i___4905 + 1);
    s.i___4905 = (r0);
    { step = 10; continue; }
  case 11:
    r0 = pxsim.BufferMethods.toString(s.buf___4900);
    { step = 14; continue; }
    { step = 13; continue; }
  case 12:
    r0 = s.r___4843;
    { step = 14; continue; }
  case 13:
    r0 = undefined;
  case 14:
    return leave(s, r0)
  default: oops()
} } }
net_urldecode__P1181.info = {"start":503,"length":811,"line":16,"column":4,"endLine":42,"endColumn":5,"fileName":"pxt_modules/net/netutil.ts","functionName":"urldecode","argumentNames":["s"]}

function net_urldecode__P1181_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_urldecode__P1181, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___4843: undefined,
  isUtf8___4844: undefined,
  i___4845: undefined,
  c___4851: undefined,
  h___4857: undefined,
  chcode___4867: undefined,
  buf___4900: undefined,
  i___4905: undefined,
  arg0: undefined,
} }





function isNaN__P93(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 - 0);
    s.arg0 = (r0);
    r0 = (s.arg0 !== s.arg0);
    return leave(s, r0)
  default: oops()
} } }
isNaN__P93.info = {"start":169,"length":80,"line":12,"column":0,"endLine":15,"endColumn":1,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"isNaN","argumentNames":["x"]}

function isNaN__P93_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: isNaN__P93, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function parseInt__P97(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.start___4947 = undefined;
    s.sign___4977 = undefined;
    s.output___5022 = undefined;
    s.hasDigit___5023 = undefined;
    s.i___5024 = undefined;
    s.code___5031 = undefined;
    s.val___5038 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 1:
    r0 = (s.arg1 != null);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 2:
    r0 = (s.arg1 < 2);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_3;
    { step = 4; continue; }
  case 3:
    r0 = (s.arg1 > 36);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
  case 6:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 7; continue; }
    r0 = NaN;
    { step = 46; continue; }
  case 7:
  case 8:
    s.start___4947 = (0);
  case 9:
    s.tmp_1 = r0 = s.start___4947;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    s.tmp_3 = helpers_isWhitespace__P124_mk(s);
    r0 = pxsim_String_.charCodeAt(s.arg0, s.start___4947);
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 0; s.pc = 47; return s.tmp_3;
  case 47:
    r0 = s.retval;
  case 11:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 12; continue; }
    r0 = (s.start___4947 + 1);
    s.start___4947 = (r0);
    { step = 9; continue; }
  case 12:
    s.tmp_1 = r0 = s.start___4947;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 === s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = NaN;
    { step = 46; continue; }
  case 13:
  case 14:
    s.sign___4977 = (1);
    r0 = pxsim_String_.charAt(s.arg0, s.start___4947);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq("-", s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq("+", s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 15:
    s.sign___4977 = (-1);
  case 16:
    r0 = (s.start___4947 + 1);
    s.start___4947 = (r0);
  case 17:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = s.tmp_0;
    { step = 19; continue; }
  case 18:
    r0 = (s.arg1 == 16);
  case 19:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 20; continue; }
    r0 = s.tmp_2;
    { step = 21; continue; }
  case 20:
    r0 = pxsim_String_.charAt(s.arg0, s.start___4947);
    s.tmp_3 = r0;
    r0 = ("0" === s.tmp_3);
  case 21:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 22; continue; }
    r0 = s.tmp_4;
    { step = 25; continue; }
  case 22:
    s.tmp_7 = r0 = s.arg0;
    r0 = (s.start___4947 + 1);
    s.tmp_8 = r0;
    r0 = pxsim_String_.charAt(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    r0 = ("x" === s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 23; continue; }
    r0 = s.tmp_5;
    { step = 24; continue; }
  case 23:
    s.tmp_10 = r0 = s.arg0;
    r0 = (s.start___4947 + 1);
    s.tmp_11 = r0;
    r0 = pxsim_String_.charAt(s.tmp_10, s.tmp_11);
    s.tmp_9 = r0;
    r0 = ("X" === s.tmp_9);
  case 24:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = s.tmp_12;
  case 25:
    // jmp value (already in r0)
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 26; continue; }
    s.arg1 = (16);
    r0 = (s.start___4947 + 2);
    s.start___4947 = (r0);
    { step = 29; continue; }
  case 26:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    s.arg1 = (10);
  case 27:
  case 28:
  case 29:
    s.output___5022 = (0);
    s.hasDigit___5023 = (false);
    s.i___5024 = (s.start___4947);
  case 30:
    s.tmp_1 = r0 = s.i___5024;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 45; continue; }
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___5024);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 | 32);
    s.code___5031 = (r0);
    s.val___5038 = (undefined);
    r0 = (s.code___5031 >= 48);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 31; continue; }
    r0 = s.tmp_0;
    { step = 32; continue; }
  case 31:
    r0 = (s.code___5031 < 58);
  case 32:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 33; continue; }
    r0 = (s.code___5031 - 48);
    s.val___5038 = (r0);
    { step = 38; continue; }
  case 33:
    r0 = (s.code___5031 >= 97);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 34; continue; }
    r0 = s.tmp_0;
    { step = 35; continue; }
  case 34:
    r0 = (s.code___5031 < 123);
  case 35:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
    r0 = (10 + s.code___5031);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 97);
    s.val___5038 = (r0);
  case 36:
  case 37:
  case 38:
    r0 = (s.val___5038 == undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 39; continue; }
    r0 = s.tmp_0;
    { step = 40; continue; }
  case 39:
    r0 = (s.val___5038 >= s.arg1);
  case 40:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 43; continue; }
    r0 = pxsim_numops_toBoolDecr(s.hasDigit___5023);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 41; continue; }
    r0 = NaN;
    { step = 46; continue; }
  case 41:
  case 42:
    { step = 45; continue; }
  case 43:
  case 44:
    s.hasDigit___5023 = (true);
    r0 = (s.output___5022 * s.arg1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + s.val___5038);
    s.output___5022 = (r0);
    r0 = (s.i___5024 + 1);
    s.i___5024 = (r0);
    { step = 30; continue; }
  case 45:
    r0 = (s.sign___4977 * s.output___5022);
  case 46:
    return leave(s, r0)
  default: oops()
} } }
parseInt__P97.info = {"start":1064,"length":1690,"line":44,"column":0,"endLine":103,"endColumn":1,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"parseInt","argumentNames":["text","radix"]}

function parseInt__P97_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: parseInt__P97, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  start___4947: undefined,
  sign___4977: undefined,
  output___5022: undefined,
  hasDigit___5023: undefined,
  i___5024: undefined,
  code___5031: undefined,
  val___5038: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_isWhitespace__P124(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(11, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(12, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(32, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(160, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(65279, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(10, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(8232, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(8233, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 1:
  case 2:
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
  case 8:
  case 9:
  case 10:
    r0 = true;
    { step = 12; continue; }
  case 11:
    r0 = false;
    { step = 12; continue; }
    r0 = undefined;
  case 12:
    return leave(s, r0)
  default: oops()
} } }
helpers_isWhitespace__P124.info = {"start":14864,"length":674,"line":503,"column":4,"endLine":520,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"isWhitespace","argumentNames":["c"]}

function helpers_isWhitespace__P124_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_isWhitespace__P124, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function azureiot_splitPair__P2284(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___5095 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.indexOf(s.arg0, "=", undefined);
    s.i___5095 = (r0);
    r0 = (s.i___5095 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.arg0);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = s.tmp_1;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    s.tmp_5 = helpers_stringSlice__P119_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.tmp_5.arg1 = 0;
    s.tmp_5.arg2 = s.i___5095;
    s.callLocIdx = 410; s.pc = 4; return s.tmp_5;
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.tmp_4);
    s.tmp_7 = helpers_stringSlice__P119_mk(s);
    s.tmp_7.arg0 = s.arg0;
    r0 = (s.i___5095 + 1);
    s.tmp_7.arg1 = r0;
    s.tmp_7.arg2 = undefined;
    s.callLocIdx = 411; s.pc = 5; return s.tmp_7;
  case 5:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.tmp_6);
    r0 = s.tmp_3;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_splitPair__P2284.info = {"start":3042,"length":198,"line":90,"column":4,"endLine":96,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"splitPair","argumentNames":["kv"]}

function azureiot_splitPair__P2284_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_splitPair__P2284, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  i___5095: undefined,
  arg0: undefined,
} }





function helpers_stringSplit__P122(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.A___5118 = undefined;
    s.lim___5120 = undefined;
    s.s___5136 = undefined;
    s.p___5139 = undefined;
    s.R___5140 = undefined;
    s.z___5154 = undefined;
    s.T___5167 = undefined;
    s.q___5168 = undefined;
    s.e___5174 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.A___5118 = (r0);
    s.lim___5120 = (0);
    r0 = (s.arg2 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (536870912 - 1);
    s.lim___5120 = (r0);
    { step = 4; continue; }
  case 1:
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.lim___5120 = (0);
    { step = 3; continue; }
  case 2:
    r0 = (s.arg2 | 0);
    s.lim___5120 = (r0);
  case 3:
  case 4:
    r0 = pxsim_String_.length(s.arg0);
    s.s___5136 = (r0);
    s.p___5139 = (0);
    s.R___5140 = (s.arg1);
    r0 = (s.lim___5120 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.A___5118;
    { step = 21; continue; }
  case 5:
  case 6:
    r0 = (s.arg1 === undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_Array_.setAt(s.A___5118, 0, s.arg0);
    r0 = s.A___5118;
    { step = 21; continue; }
  case 7:
  case 8:
    r0 = (s.s___5136 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_1 = helpers_splitMatch__P2130_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = 0;
    s.tmp_1.arg2 = s.R___5140;
    s.callLocIdx = 15; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.z___5154 = (r0);
    r0 = (s.z___5154 > -1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = s.A___5118;
    { step = 21; continue; }
  case 9:
  case 10:
    r0 = pxsim_Array_.setAt(s.A___5118, 0, s.arg0);
    r0 = s.A___5118;
    { step = 21; continue; }
  case 11:
  case 12:
    s.q___5168 = (s.p___5139);
  case 13:
    r0 = (s.q___5168 != s.s___5136);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
    s.tmp_1 = helpers_splitMatch__P2130_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.q___5168;
    s.tmp_1.arg2 = s.R___5140;
    s.callLocIdx = 16; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
    s.e___5174 = (r0);
    r0 = (s.e___5174 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = (s.q___5168 + 1);
    s.q___5168 = (r0);
    { step = 19; continue; }
  case 14:
    r0 = (s.e___5174 == s.p___5139);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = (s.q___5168 + 1);
    s.q___5168 = (r0);
    { step = 18; continue; }
  case 15:
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.p___5139;
    s.tmp_0.arg2 = s.q___5168;
    s.callLocIdx = 17; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.T___5167 = (r0);
    r0 = pxsim_Array__push(s.A___5118, s.T___5167);
    r0 = pxsim_Array__length(s.A___5118);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.lim___5120);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    r0 = s.A___5118;
    { step = 21; continue; }
  case 16:
  case 17:
    s.p___5139 = (s.e___5174);
    s.q___5168 = (s.p___5139);
  case 18:
  case 19:
    { step = 13; continue; }
  case 20:
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.p___5139;
    s.tmp_0.arg2 = s.q___5168;
    s.callLocIdx = 18; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
    s.T___5167 = (r0);
    r0 = pxsim_Array__push(s.A___5118, s.T___5167);
    r0 = s.A___5118;
  case 21:
    return leave(s, r0)
  default: oops()
} } }
helpers_stringSplit__P122.info = {"start":12919,"length":1319,"line":434,"column":4,"endLine":478,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"stringSplit","argumentNames":["S","separator","limit"]}

function helpers_stringSplit__P122_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringSplit__P122, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  A___5118: undefined,
  lim___5120: undefined,
  s___5136: undefined,
  p___5139: undefined,
  R___5140: undefined,
  z___5154: undefined,
  T___5167: undefined,
  q___5168: undefined,
  e___5174: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_splitMatch__P2130(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5219 = undefined;
    s.s___5222 = undefined;
    s.i___5232 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.length(s.arg2);
    s.r___5219 = (r0);
    r0 = pxsim_String_.length(s.arg0);
    s.s___5222 = (r0);
    r0 = (s.arg1 + s.r___5219);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.s___5222);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = -1;
    { step = 7; continue; }
  case 1:
  case 2:
    s.i___5232 = (0);
  case 3:
    r0 = (s.i___5232 < s.r___5219);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_3 = r0 = s.arg0;
    r0 = (s.arg1 + s.i___5232);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.arg2, s.i___5232);
    s.tmp_5 = r0;
    r0 = (s.tmp_2 != s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = -1;
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = (s.i___5232 + 1);
    s.i___5232 = (r0);
    { step = 3; continue; }
  case 6:
    r0 = (s.arg1 + s.r___5219);
  case 7:
    return leave(s, r0)
  default: oops()
} } }
helpers_splitMatch__P2130.info = {"start":14244,"length":289,"line":480,"column":4,"endLine":489,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"splitMatch","argumentNames":["S","q","R"]}

function helpers_splitMatch__P2130_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_splitMatch__P2130, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___5219: undefined,
  s___5222: undefined,
  i___5232: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_SecretStore_constructor__P1093(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1092_VT)) failedCast(r0);
    r0 = (s.arg0).fields["key"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_constructor__P1093.info = {"start":4521,"length":36,"line":182,"column":8,"endLine":182,"endColumn":44,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"inline","argumentNames":["this","key"]}

function settings_SecretStore_constructor__P1093_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_constructor__P1093, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function settings_SecretStore_readSecret__P1096(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.secrets___5261 = undefined;
    s.secret___5264 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1092_VT)) failedCast(r0);
    s.tmp_0 = settings_SecretStore_readSecrets__P1098_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 127; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.secrets___5261 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.secrets___5261, s.arg1);
    s.secret___5264 = (r0);
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.secret___5264);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("missing secret ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim.control.dmesg(s.tmp_3);
    r0 = pxsim_pxtrt.panic(922);
  case 3:
  case 4:
    r0 = s.secret___5264;
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_readSecret__P1096.info = {"start":5135,"length":365,"line":200,"column":8,"endLine":208,"endColumn":9,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readSecret","argumentNames":["this","name","ensure"]}

function settings_SecretStore_readSecret__P1096_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_readSecret__P1096, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  secrets___5261: undefined,
  secret___5264: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_SecretStore_readSecrets__P1098(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.src___5285 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1092_VT)) failedCast(r0);
    r0 = pxsim_pxtcore.beginTry(5);
    s.tmp_1 = settings_readString__P1086_mk(s);
    r0 = s.arg0.fields["key"];
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 128; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = "{}";
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.src___5285 = (s.tmp_2);
    s.tmp_1 = JSON_parse__P386_mk(s);
    s.tmp_1.arg0 = s.src___5285;
    s.callLocIdx = 129; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtrt.mkMap();
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_pxtcore.endTry();
    r0 = s.tmp_2;
    { step = 7; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 6; continue; }
  case 5:
    r0 = pxsim.control.dmesg("invalid secret format");
    r0 = pxsim_pxtrt.mkMap();
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_readSecrets__P1098.info = {"start":5587,"length":270,"line":214,"column":8,"endLine":222,"endColumn":9,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readSecrets","argumentNames":["this"]}

function settings_SecretStore_readSecrets__P1098_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_readSecrets__P1098, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  src___5285: undefined,
  arg0: undefined,
} }





function JSON_parse__P386(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___5298 = undefined;
    s.r___5308 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(JSON_Parser__C2186_VT);
    s.p___5298 = (r0);
    r0 = (s.p___5298).fields["ptr"] = (0);
    r0 = (s.p___5298).fields["s"] = (s.arg0);
    s.tmp_0 = JSON_Parser_value__P2195_mk(s);
    s.tmp_0.arg0 = s.p___5298;
    s.callLocIdx = 100; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.r___5308 = (r0);
    s.tmp_1 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_1.arg0 = s.p___5298;
    s.callLocIdx = 101; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = JSON_Parser_error__P2187_mk(s);
    s.tmp_2.arg0 = s.p___5298;
    s.tmp_2.arg1 = "excessive input";
    s.callLocIdx = 102; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.p___5298.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.p___5298.fields["errorMsg"];
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("Invalid JSON: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim.control.dmesg(s.tmp_1);
    r0 = undefined;
    { step = 5; continue; }
  case 3:
  case 4:
    r0 = s.r___5308;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
JSON_parse__P386.info = {"start":9325,"length":347,"line":307,"column":4,"endLine":320,"endColumn":5,"fileName":"pxt_modules/base/json.ts","functionName":"parse","argumentNames":["s"]}

function JSON_parse__P386_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_parse__P386, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  p___5298: undefined,
  r___5308: undefined,
  arg0: undefined,
} }





function JSON_Parser_error__P2187(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = r0 = s.arg0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " at position ");
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["errorMsg"] = (s.tmp_4);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["s"];
    s.tmp_2 = r0;
    r0 = pxsim_String_.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_error__P2187.info = {"start":1009,"length":184,"line":43,"column":8,"endLine":48,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"error","argumentNames":["this","msg"]}

function JSON_Parser_error__P2187_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_error__P2187, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Parser_skipWS__P2188(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___5353 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
  case 1:
    s.tmp_0 = JSON_Parser_nextChar__P2189_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 65; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.c___5353 = (r0);
    r0 = (s.c___5353 == 32);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___5353 == 10);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 5; continue; }
  case 4:
    r0 = (s.c___5353 == 13);
  case 5:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 6:
    r0 = (s.c___5353 == 9);
  case 7:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 8; continue; }
    { step = 9; continue; }
  case 8:
    s.tmp_4 = r0 = s.arg0;
    r0 = s.tmp_4.fields["ptr"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 - 1);
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["ptr"] = (s.tmp_5);
    r0 = s.c___5353;
    { step = 10; continue; }
  case 9:
    { step = 1; continue; }
    r0 = undefined;
  case 10:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_skipWS__P2188.info = {"start":1203,"length":301,"line":50,"column":8,"endLine":60,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"skipWS","argumentNames":["this"]}

function JSON_Parser_skipWS__P2188_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_skipWS__P2188, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  c___5353: undefined,
  arg0: undefined,
} }





function JSON_Parser_nextChar__P2189(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    r0 = s.arg0.fields["ptr"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["s"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = r0 = s.arg0;
    r0 = s.tmp_4.fields["ptr"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 + 1);
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["ptr"] = (s.tmp_5);
    r0 = s.arg0.fields["s"];
    s.tmp_7 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_7, s.tmp_6);
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = 0;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_nextChar__P2189.info = {"start":1514,"length":138,"line":62,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"nextChar","argumentNames":["this"]}

function JSON_Parser_nextChar__P2189_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_nextChar__P2189, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function JSON_Parser_value__P2195(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___5389 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = null;
    { step = 27; continue; }
  case 1:
  case 2:
    s.tmp_1 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 84; s.pc = 28; return s.tmp_1;
  case 28:
    r0 = s.retval;
    s.c___5389 = (r0);
    r0 = (s.c___5389 == 123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = JSON_Parser_doObject__P2192_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 85; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 26; continue; }
  case 3:
    r0 = (s.c___5389 == 91);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = JSON_Parser_doArray__P2191_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 86; s.pc = 30; return s.tmp_3;
  case 30:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 25; continue; }
  case 4:
    r0 = (48 <= s.c___5389);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_4;
    { step = 6; continue; }
  case 5:
    r0 = (s.c___5389 <= 57);
  case 6:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_5;
    { step = 8; continue; }
  case 7:
    r0 = (s.c___5389 == 45);
  case 8:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 9; continue; }
    s.tmp_7 = JSON_Parser_doNumber__P2193_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.callLocIdx = 87; s.pc = 31; return s.tmp_7;
  case 31:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 24; continue; }
  case 9:
    r0 = (s.c___5389 == 34);
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 10; continue; }
    s.tmp_9 = JSON_Parser_doString__P2190_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.callLocIdx = 88; s.pc = 32; return s.tmp_9;
  case 32:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 23; continue; }
  case 10:
    r0 = (s.c___5389 == 116);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBool(s.tmp_10);
    if (r0) { step = 11; continue; }
    r0 = s.tmp_10;
    { step = 12; continue; }
  case 11:
    s.tmp_11 = JSON_Parser_checkKw__P2194_mk(s);
    s.tmp_11.arg0 = s.arg0;
    s.tmp_11.arg1 = "true";
    s.callLocIdx = 89; s.pc = 33; return s.tmp_11;
  case 33:
    r0 = s.retval;
  case 12:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 13; continue; }
    r0 = true;
    { step = 27; continue; }
    { step = 22; continue; }
  case 13:
    r0 = (s.c___5389 == 102);
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBool(s.tmp_13);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_13;
    { step = 15; continue; }
  case 14:
    s.tmp_14 = JSON_Parser_checkKw__P2194_mk(s);
    s.tmp_14.arg0 = s.arg0;
    s.tmp_14.arg1 = "false";
    s.callLocIdx = 90; s.pc = 34; return s.tmp_14;
  case 34:
    r0 = s.retval;
  case 15:
    // jmp value (already in r0)
    s.tmp_15 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_15);
    if (!r0) { step = 16; continue; }
    r0 = false;
    { step = 27; continue; }
    { step = 21; continue; }
  case 16:
    r0 = (s.c___5389 == 110);
    s.tmp_16 = r0;
    r0 = pxsim_numops_toBool(s.tmp_16);
    if (r0) { step = 17; continue; }
    r0 = s.tmp_16;
    { step = 18; continue; }
  case 17:
    s.tmp_17 = JSON_Parser_checkKw__P2194_mk(s);
    s.tmp_17.arg0 = s.arg0;
    s.tmp_17.arg1 = "null";
    s.callLocIdx = 91; s.pc = 35; return s.tmp_17;
  case 35:
    r0 = s.retval;
  case 18:
    // jmp value (already in r0)
    s.tmp_18 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_18);
    if (!r0) { step = 19; continue; }
    r0 = null;
    { step = 27; continue; }
  case 19:
  case 20:
  case 21:
  case 22:
  case 23:
  case 24:
  case 25:
  case 26:
    s.tmp_19 = JSON_Parser_error__P2187_mk(s);
    s.tmp_19.arg0 = s.arg0;
    s.tmp_19.arg1 = "unexpected token";
    s.callLocIdx = 92; s.pc = 36; return s.tmp_19;
  case 36:
    r0 = s.retval;
    r0 = null;
  case 27:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_value__P2195.info = {"start":4976,"length":743,"line":178,"column":8,"endLine":200,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"value","argumentNames":["this"]}

function JSON_Parser_value__P2195_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_value__P2195, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  c___5389: undefined,
  arg0: undefined,
} }





function JSON_Parser_checkKw__P2194(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    s.tmp_2 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["s"];
    s.tmp_2.arg0 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_2.arg1 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_4 = r0;
    r0 = (s.tmp_3 + s.tmp_4);
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 83; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_5 = r0 = s.arg0;
    r0 = s.tmp_5.fields["ptr"];
    s.tmp_7 = r0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_8 = r0;
    r0 = (s.tmp_7 + s.tmp_8);
    s.tmp_6 = r0;
    r0 = (s.tmp_5).fields["ptr"] = (s.tmp_6);
    r0 = true;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = false;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_checkKw__P2194.info = {"start":4764,"length":202,"line":170,"column":8,"endLine":176,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"checkKw","argumentNames":["this","k"]}

function JSON_Parser_checkKw__P2194_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_checkKw__P2194, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Parser_doString__P2190(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5449 = undefined;
    s.c___5454 = undefined;
    s.q___5468 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    r0 = pxsim_String_.mkEmpty();
    s.r___5449 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
  case 1:
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
    r0 = s.arg0.fields["s"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_2);
    s.c___5454 = (r0);
    r0 = (s.c___5454 == "\"");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.r___5449;
    { step = 16; continue; }
  case 2:
  case 3:
    r0 = (s.c___5454 == "\\");
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 14; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["ptr"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["ptr"] = (s.tmp_3);
    r0 = s.arg0.fields["s"];
    s.tmp_5 = r0;
    r0 = pxsim_String_.charAt(s.tmp_5, s.tmp_4);
    s.q___5468 = (r0);
    r0 = (s.q___5468 == "b");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.q___5468 = ("\b");
    { step = 13; continue; }
  case 4:
    r0 = (s.q___5468 == "n");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.q___5468 = ("\n");
    { step = 12; continue; }
  case 5:
    r0 = (s.q___5468 == "r");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.q___5468 = ("\r");
    { step = 11; continue; }
  case 6:
    r0 = (s.q___5468 == "t");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.q___5468 = ("\t");
    { step = 10; continue; }
  case 7:
    r0 = (s.q___5468 == "u");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    s.tmp_2 = JSON_parseIntRadix__P384_mk(s);
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["s"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_3.arg1 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 4);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 66; s.pc = 18; return s.tmp_3;
  case 18:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = 16;
    s.callLocIdx = 67; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_1);
    s.q___5468 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
  case 8:
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
    if ((s.r___5449) && (s.r___5449).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.r___5449);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5449) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.q___5468) && (s.q___5468).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.q___5468);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.q___5468) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___5449 = (r0);
    { step = 15; continue; }
  case 14:
    if ((s.r___5449) && (s.r___5449).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.r___5449);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5449) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.c___5454) && (s.c___5454).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.c___5454);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.c___5454) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___5449 = (r0);
  case 15:
    { step = 1; continue; }
    r0 = undefined;
  case 16:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doString__P2190.info = {"start":1662,"length":795,"line":68,"column":8,"endLine":90,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doString","argumentNames":["this"]}

function JSON_Parser_doString__P2190_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doString__P2190, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___5449: undefined,
  c___5454: undefined,
  q___5468: undefined,
  arg0: undefined,
} }





function JSON_parseIntRadix__P384(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.m___5532 = undefined;
    s.r___5533 = undefined;
    s.i___5534 = undefined;
    s.c___5540 = undefined;
    s.v___5565 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 == 10);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_String_.toNumber(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 0);
    { step = 36; continue; }
  case 3:
  case 4:
    s.m___5532 = (false);
    s.r___5533 = (0);
    s.i___5534 = (0);
  case 5:
    s.tmp_1 = r0 = s.i___5534;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 33; continue; }
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___5534);
    s.c___5540 = (r0);
    r0 = (s.c___5540 == 32);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 6:
    r0 = (s.c___5540 == 10);
  case 7:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_1;
    { step = 9; continue; }
  case 8:
    r0 = (s.c___5540 == 13);
  case 9:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_2;
    { step = 11; continue; }
  case 10:
    r0 = (s.c___5540 == 9);
  case 11:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 12; continue; }
    { step = 32; continue; }
  case 12:
  case 13:
    r0 = (s.r___5533 == 0);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_4;
    { step = 15; continue; }
  case 14:
    r0 = pxsim_numops_toBoolDecr(s.m___5532);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
  case 15:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_6;
    { step = 17; continue; }
  case 16:
    r0 = (s.c___5540 == 45);
  case 17:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 18; continue; }
    s.m___5532 = (true);
    { step = 32; continue; }
  case 18:
  case 19:
    s.v___5565 = (-1);
    r0 = (48 <= s.c___5540);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 20; continue; }
    r0 = s.tmp_0;
    { step = 21; continue; }
  case 20:
    r0 = (s.c___5540 <= 57);
  case 21:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 22; continue; }
    r0 = (s.c___5540 - 48);
    s.v___5565 = (r0);
    { step = 27; continue; }
  case 22:
    r0 = (s.c___5540 | 32);
    s.c___5540 = (r0);
    r0 = (97 <= s.c___5540);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 23:
    r0 = (s.c___5540 <= 122);
  case 24:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 25; continue; }
    r0 = (s.c___5540 - 97);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 10);
    s.v___5565 = (r0);
  case 25:
  case 26:
  case 27:
    r0 = (0 <= s.v___5565);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 28; continue; }
    r0 = s.tmp_0;
    { step = 29; continue; }
  case 28:
    r0 = (s.v___5565 < s.arg1);
  case 29:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 30; continue; }
    r0 = (s.r___5533 * s.arg1);
    s.r___5533 = (r0);
    r0 = (s.r___5533 + s.v___5565);
    s.r___5533 = (r0);
    { step = 31; continue; }
  case 30:
    r0 = undefined;
    { step = 36; continue; }
  case 31:
  case 32:
    r0 = (s.i___5534 + 1);
    s.i___5534 = (r0);
    { step = 5; continue; }
  case 33:
    r0 = pxsim_numops_toBoolDecr(s.m___5532);
    if (!r0) { step = 34; continue; }
    r0 = (0 - s.r___5533);
    { step = 35; continue; }
  case 34:
    r0 = s.r___5533;
  case 35:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
  case 36:
    return leave(s, r0)
  default: oops()
} } }
JSON_parseIntRadix__P384.info = {"start":21,"length":894,"line":1,"column":4,"endLine":35,"endColumn":5,"fileName":"pxt_modules/base/json.ts","functionName":"parseIntRadix","argumentNames":["s","base"]}

function JSON_parseIntRadix__P384_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_parseIntRadix__P384, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  m___5532: undefined,
  r___5533: undefined,
  i___5534: undefined,
  c___5540: undefined,
  v___5565: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Parser_doNumber__P2193(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.beg___5615 = undefined;
    s.c___5619 = undefined;
    s.ss___5647 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    r0 = s.arg0.fields["ptr"];
    s.beg___5615 = (r0);
  case 1:
    s.tmp_0 = JSON_Parser_nextChar__P2189_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 80; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    s.c___5619 = (r0);
    r0 = (48 <= s.c___5619);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___5619 <= 57);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 5; continue; }
  case 4:
    r0 = (s.c___5619 == 43);
  case 5:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 6:
    r0 = (s.c___5619 == 45);
  case 7:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_3;
    { step = 9; continue; }
  case 8:
    r0 = (s.c___5619 == 46);
  case 9:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_4;
    { step = 11; continue; }
  case 10:
    r0 = (s.c___5619 == 69);
  case 11:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 12; continue; }
    r0 = s.tmp_5;
    { step = 13; continue; }
  case 12:
    r0 = (s.c___5619 == 101);
  case 13:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 14; continue; }
    { step = 15; continue; }
  case 14:
    s.tmp_7 = r0 = s.arg0;
    r0 = s.tmp_7.fields["ptr"];
    s.tmp_9 = r0;
    r0 = (s.tmp_9 - 1);
    s.tmp_8 = r0;
    r0 = (s.tmp_7).fields["ptr"] = (s.tmp_8);
    { step = 16; continue; }
  case 15:
    { step = 1; continue; }
  case 16:
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["s"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.beg___5615;
    r0 = s.arg0.fields["ptr"];
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 81; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.ss___5647 = (r0);
    r0 = pxsim_String_.length(s.ss___5647);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    s.tmp_2 = JSON_Parser_error__P2187_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "expecting number";
    s.callLocIdx = 82; s.pc = 22; return s.tmp_2;
  case 22:
    r0 = s.retval;
    r0 = 0;
    { step = 19; continue; }
  case 17:
  case 18:
    r0 = pxsim_String_.toNumber(s.ss___5647);
  case 19:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doNumber__P2193.info = {"start":4169,"length":585,"line":151,"column":8,"endLine":168,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doNumber","argumentNames":["this"]}

function JSON_Parser_doNumber__P2193_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doNumber__P2193, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  beg___5615: undefined,
  c___5619: undefined,
  ss___5647: undefined,
  arg0: undefined,
} }





function JSON_Parser_doArray__P2191(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5663 = undefined;
    s.c___5669 = undefined;
    s.v___5677 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    r0 = pxsim_Array__mk();
    s.r___5663 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
  case 1:
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 68; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.c___5669 = (r0);
    r0 = (s.c___5669 == 93);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
    r0 = s.r___5663;
    { step = 11; continue; }
  case 2:
  case 3:
    s.tmp_0 = JSON_Parser_value__P2195_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 69; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.v___5677 = (r0);
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = null;
    { step = 11; continue; }
  case 4:
  case 5:
    r0 = pxsim_Array__push(s.r___5663, s.v___5677);
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 70; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.c___5669 = (r0);
    r0 = (s.c___5669 == 44);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
    { step = 10; continue; }
  case 6:
  case 7:
    r0 = (s.c___5669 == 93);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    { step = 10; continue; }
  case 8:
  case 9:
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "expecting comma";
    s.callLocIdx = 71; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
  case 10:
    { step = 1; continue; }
    r0 = undefined;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doArray__P2191.info = {"start":2467,"length":646,"line":92,"column":8,"endLine":114,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doArray","argumentNames":["this"]}

function JSON_Parser_doArray__P2191_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doArray__P2191, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  r___5663: undefined,
  c___5669: undefined,
  v___5677: undefined,
  arg0: undefined,
} }





function JSON_Parser_doObject__P2192(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5698 = undefined;
    s.c___5704 = undefined;
    s.k___5716 = undefined;
    s.v___5728 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
    r0 = pxsim_pxtrt.mkMap();
    s.r___5698 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
  case 1:
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 72; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.c___5704 = (r0);
    r0 = (s.c___5704 == 125);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
    r0 = s.r___5698;
    { step = 15; continue; }
  case 2:
  case 3:
    r0 = (s.c___5704 != 34);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "expecting key";
    s.callLocIdx = 73; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    r0 = s.r___5698;
    { step = 15; continue; }
  case 4:
  case 5:
    s.tmp_0 = JSON_Parser_doString__P2190_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 74; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.k___5716 = (r0);
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 75; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    s.c___5704 = (r0);
    r0 = (s.c___5704 != 58);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "expecting colon";
    s.callLocIdx = 76; s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
    r0 = s.r___5698;
    { step = 15; continue; }
  case 6:
  case 7:
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
    s.tmp_0 = JSON_Parser_value__P2195_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 77; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.v___5728 = (r0);
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = null;
    { step = 15; continue; }
  case 8:
  case 9:
    r0 = pxsim_pxtrt.mapSetGeneric(s.r___5698, s.k___5716, s.v___5728);
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 78; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    s.c___5704 = (r0);
    r0 = (s.c___5704 == 44);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
    { step = 14; continue; }
  case 10:
  case 11:
    r0 = (s.c___5704 == 125);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    { step = 14; continue; }
  case 12:
  case 13:
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    r0 = pxsim_String_.fromCharCode(s.c___5704);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("expecting comma, got ", s.tmp_2);
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 79; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
  case 14:
    { step = 1; continue; }
    r0 = undefined;
  case 15:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doObject__P2192.info = {"start":3123,"length":1036,"line":116,"column":8,"endLine":149,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doObject","argumentNames":["this"]}

function JSON_Parser_doObject__P2192_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doObject__P2192, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  r___5698: undefined,
  c___5704: undefined,
  k___5716: undefined,
  v___5728: undefined,
  arg0: undefined,
} }





function settings_readString__P1086(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___5756 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._get(s.arg0);
    s.buf___5756 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.buf___5756);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
    r0 = pxsim.BufferMethods.toString(s.buf___5756);
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
settings_readString__P1086.info = {"start":2649,"length":177,"line":103,"column":4,"endLine":109,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readString","argumentNames":["key"]}

function settings_readString__P1086_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readString__P1086, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  buf___5756: undefined,
  arg0: undefined,
} }





function settings_readBuffer__P1085(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._get(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_readBuffer__P1085.info = {"start":2516,"length":72,"line":96,"column":4,"endLine":98,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readBuffer","argumentNames":["key"]}

function settings_readBuffer__P1085_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readBuffer__P1085, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function azureiot_hubDeviceId__P1296(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = azureiot_connectionStringPart__P2287_mk(s);
    s.tmp_0.arg0 = "DeviceId";
    s.callLocIdx = 392; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_hubDeviceId__P1296.info = {"start":1322,"length":85,"line":45,"column":4,"endLine":47,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"hubDeviceId","argumentNames":[]}

function azureiot_hubDeviceId__P1296_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_hubDeviceId__P1296, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_connectionStringPart__P2287(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.connStringParts___5772 = undefined;
    s.value___5775 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_parseConnectionString__P2286_mk(s);
    s.callLocIdx = 420; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.connStringParts___5772 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.connStringParts___5772, s.arg0);
    s.value___5775 = (r0);
    s.tmp_0 = r0 = s.value___5775;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.mkEmpty();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
azureiot_connectionStringPart__P2287.info = {"start":3779,"length":179,"line":112,"column":4,"endLine":116,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"connectionStringPart","argumentNames":["name"]}

function azureiot_connectionStringPart__P2287_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_connectionStringPart__P2287, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  connStringParts___5772: undefined,
  value___5775: undefined,
  arg0: undefined,
} }





function azureiot_hubName__P1295(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = azureiot_connectionStringPart__P2287_mk(s);
    s.tmp_0.arg0 = "HostName";
    s.callLocIdx = 391; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_hubName__P1295.info = {"start":1235,"length":81,"line":41,"column":4,"endLine":43,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"hubName","argumentNames":[]}

function azureiot_hubName__P1295_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_hubName__P1295, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function control_allocateEventSource__P332(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (globals._evSource___2169 + 1);
    s.tmp_0 = r0;
    globals._evSource___2169 = (r0);
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
control_allocateEventSource__P332.info = {"start":2528,"length":72,"line":85,"column":4,"endLine":87,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"allocateEventSource","argumentNames":[]}

function control_allocateEventSource__P332_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_allocateEventSource__P332, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_log__P2281(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1293;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("azureiot: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 383; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_log__P2281.info = {"start":490,"length":87,"line":20,"column":4,"endLine":22,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"log","argumentNames":["msg"]}

function azureiot_log__P2281_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_log__P2281, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_computeReadings__P2642(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.rd___5796 = undefined;
    s.serv___5799 = undefined;
    s.unnamed180___U2 = undefined;
    s.unnamed181___U3 = undefined;
    s.ex___5804 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2639_VT)) failedCast(r0);
    r0 = pxsim_pxtrt.mkMap();
    s.rd___5796 = (r0);
    s.serv___5799 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed180___U2 = (r0);
    s.unnamed181___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed181___U3;
    r0 = pxsim_Array__length(s.unnamed180___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed180___U2, s.unnamed181___U3);
    s.serv___5799 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.serv___5799);
    if (!r0) { step = 4; continue; }
    s.tmp_2 = jacdac_twins_ServiceTwin_extract__P2631_mk(s);
    s.tmp_2.arg0 = s.serv___5799;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 1032; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.ex___5804 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.ex___5804);
    if (!r0) { step = 2; continue; }
    r0 = s.serv___5799.fields["id"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.rd___5796, s.tmp_0, s.ex___5804);
  case 2:
  case 3:
  case 4:
  case 5:
    r0 = (s.unnamed181___U3 + 1);
    s.unnamed181___U3 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed180___U2 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.rd___5796);
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.arg0.fields["id"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.arg2, s.tmp_3, s.rd___5796);
  case 7:
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_computeReadings__P2642.info = {"start":7167,"length":385,"line":224,"column":8,"endLine":235,"endColumn":9,"fileName":"twins.ts","functionName":"computeReadings","argumentNames":["this","now","target"]}

function jacdac_twins_DeviceTwin_computeReadings__P2642_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_computeReadings__P2642, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  rd___5796: undefined,
  serv___5799: undefined,
  unnamed180___U2: undefined,
  unnamed181___U3: undefined,
  ex___5804: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_twins_ServiceTwin_extract__P2631(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.readings___5834 = undefined;
    s.timedelta___5837 = undefined;
    s.i___5847 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2630_VT)) failedCast(r0);
    r0 = s.arg0.fields["readings"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = null;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["readings"];
    s.readings___5834 = (r0);
    r0 = s.arg0.fields["timestamps"];
    s.timedelta___5837 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["readings"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["timestamps"] = (s.tmp_1);
    s.i___5847 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___5847;
    r0 = pxsim_Array__length(s.timedelta___5837);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = r0 = s.timedelta___5837;
    s.tmp_4 = r0 = s.i___5847;
    r0 = pxsim_Array__getAt(s.tmp_3, s.i___5847);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 - s.arg1);
    s.tmp_5 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_3, s.tmp_4, s.tmp_5);
    r0 = (s.i___5847 + 1);
    s.i___5847 = (r0);
    { step = 3; continue; }
  case 4:
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "readings", s.readings___5834);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "timedelta", s.timedelta___5837);
    r0 = s.tmp_0;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_extract__P2631.info = {"start":1418,"length":424,"line":54,"column":8,"endLine":65,"endColumn":9,"fileName":"twins.ts","functionName":"extract","argumentNames":["this","now"]}

function jacdac_twins_ServiceTwin_extract__P2631_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_extract__P2631, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  readings___5834: undefined,
  timedelta___5837: undefined,
  i___5847: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_connectTwinUpdate__P2647(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_runInBackground__P289_mk(s);
    s.tmp_0.arg0 = jacdac_twins_connectTwinUpdate_inline__P5865;
    s.callLocIdx = 1060; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_connectTwinUpdate__P2647.info = {"start":9886,"length":353,"line":309,"column":4,"endLine":318,"endColumn":5,"fileName":"twins.ts","functionName":"connectTwinUpdate","argumentNames":[]}

function jacdac_twins_connectTwinUpdate__P2647_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_connectTwinUpdate__P2647, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_twins_connectTwinUpdate_inline__P5865(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 1055; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = azureiot_onTwinUpdate__P1310_mk(s);
    s.tmp_0.arg0 = jacdac_twins_connectTwinUpdate_inline__P5868;
    s.callLocIdx = 1059; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_connectTwinUpdate_inline__P5865.info = {"start":10013,"length":219,"line":311,"column":32,"endLine":317,"endColumn":9,"fileName":"twins.ts","functionName":"inline","argumentNames":[]}

function jacdac_twins_connectTwinUpdate_inline__P5865_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_connectTwinUpdate_inline__P5865, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_twins_connectTwinUpdate_inline__P5868(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 1056; s.pc = 2; return s.tmp_3;
  case 2:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("apply: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1057; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_twins_applyTwinUpdate__P2646_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1058; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_connectTwinUpdate_inline__P5868.info = {"start":10078,"length":143,"line":313,"column":34,"endLine":316,"endColumn":13,"fileName":"twins.ts","functionName":"inline","argumentNames":["twin","patch"]}

function jacdac_twins_connectTwinUpdate_inline__P5868_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_connectTwinUpdate_inline__P5868, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_applyTwinUpdate__P2646(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.t___5882 = undefined;
    s.unnamed194___U1 = undefined;
    s.unnamed195___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.t___5882 = (undefined);
    s.unnamed194___U1 = (globals.twins___2619);
    s.unnamed195___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed195___U2;
    r0 = pxsim_Array__length(s.unnamed194___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed194___U1, s.unnamed195___U2);
    s.t___5882 = (r0);
    r0 = s.t___5882.fields["id"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_4 = jacdac_twins_DeviceTwin_applyTwinUpdate__P2640_mk(s);
    s.tmp_4.arg0 = s.t___5882;
    r0 = s.t___5882.fields["id"];
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.tmp_5);
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 1054; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
  case 2:
  case 3:
    r0 = (s.unnamed195___U2 + 1);
    s.unnamed195___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed194___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_applyTwinUpdate__P2646.info = {"start":9717,"length":142,"line":301,"column":4,"endLine":305,"endColumn":5,"fileName":"twins.ts","functionName":"applyTwinUpdate","argumentNames":["upd"]}

function jacdac_twins_applyTwinUpdate__P2646_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_applyTwinUpdate__P2646, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  t___5882: undefined,
  unnamed194___U1: undefined,
  unnamed195___U2: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_applyTwinUpdate__P2640(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.s___5895 = undefined;
    s.unnamed176___U1 = undefined;
    s.unnamed177___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2639_VT)) failedCast(r0);
    s.s___5895 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed176___U1 = (r0);
    s.unnamed177___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed177___U2;
    r0 = pxsim_Array__length(s.unnamed176___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed176___U1, s.unnamed177___U2);
    s.s___5895 = (r0);
    s.tmp_2 = r0 = s.s___5895;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = s.s___5895.fields["id"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.tmp_3);
  case 3:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 4; continue; }
    s.tmp_5 = jacdac_twins_ServiceTwin_applyTwinUpdate__P2633_mk(s);
    s.tmp_5.arg0 = s.s___5895;
    r0 = s.s___5895.fields["id"];
    s.tmp_6 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.tmp_6);
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 1030; s.pc = 7; return s.tmp_5;
  case 7:
    r0 = s.retval;
  case 4:
  case 5:
    r0 = (s.unnamed177___U2 + 1);
    s.unnamed177___U2 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed176___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_applyTwinUpdate__P2640.info = {"start":6883,"length":146,"line":213,"column":8,"endLine":216,"endColumn":9,"fileName":"twins.ts","functionName":"applyTwinUpdate","argumentNames":["this","upd"]}

function jacdac_twins_DeviceTwin_applyTwinUpdate__P2640_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_applyTwinUpdate__P2640, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  s___5895: undefined,
  unnamed176___U1: undefined,
  unnamed177___U2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_ServiceTwin_applyTwinUpdate__P2633(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.regs___5918 = undefined;
    s.k___5933 = undefined;
    s.unnamed170___U2 = undefined;
    s.unnamed171___U3 = undefined;
    s.rspec___5937 = undefined;
    s.v___5952 = undefined;
    s.payload___5983 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2630_VT)) failedCast(r0);
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 0;
    s.callLocIdx = 979; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("applying update: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 980; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, "registers");
    s.regs___5918 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.regs___5918, "streaming");
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.regs___5918, "streaming");
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["enabled"] = (s.tmp_3);
  case 1:
  case 2:
    s.k___5933 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.regs___5918);
    s.unnamed170___U2 = (r0);
    s.unnamed171___U3 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed171___U3;
    r0 = pxsim_Array__length(s.unnamed170___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_Array__getAt(s.unnamed170___U2, s.unnamed171___U3);
    s.k___5933 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, rspec_inline__P5939);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.k___5933);
    s.tmp_3 = helpers_arrayFind__P111_mk(s);
    s.tmp_4 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_4.arg0 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "registers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["registers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["registers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 981; s.pc = 15; return s.tmp_4; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_2;
    s.callLocIdx = 983; s.pc = 14; return s.tmp_3;
  case 14:
    r0 = s.retval;
    s.rspec___5937 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.regs___5918, s.k___5933);
    s.v___5952 = (r0);
    s.tmp_0 = r0 = s.rspec___5937;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    r0 = pxsim_pxtcore.typeOf(s.v___5952);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "number");
  case 5:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 6:
    s.tmp_4 = if_code_1_mk(s);
    s.tmp_4.arg0 = s.rspec___5937;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "code");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["code"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["code"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 984; s.pc = 16; return s.tmp_4; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_3 < 256);
  case 7:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 8; continue; }
    s.tmp_6 = console_log__P378_mk(s);
    r0 = s.arg0.fields["id"];
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat("set ", s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_10, ".");
    s.tmp_9 = r0;
    s.tmp_15 = if_name_1_mk(s);
    s.tmp_15.arg0 = s.rspec___5937;
    if (!s.tmp_15.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_15.arg0, "name");
    } else {
      s.tmp_15.fn = s.tmp_15.arg0.vtable.iface["name"];
      if (s.tmp_15.fn == null) { s.retval = s.tmp_15.arg0.fields["name"]; }
      else if (!s.tmp_15.fn.isGetter) { s.retval = bind(s.tmp_15); }
     else { s.callLocIdx = 985; s.pc = 19; return s.tmp_15; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_13);
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, " to ");
    s.tmp_7 = r0;
    if ((s.v___5952) && (s.v___5952).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.v___5952);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.v___5952) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_16);
    s.tmp_6.arg0 = r0;
    s.callLocIdx = 986; s.pc = 17; return s.tmp_6;
  case 17:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.v___5952);
    s.tmp_1 = jacdac_JDPacket_jdpacked__P1364_mk(s);
    s.tmp_3 = if_code_1_mk(s);
    s.tmp_3.arg0 = s.rspec___5937;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "code");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["code"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["code"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 987; s.pc = 23; return s.tmp_3; }
    }
  case 23:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (8192 | s.tmp_2);
    s.tmp_1.arg0 = r0;
    s.tmp_4 = if_packf_1_mk(s);
    s.tmp_4.arg0 = s.rspec___5937;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "packf");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["packf"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["packf"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 988; s.pc = 24; return s.tmp_4; }
    }
  case 24:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 989; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.payload___5983 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.payload___5983;
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 990; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_0.arg0 = s.payload___5983;
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 991; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
  case 8:
  case 9:
    r0 = (s.unnamed171___U3 + 1);
    s.unnamed171___U3 = (r0);
    { step = 3; continue; }
  case 10:
    s.unnamed170___U2 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_applyTwinUpdate__P2633.info = {"start":2162,"length":890,"line":78,"column":8,"endLine":97,"endColumn":9,"fileName":"twins.ts","functionName":"applyTwinUpdate","argumentNames":["this","upd"]}

function jacdac_twins_ServiceTwin_applyTwinUpdate__P2633_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_applyTwinUpdate__P2633, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  regs___5918: undefined,
  k___5933: undefined,
  unnamed170___U2: undefined,
  unnamed171___U3: undefined,
  rspec___5937: undefined,
  v___5952: undefined,
  payload___5983: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function rspec_inline__P5939(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = if_name_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "name");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["name"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["name"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 982; s.pc = 1; return s.tmp_1; }
    }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
rspec_inline__P5939.info = {"start":2504,"length":16,"line":84,"column":55,"endLine":84,"endColumn":71,"fileName":"twins.ts","functionName":"inline","argumentNames":["r"]}

function rspec_inline__P5939_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: rspec_inline__P5939, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket__sendCmd__P1399(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket__sendCmdId__P1400_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = s.arg1.fields["deviceId"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 523; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCmd__P1399.info = {"start":7569,"length":104,"line":244,"column":8,"endLine":247,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCmd","argumentNames":["this","dev"]}

function jacdac_JDPacket__sendCmd__P1399_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCmd__P1399, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendCmdId__P1400(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_deviceIdentifier__P1367_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 524; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 3, s.tmp_1);
    s.tmp_0 = jacdac_JDPacket__sendCore__P1397_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 525; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCmdId__P1400.info = {"start":7683,"length":192,"line":249,"column":8,"endLine":254,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCmdId","argumentNames":["this","devId"]}

function jacdac_JDPacket__sendCmdId__P1400_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCmdId__P1400, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendCore__P1397(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 12);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 != s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("jdsize mismatch");
  case 1:
  case 2:
    s.tmp_5 = jacdac___physSendPacket__P1314_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_5.arg0 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 519; s.pc = 3; return s.tmp_5;
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_processPacket__P1747_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 520; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCore__P1397.info = {"start":7179,"length":227,"line":232,"column":8,"endLine":236,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCore","argumentNames":["this"]}

function jacdac_JDPacket__sendCore__P1397_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCore__P1397, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_Bus_processPacket__P1747(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.devId___6043 = undefined;
    s.multiCommandClass___6046 = undefined;
    s.crc___6058 = undefined;
    s.ack___6061 = undefined;
    s.h___6082 = undefined;
    s.unnamed158___U5 = undefined;
    s.unnamed159___U6 = undefined;
    s.h___6111 = undefined;
    s.dev___6126 = undefined;
    s.matches___6174 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 4, 8);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    s.devId___6043 = (r0);
    s.tmp_0 = jacdac_JDPacket_multicommandClass__P1369_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 705; s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
    s.multiCommandClass___6046 = (r0);
    s.tmp_1 = jacdac_JDPacket_requiresAck__P1371_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 706; s.pc = 45; return s.tmp_1;
  case 45:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = jacdac_JDPacket_requiresAck__P1372_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = false;
    s.callLocIdx = 707; s.pc = 46; return s.tmp_2;
  case 46:
    r0 = s.retval;
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, 4, 8);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_2);
    s.tmp_1 = r0;
    s.tmp_5 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 709; s.pc = 47; return s.tmp_5;
  case 47:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_4 = r0;
    r0 = (s.tmp_1 == s.tmp_4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg1.fields["_header"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 0);
    s.crc___6058 = (r0);
    s.tmp_0 = jacdac_JDPacket_onlyHeader__P1363_mk(s);
    s.tmp_0.arg0 = s.crc___6058;
    s.callLocIdx = 711; s.pc = 48; return s.tmp_0;
  case 48:
    r0 = s.retval;
    s.ack___6061 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.ack___6061;
    s.tmp_0.arg1 = 63;
    s.callLocIdx = 712; s.pc = 49; return s.tmp_0;
  case 49:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendReport__P1398_mk(s);
    s.tmp_0.arg0 = s.ack___6061;
    s.tmp_1 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 713; s.pc = 51; return s.tmp_1;
  case 51:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 714; s.pc = 50; return s.tmp_0;
  case 50:
    r0 = s.retval;
  case 1:
  case 2:
  case 3:
  case 4:
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.PACKET_PROCESS___1722;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 715; s.pc = 52; return s.tmp_0;
  case 52:
    r0 = s.retval;
    r0 = (s.multiCommandClass___6046 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tmp_4 = jacdac_JDPacket_isCommand__P1394_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 716; s.pc = 53; return s.tmp_4;
  case 53:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
    { step = 43; continue; }
  case 5:
  case 6:
    s.h___6082 = (undefined);
    r0 = s.arg0.fields["hostServices"];
    s.unnamed158___U5 = (r0);
    s.unnamed159___U6 = (0);
  case 7:
    s.tmp_0 = r0 = s.unnamed159___U6;
    r0 = pxsim_Array__length(s.unnamed158___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_Array__getAt(s.unnamed158___U5, s.unnamed159___U6);
    s.h___6082 = (r0);
    r0 = s.h___6082.fields["serviceClass"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.multiCommandClass___6046);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_2;
    { step = 9; continue; }
  case 8:
    r0 = s.h___6082.fields["running"];
  case 9:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 10; continue; }
    s.tmp_5 = jacdac_JDPacket_deviceIdentifier__P1367_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_6 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.callLocIdx = 717; s.pc = 55; return s.tmp_6;
  case 55:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 718; s.pc = 54; return s.tmp_5;
  case 54:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = s.h___6082.fields["serviceIndex"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 719; s.pc = 56; return s.tmp_0;
  case 56:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server__C1750_v0_2_mk(s);
    s.tmp_0.arg0 = s.h___6082;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacketOuter;
    s.pc = 57; return s.tmp_0;
  case 57:
    r0 = s.retval;
  case 10:
  case 11:
    r0 = (s.unnamed159___U6 + 1);
    s.unnamed159___U6 = (r0);
    { step = 7; continue; }
  case 12:
    s.unnamed158___U5 = (undefined);
    { step = 42; continue; }
  case 13:
    s.tmp_1 = r0 = s.devId___6043;
    s.tmp_3 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 720; s.pc = 58; return s.tmp_3;
  case 58:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_0;
    { step = 15; continue; }
  case 14:
    s.tmp_4 = jacdac_JDPacket_isCommand__P1394_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 721; s.pc = 59; return s.tmp_4;
  case 59:
    r0 = s.retval;
  case 15:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 20; continue; }
    r0 = s.arg0.fields["hostServices"];
    s.tmp_6 = r0;
    r0 = s.arg1.fields["_header"];
    s.tmp_9 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_9, 13);
    s.tmp_8 = r0;
    r0 = (s.tmp_8 & 63);
    s.tmp_7 = r0;
    r0 = pxsim_Array__getAt(s.tmp_6, s.tmp_7);
    s.h___6111 = (r0);
    s.tmp_0 = r0 = s.h___6111;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    r0 = s.h___6111.fields["running"];
  case 17:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 18; continue; }
    s.tmp_2 = jacdac_Server__C1750_v0_2_mk(s);
    s.tmp_2.arg0 = s.h___6111;
    s.tmp_2.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.handlePacketOuter;
    s.pc = 60; return s.tmp_2;
  case 60:
    r0 = s.retval;
  case 18:
  case 19:
    { step = 41; continue; }
  case 20:
    s.tmp_1 = jacdac_JDPacket_isCommand__P1394_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 723; s.pc = 61; return s.tmp_1;
  case 61:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    { step = 43; continue; }
  case 21:
  case 22:
    r0 = pxsim_pxtcore_mkAction(1, dev_inline__P6130);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.devId___6043);
    s.tmp_3 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_2;
    s.callLocIdx = 724; s.pc = 62; return s.tmp_3;
  case 62:
    r0 = s.retval;
    s.dev___6126 = (r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 13);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 63);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 35; continue; }
    r0 = s.arg1.fields["_header"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 14);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 0);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 31; continue; }
    s.tmp_7 = r0 = s.dev___6126;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (r0) { step = 23; continue; }
    r0 = s.tmp_7;
    { step = 24; continue; }
  case 23:
    s.tmp_9 = jacdac_Device_resetCount__P1801_mk(s);
    s.tmp_9.arg0 = s.dev___6126;
    s.callLocIdx = 727; s.pc = 63; return s.tmp_9;
  case 63:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_12 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_12, 0);
    s.tmp_11 = r0;
    r0 = (s.tmp_11 & 15);
    s.tmp_10 = r0;
    r0 = (s.tmp_8 > s.tmp_10);
  case 24:
    // jmp value (already in r0)
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 25; continue; }
    s.tmp_14 = jacdac_log__P2461_mk(s);
    s.tmp_18 = jacdac_Device_shortId__P1804_mk(s);
    s.tmp_18.arg0 = s.dev___6126;
    s.callLocIdx = 729; s.pc = 65; return s.tmp_18;
  case 65:
    r0 = s.retval;
    s.tmp_17 = r0;
    if ((s.tmp_17) && (s.tmp_17).vtable) {
    setupResume(s, 66);
    pxsim_String__stringConv(s.tmp_17);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_17) + ""; }
  case 66:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat("device ", s.tmp_16);
    s.tmp_15 = r0;
    r0 = pxsim_String__concat(s.tmp_15, " resetted");
    s.tmp_14.arg0 = r0;
    s.callLocIdx = 730; s.pc = 64; return s.tmp_14;
  case 64:
    r0 = s.retval;
    r0 = s.arg0.fields["devices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.removeElement(s.tmp_0, s.dev___6126);
    s.tmp_0 = jacdac_Device__destroy__P1818_mk(s);
    s.tmp_0.arg0 = s.dev___6126;
    s.callLocIdx = 731; s.pc = 67; return s.tmp_0;
  case 67:
    r0 = s.retval;
    s.dev___6126 = (null);
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.RESTART___1725;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 732; s.pc = 68; return s.tmp_0;
  case 68:
    r0 = s.retval;
  case 25:
  case 26:
    s.matches___6174 = (false);
    r0 = pxsim_numops_toBoolDecr(s.dev___6126);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Device__C1795_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_Device_constructor__P1799_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    r0 = s.arg1.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_5, 4, 8);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_4);
    s.tmp_3.arg1 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 735; s.pc = 69; return s.tmp_3;
  case 69:
    r0 = s.retval;
    s.dev___6126 = (s.tmp_2);
    s.tmp_0 = jacdac_Device_sendCtrlCommand__P1817_mk(s);
    s.tmp_0.arg0 = s.dev___6126;
    s.tmp_0.arg1 = 4486;
    s.tmp_0.arg2 = null;
    s.callLocIdx = 736; s.pc = 70; return s.tmp_0;
  case 70:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_CONNECT___1717;
    s.tmp_0.arg2 = s.dev___6126;
    s.callLocIdx = 737; s.pc = 71; return s.tmp_0;
  case 71:
    r0 = s.retval;
    { step = 28; continue; }
  case 27:
    s.tmp_0 = jacdac_serviceMatches__P2477_mk(s);
    s.tmp_0.arg0 = s.dev___6126;
    r0 = s.arg1.fields["_data"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 739; s.pc = 72; return s.tmp_0;
  case 72:
    r0 = s.retval;
    s.matches___6174 = (r0);
    s.tmp_0 = r0 = s.dev___6126;
    r0 = s.arg1.fields["_data"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["services"] = (s.tmp_1);
  case 28:
    r0 = pxsim_numops_toBoolDecr(s.matches___6174);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
    s.tmp_2 = jacdac_Bus_reattach__P1746_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.dev___6126;
    s.callLocIdx = 741; s.pc = 73; return s.tmp_2;
  case 73:
    r0 = s.retval;
  case 29:
  case 30:
  case 31:
  case 32:
    r0 = pxsim_numops_toBoolDecr(s.dev___6126);
    if (!r0) { step = 33; continue; }
    s.tmp_0 = jacdac_Device_processPacket__P1814_mk(s);
    s.tmp_0.arg0 = s.dev___6126;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 742; s.pc = 74; return s.tmp_0;
  case 74:
    r0 = s.retval;
  case 33:
  case 34:
    { step = 43; continue; }
    { step = 38; continue; }
  case 35:
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 13);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 63);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 63);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 36; continue; }
    s.tmp_4 = jacdac__gotAck__P1403_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 744; s.pc = 75; return s.tmp_4;
  case 75:
    r0 = s.retval;
  case 36:
  case 37:
  case 38:
    r0 = pxsim_numops_toBoolDecr(s.dev___6126);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 39; continue; }
    { step = 43; continue; }
  case 39:
  case 40:
    s.tmp_2 = jacdac_Device_processPacket__P1814_mk(s);
    s.tmp_2.arg0 = s.dev___6126;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 745; s.pc = 76; return s.tmp_2;
  case 76:
    r0 = s.retval;
  case 41:
  case 42:
  case 43:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_processPacket__P1747.info = {"start":7515,"length":3439,"line":222,"column":8,"endLine":299,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"processPacket","argumentNames":["this","pkt"]}

function jacdac_Bus_processPacket__P1747_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_processPacket__P1747, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  devId___6043: undefined,
  multiCommandClass___6046: undefined,
  crc___6058: undefined,
  ack___6061: undefined,
  h___6082: undefined,
  unnamed158___U5: undefined,
  unnamed159___U6: undefined,
  h___6111: undefined,
  dev___6126: undefined,
  matches___6174: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P6130(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["deviceId"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P6130.info = {"start":9249,"length":24,"line":260,"column":44,"endLine":260,"endColumn":68,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["d"]}

function dev_inline__P6130_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P6130, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__gotAck__P1403(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numNotify___6226 = undefined;
    s.srcId___6227 = undefined;
    s.crc___6230 = undefined;
    s.a___6234 = undefined;
    s.unnamed128___U4 = undefined;
    s.unnamed129___U5 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(globals.ackAwaiters___2319);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 11; continue; }
  case 1:
  case 2:
    s.numNotify___6226 = (0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 4, 8);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    s.srcId___6227 = (r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 14);
    s.crc___6230 = (r0);
    s.a___6234 = (undefined);
    s.unnamed128___U4 = (globals.ackAwaiters___2319);
    s.unnamed129___U5 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed129___U5;
    r0 = pxsim_Array__length(s.unnamed128___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed128___U4, s.unnamed129___U5);
    s.a___6234 = (r0);
    r0 = s.a___6234.fields["crc"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.crc___6230);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.a___6234.fields["srcId"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.srcId___6227);
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 6; continue; }
    r0 = (s.a___6234).fields["nextRetry"] = (0);
    r0 = s.a___6234.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0);
    r0 = (s.numNotify___6226 + 1);
    s.numNotify___6226 = (r0);
  case 6:
  case 7:
    r0 = (s.unnamed129___U5 + 1);
    s.unnamed129___U5 = (r0);
    { step = 3; continue; }
  case 8:
    s.unnamed128___U4 = (undefined);
    r0 = pxsim_numops_toBoolDecr(s.numNotify___6226);
    if (!r0) { step = 9; continue; }
    s.tmp_0 = helpers_arrayFilter__P110_mk(s);
    s.tmp_0.arg0 = globals.ackAwaiters___2319;
    s.tmp_0.arg1 = jacdac__gotAck_inline__P6262;
    s.callLocIdx = 538; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    globals.ackAwaiters___2319 = (r0);
  case 9:
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__gotAck__P1403.info = {"start":10043,"length":508,"line":322,"column":4,"endLine":335,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_gotAck","argumentNames":["pkt"]}

function jacdac__gotAck__P1403_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__gotAck__P1403, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  numNotify___6226: undefined,
  srcId___6227: undefined,
  crc___6230: undefined,
  a___6234: undefined,
  unnamed128___U4: undefined,
  unnamed129___U5: undefined,
  arg0: undefined,
} }





function jacdac__gotAck_inline__P6262(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 !== 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac__gotAck_inline__P6262.info = {"start":10522,"length":22,"line":334,"column":56,"endLine":334,"endColumn":78,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function jacdac__gotAck_inline__P6262_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__gotAck_inline__P6262, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_processPacket__P1814(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.q___6283 = undefined;
    s.serviceClass___6301 = undefined;
    s.ec___6313 = undefined;
    s.ahead___6326 = undefined;
    s.behind___6334 = undefined;
    s.client___6362 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.tmp_1);
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.PACKET_RECEIVE___1726;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 857; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1382_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 858; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["queries"];
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    s.tmp_3 = jacdac_Device_lookupQuery__P2473_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_4 = jacdac_JDPacket_regCode__P1383_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 859; s.pc = 27; return s.tmp_4;
  case 27:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    r0 = s.arg1.fields["_header"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_6, 13);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 & 63);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 861; s.pc = 26; return s.tmp_3;
  case 26:
    r0 = s.retval;
    s.q___6283 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.q___6283);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = r0 = s.q___6283;
    r0 = s.arg1.fields["_data"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["value"] = (s.tmp_1);
    s.tmp_0 = r0 = s.q___6283;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastReport"] = (s.tmp_1);
  case 3:
  case 4:
  case 5:
  case 6:
    s.tmp_0 = jacdac_Device_serviceClassAt__P1808_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = s.arg1.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 13);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 63);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 864; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    s.serviceClass___6301 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.serviceClass___6301);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = (s.serviceClass___6301 == 4294967295);
  case 8:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 9; continue; }
    { step = 23; continue; }
  case 9:
  case 10:
    s.tmp_4 = jacdac_JDPacket_isEvent__P1378_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 865; s.pc = 29; return s.tmp_4;
  case 29:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 19; continue; }
    r0 = s.arg0.fields["_eventCounter"];
    s.ec___6313 = (r0);
    r0 = (s.ec___6313 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_2 = jacdac_JDPacket_eventCounter__P1380_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 866; s.pc = 30; return s.tmp_2;
  case 30:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - 1);
    s.ec___6313 = (r0);
  case 11:
  case 12:
    r0 = (s.ec___6313 + 1);
    s.ec___6313 = (r0);
    s.tmp_2 = jacdac_JDPacket_eventCounter__P1380_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 867; s.pc = 31; return s.tmp_2;
  case 31:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - s.ec___6313);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 127);
    s.ahead___6326 = (r0);
    s.tmp_1 = r0 = s.ec___6313;
    s.tmp_3 = jacdac_JDPacket_eventCounter__P1380_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 868; s.pc = 32; return s.tmp_3;
  case 32:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 127);
    s.behind___6334 = (r0);
    r0 = (s.ahead___6326 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 16; continue; }
  case 13:
    r0 = (s.behind___6334 < 60);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 14; continue; }
    r0 = s.tmp_1;
    { step = 15; continue; }
  case 14:
    r0 = (s.ahead___6326 < 5);
  case 15:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
  case 16:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 17; continue; }
    { step = 23; continue; }
  case 17:
  case 18:
    s.tmp_4 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = globals.EVENT___1727;
    s.tmp_4.arg2 = s.arg1;
    s.callLocIdx = 869; s.pc = 33; return s.tmp_4;
  case 33:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = globals.EVENT___1727;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 870; s.pc = 34; return s.tmp_0;
  case 34:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_eventCounter__P1380_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 871; s.pc = 35; return s.tmp_2;
  case 35:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_eventCounter"] = (s.tmp_1);
  case 19:
  case 20:
    r0 = pxsim_pxtcore_mkAction(2, client_inline__P6364);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.serviceClass___6301);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg1);
    s.tmp_1 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["clients"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 873; s.pc = 36; return s.tmp_1;
  case 36:
    r0 = s.retval;
    s.client___6362 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.client___6362);
    if (!r0) { step = 21; continue; }
    r0 = (s.client___6362).fields["currentDevice"] = (s.arg0);
    s.tmp_0 = jacdac_Client_handlePacketOuter__P1783_mk(s);
    s.tmp_0.arg0 = s.client___6362;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 874; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
  case 21:
  case 22:
  case 23:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_processPacket__P1814.info = {"start":35687,"length":1961,"line":1088,"column":8,"endLine":1131,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"processPacket","argumentNames":["this","pkt"]}

function jacdac_Device_processPacket__P1814_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_processPacket__P1814, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  q___6283: undefined,
  serviceClass___6301: undefined,
  ec___6313: undefined,
  ahead___6326: undefined,
  behind___6334: undefined,
  client___6362: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function client_inline__P6364(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["broadcast"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[0]);
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2 = r0;
    r0 = s.caps[1].fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, 13);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 63);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 == s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = s.tmp_6;
    return leave(s, r0)
  default: oops()
} } }
client_inline__P6364.info = {"start":37271,"length":142,"line":1121,"column":45,"endLine":1124,"endColumn":56,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["c"]}

function client_inline__P6364_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: client_inline__P6364, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }





function jacdac_Client_handlePacketOuter__P1783(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.code___6400 = undefined;
    s.register___6419 = undefined;
    s.unnamed162___U2 = undefined;
    s.unnamed163___U3 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = r0 = s.arg0;
    r0 = s.arg1.fields["_data"];
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["advertisementData"] = (s.tmp_4);
  case 1:
  case 2:
    s.tmp_1 = jacdac_JDPacket_isEvent__P1378_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 803; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = jacdac_JDPacket_eventCode__P1379_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 804; s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.code___6400 = (r0);
    r0 = (s.code___6400 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = (s.arg0).fields["systemActive"] = (true);
    { step = 6; continue; }
  case 3:
    r0 = (s.code___6400 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = (s.arg0).fields["systemActive"] = (false);
  case 4:
  case 5:
  case 6:
    s.tmp_0 = jacdac_Client_raiseEvent__P2368_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.code___6400;
    s.tmp_1 = jacdac_JDPacket_intData__P1386_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 805; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 806; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
  case 7:
  case 8:
    s.register___6419 = (undefined);
    r0 = s.arg0.fields["registers"];
    s.unnamed162___U2 = (r0);
    s.unnamed163___U3 = (0);
  case 9:
    s.tmp_0 = r0 = s.unnamed163___U3;
    r0 = pxsim_Array__length(s.unnamed162___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_Array__getAt(s.unnamed162___U2, s.unnamed163___U3);
    s.register___6419 = (r0);
    s.tmp_2 = jacdac_RegisterClient_handlePacket__P1769_mk(s);
    s.tmp_2.arg0 = s.register___6419;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 807; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    r0 = (s.unnamed163___U3 + 1);
    s.unnamed163___U3 = (r0);
    { step = 9; continue; }
  case 10:
    s.unnamed162___U2 = (undefined);
    s.tmp_0 = jacdac_Client__C1770_v0_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Client__C1770_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacket;
    s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacketOuter__P1783.info = {"start":25191,"length":560,"line":762,"column":8,"endLine":775,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_Client_handlePacketOuter__P1783_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacketOuter__P1783, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  code___6400: undefined,
  register___6419: undefined,
  unnamed162___U2: undefined,
  unnamed163___U3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_handlePacket__P1784(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacket__P1784.info = {"start":25761,"length":30,"line":777,"column":8,"endLine":777,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_Client_handlePacket__P1784_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacket__P1784, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_RegisterClient_handlePacket__P1769(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___6441 = undefined;
    s.changed___6444 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C1762_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1382_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 792; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["code"];
    s.tmp_2 = r0;
    s.tmp_4 = jacdac_JDPacket_regCode__P1383_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 793; s.pc = 8; return s.tmp_4;
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 == s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 5; continue; }
    r0 = s.arg1.fields["_data"];
    s.d___6441 = (r0);
    s.tmp_2 = helpers_bufferEquals__P185_mk(s);
    s.tmp_2.arg0 = s.d___6441;
    r0 = s.arg0.fields["data"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 795; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    s.changed___6444 = (r0);
    r0 = (s.arg0).fields["data"] = (s.d___6441);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.REPORT_RECEIVE___1723;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 796; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.changed___6444);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.REPORT_UPDATE___1724;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 797; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___1716;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 798; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 3:
  case 4:
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_handlePacket__P1769.info = {"start":21676,"length":486,"line":659,"column":8,"endLine":671,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_RegisterClient_handlePacket__P1769_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_handlePacket__P1769, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  d___6441: undefined,
  changed___6444: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_bufferEquals__P185(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___6490 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_7 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_11 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_9);
    s.tmp_8 = r0;
    r0 = (s.tmp_4 == s.tmp_8);
    { step = 11; continue; }
  case 3:
  case 4:
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_13 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_14 = r0;
    r0 = (s.tmp_13 != s.tmp_14);
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 5; continue; }
    r0 = false;
    { step = 11; continue; }
  case 5:
  case 6:
    s.i___6490 = (0);
  case 7:
    s.tmp_1 = r0 = s.i___6490;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___6490);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.i___6490);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 != s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 8; continue; }
    r0 = false;
    { step = 11; continue; }
  case 8:
  case 9:
    r0 = (s.i___6490 + 1);
    s.i___6490 = (r0);
    { step = 7; continue; }
  case 10:
    r0 = true;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferEquals__P185.info = {"start":3970,"length":283,"line":139,"column":4,"endLine":147,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferEquals","argumentNames":["l","r"]}

function helpers_bufferEquals__P185_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferEquals__P185, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  i___6490: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_intData__P1386(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_0 = jacdac_intOfBuffer__P1404_mk(s);
    r0 = s.arg0.fields["_data"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 502; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_intData__P1386.info = {"start":5282,"length":68,"line":167,"column":8,"endLine":169,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"intData","argumentNames":["this"]}
jacdac_JDPacket_intData__P1386.isGetter = true;

function jacdac_JDPacket_intData__P1386_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_intData__P1386, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_intOfBuffer__P1404(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.fmt___6510 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 1:
  case 2:
    s.fmt___6510 = (1);
    { step = 6; continue; }
  case 3:
  case 4:
    s.fmt___6510 = (3);
    { step = 6; continue; }
  case 5:
    s.fmt___6510 = (5);
  case 6:
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt___6510, 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_intOfBuffer__P1404.info = {"start":10557,"length":461,"line":337,"column":4,"endLine":353,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"intOfBuffer","argumentNames":["data"]}

function jacdac_intOfBuffer__P1404_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_intOfBuffer__P1404, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  fmt___6510: undefined,
  arg0: undefined,
} }





function jacdac_Client_raiseEvent__P2368(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___6536 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = s.arg0.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, s.arg1);
    r0 = s.arg0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["handlers"];
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, s.tmp_2);
    s.h___6536 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.h___6536);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.h___6536;
    s.tmp_0.arg0 = s.arg2;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 840; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_raiseEvent__P2368.info = {"start":29921,"length":251,"line":903,"column":8,"endLine":909,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"raiseEvent","argumentNames":["this","value","argument"]}

function jacdac_Client_raiseEvent__P2368_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_raiseEvent__P2368, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  h___6536: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket_eventCode__P1379(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isEvent__P1378_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 495; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_eventCode__P1379.info = {"start":4363,"length":147,"line":132,"column":8,"endLine":136,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"eventCode","argumentNames":["this"]}
jacdac_JDPacket_eventCode__P1379.isGetter = true;

function jacdac_JDPacket_eventCode__P1379_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_eventCode__P1379, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_eventCounter__P1380(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isEvent__P1378_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 497; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, 4, 14);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >> 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 127);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_eventCounter__P1380.info = {"start":4520,"length":202,"line":138,"column":8,"endLine":143,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"eventCounter","argumentNames":["this"]}
jacdac_JDPacket_eventCounter__P1380.isGetter = true;

function jacdac_JDPacket_eventCounter__P1380_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_eventCounter__P1380, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isEvent__P1378(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isReport__P1395_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 493; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, 4, 14);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 32768);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isEvent__P1378.info = {"start":4248,"length":105,"line":128,"column":8,"endLine":130,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isEvent","argumentNames":["this"]}
jacdac_JDPacket_isEvent__P1378.isGetter = true;

function jacdac_JDPacket_isEvent__P1378_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isEvent__P1378, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isReport__P1395(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isReport__P1395.info = {"start":6659,"length":89,"line":217,"column":8,"endLine":219,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isReport","argumentNames":["this"]}
jacdac_JDPacket_isReport__P1395.isGetter = true;

function jacdac_JDPacket_isReport__P1395_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isReport__P1395, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_packetFlags__P1368(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_packetFlags__P1368.info = {"start":2909,"length":64,"line":86,"column":8,"endLine":88,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"packetFlags","argumentNames":["this"]}
jacdac_JDPacket_packetFlags__P1368.isGetter = true;

function jacdac_JDPacket_packetFlags__P1368_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_packetFlags__P1368, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_serviceClassAt__P1808(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = (s.arg1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = (s.arg1 << 2);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_serviceClassAt__P1808.info = {"start":33832,"length":253,"line":1033,"column":8,"endLine":1040,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceClassAt","argumentNames":["this","serviceIndex"]}

function jacdac_Device_serviceClassAt__P1808_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_serviceClassAt__P1808, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_regCode__P1383(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 4095);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_regCode__P1383.info = {"start":4936,"length":79,"line":153,"column":8,"endLine":155,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"regCode","argumentNames":["this"]}
jacdac_JDPacket_regCode__P1383.isGetter = true;

function jacdac_JDPacket_regCode__P1383_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_regCode__P1383, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device_lookupQuery__P2473(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = s.arg0.fields["queries"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["queries"] = (s.tmp_4);
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkAction(2, jacdac_Device_lookupQuery_inline__P6607);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg2);
    s.tmp_1 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["queries"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 849; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_lookupQuery__P2473.info = {"start":33548,"length":183,"line":1024,"column":8,"endLine":1027,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"lookupQuery","argumentNames":["this","reg","serv"]}

function jacdac_Device_lookupQuery__P2473_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_lookupQuery__P2473, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Device_lookupQuery_inline__P6607(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["reg"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_lookupQuery_inline__P6607.info = {"start":33679,"length":41,"line":1026,"column":37,"endLine":1026,"endColumn":78,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["q"]}

function jacdac_Device_lookupQuery_inline__P6607_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_lookupQuery_inline__P6607, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isRegGet__P1382(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 12);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 1);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isRegGet__P1382.info = {"start":4834,"length":92,"line":149,"column":8,"endLine":151,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isRegGet","argumentNames":["this"]}
jacdac_JDPacket_isRegGet__P1382.isGetter = true;

function jacdac_JDPacket_isRegGet__P1382_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isRegGet__P1382, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Bus_reattach__P1746(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.newClients___6653 = undefined;
    s.occupied___6655 = undefined;
    s.c___6663 = undefined;
    s.unnamed154___U3 = undefined;
    s.unnamed155___U4 = undefined;
    s.newClass___6670 = undefined;
    s.i___6712 = undefined;
    s.serviceClass___6722 = undefined;
    s.cc___6730 = undefined;
    s.unnamed156___U9 = undefined;
    s.unnamed157___U10 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.tmp_1);
    s.tmp_0 = jacdac_log__P2461_mk(s);
    s.tmp_7 = jacdac_Device_toString__P1805_mk(s);
    s.tmp_7.arg0 = s.arg1;
    s.callLocIdx = 697; s.pc = 25; return s.tmp_7;
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("reattaching services to ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "; cl=");
    s.tmp_3 = r0;
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_10 = r0;
    r0 = pxsim_Array__length(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_8);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "/");
    s.tmp_1 = r0;
    r0 = s.arg0.fields["allClients"];
    s.tmp_13 = r0;
    r0 = pxsim_Array__length(s.tmp_13);
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_11);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 698; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    s.newClients___6653 = (r0);
    r0 = s.arg1.fields["services"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.occupied___6655 = (r0);
    s.c___6663 = (undefined);
    r0 = s.arg1.fields["clients"];
    s.unnamed154___U3 = (r0);
    s.unnamed155___U4 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed155___U4;
    r0 = pxsim_Array__length(s.unnamed154___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed154___U3, s.unnamed155___U4);
    s.c___6663 = (r0);
    r0 = s.c___6663.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_3 = jacdac_Client__detach__P1786_mk(s);
    s.tmp_3.arg0 = s.c___6663;
    s.callLocIdx = 699; s.pc = 29; return s.tmp_3;
  case 29:
    r0 = s.retval;
    { step = 8; continue; }
  case 2:
  case 3:
    r0 = s.arg1.fields["services"];
    s.tmp_0 = r0;
    r0 = s.c___6663.fields["serviceIndex"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 << 2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, s.tmp_1);
    s.newClass___6670 = (r0);
    r0 = s.c___6663.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = (s.newClass___6670 == s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    s.tmp_2 = jacdac_Device_matchesRoleAt__P1806_mk(s);
    s.tmp_2.arg0 = s.arg1;
    r0 = s.c___6663.fields["role"];
    s.tmp_2.arg1 = r0;
    r0 = s.c___6663.fields["serviceIndex"];
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 700; s.pc = 30; return s.tmp_2;
  case 30:
    r0 = s.retval;
  case 5:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__push(s.newClients___6653, s.c___6663);
    r0 = s.c___6663.fields["serviceIndex"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setByte(s.occupied___6655, s.tmp_0, 1);
    { step = 7; continue; }
  case 6:
    s.tmp_0 = jacdac_Client__detach__P1786_mk(s);
    s.tmp_0.arg0 = s.c___6663;
    s.callLocIdx = 701; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.unnamed155___U4 + 1);
    s.unnamed155___U4 = (r0);
    { step = 1; continue; }
  case 9:
    s.unnamed154___U3 = (undefined);
    r0 = (s.arg1).fields["clients"] = (s.newClients___6653);
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_ANNOUNCE___1720;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 702; s.pc = 32; return s.tmp_0;
  case 32:
    r0 = s.retval;
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    { step = 23; continue; }
  case 10:
  case 11:
    s.i___6712 = (4);
  case 12:
    s.tmp_1 = r0 = s.i___6712;
    r0 = s.arg1.fields["services"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
    s.tmp_5 = r0 = s.occupied___6655;
    r0 = (s.i___6712 >> 2);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 13; continue; }
    { step = 21; continue; }
  case 13:
  case 14:
    r0 = s.arg1.fields["services"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_7, 11, s.i___6712);
    s.serviceClass___6722 = (r0);
    s.cc___6730 = (undefined);
    r0 = s.arg0.fields["unattachedClients"];
    s.unnamed156___U9 = (r0);
    s.unnamed157___U10 = (0);
  case 15:
    s.tmp_0 = r0 = s.unnamed157___U10;
    r0 = pxsim_Array__length(s.unnamed156___U9);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 20; continue; }
    r0 = pxsim_Array__getAt(s.unnamed156___U9, s.unnamed157___U10);
    s.cc___6730 = (r0);
    r0 = s.cc___6730.fields["serviceClass"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.serviceClass___6722);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 18; continue; }
    s.tmp_5 = jacdac_Client__attach__P1785_mk(s);
    s.tmp_5.arg0 = s.cc___6730;
    s.tmp_5.arg1 = s.arg1;
    r0 = (s.i___6712 >> 2);
    s.tmp_5.arg2 = r0;
    s.callLocIdx = 703; s.pc = 33; return s.tmp_5;
  case 33:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 16; continue; }
    { step = 20; continue; }
  case 16:
  case 17:
  case 18:
  case 19:
    r0 = (s.unnamed157___U10 + 1);
    s.unnamed157___U10 = (r0);
    { step = 15; continue; }
  case 20:
    s.unnamed156___U9 = (undefined);
  case 21:
    r0 = (s.i___6712 + 4);
    s.i___6712 = (r0);
    { step = 12; continue; }
  case 22:
  case 23:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_reattach__P1746.info = {"start":5836,"length":1669,"line":174,"column":8,"endLine":220,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"reattach","argumentNames":["this","dev"]}

function jacdac_Bus_reattach__P1746_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_reattach__P1746, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  newClients___6653: undefined,
  occupied___6655: undefined,
  c___6663: undefined,
  unnamed154___U3: undefined,
  unnamed155___U4: undefined,
  newClass___6670: undefined,
  i___6712: undefined,
  serviceClass___6722: undefined,
  cc___6730: undefined,
  unnamed156___U9: undefined,
  unnamed157___U10: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client__attach__P1785(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("Invalid attach");
  case 1:
  case 2:
    r0 = s.arg0.fields["broadcast"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
    s.tmp_7 = jacdac_Device_matchesRoleAt__P1806_mk(s);
    s.tmp_7.arg0 = s.arg1;
    r0 = s.arg0.fields["role"];
    s.tmp_7.arg1 = r0;
    s.tmp_7.arg2 = s.arg2;
    s.callLocIdx = 808; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 3; continue; }
    r0 = false;
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = (s.arg0).fields["device"] = (s.arg1);
    r0 = (s.arg0).fields["serviceIndex"] = (s.arg2);
    s.tmp_0 = jacdac_Bus_attachClient__P1743_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 809; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 5:
  case 6:
    s.tmp_0 = jacdac_log__P2461_mk(s);
    s.tmp_7 = jacdac_Device_toString__P1805_mk(s);
    s.tmp_7.arg0 = s.arg1;
    s.callLocIdx = 810; s.pc = 11; return s.tmp_7;
  case 11:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("attached ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "/");
    s.tmp_3 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_8);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " to client ");
    s.tmp_1 = r0;
    r0 = s.arg0.fields["role"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_9);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 811; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = s.arg1.fields["clients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    s.tmp_0 = jacdac_Client_onAttach__P2366_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 812; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.tmp_0 = jacdac_Client_handleConnected__P2364_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 813; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    r0 = true;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client__attach__P1785.info = {"start":25801,"length":638,"line":779,"column":8,"endLine":796,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_attach","argumentNames":["this","dev","serviceNum"]}

function jacdac_Client__attach__P1785_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client__attach__P1785, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Client_handleConnected__P2364(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.flags___6799 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    s.tmp_0 = jacdac_ClientPacketQueue_resend__P2466_mk(s);
    r0 = s.arg0.fields["config"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 814; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["device"];
    s.tmp_1 = r0;
    r0 = s.tmp_1.fields["services"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 0);
    s.flags___6799 = (r0);
    r0 = (s.flags___6799 & 48);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkAction(1, jacdac_Client_handleConnected_inline__P6808);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_1, 0, s.arg0);
    r0 = pxsim.control.runInParallel(s.tmp_1);
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = s.arg0.fields["_onConnected"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_1 = if__onConnected_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_onConnected"), 1);
      s.callLocIdx = 817; s.pc = 8; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_onConnected"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_onConnected"], 1); s.callLocIdx = 817; s.pc = 8; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 817; s.pc = 8; return s.tmp_1;; }
     else { s.callLocIdx = 817; s.pc = 8; return s.tmp_1; }
    }
  case 8:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handleConnected__P2364.info = {"start":26449,"length":515,"line":798,"column":8,"endLine":809,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleConnected","argumentNames":["this"]}

function jacdac_Client_handleConnected__P2364_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handleConnected__P2364, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  flags___6799: undefined,
  arg0: undefined,
} }





function jacdac_Client_handleConnected_inline__P6808(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_Client_connectedBlink__P2365_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 816; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handleConnected_inline__P6808.info = {"start":26829,"length":27,"line":805,"column":42,"endLine":805,"endColumn":69,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_Client_handleConnected_inline__P6808_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handleConnected_inline__P6808, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_Client_connectedBlink__P2365(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.green___6831 = undefined;
    s.greenoff___6840 = undefined;
    s.off___6849 = undefined;
    s.i___6857 = undefined;
    s.j___6862 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 63);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 132;
    s.tmp_2 = jacdac_jdpack__P1408_mk(s);
    s.tmp_2.arg0 = "u8 u8 u8 u8";
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 818; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 819; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.green___6831 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.green___6831;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 820; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 1);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 132;
    s.tmp_2 = jacdac_jdpack__P1408_mk(s);
    s.tmp_2.arg0 = "u8 u8 u8 u8";
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 821; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 822; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.greenoff___6840 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.greenoff___6840;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 823; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 132;
    s.tmp_2 = jacdac_jdpack__P1408_mk(s);
    s.tmp_2.arg0 = "u8 u8 u8 u8";
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 824; s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 825; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.off___6849 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.off___6849;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 826; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.i___6857 = (0);
  case 1:
    r0 = (s.i___6857 < 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.j___6862 = (0);
  case 2:
    r0 = (s.j___6862 < 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_1.arg0 = s.green___6831;
    r0 = s.arg0.fields["device"];
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 827; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 96;
    s.callLocIdx = 828; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_0.arg0 = s.greenoff___6840;
    r0 = s.arg0.fields["device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 829; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 192;
    s.callLocIdx = 830; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
    r0 = (s.j___6862 + 1);
    s.j___6862 = (r0);
    { step = 2; continue; }
  case 3:
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 320;
    s.callLocIdx = 831; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    r0 = (s.i___6857 + 1);
    s.i___6857 = (r0);
    { step = 1; continue; }
  case 4:
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_0.arg0 = s.off___6849;
    r0 = s.arg0.fields["device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 832; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_connectedBlink__P2365.info = {"start":26974,"length":1598,"line":811,"column":8,"endLine":860,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"connectedBlink","argumentNames":["this"]}

function jacdac_Client_connectedBlink__P2365_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_connectedBlink__P2365, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  green___6831: undefined,
  greenoff___6840: undefined,
  off___6849: undefined,
  i___6857: undefined,
  j___6862: undefined,
  arg0: undefined,
} }





function jacdac_jdpack__P1408(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___6901 = undefined;
    s.res___6907 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = undefined;
    { step = 5; continue; }
  case 3:
  case 4:
    s.tmp_4 = jacdac_jdpackCore__P2358_mk(s);
    s.tmp_4.arg0 = null;
    s.tmp_4.arg1 = s.arg0;
    s.tmp_4.arg2 = s.arg1;
    s.tmp_4.arg3 = 0;
    s.callLocIdx = 567; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.len___6901 = (r0);
    r0 = pxsim.control.createBuffer(s.len___6901);
    s.res___6907 = (r0);
    s.tmp_0 = jacdac_jdpackCore__P2358_mk(s);
    s.tmp_0.arg0 = s.res___6907;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = 0;
    s.callLocIdx = 568; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = s.res___6907;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdpack__P1408.info = {"start":9942,"length":582,"line":303,"column":4,"endLine":319,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdpack","argumentNames":["fmt","data"]}

function jacdac_jdpack__P1408_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdpack__P1408, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___6901: undefined,
  res___6907: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdpackCore__P2358(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idx___6920 = undefined;
    s.parser___6921 = undefined;
    s.c0___6928 = undefined;
    s.dataItem___6941 = undefined;
    s.fmt0___6949 = undefined;
    s.velt___6958 = undefined;
    s.unnamed130___U6 = undefined;
    s.unnamed131___U7 = undefined;
    s.arr___6967 = undefined;
    s.v___6977 = undefined;
    s.unnamed132___U10 = undefined;
    s.unnamed133___U11 = undefined;
    s.vp___6994 = undefined;
    s.vp32___7011 = undefined;
    s.buf___7030 = undefined;
    s.sz___7065 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    s.idx___6920 = (0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_TokenParser__C2354_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_TokenParser_constructor__P2356_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 560; s.pc = 43; return s.tmp_1;
  case 43:
    r0 = s.retval;
    s.parser___6921 = (s.tmp_0);
  case 1:
    s.tmp_1 = jacdac_TokenParser_parse__P2355_mk(s);
    s.tmp_1.arg0 = s.parser___6921;
    s.callLocIdx = 561; s.pc = 44; return s.tmp_1;
  case 44:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 40; continue; }
    r0 = s.parser___6921.fields["c0"];
    s.c0___6928 = (r0);
    r0 = (s.c0___6928 == 120);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.parser___6921.fields["size"];
    s.tmp_1 = r0;
    r0 = (s.arg3 + s.tmp_1);
    s.arg3 = (r0);
    { step = 1; continue; }
  case 2:
  case 3:
    s.tmp_0 = r0 = s.idx___6920;
    r0 = (s.tmp_0 + 1);
    s.idx___6920 = (r0);
    r0 = pxsim_Array__getAt(s.arg2, s.tmp_0);
    s.dataItem___6941 = (r0);
    r0 = (s.c0___6928 == 114);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_1.arg0 = s.arg1;
    r0 = s.parser___6921.fields["fp"];
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 562; s.pc = 45; return s.tmp_1;
  case 45:
    r0 = s.retval;
    s.fmt0___6949 = (r0);
    s.velt___6958 = (undefined);
    s.unnamed130___U6 = (s.dataItem___6941);
    s.unnamed131___U7 = (0);
  case 4:
    s.tmp_0 = r0 = s.unnamed131___U7;
    r0 = pxsim_Array__length(s.unnamed130___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__getAt(s.unnamed130___U6, s.unnamed131___U7);
    s.velt___6958 = (r0);
    s.tmp_2 = jacdac_jdpackCore__P2358_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.fmt0___6949;
    s.tmp_2.arg2 = s.velt___6958;
    s.tmp_2.arg3 = s.arg3;
    s.callLocIdx = 563; s.pc = 46; return s.tmp_2;
  case 46:
    r0 = s.retval;
    s.arg3 = (r0);
    r0 = (s.unnamed131___U7 + 1);
    s.unnamed131___U7 = (r0);
    { step = 4; continue; }
  case 5:
    s.unnamed130___U6 = (undefined);
    { step = 40; continue; }
  case 6:
  case 7:
    s.arr___6967 = (undefined);
    r0 = s.parser___6921.fields["isArray"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    s.arr___6967 = (s.dataItem___6941);
    { step = 9; continue; }
  case 8:
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.dataItem___6941);
    s.arr___6967 = (s.tmp_0);
  case 9:
    s.v___6977 = (undefined);
    s.unnamed132___U10 = (s.arr___6967);
    s.unnamed133___U11 = (0);
  case 10:
    s.tmp_0 = r0 = s.unnamed133___U11;
    r0 = pxsim_Array__length(s.unnamed132___U10);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 39; continue; }
    r0 = pxsim_Array__getAt(s.unnamed132___U10, s.unnamed133___U11);
    s.v___6977 = (r0);
    r0 = s.parser___6921.fields["nfmt"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 !== null);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 17; continue; }
    r0 = pxsim_pxtcore.typeOf(s.v___6977);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 != "number");
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.typeOf(s.v___6977);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 47);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 47:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat("expecting number, got ", s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_pxtcore.throwValue(s.tmp_6);
  case 11:
  case 12:
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 15; continue; }
    r0 = s.parser___6921.fields["div"];
    s.tmp_9 = r0;
    r0 = (s.v___6977 * s.tmp_9);
    s.vp___6994 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.parser___6921.fields["nfmt"];
    s.tmp_1 = r0;
    s.tmp_2 = r0 = s.arg3;
    r0 = (s.vp___6994 | 0);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.tmp_3);
    r0 = s.parser___6921.fields["nfmt2"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = (s.vp___6994 / 4294967296);
    s.tmp_1 = r0;
    r0 = pxsim.Math_.floor(s.tmp_1);
    s.vp32___7011 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.parser___6921.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.arg3 + 4);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.vp32___7011);
  case 13:
  case 14:
  case 15:
  case 16:
    r0 = s.parser___6921.fields["size"];
    s.tmp_0 = r0;
    r0 = (s.arg3 + s.tmp_0);
    s.arg3 = (r0);
    { step = 38; continue; }
  case 17:
    s.buf___7030 = (undefined);
    r0 = pxsim_pxtcore.typeOf(s.v___6977);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
    r0 = (s.c0___6928 == 122);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 18; continue; }
    if ((s.v___6977) && (s.v___6977).vtable) {
    setupResume(s, 48);
    pxsim_String__stringConv(s.v___6977);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.v___6977) + ""; }
  case 48:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "\u0000");
    s.tmp_3 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_3);
    s.buf___7030 = (r0);
    { step = 21; continue; }
  case 18:
    r0 = (s.c0___6928 == 115);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
    r0 = pxsim.control.createBufferFromUTF8(s.v___6977);
    s.buf___7030 = (r0);
    { step = 20; continue; }
  case 19:
    r0 = pxsim_pxtcore.throwValue("unexpected string");
  case 20:
  case 21:
    { step = 31; continue; }
  case 22:
    s.tmp_0 = r0 = s.v___6977;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 23:
    r0 = pxsim_pxtcore.typeOf(s.v___6977);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "object");
  case 24:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 25; continue; }
    r0 = s.tmp_2;
    { step = 26; continue; }
  case 25:
    r0 = pxsim.BufferMethods.length(s.v___6977);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != null);
  case 26:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 29; continue; }
    r0 = (s.c0___6928 == 98);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 27; continue; }
    s.buf___7030 = (s.v___6977);
    { step = 28; continue; }
  case 27:
    r0 = pxsim_pxtcore.throwValue("unexpected buffer");
  case 28:
    { step = 30; continue; }
  case 29:
    r0 = pxsim_pxtcore.throwValue("expecting string or buffer");
  case 30:
  case 31:
    r0 = s.parser___6921.fields["size"];
    s.sz___7065 = (r0);
    r0 = (s.sz___7065 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 34; continue; }
    r0 = pxsim.BufferMethods.length(s.buf___7030);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > s.sz___7065);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 32; continue; }
    s.tmp_3 = r0 = s.buf___7030;
    r0 = (s.sz___7065 - 0);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, 0, s.tmp_4);
    s.buf___7030 = (r0);
  case 32:
  case 33:
    { step = 35; continue; }
  case 34:
    r0 = pxsim.BufferMethods.length(s.buf___7030);
    s.sz___7065 = (r0);
  case 35:
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 36; continue; }
    r0 = pxsim.BufferMethods.write(s.arg0, s.arg3, s.buf___7030);
  case 36:
  case 37:
    r0 = (s.arg3 + s.sz___7065);
    s.arg3 = (r0);
  case 38:
    r0 = (s.unnamed133___U11 + 1);
    s.unnamed133___U11 = (r0);
    { step = 10; continue; }
  case 39:
    s.unnamed132___U10 = (undefined);
    { step = 1; continue; }
  case 40:
    r0 = pxsim_Array__length(s.arg2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.idx___6920);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 41; continue; }
    r0 = pxsim_pxtcore.throwValue("format too short");
  case 41:
  case 42:
    r0 = s.arg3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdpackCore__P2358.info = {"start":7327,"length":2609,"line":227,"column":4,"endLine":301,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdpackCore","argumentNames":["trg","fmt","data","off"]}

function jacdac_jdpackCore__P2358_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdpackCore__P2358, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  idx___6920: undefined,
  parser___6921: undefined,
  c0___6928: undefined,
  dataItem___6941: undefined,
  fmt0___6949: undefined,
  velt___6958: undefined,
  unnamed130___U6: undefined,
  unnamed131___U7: undefined,
  arr___6967: undefined,
  v___6977: undefined,
  unnamed132___U10: undefined,
  unnamed133___U11: undefined,
  vp___6994: undefined,
  vp32___7011: undefined,
  buf___7030: undefined,
  sz___7065: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_bufferSlice__P2353(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.arg2 - s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, s.tmp_1, s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_bufferSlice__P2353.info = {"start":1363,"length":114,"line":50,"column":4,"endLine":52,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"bufferSlice","argumentNames":["buf","start","end"]}

function jacdac_bufferSlice__P2353_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_bufferSlice__P2353, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_stringToBuffer__P2352(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_stringToBuffer__P2352.info = {"start":1277,"length":80,"line":46,"column":4,"endLine":48,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"stringToBuffer","argumentNames":["str"]}

function jacdac_stringToBuffer__P2352_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_stringToBuffer__P2352, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_TokenParser_parse__P2355(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.fmt___7115 = undefined;
    s.endp___7125 = undefined;
    s.word___7141 = undefined;
    s.dotIdx___7154 = undefined;
    s.c0___7160 = undefined;
    s.sz0___7175 = undefined;
    s.sz1___7183 = undefined;
    s.c1___7209 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_TokenParser__C2354_VT)) failedCast(r0);
    r0 = (s.arg0).fields["div"] = (1);
    r0 = (s.arg0).fields["isArray"] = (false);
    r0 = s.arg0.fields["fmt"];
    s.fmt___7115 = (r0);
  case 1:
    r0 = s.arg0.fields["fp"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.fmt___7115);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 50; continue; }
    r0 = s.arg0.fields["fp"];
    s.endp___7125 = (r0);
  case 2:
    s.tmp_1 = r0 = s.endp___7125;
    r0 = pxsim_String_.length(s.fmt___7115);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.charCodeAt(s.fmt___7115, s.endp___7125);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 32);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    r0 = (s.endp___7125 + 1);
    s.endp___7125 = (r0);
    { step = 2; continue; }
  case 5:
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    s.tmp_0.arg0 = s.fmt___7115;
    r0 = s.arg0.fields["fp"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.endp___7125;
    s.callLocIdx = 539; s.pc = 52; return s.tmp_0;
  case 52:
    r0 = s.retval;
    s.word___7141 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.endp___7125 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["fp"] = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.word___7141);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    { step = 1; continue; }
  case 6:
  case 7:
    r0 = pxsim_String_.indexOf(s.word___7141, ".", undefined);
    s.dotIdx___7154 = (r0);
    r0 = pxsim_String_.charCodeAt(s.word___7141, 0);
    s.c0___7160 = (r0);
    r0 = (s.c0___7160 == 105);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 8:
    r0 = (s.c0___7160 == 117);
  case 9:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_1;
    { step = 11; continue; }
  case 10:
    r0 = (s.dotIdx___7154 >= 0);
  case 11:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 12; continue; }
    s.tmp_3 = parseInt__P97_mk(s);
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_4.arg0 = s.word___7141;
    s.tmp_4.arg1 = 1;
    s.tmp_4.arg2 = s.dotIdx___7154;
    s.callLocIdx = 540; s.pc = 54; return s.tmp_4;
  case 54:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = undefined;
    s.callLocIdx = 541; s.pc = 53; return s.tmp_3;
  case 53:
    r0 = s.retval;
    s.sz0___7175 = (r0);
    s.tmp_0 = parseInt__P97_mk(s);
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_1.arg0 = s.word___7141;
    r0 = (s.dotIdx___7154 + 1);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 542; s.pc = 56; return s.tmp_1;
  case 56:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 543; s.pc = 55; return s.tmp_0;
  case 55:
    r0 = s.retval;
    s.sz1___7183 = (r0);
    r0 = pxsim_String_.charAt(s.word___7141, 0);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 57);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 57:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.sz0___7175 + s.sz1___7183);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 58);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 58:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_2);
    s.word___7141 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = (1 << s.sz1___7183);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["div"] = (s.tmp_1);
  case 12:
  case 13:
    r0 = pxsim_String_.charCodeAt(s.word___7141, 1);
    s.c1___7209 = (r0);
    r0 = (s.c1___7209 == 91);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = parseInt__P97_mk(s);
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_4.arg0 = s.word___7141;
    s.tmp_4.arg1 = 2;
    s.tmp_4.arg2 = undefined;
    s.callLocIdx = 544; s.pc = 60; return s.tmp_4;
  case 60:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = undefined;
    s.callLocIdx = 545; s.pc = 59; return s.tmp_3;
  case 59:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["size"] = (s.tmp_2);
    { step = 15; continue; }
  case 14:
    r0 = (s.arg0).fields["size"] = (-1);
  case 15:
    s.tmp_2 = r0 = s.word___7141;
    r0 = pxsim_String_.length(s.word___7141);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 93);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    s.tmp_6 = r0 = s.word___7141;
    r0 = pxsim_String_.length(s.word___7141);
    s.tmp_8 = r0;
    r0 = (s.tmp_8 - 2);
    s.tmp_7 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 91);
  case 17:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 18; continue; }
    s.tmp_10 = helpers_stringSlice__P119_mk(s);
    s.tmp_10.arg0 = s.word___7141;
    s.tmp_10.arg1 = 0;
    s.tmp_10.arg2 = -2;
    s.callLocIdx = 546; s.pc = 61; return s.tmp_10;
  case 61:
    r0 = s.retval;
    s.word___7141 = (r0);
    r0 = (s.arg0).fields["isArray"] = (true);
  case 18:
  case 19:
    r0 = (s.arg0).fields["nfmt2"] = (false);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_numberFormatOfType__P2350_mk(s);
    s.tmp_2.arg0 = s.word___7141;
    s.callLocIdx = 547; s.pc = 62; return s.tmp_2;
  case 62:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nfmt"] = (s.tmp_1);
    r0 = s.arg0.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
    r0 = (s.word___7141 == "u64");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
    r0 = (s.arg0).fields["nfmt"] = (11);
    r0 = (s.arg0).fields["nfmt2"] = (true);
    { step = 23; continue; }
  case 20:
    r0 = (s.word___7141 == "i64");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    r0 = (s.arg0).fields["nfmt"] = (5);
    r0 = (s.arg0).fields["nfmt2"] = (true);
  case 21:
  case 22:
  case 23:
  case 24:
  case 25:
    r0 = (s.arg0).fields["word"] = (s.word___7141);
    r0 = s.arg0.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
    r0 = (s.c0___7160 == 114);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 28; continue; }
    r0 = (s.c1___7209 != 58);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 26; continue; }
    s.c0___7160 = (0);
  case 26:
  case 27:
    { step = 43; continue; }
  case 28:
    r0 = (s.c0___7160 == 115);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 29; continue; }
    r0 = s.tmp_0;
    { step = 30; continue; }
  case 29:
    r0 = (s.c0___7160 == 98);
  case 30:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 31; continue; }
    r0 = s.tmp_1;
    { step = 32; continue; }
  case 31:
    r0 = (s.c0___7160 == 120);
  case 32:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 37; continue; }
    r0 = pxsim_String_.length(s.word___7141);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 != 1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 33; continue; }
    r0 = s.tmp_3;
    { step = 34; continue; }
  case 33:
    r0 = s.arg0.fields["size"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == -1);
  case 34:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 35; continue; }
    s.c0___7160 = (0);
  case 35:
  case 36:
    { step = 42; continue; }
  case 37:
    r0 = (s.c0___7160 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 40; continue; }
    r0 = pxsim_String_.length(s.word___7141);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 38; continue; }
    s.c0___7160 = (0);
  case 38:
  case 39:
    { step = 41; continue; }
  case 40:
    s.c0___7160 = (0);
  case 41:
  case 42:
  case 43:
    r0 = (s.c0___7160 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 44; continue; }
    if ((s.word___7141) && (s.word___7141).vtable) {
    setupResume(s, 63);
    pxsim_String__stringConv(s.word___7141);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.word___7141) + ""; }
  case 63:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("invalid format: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_pxtcore.throwValue(s.tmp_1);
  case 44:
  case 45:
    r0 = (s.arg0).fields["c0"] = (s.c0___7160);
    { step = 49; continue; }
  case 46:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = Buffer_sizeOfNumberFormat__P213_mk(s);
    r0 = s.arg0.fields["nfmt"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 548; s.pc = 64; return s.tmp_2;
  case 64:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["size"] = (s.tmp_1);
    r0 = s.arg0.fields["nfmt2"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 47; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["size"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 4);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["size"] = (s.tmp_3);
  case 47:
  case 48:
    r0 = (s.arg0).fields["c0"] = (-1);
  case 49:
    r0 = true;
    { step = 51; continue; }
    { step = 1; continue; }
  case 50:
    r0 = false;
  case 51:
    return leave(s, r0)
  default: oops()
} } }
jacdac_TokenParser_parse__P2355.info = {"start":1727,"length":2657,"line":66,"column":8,"endLine":137,"endColumn":9,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"parse","argumentNames":["this"]}

function jacdac_TokenParser_parse__P2355_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_TokenParser_parse__P2355, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  fmt___7115: undefined,
  endp___7125: undefined,
  word___7141: undefined,
  dotIdx___7154: undefined,
  c0___7160: undefined,
  sz0___7175: undefined,
  sz1___7183: undefined,
  c1___7209: undefined,
  arg0: undefined,
} }





function Buffer_sizeOfNumberFormat__P213(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(6, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(7, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(8, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(10, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq(12, s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.switch_eq(11, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(15, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq(16, s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(14, s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = 1;
    { step = 18; continue; }
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = 2;
    { step = 18; continue; }
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
  case 14:
    r0 = 4;
    { step = 18; continue; }
  case 15:
  case 16:
    r0 = 8;
    { step = 18; continue; }
  case 17:
    r0 = 0;
  case 18:
    return leave(s, r0)
  default: oops()
} } }
Buffer_sizeOfNumberFormat__P213.info = {"start":14912,"length":856,"line":508,"column":4,"endLine":532,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"sizeOfNumberFormat","argumentNames":["format"]}

function Buffer_sizeOfNumberFormat__P213_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_sizeOfNumberFormat__P213, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_numberFormatOfType__P2350(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq("u8", s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq("u16", s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq("u32", s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq("i8", s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq("i16", s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq("i32", s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq("f32", s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq("f64", s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 1:
    r0 = 2;
    { step = 10; continue; }
  case 2:
    r0 = 4;
    { step = 10; continue; }
  case 3:
    r0 = 11;
    { step = 10; continue; }
  case 4:
    r0 = 1;
    { step = 10; continue; }
  case 5:
    r0 = 3;
    { step = 10; continue; }
  case 6:
    r0 = 5;
    { step = 10; continue; }
  case 7:
    r0 = 13;
    { step = 10; continue; }
  case 8:
    r0 = 14;
    { step = 10; continue; }
  case 9:
    r0 = null;
    { step = 10; continue; }
    r0 = undefined;
  case 10:
    return leave(s, r0)
  default: oops()
} } }
jacdac_numberFormatOfType__P2350.info = {"start":393,"length":798,"line":17,"column":4,"endLine":40,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"numberFormatOfType","argumentNames":["tp"]}

function jacdac_numberFormatOfType__P2350_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_numberFormatOfType__P2350, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_TokenParser_constructor__P2356(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_TokenParser__C2354_VT)) failedCast(r0);
    r0 = (s.arg0).fields["fmt"] = (s.arg1);
    r0 = (s.arg0).fields["fp"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_TokenParser_constructor__P2356.info = {"start":1683,"length":34,"line":64,"column":8,"endLine":64,"endColumn":42,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"inline","argumentNames":["this","fmt"]}

function jacdac_TokenParser_constructor__P2356_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_TokenParser_constructor__P2356, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_from__P1362(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___7381 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C1357_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P2322_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 482; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.p___7381 = (s.tmp_0);
    s.tmp_0 = r0 = s.p___7381;
    r0 = pxsim.control.createBuffer(16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_header"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDPacket_data__P1385_mk(s);
    s.tmp_0.arg0 = s.p___7381;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 483; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_serviceCommand__P1377_mk(s);
    s.tmp_0.arg0 = s.p___7381;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 484; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = s.p___7381;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_from__P1362.info = {"start":1717,"length":252,"line":52,"column":8,"endLine":58,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"from","argumentNames":["serviceCommand","data"]}

function jacdac_JDPacket_from__P1362_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_from__P1362, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  p___7381: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_serviceCommand__P1377(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 4, 14, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceCommand__P1377.info = {"start":4128,"length":110,"line":124,"column":8,"endLine":126,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceCommand","argumentNames":["this","cmd"]}

function jacdac_JDPacket_serviceCommand__P1377_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceCommand__P1377, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_data__P1385(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 236);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("Too big");
  case 1:
  case 2:
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, 12, s.tmp_3);
    r0 = (s.arg0).fields["_data"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P1385.info = {"start":5095,"length":177,"line":161,"column":8,"endLine":165,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"data","argumentNames":["this","buf"]}

function jacdac_JDPacket_data__P1385_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P1385, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_constructor__P2322(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["timestamp"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_constructor__P2322.info = {"start":1388,"length":79,"line":41,"column":8,"endLine":43,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDPacket_constructor__P2322_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_constructor__P2322, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device_announceflags__P1800(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = s.arg0.fields["services"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_announceflags__P1800.info = {"start":32475,"length":122,"line":984,"column":8,"endLine":986,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"announceflags","argumentNames":["this"]}
jacdac_Device_announceflags__P1800.isGetter = true;

function jacdac_Device_announceflags__P1800_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_announceflags__P1800, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_resend__P2466(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sn___7430 = undefined;
    s.hasNonSet___7444 = undefined;
    s.p___7446 = undefined;
    s.unnamed160___U3 = undefined;
    s.unnamed161___U4 = undefined;
    s.pkt___7460 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2462_VT)) failedCast(r0);
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["serviceIndex"];
    s.sn___7430 = (r0);
    r0 = (s.sn___7430 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["pkts"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 11; continue; }
  case 3:
  case 4:
    s.hasNonSet___7444 = (false);
    s.p___7446 = (undefined);
    r0 = s.arg0.fields["pkts"];
    s.unnamed160___U3 = (r0);
    s.unnamed161___U4 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed161___U4;
    r0 = pxsim_Array__length(s.unnamed160___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed160___U3, s.unnamed161___U4);
    s.p___7446 = (r0);
    r0 = pxsim.BufferMethods.setByte(s.p___7446, 1, s.sn___7430);
    r0 = pxsim.BufferMethods.getByte(s.p___7446, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 >> 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.hasNonSet___7444 = (true);
  case 6:
  case 7:
    r0 = (s.unnamed161___U4 + 1);
    s.unnamed161___U4 = (r0);
    { step = 5; continue; }
  case 8:
    s.unnamed160___U3 = (undefined);
    s.tmp_0 = jacdac_JDPacket_onlyHeader__P1363_mk(s);
    s.tmp_0.arg0 = 0;
    s.callLocIdx = 786; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.pkt___7460 = (r0);
    s.tmp_0 = jacdac_JDPacket_compress__P1390_mk(s);
    s.tmp_0.arg0 = s.pkt___7460;
    r0 = s.arg0.fields["pkts"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 787; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.tmp_0 = jacdac_Client_sendCommand__P1787_mk(s);
    r0 = s.arg0.fields["parent"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.pkt___7460;
    s.callLocIdx = 788; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.hasNonSet___7444);
    if (!r0) { step = 9; continue; }
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = helpers_arrayFilter__P110_mk(s);
    r0 = s.arg0.fields["pkts"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = jacdac_ClientPacketQueue_resend_inline__P7478;
    s.callLocIdx = 789; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pkts"] = (s.tmp_1);
  case 9:
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_resend__P2466.info = {"start":19586,"length":642,"line":589,"column":8,"endLine":605,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"resend","argumentNames":["this"]}

function jacdac_ClientPacketQueue_resend__P2466_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_resend__P2466, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  sn___7430: undefined,
  hasNonSet___7444: undefined,
  p___7446: undefined,
  unnamed160___U3: undefined,
  unnamed161___U4: undefined,
  pkt___7460: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_resend_inline__P7478(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.getByte(s.arg0, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 4);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_resend_inline__P7478.info = {"start":20165,"length":35,"line":603,"column":20,"endLine":603,"endColumn":55,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["p"]}

function jacdac_ClientPacketQueue_resend_inline__P7478_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_resend_inline__P7478, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Client_sendCommand__P1787(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Client_start__P1791_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 837; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_2.arg0 = s.arg1;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 838; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = s.arg0.fields["device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 839; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_sendCommand__P1787.info = {"start":29026,"length":200,"line":877,"column":8,"endLine":882,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendCommand","argumentNames":["this","pkt"]}

function jacdac_Client_sendCommand__P1787_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_sendCommand__P1787, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_start__P1791(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = s.arg0.fields["started"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = (s.arg0).fields["started"] = (true);
    s.tmp_0 = jacdac_start__P1824_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 841; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_startClient__P1744_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 842; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_start__P1791.info = {"start":30991,"length":156,"line":935,"column":8,"endLine":940,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Client_start__P1791_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_start__P1791, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_startClient__P1744(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    r0 = s.arg0.fields["allClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1740_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 696; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_startClient__P1744.info = {"start":5468,"length":164,"line":162,"column":8,"endLine":166,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"startClient","argumentNames":["this","client"]}

function jacdac_Bus_startClient__P1744_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_startClient__P1744, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_clearAttachCache__P1740(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___7526 = undefined;
    s.unnamed150___U1 = undefined;
    s.unnamed151___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    s.d___7526 = (undefined);
    r0 = s.arg0.fields["devices"];
    s.unnamed150___U1 = (r0);
    s.unnamed151___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed151___U2;
    r0 = pxsim_Array__length(s.unnamed150___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed150___U1, s.unnamed151___U2);
    s.d___7526 = (r0);
    r0 = s.d___7526.fields["services"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 3);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_6 = r0 = s.d___7526;
    s.tmp_8 = helpers_bufferConcat__P184_mk(s);
    r0 = s.d___7526.fields["services"];
    s.tmp_8.arg0 = r0;
    r0 = pxsim.control.createBuffer(1);
    s.tmp_8.arg1 = r0;
    s.callLocIdx = 683; s.pc = 5; return s.tmp_8;
  case 5:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = (s.tmp_6).fields["services"] = (s.tmp_7);
  case 2:
  case 3:
    r0 = (s.unnamed151___U2 + 1);
    s.unnamed151___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed150___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_clearAttachCache__P1740.info = {"start":3168,"length":306,"line":101,"column":8,"endLine":107,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"clearAttachCache","argumentNames":["this"]}

function jacdac_Bus_clearAttachCache__P1740_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_clearAttachCache__P1740, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  d___7526: undefined,
  unnamed150___U1: undefined,
  unnamed151___U2: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_compress__P1390(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sz___7547 = undefined;
    s.s___7551 = undefined;
    s.unnamed122___U2 = undefined;
    s.unnamed123___U3 = undefined;
    s.data___7558 = undefined;
    s.s___7579 = undefined;
    s.unnamed124___U6 = undefined;
    s.unnamed125___U7 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = pxsim_Array__length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 7; continue; }
  case 1:
  case 2:
    s.sz___7547 = (-4);
    s.s___7551 = (undefined);
    s.unnamed122___U2 = (s.arg1);
    s.unnamed123___U3 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed123___U3;
    r0 = pxsim_Array__length(s.unnamed122___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed122___U2, s.unnamed123___U3);
    s.s___7551 = (r0);
    s.tmp_2 = r0 = s.sz___7547;
    r0 = pxsim.BufferMethods.length(s.s___7551);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.sz___7547 = (r0);
    r0 = (s.unnamed123___U3 + 1);
    s.unnamed123___U3 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed122___U2 = (undefined);
    r0 = pxsim.control.createBuffer(s.sz___7547);
    s.data___7558 = (r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.arg1, 0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 12, s.tmp_1);
    s.tmp_0 = r0 = s.data___7558;
    r0 = pxsim_Array__getAt(s.arg1, 0);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 4, -1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 0, s.tmp_1);
    r0 = pxsim_Array__getAt(s.arg1, 0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 - 4);
    s.sz___7547 = (r0);
    s.s___7579 = (undefined);
    s.tmp_0 = helpers_arraySlice__P115_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 504; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.unnamed124___U6 = (r0);
    s.unnamed125___U7 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed125___U7;
    r0 = pxsim_Array__length(s.unnamed124___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed124___U6, s.unnamed125___U7);
    s.s___7579 = (r0);
    r0 = pxsim.BufferMethods.write(s.data___7558, s.sz___7547, s.s___7579);
    s.tmp_0 = r0 = s.sz___7547;
    r0 = pxsim.BufferMethods.length(s.s___7579);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.sz___7547 = (r0);
    r0 = (s.unnamed125___U7 + 1);
    s.unnamed125___U7 = (r0);
    { step = 5; continue; }
  case 6:
    s.unnamed124___U6 = (undefined);
    s.tmp_0 = jacdac_JDPacket_data__P1385_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.data___7558;
    s.callLocIdx = 505; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_compress__P1390.info = {"start":5702,"length":526,"line":184,"column":8,"endLine":199,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"compress","argumentNames":["this","stripped"]}

function jacdac_JDPacket_compress__P1390_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_compress__P1390, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  sz___7547: undefined,
  s___7551: undefined,
  unnamed122___U2: undefined,
  unnamed123___U3: undefined,
  data___7558: undefined,
  s___7579: undefined,
  unnamed124___U6: undefined,
  unnamed125___U7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_onAttach__P2366(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_onAttach__P2366.info = {"start":28961,"length":23,"line":874,"column":8,"endLine":874,"endColumn":31,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"onAttach","argumentNames":["this"]}

function jacdac_Client_onAttach__P2366_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_onAttach__P2366, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_attachClient__P1743(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.removeElement(s.tmp_0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_attachClient__P1743.info = {"start":5361,"length":97,"line":158,"column":8,"endLine":160,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"attachClient","argumentNames":["this","client"]}

function jacdac_Bus_attachClient__P1743_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_attachClient__P1743, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_matchesRoleAt__P1806(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 9; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["deviceId"];
    s.tmp_3 = r0;
    r0 = (s.arg1 == s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = true;
    { step = 9; continue; }
  case 3:
  case 4:
    s.tmp_5 = r0 = s.arg1;
    r0 = s.arg0.fields["deviceId"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, ":");
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_7 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_11);
    s.tmp_6 = r0;
    r0 = (s.tmp_5 == s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    r0 = true;
    { step = 9; continue; }
  case 5:
  case 6:
    r0 = pxsim_String_.indexOf(s.arg1, ":", undefined);
    s.tmp_13 = r0;
    r0 = (s.tmp_13 >= 0);
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 7; continue; }
    r0 = false;
    { step = 9; continue; }
  case 7:
  case 8:
    s.tmp_15 = jacdac__rolemgr_getRole__P1655_mk(s);
    r0 = s.arg0.fields["deviceId"];
    s.tmp_15.arg0 = r0;
    s.tmp_15.arg1 = s.arg2;
    s.callLocIdx = 848; s.pc = 13; return s.tmp_15;
  case 13:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = (s.tmp_14 == s.arg1);
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_matchesRoleAt__P1806.info = {"start":33173,"length":365,"line":1012,"column":8,"endLine":1022,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"matchesRoleAt","argumentNames":["this","role","serviceIdx"]}

function jacdac_Device_matchesRoleAt__P1806_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_matchesRoleAt__P1806, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_getRole__P1655(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = settings_readString__P1086_mk(s);
    if ((globals.roleSettingPrefix___2437) && (globals.roleSettingPrefix___2437).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(globals.roleSettingPrefix___2437);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.roleSettingPrefix___2437) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ":");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_7);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 600; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_getRole__P1655.info = {"start":217,"length":141,"line":8,"column":4,"endLine":10,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"getRole","argumentNames":["devid","servIdx"]}

function jacdac__rolemgr_getRole__P1655_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_getRole__P1655, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client__detach__P1786(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    s.tmp_0 = jacdac_log__P2461_mk(s);
    r0 = s.arg0.fields["role"];
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("dettached ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 833; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = (s.arg0).fields["serviceIndex"] = (null);
    r0 = s.arg0.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["device"];
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("Invalid detach");
  case 1:
  case 2:
    r0 = (s.arg0).fields["device"] = (null);
    s.tmp_0 = jacdac_Bus_detachClient__P1742_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 834; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 3:
  case 4:
    s.tmp_0 = jacdac_Client_onDetach__P2367_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 835; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = s.arg0.fields["_onDisconnected"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_1 = if__onDisconnected_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_onDisconnected"), 1);
      s.callLocIdx = 836; s.pc = 11; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_onDisconnected"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_onDisconnected"], 1); s.callLocIdx = 836; s.pc = 11; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 836; s.pc = 11; return s.tmp_1;; }
     else { s.callLocIdx = 836; s.pc = 11; return s.tmp_1; }
    }
  case 11:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client__detach__P1786.info = {"start":28582,"length":369,"line":862,"column":8,"endLine":872,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_detach","argumentNames":["this"]}

function jacdac_Client__detach__P1786_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client__detach__P1786, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_Client_onDetach__P2367(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_onDetach__P2367.info = {"start":28993,"length":23,"line":875,"column":8,"endLine":875,"endColumn":31,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"onDetach","argumentNames":["this"]}

function jacdac_Client_onDetach__P2367_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_onDetach__P2367, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_detachClient__P1742(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_2 = r0;
    r0 = pxsim_Array_.indexOf(s.tmp_2, s.arg1, undefined);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.arg1);
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1740_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 695; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_detachClient__P1742.info = {"start":5143,"length":208,"line":151,"column":8,"endLine":156,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"detachClient","argumentNames":["this","client"]}

function jacdac_Bus_detachClient__P1742_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_detachClient__P1742, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_toString__P1805(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Device_shortId__P1804_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 847; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_toString__P1805.info = {"start":33109,"length":54,"line":1008,"column":8,"endLine":1010,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_Device_toString__P1805_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_toString__P1805, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_serviceMatches__P2477(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ds___7701 = undefined;
    s.i___7712 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["services"];
    s.ds___7701 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.ds___7701);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.BufferMethods.length(s.ds___7701);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 != s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 3; continue; }
    r0 = false;
    { step = 9; continue; }
  case 3:
  case 4:
    s.i___7712 = (4);
  case 5:
    s.tmp_1 = r0 = s.i___7712;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = pxsim.BufferMethods.getByte(s.ds___7701, s.i___7712);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.i___7712);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 != s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
    r0 = false;
    { step = 9; continue; }
  case 6:
  case 7:
    r0 = (s.i___7712 + 1);
    s.i___7712 = (r0);
    { step = 5; continue; }
  case 8:
    r0 = true;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_serviceMatches__P2477.info = {"start":41397,"length":249,"line":1241,"column":4,"endLine":1246,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceMatches","argumentNames":["dev","serv"]}

function jacdac_serviceMatches__P2477_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_serviceMatches__P2477, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  ds___7701: undefined,
  i___7712: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_sendCtrlCommand__P1817(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pkt___7730 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_JDPacket_onlyHeader__P1363_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 875; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = s.arg2;
    s.callLocIdx = 876; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    s.pkt___7730 = (s.tmp_4);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.pkt___7730;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 877; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_0.arg0 = s.pkt___7730;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 878; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_sendCtrlCommand__P1817.info = {"start":38123,"length":270,"line":1147,"column":8,"endLine":1153,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendCtrlCommand","argumentNames":["this","cmd","payload"]}

function jacdac_Device_sendCtrlCommand__P1817_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_sendCtrlCommand__P1817, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pkt___7730: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Device_constructor__P1799(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = (s.arg0).fields["deviceId"] = (s.arg1);
    r0 = (s.arg0).fields["services"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["clients"] = (s.tmp_3);
    s.tmp_4 = jacdac_EventSource_constructor__P1830_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 844; s.pc = 1; return s.tmp_4;
  case 1:
    r0 = s.retval;
    r0 = globals.bus___1748.fields["devices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_constructor__P1799.info = {"start":32337,"length":128,"line":979,"column":8,"endLine":982,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","deviceId","services"]}

function jacdac_Device_constructor__P1799_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_constructor__P1799, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_EventSource_constructor__P1830(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1829_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_constructor__P1830.info = {"start":593,"length":16,"line":20,"column":8,"endLine":20,"endColumn":24,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_EventSource_constructor__P1830_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_constructor__P1830, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device__destroy__P1818(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___7762 = undefined;
    s.unnamed164___U1 = undefined;
    s.unnamed165___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    s.tmp_0 = jacdac_log__P2461_mk(s);
    s.tmp_3 = jacdac_Device_shortId__P1804_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 879; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("destroy ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 880; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.c___7762 = (undefined);
    r0 = s.arg0.fields["clients"];
    s.unnamed164___U1 = (r0);
    s.unnamed165___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed165___U2;
    r0 = pxsim_Array__length(s.unnamed164___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed164___U1, s.unnamed165___U2);
    s.c___7762 = (r0);
    s.tmp_2 = jacdac_Client__detach__P1786_mk(s);
    s.tmp_2.arg0 = s.c___7762;
    s.callLocIdx = 881; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    r0 = (s.unnamed165___U2 + 1);
    s.unnamed165___U2 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed164___U1 = (undefined);
    r0 = (s.arg0).fields["clients"] = (null);
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_DISCONNECT___1718;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 882; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device__destroy__P1818.info = {"start":38403,"length":190,"line":1155,"column":8,"endLine":1160,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_destroy","argumentNames":["this"]}

function jacdac_Device__destroy__P1818_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device__destroy__P1818, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  c___7762: undefined,
  unnamed164___U1: undefined,
  unnamed165___U2: undefined,
  arg0: undefined,
} }





function jacdac_Device_shortId__P1804(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = s.arg0.fields["_shortId"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = r0 = s.arg0;
    s.tmp_5 = jacdac_shortDeviceId__P1794_mk(s);
    r0 = s.arg0.fields["deviceId"];
    s.tmp_5.arg0 = r0;
    s.callLocIdx = 846; s.pc = 3; return s.tmp_5;
  case 3:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["_shortId"] = (s.tmp_4);
  case 1:
  case 2:
    r0 = s.arg0.fields["_shortId"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_shortId__P1804.info = {"start":32913,"length":186,"line":1002,"column":8,"endLine":1006,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"shortId","argumentNames":["this"]}
jacdac_Device_shortId__P1804.isGetter = true;

function jacdac_Device_shortId__P1804_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_shortId__P1804, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_shortDeviceId__P1794(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___7787 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = Buffer_fromHex__P204_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 843; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.hash(s.tmp_0, 30);
    s.h___7787 = (r0);
    r0 = (s.h___7787 % 26);
    s.tmp_7 = r0;
    r0 = (65 + s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim.Math_.idiv(s.h___7787, 26);
    s.tmp_12 = r0;
    r0 = (s.tmp_12 % 26);
    s.tmp_11 = r0;
    r0 = (65 + s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_8);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.Math_.idiv(s.h___7787, 676);
    s.tmp_17 = r0;
    r0 = (s.tmp_17 % 10);
    s.tmp_16 = r0;
    r0 = (48 + s.tmp_16);
    s.tmp_15 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_15);
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_13);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.Math_.idiv(s.h___7787, 6760);
    s.tmp_22 = r0;
    r0 = (s.tmp_22 % 10);
    s.tmp_21 = r0;
    r0 = (48 + s.tmp_21);
    s.tmp_20 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_20);
    s.tmp_19 = r0;
    if ((s.tmp_19) && (s.tmp_19).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_19);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_19) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_18);
    return leave(s, r0)
  default: oops()
} } }
jacdac_shortDeviceId__P1794.info = {"start":31501,"length":390,"line":953,"column":4,"endLine":961,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"shortDeviceId","argumentNames":["devid"]}

function jacdac_shortDeviceId__P1794_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_shortDeviceId__P1794, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  h___7787: undefined,
  arg0: undefined,
} }





function Buffer_fromHex__P204(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.hexStr___7845 = undefined;
    s.res___7847 = undefined;
    s.i___7856 = undefined;
    s.p0___7862 = undefined;
    s.p1___7871 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.hexStr___7845 = ("0123456789abcdef");
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 1);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.res___7847 = (r0);
    s.tmp_0 = helpers_stringToLowerCase__P121_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 28; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.arg0 = (r0);
    s.i___7856 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___7856;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_3 = r0 = s.hexStr___7845;
    r0 = pxsim_String_.charAt(s.arg0, s.i___7856);
    s.tmp_4 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_3, s.tmp_4, undefined);
    s.p0___7862 = (r0);
    s.tmp_0 = r0 = s.hexStr___7845;
    s.tmp_2 = r0 = s.arg0;
    r0 = (s.i___7856 + 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_0, s.tmp_1, undefined);
    s.p1___7871 = (r0);
    r0 = (s.p0___7862 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.p1___7871 < 0);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.throwValue("Invalid hex");
  case 4:
  case 5:
    s.tmp_2 = r0 = s.res___7847;
    r0 = (s.i___7856 >> 1);
    s.tmp_3 = r0;
    r0 = (s.p0___7862 << 4);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 | s.p1___7871);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, s.tmp_3, s.tmp_4);
    r0 = (s.i___7856 + 2);
    s.i___7856 = (r0);
    { step = 1; continue; }
  case 6:
    r0 = s.res___7847;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromHex__P204.info = {"start":8064,"length":469,"line":285,"column":4,"endLine":297,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromHex","argumentNames":["hex"]}

function Buffer_fromHex__P204_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromHex__P204, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  hexStr___7845: undefined,
  res___7847: undefined,
  i___7856: undefined,
  p0___7862: undefined,
  p1___7871: undefined,
  arg0: undefined,
} }





function helpers_stringToLowerCase__P121(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___7902 = undefined;
    s.prev___7903 = undefined;
    s.i___7904 = undefined;
    s.c___7910 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.mkEmpty();
    s.r___7902 = (r0);
    s.prev___7903 = (0);
    s.i___7904 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___7904;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___7904);
    s.c___7910 = (r0);
    r0 = (65 <= s.c___7910);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___7910 <= 90);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    if ((s.r___7902) && (s.r___7902).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.r___7902);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___7902) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_2 = r0;
    s.tmp_7 = helpers_stringSlice__P119_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.tmp_7.arg1 = s.prev___7903;
    s.tmp_7.arg2 = s.i___7904;
    s.callLocIdx = 13; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = (s.c___7910 + 32);
    s.tmp_10 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.r___7902 = (r0);
    r0 = (s.i___7904 + 1);
    s.prev___7903 = (r0);
  case 4:
  case 5:
    r0 = (s.i___7904 + 1);
    s.i___7904 = (r0);
    { step = 1; continue; }
  case 6:
    if ((s.r___7902) && (s.r___7902).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.r___7902);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___7902) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.prev___7903;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 14; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___7902 = (r0);
    r0 = s.r___7902;
    return leave(s, r0)
  default: oops()
} } }
helpers_stringToLowerCase__P121.info = {"start":12527,"length":386,"line":420,"column":4,"endLine":432,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"stringToLowerCase","argumentNames":["s"]}

function helpers_stringToLowerCase__P121_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringToLowerCase__P121, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  r___7902: undefined,
  prev___7903: undefined,
  i___7904: undefined,
  c___7910: undefined,
  arg0: undefined,
} }





function jacdac_log__P2461(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1749;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 747; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_log__P2461.info = {"start":11154,"length":71,"line":310,"column":4,"endLine":312,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"log","argumentNames":["msg"]}

function jacdac_log__P2461_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_log__P2461, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_data__P1384(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_data"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P1384.info = {"start":5025,"length":60,"line":157,"column":8,"endLine":159,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"data","argumentNames":["this"]}
jacdac_JDPacket_data__P1384.isGetter = true;

function jacdac_JDPacket_data__P1384_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P1384, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Device_resetCount__P1801(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 0);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 15);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_resetCount__P1801.info = {"start":32607,"length":142,"line":988,"column":8,"endLine":992,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"resetCount","argumentNames":["this"]}
jacdac_Device_resetCount__P1801.isGetter = true;

function jacdac_Device_resetCount__P1801_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_resetCount__P1801, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_serviceCommand__P1376(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 14);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceCommand__P1376.info = {"start":4010,"length":109,"line":121,"column":8,"endLine":123,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceCommand","argumentNames":["this"]}
jacdac_JDPacket_serviceCommand__P1376.isGetter = true;

function jacdac_JDPacket_serviceCommand__P1376_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceCommand__P1376, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Server_handlePacketOuter__P1756(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(4355, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(4361, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 1:
    s.tmp_2 = jacdac_Server_handleAnnounce__P2377_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 750; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    { step = 5; continue; }
  case 2:
    s.tmp_0 = jacdac_Server_handleStatusCode__P2378_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 751; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    { step = 5; continue; }
  case 3:
    s.tmp_0 = jacdac_Server_handleInstanceName__P2379_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 752; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    { step = 5; continue; }
  case 4:
    r0 = (s.arg0).fields["stateUpdated"] = (false);
    s.tmp_0 = jacdac_Server__C1750_v1_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacket;
    s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handlePacketOuter__P1756.info = {"start":11989,"length":643,"line":341,"column":8,"endLine":357,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_Server_handlePacketOuter__P1756_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handlePacketOuter__P1756, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handlePacket__P1757(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handlePacket__P1757.info = {"start":12642,"length":30,"line":359,"column":8,"endLine":359,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_Server_handlePacket__P1757_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handlePacket__P1757, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleInstanceName__P2379(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_handleRegValue__P2381_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 265;
    s.tmp_0.arg3 = "s";
    r0 = s.arg0.fields["instanceName"];
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 767; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleInstanceName__P2379.info = {"start":13855,"length":216,"line":403,"column":8,"endLine":410,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleInstanceName","argumentNames":["this","pkt"]}

function jacdac_Server_handleInstanceName__P2379_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleInstanceName__P2379, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleRegValue__P2381(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.getset___8011 = undefined;
    s.reg___8021 = undefined;
    s.v___8042 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 12);
    s.getset___8011 = (r0);
    r0 = (s.getset___8011 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.getset___8011 > 2);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = s.arg4;
    { step = 13; continue; }
  case 3:
  case 4:
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 4095);
    s.reg___8021 = (r0);
    r0 = (s.reg___8021 != s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg4;
    { step = 13; continue; }
  case 5:
  case 6:
    r0 = (s.getset___8011 == 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.arg4);
    s.tmp_3 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_4 = jacdac_JDPacket_jdpacked__P1364_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_5, 4, 14);
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.arg3;
    s.tmp_4.arg2 = s.tmp_2;
    s.callLocIdx = 771; s.pc = 15; return s.tmp_4;
  case 15:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 772; s.pc = 14; return s.tmp_3;
  case 14:
    r0 = s.retval;
    { step = 12; continue; }
  case 7:
    r0 = (s.arg2 >> 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = s.arg4;
    { step = 13; continue; }
  case 8:
  case 9:
    s.tmp_2 = jacdac_JDPacket_jdunpack__P1389_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = s.arg3;
    s.callLocIdx = 773; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.v___8042 = (r0);
    r0 = pxsim_Array__getAt(s.v___8042, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.arg4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = (s.arg0).fields["stateUpdated"] = (true);
    r0 = pxsim_Array__getAt(s.v___8042, 0);
    s.arg4 = (r0);
  case 10:
  case 11:
  case 12:
    r0 = s.arg4;
  case 13:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegValue__P2381.info = {"start":14989,"length":888,"line":438,"column":8,"endLine":462,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegValue","argumentNames":["this","pkt","register","fmt","current"]}

function jacdac_Server_handleRegValue__P2381_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegValue__P2381, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  getset___8011: undefined,
  reg___8021: undefined,
  v___8042: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_JDPacket_jdunpack__P1389(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___8058 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_data"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg1;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_1;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = jacdac_jdunpack__P1407_mk(s);
    r0 = s.arg0.fields["_data"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 503; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.p___8058 = (s.tmp_3);
    s.tmp_0 = r0 = s.p___8058;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_Array__mk();
  case 6:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_jdunpack__P1389.info = {"start":5533,"length":159,"line":179,"column":8,"endLine":182,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"jdunpack","argumentNames":["this","fmt"]}

function jacdac_JDPacket_jdunpack__P1389_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_jdunpack__P1389, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  p___8058: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdunpack__P1407(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_Array__mk();
    { step = 5; continue; }
  case 3:
  case 4:
    s.tmp_4 = jacdac_jdunpackCore__P2357_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    s.tmp_4.arg2 = 0;
    s.callLocIdx = 559; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdunpack__P1407.info = {"start":6987,"length":334,"line":216,"column":4,"endLine":225,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdunpack","argumentNames":["buf","fmt"]}

function jacdac_jdunpack__P1407_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdunpack__P1407, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdunpackCore__P2357(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.repeatRes___8085 = undefined;
    s.res___8090 = undefined;
    s.off___8092 = undefined;
    s.fp0___8093 = undefined;
    s.parser___8094 = undefined;
    s.sz___8129 = undefined;
    s.c0___8132 = undefined;
    s.endoff___8138 = undefined;
    s.fmt1___8167 = undefined;
    s.v___8174 = undefined;
    s.subbuf___8211 = undefined;
    s.zerop___8226 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    { step = 2; continue; }
  case 1:
    r0 = null;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.repeatRes___8085 = (s.tmp_0);
    r0 = pxsim_Array__mk();
    s.res___8090 = (r0);
    s.off___8092 = (0);
    s.fp0___8093 = (0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_TokenParser__C2354_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_TokenParser_constructor__P2356_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 549; s.pc = 58; return s.tmp_1;
  case 58:
    r0 = s.retval;
    s.parser___8094 = (s.tmp_0);
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__mk();
    { step = 57; continue; }
  case 5:
  case 6:
  case 7:
    s.tmp_4 = jacdac_TokenParser_parse__P2355_mk(s);
    s.tmp_4.arg0 = s.parser___8094;
    s.callLocIdx = 550; s.pc = 59; return s.tmp_4;
  case 59:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 52; continue; }
    r0 = s.parser___8094.fields["isArray"];
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_5;
    { step = 9; continue; }
  case 8:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
  case 9:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 10; continue; }
    s.tmp_8 = r0 = s.res___8090;
    s.tmp_10 = jacdac_jdunpackCore__P2357_mk(s);
    s.tmp_11 = r0 = s.arg0;
    s.tmp_12 = r0 = s.off___8092;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_13 = r0;
    r0 = (s.tmp_13 - s.tmp_12);
    s.tmp_14 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_11, s.tmp_12, s.tmp_14);
    s.tmp_10.arg0 = r0;
    s.tmp_15 = helpers_stringSlice__P119_mk(s);
    s.tmp_15.arg0 = s.arg1;
    s.tmp_15.arg1 = s.fp0___8093;
    s.tmp_15.arg2 = undefined;
    s.callLocIdx = 552; s.pc = 61; return s.tmp_15;
  case 61:
    r0 = s.retval;
    s.tmp_10.arg1 = r0;
    s.tmp_10.arg2 = 1;
    s.callLocIdx = 553; s.pc = 60; return s.tmp_10;
  case 60:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_Array__push(s.tmp_8, s.tmp_9);
    r0 = s.res___8090;
    { step = 57; continue; }
  case 10:
  case 11:
    r0 = s.parser___8094.fields["fp"];
    s.fp0___8093 = (r0);
    r0 = s.parser___8094.fields["size"];
    s.sz___8129 = (r0);
    r0 = s.parser___8094.fields["c0"];
    s.c0___8132 = (r0);
    r0 = (s.c0___8132 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    s.endoff___8138 = (s.off___8092);
  case 12:
    s.tmp_1 = r0 = s.endoff___8138;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 14; continue; }
  case 13:
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.endoff___8138);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 0);
  case 14:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 15; continue; }
    r0 = (s.endoff___8138 + 1);
    s.endoff___8138 = (r0);
    { step = 12; continue; }
  case 15:
    r0 = (s.endoff___8138 - s.off___8092);
    s.sz___8129 = (r0);
    { step = 19; continue; }
  case 16:
    r0 = (s.sz___8129 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - s.off___8092);
    s.sz___8129 = (r0);
  case 17:
  case 18:
  case 19:
    r0 = s.parser___8094.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 26; continue; }
    r0 = s.parser___8094.fields["nfmt2"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
    r0 = 11;
    { step = 21; continue; }
  case 20:
    r0 = s.parser___8094.fields["nfmt"];
  case 21:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.fmt1___8167 = (s.tmp_3);
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt1___8167, s.off___8092);
    s.v___8174 = (r0);
    r0 = s.parser___8094.fields["nfmt2"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
    s.tmp_1 = r0 = s.v___8174;
    s.tmp_4 = r0 = s.arg0;
    r0 = s.parser___8094.fields["nfmt"];
    s.tmp_5 = r0;
    r0 = (s.off___8092 + 4);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, s.tmp_5, s.tmp_6);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 * 4294967296);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.v___8174 = (r0);
  case 22:
  case 23:
    r0 = s.parser___8094.fields["div"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
    r0 = s.parser___8094.fields["div"];
    s.tmp_2 = r0;
    r0 = (s.v___8174 / s.tmp_2);
    s.v___8174 = (r0);
  case 24:
  case 25:
    r0 = pxsim_Array__push(s.res___8090, s.v___8174);
    r0 = s.parser___8094.fields["size"];
    s.tmp_0 = r0;
    r0 = (s.off___8092 + s.tmp_0);
    s.off___8092 = (r0);
    { step = 43; continue; }
  case 26:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.off___8092;
    r0 = (s.off___8092 + s.sz___8129);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - s.tmp_1);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, s.tmp_1, s.tmp_3);
    s.subbuf___8211 = (r0);
    r0 = (s.c0___8132 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 27; continue; }
    r0 = s.tmp_0;
    { step = 28; continue; }
  case 27:
    r0 = (s.c0___8132 == 115);
  case 28:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 33; continue; }
    s.zerop___8226 = (0);
  case 29:
    s.tmp_1 = r0 = s.zerop___8226;
    r0 = pxsim.BufferMethods.length(s.subbuf___8211);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 30; continue; }
    r0 = s.tmp_0;
    { step = 31; continue; }
  case 30:
    r0 = pxsim.BufferMethods.getByte(s.subbuf___8211, s.zerop___8226);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 0);
  case 31:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 32; continue; }
    r0 = (s.zerop___8226 + 1);
    s.zerop___8226 = (r0);
    { step = 29; continue; }
  case 32:
    s.tmp_0 = r0 = s.res___8090;
    s.tmp_3 = r0 = s.subbuf___8211;
    r0 = (s.zerop___8226 - 0);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, 0, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    { step = 40; continue; }
  case 33:
    r0 = (s.c0___8132 == 98);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 34; continue; }
    r0 = pxsim_Array__push(s.res___8090, s.subbuf___8211);
    { step = 39; continue; }
  case 34:
    r0 = (s.c0___8132 == 120);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 35; continue; }
    { step = 38; continue; }
  case 35:
    r0 = (s.c0___8132 == 114);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
    s.tmp_2 = r0 = s.res___8090;
    s.tmp_4 = jacdac_jdunpackCore__P2357_mk(s);
    s.tmp_4.arg0 = s.subbuf___8211;
    s.tmp_5 = helpers_stringSlice__P119_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_5.arg1 = s.fp0___8093;
    s.tmp_5.arg2 = undefined;
    s.callLocIdx = 557; s.pc = 63; return s.tmp_5;
  case 63:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.tmp_4.arg2 = 2;
    s.callLocIdx = 558; s.pc = 62; return s.tmp_4;
  case 62:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_3);
    { step = 52; continue; }
    { step = 37; continue; }
  case 36:
    r0 = pxsim_pxtcore.throwValue("whoops");
  case 37:
  case 38:
  case 39:
  case 40:
    s.tmp_0 = r0 = s.off___8092;
    r0 = pxsim.BufferMethods.length(s.subbuf___8211);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.off___8092 = (r0);
    r0 = (s.c0___8132 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 41; continue; }
    r0 = (s.off___8092 + 1);
    s.off___8092 = (r0);
  case 41:
  case 42:
  case 43:
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 44; continue; }
    r0 = s.tmp_0;
    { step = 45; continue; }
  case 44:
    r0 = s.parser___8094.fields["fp"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
  case 45:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 50; continue; }
    r0 = (s.parser___8094).fields["fp"] = (0);
    r0 = (s.arg2 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
    r0 = pxsim_Array__push(s.repeatRes___8085, s.res___8090);
    r0 = pxsim_Array__mk();
    s.res___8090 = (r0);
  case 46:
  case 47:
    s.tmp_1 = r0 = s.off___8092;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 48; continue; }
    { step = 52; continue; }
  case 48:
  case 49:
  case 50:
  case 51:
    { step = 7; continue; }
  case 52:
    r0 = (s.arg2 == 2);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 55; continue; }
    r0 = pxsim_Array__length(s.res___8090);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 53; continue; }
    r0 = pxsim_Array__push(s.repeatRes___8085, s.res___8090);
  case 53:
  case 54:
    r0 = s.repeatRes___8085;
    { step = 57; continue; }
    { step = 56; continue; }
  case 55:
    r0 = s.res___8090;
    { step = 57; continue; }
  case 56:
    r0 = undefined;
  case 57:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdunpackCore__P2357.info = {"start":4396,"length":2585,"line":140,"column":4,"endLine":214,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdunpackCore","argumentNames":["buf","fmt","repeat"]}

function jacdac_jdunpackCore__P2357_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdunpackCore__P2357, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  repeatRes___8085: undefined,
  res___8090: undefined,
  off___8092: undefined,
  fp0___8093: undefined,
  parser___8094: undefined,
  sz___8129: undefined,
  c0___8132: undefined,
  endoff___8138: undefined,
  fmt1___8167: undefined,
  v___8174: undefined,
  subbuf___8211: undefined,
  zerop___8226: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_bufferToString__P2351(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.toString(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_bufferToString__P2351.info = {"start":1197,"length":74,"line":42,"column":4,"endLine":44,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"bufferToString","argumentNames":["buf"]}

function jacdac_bufferToString__P2351_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_bufferToString__P2351, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_sendReport__P2374(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 753; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendReport__P1398_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_1.arg0 = globals.bus___1748;
    s.callLocIdx = 754; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 755; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendReport__P2374.info = {"start":12826,"length":140,"line":369,"column":8,"endLine":372,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendReport","argumentNames":["this","pkt"]}

function jacdac_Server_sendReport__P2374_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendReport__P2374, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleStatusCode__P2378(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_handleRegUInt32__P2384_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 259;
    r0 = s.arg0.fields["_statusCode"];
    s.tmp_0.arg3 = r0;
    s.callLocIdx = 766; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleStatusCode__P2378.info = {"start":13716,"length":129,"line":399,"column":8,"endLine":401,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleStatusCode","argumentNames":["this","pkt"]}

function jacdac_Server_handleStatusCode__P2378_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleStatusCode__P2378, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleRegUInt32__P2384(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___8335 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_handleRegValue__P2381_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = "u32";
    r0 = (s.arg3 >>> 0);
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 775; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.res___8335 = (r0);
    r0 = s.res___8335;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegUInt32__P2384.info = {"start":16476,"length":245,"line":487,"column":8,"endLine":494,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegUInt32","argumentNames":["this","pkt","register","current"]}

function jacdac_Server_handleRegUInt32__P2384_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegUInt32__P2384, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  res___8335: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_Server_handleAnnounce__P2377(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 764; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 765; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleAnnounce__P2377.info = {"start":13473,"length":233,"line":390,"column":8,"endLine":397,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleAnnounce","argumentNames":["this","pkt"]}

function jacdac_Server_handleAnnounce__P2377_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleAnnounce__P2377, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_advertisementData__P1759(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = pxsim.control.createBuffer(0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_advertisementData__P1759.info = {"start":12749,"length":67,"line":365,"column":8,"endLine":367,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"advertisementData","argumentNames":["this"]}

function jacdac_Server_advertisementData__P1759_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_advertisementData__P1759, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDPacket_isCommand__P1394(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, 3);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isCommand__P1394.info = {"start":6558,"length":91,"line":213,"column":8,"endLine":215,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isCommand","argumentNames":["this"]}
jacdac_JDPacket_isCommand__P1394.isGetter = true;

function jacdac_JDPacket_isCommand__P1394_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isCommand__P1394, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_EventSource_emit__P1834(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.someOnce___8364 = undefined;
    s.listener___8366 = undefined;
    s.unnamed166___U2 = undefined;
    s.unnamed167___U3 = undefined;
    s.handler___8380 = undefined;
    s.e___8387 = undefined;
    s.i___8393 = undefined;
    s.listener___8400 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1829_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = false;
    { step = 19; continue; }
  case 1:
  case 2:
    s.someOnce___8364 = (false);
    s.listener___8366 = (undefined);
    r0 = s.arg0.fields["listeners"];
    s.unnamed166___U2 = (r0);
    s.unnamed167___U3 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed167___U3;
    r0 = pxsim_Array__length(s.unnamed166___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_Array__getAt(s.unnamed166___U2, s.unnamed167___U3);
    s.listener___8366 = (r0);
    r0 = s.listener___8366.fields["key"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 === s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 8; continue; }
    s.tmp_4 = r0 = s.someOnce___8364;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_4;
    { step = 5; continue; }
  case 4:
    r0 = s.listener___8366.fields["once"];
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    s.someOnce___8364 = (s.tmp_5);
    r0 = s.listener___8366.fields["handler"];
    s.handler___8380 = (r0);
    r0 = pxsim_pxtcore.beginTry(6);
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___8380;
    s.tmp_0.arg0 = s.arg2;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 953; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 7; continue; }
  case 6:
    s.e___8387 = (undefined);
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___8387 = (r0);
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.ERROR___1828;
    s.tmp_0.arg2 = s.e___8387;
    s.callLocIdx = 954; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
  case 7:
  case 8:
  case 9:
    r0 = (s.unnamed167___U3 + 1);
    s.unnamed167___U3 = (r0);
    { step = 3; continue; }
  case 10:
    s.unnamed166___U2 = (undefined);
    r0 = pxsim_numops_toBoolDecr(s.someOnce___8364);
    if (!r0) { step = 17; continue; }
    s.i___8393 = (0);
  case 11:
    s.tmp_1 = r0 = s.i___8393;
    r0 = s.arg0.fields["listeners"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    r0 = s.arg0.fields["listeners"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_4, s.i___8393);
    s.listener___8400 = (r0);
    r0 = s.listener___8400.fields["once"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = s.tmp_0;
    { step = 13; continue; }
  case 12:
    r0 = s.listener___8400.fields["key"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === s.arg1);
  case 13:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 14; continue; }
    s.tmp_3 = helpers_arraySplice__P100_mk(s);
    r0 = s.arg0.fields["listeners"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.i___8393;
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 955; s.pc = 22; return s.tmp_3;
  case 22:
    r0 = s.retval;
    { step = 15; continue; }
  case 14:
    r0 = (s.i___8393 + 1);
    s.i___8393 = (r0);
  case 15:
    { step = 11; continue; }
  case 16:
  case 17:
  case 18:
    r0 = true;
  case 19:
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_emit__P1834.info = {"start":2537,"length":1071,"line":84,"column":8,"endLine":116,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"emit","argumentNames":["this","eventName","arg"]}

function jacdac_EventSource_emit__P1834_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_emit__P1834, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  someOnce___8364: undefined,
  listener___8366: undefined,
  unnamed166___U2: undefined,
  unnamed167___U3: undefined,
  handler___8380: undefined,
  e___8387: undefined,
  i___8393: undefined,
  listener___8400: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arraySplice__P100(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___8423 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    s.i___8423 = (0);
  case 3:
    r0 = (s.i___8423 < s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array_.removeAt(s.arg0, s.arg1);
    r0 = (s.i___8423 + 1);
    s.i___8423 = (r0);
    { step = 3; continue; }
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySplice__P100.info = {"start":3642,"length":213,"line":137,"column":4,"endLine":144,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySplice","argumentNames":["arr","start","len"]}

function helpers_arraySplice__P100_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySplice__P100, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  i___8423: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket__sendReport__P1398(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_deviceIdentifier__P1367_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = s.arg1.fields["deviceId"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 521; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCore__P1397_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 522; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendReport__P1398.info = {"start":7416,"length":143,"line":238,"column":8,"endLine":242,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendReport","argumentNames":["this","dev"]}

function jacdac_JDPacket__sendReport__P1398_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendReport__P1398, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_onlyHeader__P1363(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 485; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_onlyHeader__P1363.info = {"start":1979,"length":120,"line":60,"column":8,"endLine":62,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"onlyHeader","argumentNames":["serviceCommand"]}

function jacdac_JDPacket_onlyHeader__P1363_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_onlyHeader__P1363, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_crc__P1375(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_crc__P1375.info = {"start":3903,"length":97,"line":117,"column":8,"endLine":119,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"crc","argumentNames":["this"]}
jacdac_JDPacket_crc__P1375.isGetter = true;

function jacdac_JDPacket_crc__P1375_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_crc__P1375, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_selfDevice__P1738(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg0.fields["_myDevice"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Device__C1795_VT);
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_Device_constructor__P1799_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    r0 = pxsim.control.deviceLongSerialNumber();
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_5);
    s.tmp_4.arg1 = r0;
    r0 = pxsim.control.createBuffer(4);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 682; s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
    r0 = (s.arg0).fields["_myDevice"] = (s.tmp_3);
  case 1:
  case 2:
    r0 = s.arg0.fields["_myDevice"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_selfDevice__P1738.info = {"start":2471,"length":273,"line":79,"column":8,"endLine":87,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"selfDevice","argumentNames":["this"]}
jacdac_Bus_selfDevice__P1738.isGetter = true;

function jacdac_Bus_selfDevice__P1738_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_selfDevice__P1738, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_requiresAck__P1372(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_1 = r0 = s.arg1;
    s.tmp_3 = jacdac_JDPacket_requiresAck__P1371_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 492; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 3);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 ^ 2);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_4, 3, s.tmp_5);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_requiresAck__P1372.info = {"start":3411,"length":145,"line":103,"column":8,"endLine":106,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"requiresAck","argumentNames":["this","ack"]}

function jacdac_JDPacket_requiresAck__P1372_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_requiresAck__P1372, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_requiresAck__P1371(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 2; continue; }
  case 1:
    r0 = false;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_requiresAck__P1371.info = {"start":3283,"length":119,"line":100,"column":8,"endLine":102,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"requiresAck","argumentNames":["this"]}
jacdac_JDPacket_requiresAck__P1371.isGetter = true;

function jacdac_JDPacket_requiresAck__P1371_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_requiresAck__P1371, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_multicommandClass__P1369(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 11, 4);
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = undefined;
  case 3:
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_multicommandClass__P1369.info = {"start":2983,"length":214,"line":90,"column":8,"endLine":94,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"multicommandClass","argumentNames":["this"]}
jacdac_JDPacket_multicommandClass__P1369.isGetter = true;

function jacdac_JDPacket_multicommandClass__P1369_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_multicommandClass__P1369, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac___physSendPacket__P1314(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.payload___8498 = undefined;
    s.tailend___8502 = undefined;
    s.crc___8522 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 471; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.payload___8498 = (r0);
    r0 = pxsim.BufferMethods.length(s.payload___8498);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 3);
    s.tailend___8502 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.tailend___8502);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_0.arg0 = s.payload___8498;
    r0 = (4 - s.tailend___8502);
    s.tmp_1 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 472; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.payload___8498 = (r0);
  case 1:
  case 2:
    s.tmp_0 = r0 = s.payload___8498;
    r0 = pxsim.BufferMethods.length(s.payload___8498);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 2, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 2, s.tmp_1);
    s.tmp_0 = jacdac_jdCrc16__P2296_mk(s);
    r0 = pxsim.BufferMethods.slice(s.payload___8498, 2, -1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 473; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.crc___8522 = (r0);
    s.tmp_0 = r0 = s.payload___8498;
    r0 = (s.crc___8522 >> 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 0, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 0, s.tmp_1);
    s.tmp_0 = r0 = s.payload___8498;
    r0 = (s.crc___8522 >> 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 1, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 1, s.tmp_1);
    r0 = pxsim_pxtcore.sendMessage("jacdac", s.payload___8498, undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physSendPacket__P1314.info = {"start":625,"length":540,"line":27,"column":4,"endLine":37,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physSendPacket","argumentNames":["header","data"]}

function jacdac___physSendPacket__P1314_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physSendPacket__P1314, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  payload___8498: undefined,
  tailend___8502: undefined,
  crc___8522: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdCrc16__P2296(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.crc___8551 = undefined;
    s.i___8552 = undefined;
    s.data___8558 = undefined;
    s.x___8562 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.crc___8551 = (65535);
    s.i___8552 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___8552;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___8552);
    s.data___8558 = (r0);
    r0 = (s.crc___8551 >> 8);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 ^ s.data___8558);
    s.x___8562 = (r0);
    s.tmp_0 = r0 = s.x___8562;
    r0 = (s.x___8562 >> 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 ^ s.tmp_1);
    s.x___8562 = (r0);
    r0 = (s.crc___8551 << 8);
    s.tmp_2 = r0;
    r0 = (s.x___8562 << 12);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 ^ s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.x___8562 << 5);
    s.tmp_4 = r0;
    r0 = (s.tmp_1 ^ s.tmp_4);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 ^ s.x___8562);
    s.crc___8551 = (r0);
    r0 = (s.crc___8551 & 65535);
    s.crc___8551 = (r0);
    r0 = (s.i___8552 + 1);
    s.i___8552 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.crc___8551;
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdCrc16__P2296.info = {"start":204,"length":308,"line":11,"column":4,"endLine":21,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"jdCrc16","argumentNames":["p"]}

function jacdac_jdCrc16__P2296_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdCrc16__P2296, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  crc___8551: undefined,
  i___8552: undefined,
  data___8558: undefined,
  x___8562: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_deviceIdentifier__P1367(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idb___8594 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_0 = Buffer_fromHex__P204_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 488; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.idb___8594 = (r0);
    r0 = pxsim.BufferMethods.length(s.idb___8594);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_error__P2320_mk(s);
    s.tmp_2.arg0 = "Invalid id";
    s.callLocIdx = 489; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 4, s.idb___8594);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_deviceIdentifier__P1367.info = {"start":2720,"length":179,"line":80,"column":8,"endLine":84,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"deviceIdentifier","argumentNames":["this","id"]}

function jacdac_JDPacket_deviceIdentifier__P1367_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_deviceIdentifier__P1367, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  idb___8594: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_error__P2320(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore.throwValue(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_error__P2320.info = {"start":992,"length":53,"line":23,"column":4,"endLine":25,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"error","argumentNames":["msg"]}

function jacdac_error__P2320_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_error__P2320, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDPacket_deviceIdentifier__P1366(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 4, 8);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_deviceIdentifier__P1366.info = {"start":2597,"length":114,"line":76,"column":8,"endLine":79,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"deviceIdentifier","argumentNames":["this"]}
jacdac_JDPacket_deviceIdentifier__P1366.isGetter = true;

function jacdac_JDPacket_deviceIdentifier__P1366_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_deviceIdentifier__P1366, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_serviceIndex__P1374(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = (s.arg1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("serviceIndex not set");
  case 1:
  case 2:
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, 13);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 192);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 | s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, 13, s.tmp_2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceIndex__P1374.info = {"start":3673,"length":220,"line":111,"column":8,"endLine":115,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceIndex","argumentNames":["this","serviceIdx"]}

function jacdac_JDPacket_serviceIndex__P1374_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceIndex__P1374, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_serviceIndex__P1373(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 13);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 63);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceIndex__P1373.info = {"start":3566,"length":98,"line":108,"column":8,"endLine":110,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceIndex","argumentNames":["this"]}
jacdac_JDPacket_serviceIndex__P1373.isGetter = true;

function jacdac_JDPacket_serviceIndex__P1373_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceIndex__P1373, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_jdpacked__P1364(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_jdpack__P1408_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = s.arg2;
    s.callLocIdx = 486; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 487; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_jdpacked__P1364.info = {"start":2109,"length":145,"line":64,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"jdpacked","argumentNames":["serviceCommand","fmt","nums"]}

function jacdac_JDPacket_jdpacked__P1364_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_jdpacked__P1364, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arrayFind__P111(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___8648 = undefined;
    s.i___8651 = undefined;
    s.v___8656 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___8648 = (r0);
    s.i___8651 = (0);
  case 1:
    r0 = (s.i___8651 < s.len___8648);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___8651);
    s.v___8656 = (r0);
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___8656;
    s.tmp_1.arg1 = s.i___8651;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 9; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.v___8656;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___8651 + 1);
    s.i___8651 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFind__P111.info = {"start":8018,"length":292,"line":271,"column":4,"endLine":278,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayFind","argumentNames":["arr","callbackfn"]}

function helpers_arrayFind__P111_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFind__P111, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___8648: undefined,
  i___8651: undefined,
  v___8656: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_onTwinUpdate__P1310(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___8668 = undefined;
    s.currTwin___8671 = undefined;
    s.lastVersion___8673 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_mqttClient__P1294_mk(s);
    s.callLocIdx = 459; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.c___8668 = (r0);
    r0 = pxsim_pxtrt.mklocRef();
    s.currTwin___8671 = (r0);
    r0 = pxsim_pxtrt_stlocRef(s.currTwin___8671, null);
    r0 = pxsim_pxtrt.mklocRef();
    s.lastVersion___8673 = (r0);
    r0 = pxsim_pxtcore_mkAction(3, azureiot_onTwinUpdate_inline__P8677);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.currTwin___8671);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.lastVersion___8673);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.arg0);
    s.tmp_1 = mqtt_Client_subscribe__P1284_mk(s);
    s.tmp_1.arg0 = s.c___8668;
    s.tmp_1.arg1 = "$iothub/twin/PATCH/properties/desired/#";
    s.tmp_1.arg2 = s.tmp_0;
    s.tmp_1.arg3 = 0;
    s.callLocIdx = 468; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0 = r0 = s.currTwin___8671;
    s.tmp_2 = azureiot_getTwin__P1306_mk(s);
    s.callLocIdx = 469; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    s.tmp_0 = r0 = s.lastVersion___8673;
    r0 = pxsim_pxtrt_ldlocRef(s.currTwin___8671);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_3, "desired");
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_2, "$version");
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    s.tmp_0 = lambda_3_mk(s);
    s.tmp_0.argL = s.arg0;
    r0 = pxsim_pxtrt_ldlocRef(s.currTwin___8671);
    s.tmp_0.arg0 = r0;
    r0 = pxsim_pxtrt_ldlocRef(s.currTwin___8671);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "desired");
    s.tmp_0.arg1 = r0;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 470; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_onTwinUpdate__P1310.info = {"start":11139,"length":829,"line":343,"column":4,"endLine":363,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"onTwinUpdate","argumentNames":["handler"]}

function azureiot_onTwinUpdate__P1310_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_onTwinUpdate__P1310, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  c___8668: undefined,
  currTwin___8671: undefined,
  lastVersion___8673: undefined,
  arg0: undefined,
} }





function azureiot_onTwinUpdate_inline__P8677(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sysProps___8681 = undefined;
    s.ver___8686 = undefined;
    s.update___8700 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    s.tmp_3 = azureiot_parseTopicArgs__P2289_mk(s);
    s.tmp_4 = if_topic_1_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "topic");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["topic"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["topic"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 460; s.pc = 7; return s.tmp_4; }
    }
  case 7:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 461; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.sysProps___8681 = (r0);
    s.tmp_0 = parseInt__P97_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.sysProps___8681, "$version");
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 462; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.ver___8686 = (r0);
    s.tmp_1 = r0 = s.ver___8686;
    r0 = pxsim_pxtrt_ldlocRef(s.caps[1]);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 <= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = azureiot_log__P2281_mk(s);
    if ((s.ver___8686) && (s.ver___8686).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.ver___8686);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.ver___8686) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("skipping twin update: ", s.tmp_4);
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 463; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    { step = 5; continue; }
  case 3:
  case 4:
    s.tmp_0 = JSON_parse__P386_mk(s);
    s.tmp_2 = if_content_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "content");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["content"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["content"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 464; s.pc = 12; return s.tmp_2; }
    }
  case 12:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 465; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.update___8700 = (r0);
    s.tmp_0 = azureiot_applyPatch__P1309_mk(s);
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "desired");
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.update___8700;
    s.callLocIdx = 466; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.tmp_0 = lambda_3_mk(s);
    s.tmp_0.argL = s.caps[2];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.update___8700;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 467; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_onTwinUpdate_inline__P8677.info = {"start":11374,"length":457,"line":347,"column":63,"endLine":359,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["msg"]}

function azureiot_onTwinUpdate_inline__P8677_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_onTwinUpdate_inline__P8677, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  sysProps___8681: undefined,
  ver___8686: undefined,
  update___8700: undefined,
  arg0: undefined,
} }





function azureiot_applyPatch__P1309(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.k___8724 = undefined;
    s.unnamed120___U1 = undefined;
    s.unnamed121___U2 = undefined;
    s.v___8728 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.k___8724 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.arg1);
    s.unnamed120___U1 = (r0);
    s.unnamed121___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed121___U2;
    r0 = pxsim_Array__length(s.unnamed120___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed120___U1, s.unnamed121___U2);
    s.k___8724 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___8724);
    s.v___8728 = (r0);
    r0 = (s.v___8728 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_pxtrt.mapDeleteByString(s.arg0, s.k___8724);
    { step = 7; continue; }
  case 2:
    r0 = pxsim_pxtcore.typeOf(s.v___8728);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "object");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___8724);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    s.tmp_5 = r0 = s.arg0;
    s.tmp_6 = r0 = s.k___8724;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_7 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_5, s.tmp_6, s.tmp_7);
  case 3:
  case 4:
    s.tmp_0 = azureiot_applyPatch__P1309_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___8724);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.v___8728;
    s.callLocIdx = 458; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_pxtrt.mapSetGeneric(s.arg0, s.k___8724, s.v___8728);
  case 6:
  case 7:
    r0 = (s.unnamed121___U2 + 1);
    s.unnamed121___U2 = (r0);
    { step = 1; continue; }
  case 8:
    s.unnamed120___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_applyPatch__P1309.info = {"start":10740,"length":393,"line":329,"column":4,"endLine":341,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"applyPatch","argumentNames":["trg","patch"]}

function azureiot_applyPatch__P1309_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_applyPatch__P1309, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  k___8724: undefined,
  unnamed120___U1: undefined,
  unnamed121___U2: undefined,
  v___8728: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_parseTopicArgs__P2289(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.qidx___8756 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.indexOf(s.arg0, "?", undefined);
    s.qidx___8756 = (r0);
    r0 = (s.qidx___8756 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = azureiot_parsePropertyBag__P2285_mk(s);
    s.tmp_2 = helpers_stringSlice__P119_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = (s.qidx___8756 + 1);
    s.tmp_2.arg1 = r0;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 432; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = undefined;
    s.callLocIdx = 433; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtrt.mkMap();
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_parseTopicArgs__P2289.info = {"start":6243,"length":186,"line":196,"column":4,"endLine":201,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"parseTopicArgs","argumentNames":["topic"]}

function azureiot_parseTopicArgs__P2289_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parseTopicArgs__P2289, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  qidx___8756: undefined,
  arg0: undefined,
} }





function mqtt_Client_subscribe__P1284(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    s.tmp_0 = mqtt_Client_subscribeCore__P2272_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = s.arg3;
    s.callLocIdx = 353; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_subscribe__P1284.info = {"start":14815,"length":172,"line":453,"column":8,"endLine":455,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"subscribe","argumentNames":["this","topic","handler","qos"]}

function mqtt_Client_subscribe__P1284_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_subscribe__P1284, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function mqtt_Client_subscribeCore__P2272(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___8812 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1276_VT)) failedCast(r0);
    s.tmp_0 = mqtt_Client_log__P2270_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("subscribe: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 348; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.tmp_0 = mqtt_Client_send__P2273_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = mqtt_Protocol_createSubscribe__P1272_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = s.arg3;
    s.callLocIdx = 349; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 350; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = r0 = s.arg1;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "#");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_5 = helpers_stringSlice__P119_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_5.arg1 = 0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 - 1);
    s.tmp_5.arg2 = r0;
    s.callLocIdx = 351; s.pc = 12; return s.tmp_5;
  case 12:
    r0 = s.retval;
    s.arg1 = (r0);
  case 1:
  case 2:
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["mqttHandlers"] = (s.tmp_4);
  case 3:
  case 4:
    r0 = pxsim_pxtcore_mkClassInstance(mqtt_MQTTHandler__C2267_VT);
    s.tmp_0 = r0;
    s.tmp_1 = mqtt_MQTTHandler_constructor__P2268_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.callLocIdx = 352; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.h___8812 = (s.tmp_0);
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.h___8812);
    r0 = s.h___8812;
    { step = 7; continue; }
    { step = 6; continue; }
  case 5:
    r0 = null;
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_subscribeCore__P2272.info = {"start":14148,"length":627,"line":437,"column":8,"endLine":450,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"subscribeCore","argumentNames":["this","topic","handler","qos"]}

function mqtt_Client_subscribeCore__P2272_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_subscribeCore__P2272, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  h___8812: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function mqtt_MQTTHandler_constructor__P2268(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_MQTTHandler__C2267_VT)) failedCast(r0);
    r0 = (s.arg0).fields["topic"] = (s.arg1);
    r0 = (s.arg0).fields["handler"] = (s.arg2);
    r0 = (s.arg0).fields["status"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_MQTTHandler_constructor__P2268.info = {"start":9491,"length":165,"line":303,"column":8,"endLine":308,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["this","topic","handler"]}

function mqtt_MQTTHandler_constructor__P2268_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_MQTTHandler_constructor__P2268, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Protocol_createSubscribe__P1272(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pid___8837 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_1 = mqtt_Protocol_getBytes__P2263_mk(s);
    s.tmp_1.arg0 = 1;
    s.callLocIdx = 291; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 292; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.pid___8837 = (r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = mqtt_Protocol_createPacket__P2265_mk(s);
    s.tmp_1.arg0 = 130;
    s.tmp_1.arg1 = s.pid___8837;
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_3 = mqtt_Protocol_pack__P2264_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 293; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_4 = mqtt_Protocol_strChr__P2260_mk(s);
    s.tmp_4.arg0 = s.tmp_0;
    s.callLocIdx = 294; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 295; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 296; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createSubscribe__P1272.info = {"start":8199,"length":330,"line":259,"column":8,"endLine":266,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createSubscribe","argumentNames":["topic","qos"]}

function mqtt_Protocol_createSubscribe__P1272_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createSubscribe__P1272, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pid___8837: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_runInBackground__P289(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.runInParallel(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_runInBackground__P289.info = {"start":384,"length":88,"line":10,"column":4,"endLine":12,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"runInBackground","argumentNames":["a"]}

function control_runInBackground__P289_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_runInBackground__P289, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function azureiot_patchTwin__P1307(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___8857 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = JSON_stringify__P385_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = null;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 452; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.p___8857 = (r0);
    r0 = (s.p___8857 == "{}");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = azureiot_log__P2281_mk(s);
    s.tmp_1.arg0 = "skipping empty twin patch";
    s.callLocIdx = 453; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_0 = azureiot_log__P2281_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 0;
    s.callLocIdx = 454; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("twin patch: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 455; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = azureiot_twinReq__P2294_mk(s);
    s.tmp_0.arg0 = "PATCH/properties/reported";
    s.tmp_0.arg1 = s.p___8857;
    s.callLocIdx = 456; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_patchTwin__P1307.info = {"start":9495,"length":287,"line":290,"column":4,"endLine":298,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"patchTwin","argumentNames":["patch"]}

function azureiot_patchTwin__P1307_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_patchTwin__P1307, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  p___8857: undefined,
  arg0: undefined,
} }





function azureiot_twinReq__P2294(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___8874 = undefined;
    s.rid___8883 = undefined;
    s.va___8890 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_mqttClient__P1294_mk(s);
    s.callLocIdx = 442; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.c___8874 = (r0);
    r0 = pxsim_numops_toBoolDecr(globals.twinRespHandlers___2292);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtrt.mkMap();
    globals.twinRespHandlers___2292 = (r0);
    s.tmp_0 = mqtt_Client_subscribe__P1284_mk(s);
    s.tmp_0.arg0 = s.c___8874;
    s.tmp_0.arg1 = "$iothub/twin/res/#";
    s.tmp_0.arg2 = azureiot_twinResponse__P2293;
    s.tmp_0.arg3 = 0;
    s.callLocIdx = 443; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = pxsim.Math_.randomRange(100000000, 900000000);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_2);
    s.rid___8883 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(azureiot_ValueAwaiter__C1302_VT);
    s.tmp_0 = r0;
    s.tmp_1 = azureiot_ValueAwaiter_constructor__P1303_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 444; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.va___8890 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, azureiot_twinReq_inline__P8896);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.va___8890);
    r0 = pxsim_pxtrt.mapSetGeneric(globals.twinRespHandlers___2292, s.rid___8883, s.tmp_0);
    s.tmp_0 = mqtt_Client_publish__P1283_mk(s);
    s.tmp_0.arg0 = s.c___8874;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("$iothub/twin/", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "/?$rid=");
    s.tmp_1 = r0;
    if ((s.rid___8883) && (s.rid___8883).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.rid___8883);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.rid___8883) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_4);
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = 0;
    s.tmp_0.arg4 = false;
    s.callLocIdx = 449; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.tmp_0 = azureiot_ValueAwaiter_wait__P1305_mk(s);
    s.tmp_0.arg0 = s.va___8890;
    s.callLocIdx = 450; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_twinReq__P2294.info = {"start":8714,"length":700,"line":266,"column":4,"endLine":284,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"twinReq","argumentNames":["path","msg"]}

function azureiot_twinReq__P2294_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_twinReq__P2294, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  c___8874: undefined,
  rid___8883: undefined,
  va___8890: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_twinReq_inline__P8896(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 == 204);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg0 == 200);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = azureiot_ValueAwaiter_setValue__P1304_mk(s);
    s.tmp_2.arg0 = s.caps[0];
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 445; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    s.tmp_0 = azureiot_log__P2281_mk(s);
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("twin error -> ", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " ");
    s.tmp_1 = r0;
    s.tmp_6 = JSON_stringify__P385_mk(s);
    s.tmp_6.arg0 = s.arg1;
    s.tmp_6.arg1 = null;
    s.tmp_6.arg2 = 0;
    s.callLocIdx = 446; s.pc = 8; return s.tmp_6;
  case 8:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_4);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 447; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.tmp_0 = azureiot_ValueAwaiter_setValue__P1304_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = null;
    s.callLocIdx = 448; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_twinReq_inline__P8896.info = {"start":9070,"length":253,"line":274,"column":32,"endLine":281,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["status","body"]}

function azureiot_twinReq_inline__P8896_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_twinReq_inline__P8896, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_ValueAwaiter_wait__P1305(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, azureiot_ValueAwaiter__C1302_VT)) failedCast(r0);
    r0 = s.arg0.fields["evid"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["value"];
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["evid"];
    s.tmp_2 = r0;
    setupResume(s, 4);
    pxsim.control.waitForEvent(1023, s.tmp_2);
    checkResumeConsumed();
    return;
  case 4:
    r0 = s.retval;
    r0 = s.arg0.fields["value"];
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_ValueAwaiter_wait__P1305.info = {"start":8539,"length":163,"line":259,"column":8,"endLine":263,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"wait","argumentNames":["this"]}

function azureiot_ValueAwaiter_wait__P1305_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_ValueAwaiter_wait__P1305, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function azureiot_ValueAwaiter_setValue__P1304(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, azureiot_ValueAwaiter__C1302_VT)) failedCast(r0);
    r0 = (s.arg0).fields["value"] = (s.arg1);
    r0 = s.arg0.fields["evid"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0);
    r0 = (s.arg0).fields["evid"] = (-1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_ValueAwaiter_setValue__P1304.info = {"start":8384,"length":146,"line":254,"column":8,"endLine":258,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"setValue","argumentNames":["this","v"]}

function azureiot_ValueAwaiter_setValue__P1304_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_ValueAwaiter_setValue__P1304, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_ValueAwaiter_constructor__P1303(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, azureiot_ValueAwaiter__C1302_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["evid"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_ValueAwaiter_constructor__P1303.info = {"start":8296,"length":79,"line":251,"column":8,"endLine":253,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["this"]}

function azureiot_ValueAwaiter_constructor__P1303_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_ValueAwaiter_constructor__P1303, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_twinResponse__P2293(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.args___8970 = undefined;
    s.h___8975 = undefined;
    s.status___8979 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_parseTopicArgs__P2289_mk(s);
    s.tmp_1 = if_topic_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "topic");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["topic"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["topic"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 434; s.pc = 6; return s.tmp_1; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 435; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.args___8970 = (r0);
    s.tmp_0 = r0 = globals.twinRespHandlers___2292;
    r0 = pxsim_pxtrt.mapGetGeneric(s.args___8970, "$rid");
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_0, s.tmp_1);
    s.h___8975 = (r0);
    s.tmp_0 = parseInt__P97_mk(s);
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_2 = if_topic_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "topic");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["topic"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["topic"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 436; s.pc = 9; return s.tmp_2; }
    }
  case 9:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 17;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 437; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 438; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.status___8979 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.h___8975);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = if_content_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "content");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["content"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["content"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 439; s.pc = 10; return s.tmp_2; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = "{}";
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = lambda_3_mk(s);
    s.tmp_4.argL = s.h___8975;
    s.tmp_4.arg0 = s.status___8979;
    s.tmp_5 = JSON_parse__P386_mk(s);
    s.tmp_5.arg0 = s.tmp_3;
    s.callLocIdx = 440; s.pc = 12; return s.tmp_5;
  case 12:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    setupLambda(s.tmp_4, s.tmp_4.argL);
    s.callLocIdx = 441; s.pc = 11; return s.tmp_4;
  case 11:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_twinResponse__P2293.info = {"start":7831,"length":367,"line":239,"column":4,"endLine":246,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"twinResponse","argumentNames":["msg"]}

function azureiot_twinResponse__P2293_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_twinResponse__P2293, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  args___8970: undefined,
  h___8975: undefined,
  status___8979: undefined,
  arg0: undefined,
} }





function azureiot_computePatch__P1308(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.patch___9000 = undefined;
    s.k___9003 = undefined;
    s.unnamed116___U2 = undefined;
    s.unnamed117___U3 = undefined;
    s.vt___9007 = undefined;
    s.vc___9021 = undefined;
    s.p0___9031 = undefined;
    s.k___9057 = undefined;
    s.unnamed118___U8 = undefined;
    s.unnamed119___U9 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtrt.mkMap();
    s.patch___9000 = (r0);
    s.k___9003 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.unnamed116___U2 = (r0);
    s.unnamed117___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed117___U3;
    r0 = pxsim_Array__length(s.unnamed116___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 15; continue; }
    r0 = pxsim_Array__getAt(s.unnamed116___U2, s.unnamed117___U3);
    s.k___9003 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___9003);
    s.vt___9007 = (r0);
    r0 = pxsim_String_.charAt(s.k___9003, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "$");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    { step = 14; continue; }
  case 2:
  case 3:
    r0 = (s.vt___9007 === undefined);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9000, s.k___9003, null);
    { step = 13; continue; }
  case 4:
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___9003);
    s.vc___9021 = (r0);
    r0 = pxsim_pxtcore.typeOf(s.vt___9007);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "object");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.typeOf(s.vc___9021);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "object");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 7; continue; }
    s.tmp_4 = azureiot_computePatch__P1308_mk(s);
    s.tmp_4.arg0 = s.vc___9021;
    s.tmp_4.arg1 = s.vt___9007;
    s.callLocIdx = 457; s.pc = 22; return s.tmp_4;
  case 22:
    r0 = s.retval;
    s.p0___9031 = (r0);
    r0 = pxsim_pxtrt.keysOf(s.p0___9031);
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9000, s.k___9003, s.p0___9031);
  case 5:
  case 6:
    { step = 8; continue; }
  case 7:
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9000, s.k___9003, s.vt___9007);
  case 8:
    { step = 12; continue; }
  case 9:
    r0 = (s.vc___9021 != s.vt___9007);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9000, s.k___9003, s.vt___9007);
  case 10:
  case 11:
  case 12:
  case 13:
  case 14:
    r0 = (s.unnamed117___U3 + 1);
    s.unnamed117___U3 = (r0);
    { step = 1; continue; }
  case 15:
    s.unnamed116___U2 = (undefined);
    s.k___9057 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.arg1);
    s.unnamed118___U8 = (r0);
    s.unnamed119___U9 = (0);
  case 16:
    s.tmp_0 = r0 = s.unnamed119___U9;
    r0 = pxsim_Array__length(s.unnamed118___U8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 21; continue; }
    r0 = pxsim_Array__getAt(s.unnamed118___U8, s.unnamed119___U9);
    s.k___9057 = (r0);
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___9057);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 === undefined);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 17; continue; }
    r0 = s.tmp_2;
    { step = 18; continue; }
  case 17:
    r0 = pxsim_String_.charAt(s.k___9057, 0);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 != "$");
  case 18:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 19; continue; }
    s.tmp_6 = r0 = s.patch___9000;
    s.tmp_7 = r0 = s.k___9057;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___9057);
    s.tmp_8 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_6, s.tmp_7, s.tmp_8);
  case 19:
  case 20:
    r0 = (s.unnamed119___U9 + 1);
    s.unnamed119___U9 = (r0);
    { step = 16; continue; }
  case 21:
    s.unnamed118___U8 = (undefined);
    r0 = s.patch___9000;
    return leave(s, r0)
  default: oops()
} } }
azureiot_computePatch__P1308.info = {"start":9788,"length":946,"line":300,"column":4,"endLine":327,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"computePatch","argumentNames":["curr","target"]}

function azureiot_computePatch__P1308_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_computePatch__P1308, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  patch___9000: undefined,
  k___9003: undefined,
  unnamed116___U2: undefined,
  unnamed117___U3: undefined,
  vt___9007: undefined,
  vc___9021: undefined,
  p0___9031: undefined,
  k___9057: undefined,
  unnamed118___U8: undefined,
  unnamed119___U9: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_getTwin__P1306(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = azureiot_twinReq__P2294_mk(s);
    s.tmp_0.arg0 = "GET";
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 451; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_getTwin__P1306.info = {"start":9420,"length":69,"line":286,"column":4,"endLine":288,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"getTwin","argumentNames":[]}

function azureiot_getTwin__P1306_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_getTwin__P1306, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function JSON_stringify__P385(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ss___9081 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(JSON_Stringifier__C2196_VT);
    s.ss___9081 = (r0);
    s.tmp_0 = r0 = s.ss___9081;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["currIndent"] = (s.tmp_1);
    r0 = (s.arg2 | 0);
    s.arg2 = (r0);
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.arg2 = (0);
  case 1:
  case 2:
    r0 = (s.arg2 > 10);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.arg2 = (10);
  case 3:
  case 4:
    s.tmp_0 = r0 = s.ss___9081;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["indentStep"] = (s.tmp_1);
    s.tmp_0 = r0 = s.ss___9081;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["currIndent"] = (s.tmp_1);
    r0 = (s.ss___9081).fields["indent"] = (s.arg2);
  case 5:
    s.tmp_0 = r0 = s.arg2;
    r0 = (s.tmp_0 - 1);
    s.arg2 = (r0);
    r0 = (s.tmp_0 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 6; continue; }
    s.tmp_2 = r0 = s.ss___9081;
    r0 = s.tmp_2.fields["indentStep"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, " ");
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["indentStep"] = (s.tmp_3);
    { step = 5; continue; }
  case 6:
    s.tmp_0 = JSON_Stringifier_go__P2198_mk(s);
    s.tmp_0.arg0 = s.ss___9081;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 99; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
JSON_stringify__P385.info = {"start":8773,"length":414,"line":288,"column":4,"endLine":300,"endColumn":5,"fileName":"pxt_modules/base/json.ts","functionName":"stringify","argumentNames":["value","replacer","indent"]}

function JSON_stringify__P385_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_stringify__P385, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  ss___9081: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function JSON_Stringifier_go__P2198(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.t___9122 = undefined;
    s.arr___9146 = undefined;
    s.r___9152 = undefined;
    s.i___9169 = undefined;
    s.keys___9233 = undefined;
    s.r___9240 = undefined;
    s.i___9257 = undefined;
    s.k___9263 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Stringifier__C2196_VT)) failedCast(r0);
    r0 = pxsim_pxtcore.typeOf(s.arg1);
    s.t___9122 = (r0);
    r0 = (s.t___9122 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = JSON_Stringifier_doString__P2197_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 93; s.pc = 38; return s.tmp_1;
  case 38:
    r0 = s.retval;
    { step = 37; continue; }
    { step = 36; continue; }
  case 1:
    r0 = (s.t___9122 == "boolean");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = (s.t___9122 == "number");
  case 3:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_3;
    { step = 5; continue; }
  case 4:
    r0 = (s.arg1 == null);
  case 5:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_String_.mkEmpty();
    s.tmp_5 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 39);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 39:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    { step = 37; continue; }
    { step = 35; continue; }
  case 6:
    r0 = pxsim_Array_.isArray(s.arg1);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 19; continue; }
    s.arr___9146 = (s.arg1);
    r0 = pxsim_Array__length(s.arr___9146);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = "[]";
    { step = 37; continue; }
    { step = 18; continue; }
  case 7:
    s.r___9152 = ("[");
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 40);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 40:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["indentStep"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 41);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 41:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_5);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
    if ((s.r___9152) && (s.r___9152).vtable) {
    setupResume(s, 42);
    pxsim_String__stringConv(s.r___9152);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9152) + ""; }
  case 42:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\n");
    s.r___9152 = (r0);
  case 8:
  case 9:
    s.i___9169 = (0);
  case 10:
    s.tmp_1 = r0 = s.i___9169;
    r0 = pxsim_Array__length(s.arr___9146);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    if ((s.r___9152) && (s.r___9152).vtable) {
    setupResume(s, 43);
    pxsim_String__stringConv(s.r___9152);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9152) + ""; }
  case 43:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 44);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 44:
    r0 = s.retval;
    s.tmp_6 = r0;
    s.tmp_10 = JSON_Stringifier_go__P2198_mk(s);
    s.tmp_10.arg0 = s.arg0;
    r0 = pxsim_Array__getAt(s.arr___9146, s.i___9169);
    s.tmp_10.arg1 = r0;
    s.callLocIdx = 94; s.pc = 45; return s.tmp_10;
  case 45:
    r0 = s.retval;
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 46);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 46:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_8);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 47);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 47:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.r___9152 = (r0);
    s.tmp_1 = r0 = s.i___9169;
    r0 = pxsim_Array__length(s.arr___9146);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    if ((s.r___9152) && (s.r___9152).vtable) {
    setupResume(s, 48);
    pxsim_String__stringConv(s.r___9152);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9152) + ""; }
  case 48:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ",");
    s.r___9152 = (r0);
  case 11:
  case 12:
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    if ((s.r___9152) && (s.r___9152).vtable) {
    setupResume(s, 49);
    pxsim_String__stringConv(s.r___9152);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9152) + ""; }
  case 49:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "\n");
    s.r___9152 = (r0);
  case 13:
  case 14:
    r0 = (s.i___9169 + 1);
    s.i___9169 = (r0);
    { step = 10; continue; }
  case 15:
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["currIndent"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["indent"];
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 95; s.pc = 50; return s.tmp_3;
  case 50:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
  case 16:
  case 17:
    if ((s.r___9152) && (s.r___9152).vtable) {
    setupResume(s, 51);
    pxsim_String__stringConv(s.r___9152);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9152) + ""; }
  case 51:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 52);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 52:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "]");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 53);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 53:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9152 = (r0);
    r0 = s.r___9152;
    { step = 37; continue; }
  case 18:
    { step = 34; continue; }
  case 19:
    r0 = pxsim_pxtrt.keysOf(s.arg1);
    s.keys___9233 = (r0);
    r0 = pxsim_Array__length(s.keys___9233);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
    r0 = "{}";
    { step = 37; continue; }
  case 20:
  case 21:
    s.r___9240 = ("{");
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 54);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 54:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["indentStep"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 55);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 55:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_5);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 56);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 56:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\n");
    s.r___9240 = (r0);
  case 22:
  case 23:
    s.i___9257 = (0);
  case 24:
    s.tmp_1 = r0 = s.i___9257;
    r0 = pxsim_Array__length(s.keys___9233);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 31; continue; }
    r0 = pxsim_Array__getAt(s.keys___9233, s.i___9257);
    s.k___9263 = (r0);
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 57);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 57:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 58);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 58:
    r0 = s.retval;
    s.tmp_3 = r0;
    s.tmp_7 = JSON_Stringifier_doString__P2197_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.tmp_7.arg1 = s.k___9263;
    s.callLocIdx = 96; s.pc = 59; return s.tmp_7;
  case 59:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 60);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 60:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_5);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 61);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 61:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9240 = (r0);
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 62);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 62:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, ": ");
    s.r___9240 = (r0);
    { step = 26; continue; }
  case 25:
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 63);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 63:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, ":");
    s.r___9240 = (r0);
  case 26:
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 64);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 64:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = JSON_Stringifier_go__P2198_mk(s);
    s.tmp_3.arg0 = s.arg0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___9263);
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 97; s.pc = 65; return s.tmp_3;
  case 65:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 66);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 66:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9240 = (r0);
    s.tmp_1 = r0 = s.i___9257;
    r0 = pxsim_Array__length(s.keys___9233);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 67);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 67:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ",");
    s.r___9240 = (r0);
  case 27:
  case 28:
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 68);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 68:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "\n");
    s.r___9240 = (r0);
  case 29:
  case 30:
    r0 = (s.i___9257 + 1);
    s.i___9257 = (r0);
    { step = 24; continue; }
  case 31:
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 32; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["currIndent"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["indent"];
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 98; s.pc = 69; return s.tmp_3;
  case 69:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
  case 32:
  case 33:
    if ((s.r___9240) && (s.r___9240).vtable) {
    setupResume(s, 70);
    pxsim_String__stringConv(s.r___9240);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9240) + ""; }
  case 70:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 71);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 71:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "}");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 72);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 72:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9240 = (r0);
    r0 = s.r___9240;
    { step = 37; continue; }
  case 34:
  case 35:
  case 36:
    r0 = undefined;
  case 37:
    return leave(s, r0)
  default: oops()
} } }
JSON_Stringifier_go__P2198.info = {"start":6319,"length":2076,"line":223,"column":8,"endLine":279,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"go","argumentNames":["this","v"]}

function JSON_Stringifier_go__P2198_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Stringifier_go__P2198, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  t___9122: undefined,
  arr___9146: undefined,
  r___9152: undefined,
  i___9169: undefined,
  keys___9233: undefined,
  r___9240: undefined,
  i___9257: undefined,
  k___9263: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Stringifier_doString__P2197(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___9349 = undefined;
    s.i___9350 = undefined;
    s.c___9356 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Stringifier__C2196_VT)) failedCast(r0);
    s.r___9349 = ("\"");
    s.i___9350 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___9350;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = pxsim_String_.charAt(s.arg1, s.i___9350);
    s.c___9356 = (r0);
    r0 = (s.c___9356 == "\n");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.c___9356 = ("\\n");
    { step = 13; continue; }
  case 2:
    r0 = (s.c___9356 == "\r");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.c___9356 = ("\\r");
    { step = 12; continue; }
  case 3:
    r0 = (s.c___9356 == "\t");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.c___9356 = ("\\t");
    { step = 11; continue; }
  case 4:
    r0 = (s.c___9356 == "\b");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.c___9356 = ("\\b");
    { step = 10; continue; }
  case 5:
    r0 = (s.c___9356 == "\\");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.c___9356 = ("\\\\");
    { step = 9; continue; }
  case 6:
    r0 = (s.c___9356 == "\"");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.c___9356 = ("\\\"");
  case 7:
  case 8:
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
    if ((s.r___9349) && (s.r___9349).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.r___9349);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9349) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.c___9356) && (s.c___9356).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.c___9356);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.c___9356) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9349 = (r0);
    r0 = (s.i___9350 + 1);
    s.i___9350 = (r0);
    { step = 1; continue; }
  case 14:
    if ((s.r___9349) && (s.r___9349).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___9349);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9349) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\"");
    return leave(s, r0)
  default: oops()
} } }
JSON_Stringifier_doString__P2197.info = {"start":5837,"length":472,"line":208,"column":8,"endLine":221,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doString","argumentNames":["this","s"]}

function JSON_Stringifier_doString__P2197_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Stringifier_doString__P2197, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___9349: undefined,
  i___9350: undefined,
  c___9356: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_log__P378(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = 1;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 59; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_log__P378.info = {"start":1450,"length":86,"line":58,"column":4,"endLine":60,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"log","argumentNames":["value"]}

function console_log__P378_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_log__P378, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function pause__P411(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    setupResume(s, 1);
    pxsim.loops.pause(s.arg0);
    checkResumeConsumed();
    return;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
pause__P411.info = {"start":246,"length":57,"line":7,"column":0,"endLine":9,"endColumn":1,"fileName":"pxt_modules/base/pause.ts","functionName":"pause","argumentNames":["ms"]}

function pause__P411_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pause__P411, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_computeTwin__P2643(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.twin___9401 = undefined;
    s.serv___9404 = undefined;
    s.unnamed182___U2 = undefined;
    s.unnamed183___U3 = undefined;
    s.res___9408 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2639_VT)) failedCast(r0);
    r0 = pxsim_pxtrt.mkMap();
    s.twin___9401 = (r0);
    s.serv___9404 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed182___U2 = (r0);
    s.unnamed183___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed183___U3;
    r0 = pxsim_Array__length(s.unnamed182___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed182___U2, s.unnamed183___U3);
    s.serv___9404 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.serv___9404);
    if (!r0) { step = 4; continue; }
    s.tmp_2 = jacdac_twins_ServiceTwin_computeTwin__P2634_mk(s);
    s.tmp_2.arg0 = s.serv___9404;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 1033; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.res___9408 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 2; continue; }
    r0 = s.serv___9404.fields["id"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.twin___9401, s.tmp_0, s.res___9408);
  case 2:
  case 3:
  case 4:
  case 5:
    r0 = (s.unnamed183___U3 + 1);
    s.unnamed183___U3 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed182___U2 = (undefined);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 7; continue; }
    r0 = s.twin___9401;
    { step = 8; continue; }
  case 7:
    r0 = undefined;
  case 8:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_computeTwin__P2643.info = {"start":7562,"length":338,"line":237,"column":8,"endLine":246,"endColumn":9,"fileName":"twins.ts","functionName":"computeTwin","argumentNames":["this","forReal"]}

function jacdac_twins_DeviceTwin_computeTwin__P2643_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_computeTwin__P2643, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  twin___9401: undefined,
  serv___9404: undefined,
  unnamed182___U2: undefined,
  unnamed183___U3: undefined,
  res___9408: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_ServiceTwin_computeTwin__P2634(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.registers___9424 = undefined;
    s.res___9426 = undefined;
    s.d___9439 = undefined;
    s.r___9444 = undefined;
    s.unnamed172___U4 = undefined;
    s.unnamed173___U5 = undefined;
    s.buf___9470 = undefined;
    s.vals___9488 = undefined;
    s.rv___9494 = undefined;
    s.i___9499 = undefined;
    s.f___9501 = undefined;
    s.unnamed174___U11 = undefined;
    s.unnamed175___U12 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2630_VT)) failedCast(r0);
    r0 = pxsim_pxtrt.mkMap();
    s.registers___9424 = (r0);
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "registers", s.registers___9424);
    s.res___9426 = (s.tmp_0);
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["enabled"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["enabled"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.registers___9424, "streaming", s.tmp_3);
  case 3:
  case 4:
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["device"];
    s.d___9439 = (r0);
    s.r___9444 = (undefined);
    s.tmp_0 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_0.arg0 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "registers");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["registers"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["registers"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 992; s.pc = 22; return s.tmp_0; }
    }
  case 22:
    r0 = s.retval;
    s.unnamed172___U4 = (r0);
    s.unnamed173___U5 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed173___U5;
    r0 = pxsim_Array__length(s.unnamed172___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 21; continue; }
    r0 = pxsim_Array__getAt(s.unnamed172___U4, s.unnamed173___U5);
    s.r___9444 = (r0);
    s.tmp_4 = r0 = globals.exclusions___2620;
    s.tmp_10 = if_name_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_10.arg0 = r0;
    if (!s.tmp_10.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_10.arg0, "name");
    } else {
      s.tmp_10.fn = s.tmp_10.arg0.vtable.iface["name"];
      if (s.tmp_10.fn == null) { s.retval = s.tmp_10.arg0.fields["name"]; }
      else if (!s.tmp_10.fn.isGetter) { s.retval = bind(s.tmp_10); }
     else { s.callLocIdx = 993; s.pc = 23; return s.tmp_10; }
    }
  case 23:
    r0 = s.retval;
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, ".");
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 25);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    s.tmp_13 = if_name_1_mk(s);
    s.tmp_13.arg0 = s.r___9444;
    if (!s.tmp_13.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_13.arg0, "name");
    } else {
      s.tmp_13.fn = s.tmp_13.arg0.vtable.iface["name"];
      if (s.tmp_13.fn == null) { s.retval = s.tmp_13.arg0.fields["name"]; }
      else if (!s.tmp_13.fn.isGetter) { s.retval = bind(s.tmp_13); }
     else { s.callLocIdx = 994; s.pc = 26; return s.tmp_13; }
    }
  case 26:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_11);
    s.tmp_5 = r0;
    r0 = pxsim_Array_.indexOf(s.tmp_4, s.tmp_5, undefined);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >= 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 6; continue; }
    { step = 20; continue; }
  case 6:
  case 7:
    s.tmp_16 = if_code_1_mk(s);
    s.tmp_16.arg0 = s.r___9444;
    if (!s.tmp_16.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_16.arg0, "code");
    } else {
      s.tmp_16.fn = s.tmp_16.arg0.vtable.iface["code"];
      if (s.tmp_16.fn == null) { s.retval = s.tmp_16.arg0.fields["code"]; }
      else if (!s.tmp_16.fn.isGetter) { s.retval = bind(s.tmp_16); }
     else { s.callLocIdx = 995; s.pc = 28; return s.tmp_16; }
    }
  case 28:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = (s.tmp_15 == 257);
    s.tmp_14 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_14);
    if (!r0) { step = 8; continue; }
    { step = 20; continue; }
  case 8:
  case 9:
    s.tmp_19 = if_flags_1_mk(s);
    s.tmp_19.arg0 = s.r___9444;
    if (!s.tmp_19.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_19.arg0, "flags");
    } else {
      s.tmp_19.fn = s.tmp_19.arg0.vtable.iface["flags"];
      if (s.tmp_19.fn == null) { s.retval = s.tmp_19.arg0.fields["flags"]; }
      else if (!s.tmp_19.fn.isGetter) { s.retval = bind(s.tmp_19); }
     else { s.callLocIdx = 997; s.pc = 29; return s.tmp_19; }
    }
  case 29:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = (s.tmp_18 & 1);
    s.tmp_17 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_17);
    if (!r0) { step = 10; continue; }
    r0 = null;
    { step = 11; continue; }
  case 10:
    r0 = 500;
  case 11:
    // jmp value (already in r0)
    s.tmp_20 = r0;
    s.tmp_21 = jacdac_Device_query__P1810_mk(s);
    s.tmp_21.arg0 = s.d___9439;
    s.tmp_22 = if_code_1_mk(s);
    s.tmp_22.arg0 = s.r___9444;
    if (!s.tmp_22.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_22.arg0, "code");
    } else {
      s.tmp_22.fn = s.tmp_22.arg0.vtable.iface["code"];
      if (s.tmp_22.fn == null) { s.retval = s.tmp_22.arg0.fields["code"]; }
      else if (!s.tmp_22.fn.isGetter) { s.retval = bind(s.tmp_22); }
     else { s.callLocIdx = 996; s.pc = 31; return s.tmp_22; }
    }
  case 31:
    r0 = s.retval;
    s.tmp_21.arg1 = r0;
    s.tmp_21.arg2 = s.tmp_20;
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_21.arg3 = r0;
    s.callLocIdx = 998; s.pc = 30; return s.tmp_21;
  case 30:
    r0 = s.retval;
    s.buf___9470 = (r0);
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = s.tmp_0;
    { step = 13; continue; }
  case 12:
    r0 = s.buf___9470;
  case 13:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 18; continue; }
    s.tmp_2 = jacdac_jdunpack__P1407_mk(s);
    s.tmp_2.arg0 = s.buf___9470;
    s.tmp_3 = if_packf_1_mk(s);
    s.tmp_3.arg0 = s.r___9444;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "packf");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["packf"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["packf"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 999; s.pc = 33; return s.tmp_3; }
    }
  case 33:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 1000; s.pc = 32; return s.tmp_2;
  case 32:
    r0 = s.retval;
    s.vals___9488 = (r0);
    s.rv___9494 = (undefined);
    s.tmp_1 = if_fields_1_mk(s);
    s.tmp_1.arg0 = s.r___9444;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "fields");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["fields"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["fields"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 1001; s.pc = 34; return s.tmp_1; }
    }
  case 34:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_pxtrt.mkMap();
    s.rv___9494 = (r0);
    s.i___9499 = (0);
    s.f___9501 = (undefined);
    s.tmp_0 = if_fields_1_mk(s);
    s.tmp_0.arg0 = s.r___9444;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "fields");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["fields"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["fields"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 1002; s.pc = 35; return s.tmp_0; }
    }
  case 35:
    r0 = s.retval;
    s.unnamed174___U11 = (r0);
    s.unnamed175___U12 = (0);
  case 14:
    s.tmp_0 = r0 = s.unnamed175___U12;
    r0 = pxsim_Array__length(s.unnamed174___U11);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 15; continue; }
    r0 = pxsim_Array__getAt(s.unnamed174___U11, s.unnamed175___U12);
    s.f___9501 = (r0);
    s.tmp_2 = r0 = s.i___9499;
    r0 = (s.tmp_2 + 1);
    s.i___9499 = (r0);
    s.tmp_3 = r0 = s.rv___9494;
    s.tmp_4 = r0 = s.f___9501;
    r0 = pxsim_Array__getAt(s.vals___9488, s.tmp_2);
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_3, s.tmp_4, s.tmp_5);
    r0 = (s.unnamed175___U12 + 1);
    s.unnamed175___U12 = (r0);
    { step = 14; continue; }
  case 15:
    s.unnamed174___U11 = (undefined);
    { step = 17; continue; }
  case 16:
    r0 = pxsim_Array__getAt(s.vals___9488, 0);
    s.rv___9494 = (r0);
  case 17:
    s.tmp_0 = r0 = s.registers___9424;
    s.tmp_2 = if_name_1_mk(s);
    s.tmp_2.arg0 = s.r___9444;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "name");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["name"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["name"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 1003; s.pc = 36; return s.tmp_2; }
    }
  case 36:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_0, s.tmp_1, s.rv___9494);
  case 18:
  case 19:
  case 20:
    r0 = (s.unnamed173___U5 + 1);
    s.unnamed173___U5 = (r0);
    { step = 5; continue; }
  case 21:
    s.unnamed172___U4 = (undefined);
    r0 = s.res___9426;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_computeTwin__P2634.info = {"start":3062,"length":1259,"line":99,"column":8,"endLine":135,"endColumn":9,"fileName":"twins.ts","functionName":"computeTwin","argumentNames":["this","forReal"]}

function jacdac_twins_ServiceTwin_computeTwin__P2634_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_computeTwin__P2634, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  registers___9424: undefined,
  res___9426: undefined,
  d___9439: undefined,
  r___9444: undefined,
  unnamed172___U4: undefined,
  unnamed173___U5: undefined,
  buf___9470: undefined,
  vals___9488: undefined,
  rv___9494: undefined,
  i___9499: undefined,
  f___9501: undefined,
  unnamed174___U11: undefined,
  unnamed175___U12: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_query__P1810(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.q___9523 = undefined;
    s.now___9538 = undefined;
    s.pkt___9570 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Device_lookupQuery__P2473_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg3;
    s.callLocIdx = 850; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.q___9523 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.q___9523);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_RegQuery__C2470_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_RegQuery_constructor__P2471_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.arg1;
    s.tmp_3.arg2 = s.arg3;
    s.callLocIdx = 851; s.pc = 14; return s.tmp_3;
  case 14:
    r0 = s.retval;
    s.q___9523 = (s.tmp_2);
    r0 = s.arg0.fields["queries"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_4, s.tmp_2);
  case 1:
  case 2:
    r0 = pxsim.control.millis();
    s.now___9538 = (r0);
    r0 = s.q___9523.fields["lastQuery"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 3:
    r0 = s.q___9523.fields["value"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 === undefined);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_3;
    { step = 5; continue; }
  case 4:
    r0 = s.q___9523.fields["lastQuery"];
    s.tmp_6 = r0;
    r0 = (s.now___9538 - s.tmp_6);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 > 500);
  case 5:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 6:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBool(s.tmp_8);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_8;
    { step = 10; continue; }
  case 7:
    r0 = (s.arg2 != null);
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBool(s.tmp_9);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_9;
    { step = 9; continue; }
  case 8:
    r0 = s.q___9523.fields["lastQuery"];
    s.tmp_11 = r0;
    r0 = (s.now___9538 - s.tmp_11);
    s.tmp_10 = r0;
    r0 = (s.tmp_10 > s.arg2);
  case 9:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = s.tmp_12;
  case 10:
    // jmp value (already in r0)
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 11; continue; }
    r0 = (s.q___9523).fields["lastQuery"] = (s.now___9538);
    s.tmp_0 = jacdac_JDPacket_onlyHeader__P1363_mk(s);
    r0 = (4096 | s.arg1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 852; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.pkt___9570 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.pkt___9570;
    s.tmp_0.arg1 = s.arg3;
    s.callLocIdx = 853; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_0.arg0 = s.pkt___9570;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 854; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 11:
  case 12:
    r0 = s.q___9523.fields["value"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_query__P1810.info = {"start":34302,"length":656,"line":1048,"column":8,"endLine":1064,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"query","argumentNames":["this","reg","refreshRate","servIdx"]}

function jacdac_Device_query__P1810_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_query__P1810, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  q___9523: undefined,
  now___9538: undefined,
  pkt___9570: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_RegQuery_constructor__P2471(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegQuery__C2470_VT)) failedCast(r0);
    r0 = (s.arg0).fields["reg"] = (s.arg1);
    r0 = (s.arg0).fields["serviceIdx"] = (s.arg2);
    r0 = (s.arg0).fields["lastQuery"] = (0);
    r0 = (s.arg0).fields["lastReport"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegQuery_constructor__P2471.info = {"start":31989,"length":61,"line":967,"column":8,"endLine":967,"endColumn":69,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","reg","serviceIdx"]}

function jacdac_RegQuery_constructor__P2471_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegQuery_constructor__P2471, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_twins_DeviceTwin_tick__P2641(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.serv___9586 = undefined;
    s.unnamed178___U1 = undefined;
    s.unnamed179___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2639_VT)) failedCast(r0);
    s.serv___9586 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed178___U1 = (r0);
    s.unnamed179___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed179___U2;
    r0 = pxsim_Array__length(s.unnamed178___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed178___U1, s.unnamed179___U2);
    s.serv___9586 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.serv___9586);
    if (!r0) { step = 2; continue; }
    s.tmp_2 = jacdac_twins_ServiceTwin_tick__P2632_mk(s);
    s.tmp_2.arg0 = s.serv___9586;
    s.callLocIdx = 1031; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
  case 2:
  case 3:
    r0 = (s.unnamed179___U2 + 1);
    s.unnamed179___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed178___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_tick__P2641.info = {"start":7039,"length":118,"line":218,"column":8,"endLine":222,"endColumn":9,"fileName":"twins.ts","functionName":"tick","argumentNames":["this"]}

function jacdac_twins_DeviceTwin_tick__P2641_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_tick__P2641, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  serv___9586: undefined,
  unnamed178___U1: undefined,
  unnamed179___U2: undefined,
  arg0: undefined,
} }





function jacdac_twins_ServiceTwin_tick__P2632(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.payload___9595 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2630_VT)) failedCast(r0);
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, 254);
    s.tmp_2 = jacdac_JDPacket_jdpacked__P1364_mk(s);
    s.tmp_2.arg0 = 8195;
    s.tmp_2.arg1 = "u8";
    s.tmp_2.arg2 = s.tmp_1;
    s.callLocIdx = 977; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.payload___9595 = (r0);
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1399_mk(s);
    s.tmp_0.arg0 = s.payload___9595;
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 978; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_tick__P2632.info = {"start":1852,"length":300,"line":67,"column":8,"endLine":76,"endColumn":9,"fileName":"twins.ts","functionName":"tick","argumentNames":["this"]}

function jacdac_twins_ServiceTwin_tick__P2632_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_tick__P2632, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  payload___9595: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_constructor__P2644(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___9651 = undefined;
    s.servIdx___9654 = undefined;
    s.cl___9660 = undefined;
    s.spec___9665 = undefined;
    s.newServ___9671 = undefined;
    s.i___9686 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2639_VT)) failedCast(r0);
    r0 = (s.arg0).fields["device"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["services"] = (s.tmp_1);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_DeviceTwin_inline__P9613);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.arg0);
    s.tmp_3 = jacdac_EventSource_on__P1831_mk(s);
    r0 = s.arg0.fields["device"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = globals.DEVICE_DISCONNECT___1718;
    s.tmp_3.arg2 = s.tmp_2;
    s.callLocIdx = 1019; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    s.tmp_6 = jacdac_Device_shortId__P1804_mk(s);
    r0 = s.arg0.fields["device"];
    s.tmp_6.arg0 = r0;
    s.callLocIdx = 1020; s.pc = 11; return s.tmp_6;
  case 11:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "_");
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_7);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["id"] = (s.tmp_1);
    r0 = pxsim_Array__push(globals.twins___2619, s.arg0);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_DeviceTwin_inline__P9639);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = jacdac_EventSource_on__P1831_mk(s);
    r0 = s.arg0.fields["device"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = globals.PACKET_RECEIVE___1726;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1023; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    r0 = s.arg0.fields["device"];
    s.d___9651 = (r0);
    s.servIdx___9654 = (0);
  case 1:
    s.tmp_1 = r0 = s.servIdx___9654;
    r0 = s.d___9651.fields["services"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >> 2);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_5 = jacdac_Device_serviceClassAt__P1808_mk(s);
    s.tmp_5.arg0 = s.d___9651;
    s.tmp_5.arg1 = s.servIdx___9654;
    s.callLocIdx = 1025; s.pc = 16; return s.tmp_5;
  case 16:
    r0 = s.retval;
    s.cl___9660 = (r0);
    s.tmp_0 = jacdac_twins_getServiceTwinSpec__P2638_mk(s);
    s.tmp_0.arg0 = s.cl___9660;
    s.callLocIdx = 1026; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
    s.spec___9665 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.spec___9665);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    { step = 8; continue; }
  case 2:
  case 3:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_twins_ServiceTwin__C2630_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_twins_ServiceTwin_constructor__P2636_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.arg0;
    s.tmp_3.arg2 = s.servIdx___9654;
    s.tmp_3.arg3 = s.spec___9665;
    s.callLocIdx = 1027; s.pc = 18; return s.tmp_3;
  case 18:
    r0 = s.retval;
    s.newServ___9671 = (s.tmp_2);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_DeviceTwin_inline__P9679);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.newServ___9671);
    s.tmp_2 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["services"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1028; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_pxtrt.mklocRef();
    s.i___9686 = (r0);
    r0 = pxsim_pxtrt_stlocRef(s.i___9686, 2);
  case 4:
    r0 = pxsim_pxtcore_mkAction(2, jacdac_twins_DeviceTwin_inline__P9691);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.newServ___9671);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.i___9686);
    s.tmp_2 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["services"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1029; s.pc = 20; return s.tmp_2;
  case 20:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
    s.tmp_3 = r0 = s.i___9686;
    r0 = pxsim_pxtrt_ldlocRef(s.i___9686);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 + 1);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_3, s.tmp_4);
    { step = 4; continue; }
  case 5:
    s.tmp_0 = r0 = s.newServ___9671;
    r0 = s.tmp_0.fields["id"];
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_ldlocRef(s.i___9686);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat("_", s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["id"] = (s.tmp_1);
  case 6:
  case 7:
    r0 = s.arg0.fields["services"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.servIdx___9654, s.newServ___9671);
  case 8:
    r0 = (s.servIdx___9654 + 1);
    s.servIdx___9654 = (r0);
    { step = 1; continue; }
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_constructor__P2644.info = {"start":5712,"length":1161,"line":182,"column":8,"endLine":211,"endColumn":9,"fileName":"twins.ts","functionName":"inline","argumentNames":["this","device"]}

function jacdac_twins_DeviceTwin_constructor__P2644_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_constructor__P2644, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  d___9651: undefined,
  servIdx___9654: undefined,
  cl___9660: undefined,
  spec___9665: undefined,
  newServ___9671: undefined,
  i___9686: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_DeviceTwin_inline__P9613(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_Array_.removeElement(globals.twins___2619, s.caps[0]);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P9613.info = {"start":5809,"length":63,"line":183,"column":53,"endLine":185,"endColumn":13,"fileName":"twins.ts","functionName":"inline","argumentNames":[]}

function jacdac_twins_DeviceTwin_inline__P9613_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P9613, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_twins_DeviceTwin_inline__P9639(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.srv___9641 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.caps[0].fields["services"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 13);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 63);
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, s.tmp_1);
    s.srv___9641 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.srv___9641);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = jacdac_twins_ServiceTwin_process__P2635_mk(s);
    s.tmp_0.arg0 = s.srv___9641;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 1022; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P9639.info = {"start":6024,"length":136,"line":188,"column":50,"endLine":191,"endColumn":13,"fileName":"twins.ts","functionName":"inline","argumentNames":["pkt"]}

function jacdac_twins_DeviceTwin_inline__P9639_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P9639, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  srv___9641: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_inline__P9679(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["id"];
    s.tmp_0 = r0;
    r0 = s.caps[0].fields["id"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 == s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P9679.info = {"start":6526,"length":23,"line":200,"column":39,"endLine":200,"endColumn":62,"fileName":"twins.ts","functionName":"inline","argumentNames":["s"]}

function jacdac_twins_DeviceTwin_inline__P9679_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P9679, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_inline__P9691(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["id"];
    s.tmp_0 = r0;
    r0 = s.caps[0].fields["id"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 1);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 1:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "_");
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_ldlocRef(s.caps[1]);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 == s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P9691.info = {"start":6655,"length":33,"line":203,"column":43,"endLine":203,"endColumn":76,"fileName":"twins.ts","functionName":"inline","argumentNames":["s"]}

function jacdac_twins_DeviceTwin_inline__P9691_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P9691, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function jacdac_twins_ServiceTwin_constructor__P2636(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2630_VT)) failedCast(r0);
    r0 = (s.arg0).fields["parent"] = (s.arg1);
    r0 = (s.arg0).fields["serviceIdx"] = (s.arg2);
    r0 = (s.arg0).fields["spec"] = (s.arg3);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["readings"] = (s.tmp_1);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["timestamps"] = (s.tmp_3);
    s.tmp_4 = r0 = s.arg0;
    s.tmp_6 = if_name_1_mk(s);
    s.tmp_6.arg0 = s.arg3;
    if (!s.tmp_6.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_6.arg0, "name");
    } else {
      s.tmp_6.fn = s.tmp_6.arg0.vtable.iface["name"];
      if (s.tmp_6.fn == null) { s.retval = s.tmp_6.arg0.fields["name"]; }
      else if (!s.tmp_6.fn.isGetter) { s.retval = bind(s.tmp_6); }
     else { s.callLocIdx = 972; s.pc = 3; return s.tmp_6; }
    }
  case 3:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["id"] = (s.tmp_5);
    s.tmp_1 = helpers_arraySome__P107_mk(s);
    s.tmp_2 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_2.arg0 = r0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "registers");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["registers"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["registers"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 973; s.pc = 5; return s.tmp_2; }
    }
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = jacdac_twins_ServiceTwin_inline__P9738;
    s.callLocIdx = 975; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_4.arg0 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "registers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["registers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["registers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 976; s.pc = 6; return s.tmp_4; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, globals.streamingIntervalSpec___2626);
    r0 = (s.arg0).fields["enabled"] = (false);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_constructor__P2636.info = {"start":1030,"length":378,"line":42,"column":8,"endLine":52,"endColumn":9,"fileName":"twins.ts","functionName":"inline","argumentNames":["this","parent","serviceIdx","spec"]}

function jacdac_twins_ServiceTwin_constructor__P2636_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_constructor__P2636, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_twins_ServiceTwin_inline__P9738(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = if_code_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "code");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["code"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["code"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 974; s.pc = 1; return s.tmp_1; }
    }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 257);
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_inline__P9738.info = {"start":1247,"length":32,"line":48,"column":41,"endLine":48,"endColumn":73,"fileName":"twins.ts","functionName":"inline","argumentNames":["r"]}

function jacdac_twins_ServiceTwin_inline__P9738_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_inline__P9738, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_twins_getServiceTwinSpec__P2638(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.key___9753 = undefined;
    s.cached___9759 = undefined;
    s.json___9766 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat("st-", s.tmp_0);
    s.key___9753 = (r0);
    s.tmp_0 = settings_readString__P1086_mk(s);
    s.tmp_0.arg0 = s.key___9753;
    s.callLocIdx = 1012; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.cached___9759 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.cached___9759);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = JSON_parse__P386_mk(s);
    s.tmp_0.arg0 = s.cached___9759;
    s.callLocIdx = 1013; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    { step = 5; continue; }
  case 1:
  case 2:
    s.tmp_1 = net_getJSON__P1207_mk(s);
    s.tmp_5 = jacdac_twins_toHexNum__P2637_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 1014; s.pc = 10; return s.tmp_5;
  case 10:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("https://microsoft.github.io/jacdac-docs/services/twin/x", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ".json");
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = undefined;
    s.callLocIdx = 1015; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.json___9766 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.json___9766);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = console_log__P378_mk(s);
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("failed to get serv: ", s.tmp_3);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 1016; s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.json___9766 = (null);
  case 3:
  case 4:
    s.tmp_0 = settings_writeString__P1082_mk(s);
    s.tmp_0.arg0 = s.key___9753;
    s.tmp_1 = JSON_stringify__P385_mk(s);
    s.tmp_1.arg0 = s.json___9766;
    s.tmp_1.arg1 = null;
    s.tmp_1.arg2 = 0;
    s.callLocIdx = 1017; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1018; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    r0 = s.json___9766;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_getServiceTwinSpec__P2638.info = {"start":5047,"length":576,"line":161,"column":4,"endLine":177,"endColumn":5,"fileName":"twins.ts","functionName":"getServiceTwinSpec","argumentNames":["serviceClass"]}

function jacdac_twins_getServiceTwinSpec__P2638_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_getServiceTwinSpec__P2638, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  key___9753: undefined,
  cached___9759: undefined,
  json___9766: undefined,
  arg0: undefined,
} }





function settings_writeString__P1082(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = settings_writeBuffer__P1081_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBufferFromUTF8(s.arg1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 121; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeString__P1082.info = {"start":1895,"length":125,"line":75,"column":4,"endLine":77,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"writeString","argumentNames":["key","value"]}

function settings_writeString__P1082_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeString__P1082, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_writeBuffer__P1081(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._set(s.arg0, s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.settings._userClean();
    r0 = pxsim_pxtrt.panic(920);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeBuffer__P1081.info = {"start":1538,"length":290,"line":63,"column":4,"endLine":70,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"writeBuffer","argumentNames":["key","value"]}

function settings_writeBuffer__P1081_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeBuffer__P1081, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_toHexNum__P2637(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___9811 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = "0";
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim.control.createBuffer(4);
    s.buf___9811 = (r0);
    r0 = pxsim.BufferMethods.setNumber(s.buf___9811, 12, 0, s.arg0);
    r0 = pxsim.BufferMethods.toHex(s.buf___9811);
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_toHexNum__P2637.info = {"start":4852,"length":189,"line":154,"column":4,"endLine":159,"endColumn":5,"fileName":"twins.ts","functionName":"toHexNum","argumentNames":["n"]}

function jacdac_twins_toHexNum__P2637_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_toHexNum__P2637, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  buf___9811: undefined,
  arg0: undefined,
} }





function net_getJSON__P1207(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___9840 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.arg1 = (s.tmp_1);
    s.tmp_1 = if_headers_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "headers");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["headers"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["headers"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 233; s.pc = 9; return s.tmp_1; }
    }
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtrt.mkMap();
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = if_headers_2_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = s.tmp_2;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_3.arg0, "headers", s.tmp_3.arg1);
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["set/headers"];
      if (s.tmp_3.fn === null) { s.tmp_3.arg0.fields["headers"] = s.tmp_3.arg1; }
      else if (s.tmp_3.fn === undefined) { failedCast(s.tmp_3.arg0) } 
     else { s.callLocIdx = 234; s.pc = 10; return s.tmp_3; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_2 = if_headers_1_mk(s);
    s.tmp_2.arg0 = s.arg1;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "headers");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["headers"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["headers"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 236; s.pc = 11; return s.tmp_2; }
    }
  case 11:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "accept");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = "application/json";
  case 6:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_5 = if_headers_1_mk(s);
    s.tmp_5.arg0 = s.arg1;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "headers");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["headers"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["headers"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 235; s.pc = 12; return s.tmp_5; }
    }
  case 12:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_4, "accept", s.tmp_3);
    s.tmp_0 = net_get__P1205_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 237; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.res___9840 = (r0);
    r0 = s.res___9840.fields["status_code"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 200);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = net_Response_json__P1194_mk(s);
    s.tmp_2.arg0 = s.res___9840;
    s.callLocIdx = 238; s.pc = 14; return s.tmp_2;
  case 14:
    r0 = s.retval;
    { step = 8; continue; }
  case 7:
    r0 = undefined;
  case 8:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
net_getJSON__P1207.info = {"start":7949,"length":343,"line":274,"column":4,"endLine":280,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"getJSON","argumentNames":["url","options"]}

function net_getJSON__P1207_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_getJSON__P1207, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  res___9840: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Response_json__P1194(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1184_VT)) failedCast(r0);
    s.tmp_0 = JSON_parse__P386_mk(s);
    s.tmp_1 = net_Response_text__P1193_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 177; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 178; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Response_json__P1194.info = {"start":2050,"length":63,"line":73,"column":8,"endLine":75,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"json","argumentNames":["this"]}
net_Response_json__P1194.isGetter = true;

function net_Response_json__P1194_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_json__P1194, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_Response_text__P1193(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.b___9855 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1184_VT)) failedCast(r0);
    s.tmp_0 = net_Response_content__P1192_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 176; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.b___9855 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.b___9855);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.BufferMethods.toString(s.b___9855);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Response_text__P1193.info = {"start":1933,"length":107,"line":68,"column":8,"endLine":71,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"text","argumentNames":["this"]}
net_Response_text__P1193.isGetter = true;

function net_Response_text__P1193_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_text__P1193, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  b___9855: undefined,
  arg0: undefined,
} }





function net_Response_content__P1192(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.content_length___9871 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1184_VT)) failedCast(r0);
    r0 = s.arg0.fields["_cached"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["socket"];
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    s.tmp_4 = parseInt__P97_mk(s);
    r0 = s.arg0.fields["headers"];
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_5, "content-length");
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = undefined;
    s.callLocIdx = 173; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_3;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    s.content_length___9871 = (s.tmp_6);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_read_2_mk(s);
    r0 = s.arg0.fields["socket"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.content_length___9871;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "read"), 2);
      s.callLocIdx = 174; s.pc = 8; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["read"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["read"], 2); s.callLocIdx = 174; s.pc = 8; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 174; s.pc = 8; return s.tmp_2;; }
     else { s.callLocIdx = 174; s.pc = 8; return s.tmp_2; }
    }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_cached"] = (s.tmp_1);
    s.tmp_0 = if_close_1_mk(s);
    r0 = s.arg0.fields["socket"];
    s.tmp_0.arg0 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "close"), 1);
      s.callLocIdx = 175; s.pc = 9; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["close"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["close"], 1); s.callLocIdx = 175; s.pc = 9; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 175; s.pc = 9; return s.tmp_0;; }
     else { s.callLocIdx = 175; s.pc = 9; return s.tmp_0; }
    }
  case 9:
    r0 = s.retval;
    r0 = (s.arg0).fields["socket"] = (null);
  case 5:
  case 6:
    r0 = s.arg0.fields["_cached"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Response_content__P1192.info = {"start":1348,"length":462,"line":52,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"content","argumentNames":["this"]}
net_Response_content__P1192.isGetter = true;

function net_Response_content__P1192_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_content__P1192, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  content_length___9871: undefined,
  arg0: undefined,
} }





function net_get__P1205(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = net_request__P1203_mk(s);
    s.tmp_0.arg0 = "GET";
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 232; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_get__P1205.info = {"start":7417,"length":110,"line":257,"column":4,"endLine":259,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"get","argumentNames":["url","options"]}

function net_get__P1205_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_get__P1205, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_request__P1203(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___9914 = undefined;
    s.e___9928 = undefined;
    s.r___9929 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = net_log__P1149_mk(s);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_3 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " ");
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_5);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 184; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.tmp_3 = net_Net_controller__P1171_mk(s);
    r0 = globals.net_Net_instance___1170;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 186; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(net_Response__C1184_VT);
    s.tmp_4 = r0;
    s.tmp_5 = net_Response_constructor__P1190_mk(s);
    s.tmp_5.arg0 = s.tmp_4;
    s.tmp_5.arg1 = null;
    s.callLocIdx = 187; s.pc = 10; return s.tmp_5;
  case 10:
    r0 = s.retval;
    s.r___9914 = (s.tmp_4);
    r0 = (s.r___9914).fields["status_code"] = (418);
    r0 = (s.r___9914).fields["reason"] = ("net controller not configured");
    r0 = s.r___9914;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore.beginTry(3);
    r0 = pxsim_pxtcore.endTry();
    s.tmp_0 = net_internalRequest__P2259_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.callLocIdx = 188; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    { step = 5; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___9928 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(net_Response__C1184_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_Response_constructor__P1190_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = null;
    s.callLocIdx = 189; s.pc = 12; return s.tmp_1;
  case 12:
    r0 = s.retval;
    s.r___9929 = (s.tmp_0);
    r0 = (s.r___9929).fields["status_code"] = (418);
    s.tmp_0 = r0 = s.r___9929;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    if ((s.e___9928) && (s.e___9928).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.e___9928);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.e___9928) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["reason"] = (s.tmp_1);
    r0 = s.r___9929;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
net_request__P1203.info = {"start":3455,"length":633,"line":119,"column":4,"endLine":138,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"request","argumentNames":["method","url","options"]}

function net_request__P1203_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_request__P1203, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___9914: undefined,
  e___9928: undefined,
  r___9929: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_internalRequest__P2259(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp___9954 = undefined;
    s.proto___9958 = undefined;
    s.host___9960 = undefined;
    s.path___9962 = undefined;
    s.port___9966 = undefined;
    s.tmp___9985 = undefined;
    s.sock___9997 = undefined;
    s.resp___10010 = undefined;
    s.k___10052 = undefined;
    s.unnamed112___U9 = undefined;
    s.unnamed113___U10 = undefined;
    s.dataBuf___10088 = undefined;
    s.line___10108 = undefined;
    s.line2___10111 = undefined;
    s.status___10114 = undefined;
    s.reason___10118 = undefined;
    s.tmp___10133 = undefined;
    s.title___10137 = undefined;
    s.content___10139 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtrt.mkMap();
    s.arg2 = (r0);
  case 1:
  case 2:
    s.tmp_3 = if_headers_1_mk(s);
    s.tmp_3.arg0 = s.arg2;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "headers");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["headers"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["headers"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 190; s.pc = 43; return s.tmp_3; }
    }
  case 43:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_4 = if_headers_2_mk(s);
    s.tmp_4.arg0 = s.arg2;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_4.arg1 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_4.arg0, "headers", s.tmp_4.arg1);
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["set/headers"];
      if (s.tmp_4.fn === null) { s.tmp_4.arg0.fields["headers"] = s.tmp_4.arg1; }
      else if (s.tmp_4.fn === undefined) { failedCast(s.tmp_4.arg0) } 
     else { s.callLocIdx = 191; s.pc = 44; return s.tmp_4; }
    }
  case 44:
    r0 = s.retval;
  case 3:
  case 4:
    s.tmp_0 = net_pysplit__P2258_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = "/";
    s.tmp_0.arg2 = 3;
    s.callLocIdx = 192; s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
    s.tmp___9954 = (r0);
    r0 = pxsim_Array__getAt(s.tmp___9954, 0);
    s.proto___9958 = (r0);
    r0 = pxsim_Array__getAt(s.tmp___9954, 2);
    s.host___9960 = (r0);
    r0 = pxsim_Array__getAt(s.tmp___9954, 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_String_.mkEmpty();
  case 6:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.path___9962 = (s.tmp_1);
    s.port___9966 = (0);
    r0 = (s.proto___9958 == "http:");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.port___9966 = (80);
    { step = 10; continue; }
  case 7:
    r0 = (s.proto___9958 == "https:");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    s.port___9966 = (443);
    { step = 9; continue; }
  case 8:
    s.tmp_0 = control_fail__P331_mk(s);
    if ((s.proto___9958) && (s.proto___9958).vtable) {
    setupResume(s, 47);
    pxsim_String__stringConv(s.proto___9958);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.proto___9958) + ""; }
  case 47:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("Unsupported protocol: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 193; s.pc = 46; return s.tmp_0;
  case 46:
    r0 = s.retval;
  case 9:
  case 10:
    r0 = pxsim_String_.indexOf(s.host___9960, ":", undefined);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_2 = helpers_stringSplit__P122_mk(s);
    s.tmp_2.arg0 = s.host___9960;
    s.tmp_2.arg1 = ":";
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 194; s.pc = 48; return s.tmp_2;
  case 48:
    r0 = s.retval;
    s.tmp___9985 = (r0);
    r0 = pxsim_Array__getAt(s.tmp___9985, 0);
    s.host___9960 = (r0);
    s.tmp_0 = parseInt__P97_mk(s);
    r0 = pxsim_Array__getAt(s.tmp___9985, 1);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 195; s.pc = 49; return s.tmp_0;
  case 49:
    r0 = s.retval;
    s.port___9966 = (r0);
  case 11:
  case 12:
    r0 = (s.proto___9958 == "https:");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tmp_1 = net_Net_createSocket__P1173_mk(s);
    r0 = globals.net_Net_instance___1170;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.host___9960;
    s.tmp_1.arg2 = s.port___9966;
    s.tmp_1.arg3 = true;
    s.callLocIdx = 197; s.pc = 50; return s.tmp_1;
  case 50:
    r0 = s.retval;
    s.sock___9997 = (r0);
    { step = 14; continue; }
  case 13:
    s.tmp_0 = net_Net_createSocket__P1173_mk(s);
    r0 = globals.net_Net_instance___1170;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.host___9960;
    s.tmp_0.arg2 = s.port___9966;
    s.tmp_0.arg3 = false;
    s.callLocIdx = 199; s.pc = 51; return s.tmp_0;
  case 51:
    r0 = s.retval;
    s.sock___9997 = (r0);
  case 14:
    r0 = pxsim_pxtcore_mkClassInstance(net_Response__C1184_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_Response_constructor__P1190_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.sock___9997;
    s.callLocIdx = 200; s.pc = 52; return s.tmp_1;
  case 52:
    r0 = s.retval;
    s.resp___10010 = (s.tmp_0);
    s.tmp_0 = if_setTimeout_2_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    s.tmp_1 = if_timeout_1_mk(s);
    s.tmp_1.arg0 = s.arg2;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "timeout");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["timeout"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["timeout"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 201; s.pc = 54; return s.tmp_1; }
    }
  case 54:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "setTimeout"), 2);
      s.callLocIdx = 202; s.pc = 53; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["setTimeout"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["setTimeout"], 2); s.callLocIdx = 202; s.pc = 53; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 202; s.pc = 53; return s.tmp_0;; }
     else { s.callLocIdx = 202; s.pc = 53; return s.tmp_0; }
    }
  case 53:
    r0 = s.retval;
    s.tmp_0 = if_connect_1_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "connect"), 1);
      s.callLocIdx = 203; s.pc = 55; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["connect"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["connect"], 1); s.callLocIdx = 203; s.pc = 55; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 203; s.pc = 55; return s.tmp_0;; }
     else { s.callLocIdx = 203; s.pc = 55; return s.tmp_0; }
    }
  case 55:
    r0 = s.retval;
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 57);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 57:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " /");
    s.tmp_2 = r0;
    if ((s.path___9962) && (s.path___9962).vtable) {
    setupResume(s, 58);
    pxsim_String__stringConv(s.path___9962);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.path___9962) + ""; }
  case 58:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_6);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " HTTP/1.0\r\n");
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 204; s.pc = 56; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 204; s.pc = 56; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 204; s.pc = 56; return s.tmp_0;; }
     else { s.callLocIdx = 204; s.pc = 56; return s.tmp_0; }
    }
  case 56:
    r0 = s.retval;
    s.tmp_4 = if_headers_1_mk(s);
    s.tmp_4.arg0 = s.arg2;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "headers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["headers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["headers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 205; s.pc = 59; return s.tmp_4; }
    }
  case 59:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_3, "Host");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    s.tmp_5 = if_send_2_mk(s);
    s.tmp_5.arg0 = s.sock___9997;
    if ((s.host___9960) && (s.host___9960).vtable) {
    setupResume(s, 61);
    pxsim_String__stringConv(s.host___9960);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.host___9960) + ""; }
  case 61:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat("Host: ", s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, "\r\n");
    s.tmp_5.arg1 = r0;
    if (!s.tmp_5.arg0.vtable.iface) {
      setupLambda(s.tmp_5, pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "send"), 2);
      s.callLocIdx = 206; s.pc = 60; return s.tmp_5;
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["send"];
      if (s.tmp_5.fn == null) { setupLambda(s.tmp_5, s.tmp_5.arg0.fields["send"], 2); s.callLocIdx = 206; s.pc = 60; return s.tmp_5; }
      else if (s.tmp_5.fn.isGetter) { s.tmp_5.stage2Call = true; s.callLocIdx = 206; s.pc = 60; return s.tmp_5;; }
     else { s.callLocIdx = 206; s.pc = 60; return s.tmp_5; }
    }
  case 60:
    r0 = s.retval;
  case 15:
  case 16:
    s.tmp_4 = if_headers_1_mk(s);
    s.tmp_4.arg0 = s.arg2;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "headers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["headers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["headers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 207; s.pc = 62; return s.tmp_4; }
    }
  case 62:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_3, "User-Agent");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    s.tmp_5 = if_send_2_mk(s);
    s.tmp_5.arg0 = s.sock___9997;
    s.tmp_5.arg1 = "User-Agent: MakeCode ESP32\r\n";
    if (!s.tmp_5.arg0.vtable.iface) {
      setupLambda(s.tmp_5, pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "send"), 2);
      s.callLocIdx = 208; s.pc = 63; return s.tmp_5;
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["send"];
      if (s.tmp_5.fn == null) { setupLambda(s.tmp_5, s.tmp_5.arg0.fields["send"], 2); s.callLocIdx = 208; s.pc = 63; return s.tmp_5; }
      else if (s.tmp_5.fn.isGetter) { s.tmp_5.stage2Call = true; s.callLocIdx = 208; s.pc = 63; return s.tmp_5;; }
     else { s.callLocIdx = 208; s.pc = 63; return s.tmp_5; }
    }
  case 63:
    r0 = s.retval;
  case 17:
  case 18:
    s.k___10052 = (undefined);
    s.tmp_1 = if_headers_1_mk(s);
    s.tmp_1.arg0 = s.arg2;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "headers");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["headers"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["headers"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 209; s.pc = 64; return s.tmp_1; }
    }
  case 64:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.keysOf(s.tmp_0);
    s.unnamed112___U9 = (r0);
    s.unnamed113___U10 = (0);
  case 19:
    s.tmp_0 = r0 = s.unnamed113___U10;
    r0 = pxsim_Array__length(s.unnamed112___U9);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 20; continue; }
    r0 = pxsim_Array__getAt(s.unnamed112___U9, s.unnamed113___U10);
    s.k___10052 = (r0);
    s.tmp_2 = if_send_2_mk(s);
    s.tmp_2.arg0 = s.sock___9997;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_6 = r0;
    if ((s.k___10052) && (s.k___10052).vtable) {
    setupResume(s, 66);
    pxsim_String__stringConv(s.k___10052);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.k___10052) + ""; }
  case 66:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, ": ");
    s.tmp_4 = r0;
    s.tmp_11 = if_headers_1_mk(s);
    s.tmp_11.arg0 = s.arg2;
    if (!s.tmp_11.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_11.arg0, "headers");
    } else {
      s.tmp_11.fn = s.tmp_11.arg0.vtable.iface["headers"];
      if (s.tmp_11.fn == null) { s.retval = s.tmp_11.arg0.fields["headers"]; }
      else if (!s.tmp_11.fn.isGetter) { s.retval = bind(s.tmp_11); }
     else { s.callLocIdx = 210; s.pc = 67; return s.tmp_11; }
    }
  case 67:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_10, s.k___10052);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 68);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 68:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_8);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "\r\n");
    s.tmp_2.arg1 = r0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "send"), 2);
      s.callLocIdx = 211; s.pc = 65; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["send"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["send"], 2); s.callLocIdx = 211; s.pc = 65; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 211; s.pc = 65; return s.tmp_2;; }
     else { s.callLocIdx = 211; s.pc = 65; return s.tmp_2; }
    }
  case 65:
    r0 = s.retval;
    r0 = (s.unnamed113___U10 + 1);
    s.unnamed113___U10 = (r0);
    { step = 19; continue; }
  case 20:
    s.unnamed112___U9 = (undefined);
    s.tmp_2 = if_json_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "json");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["json"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["json"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 212; s.pc = 69; return s.tmp_2; }
    }
  case 69:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    s.tmp_3 = control_assert__P330_mk(s);
    s.tmp_5 = if_data_1_mk(s);
    s.tmp_5.arg0 = s.arg2;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "data");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["data"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["data"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 213; s.pc = 71; return s.tmp_5; }
    }
  case 71:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == null);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 100;
    s.callLocIdx = 214; s.pc = 70; return s.tmp_3;
  case 70:
    r0 = s.retval;
    s.tmp_0 = if_data_2_mk(s);
    s.tmp_0.arg0 = s.arg2;
    s.tmp_1 = JSON_stringify__P385_mk(s);
    s.tmp_2 = if_json_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "json");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["json"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["json"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 215; s.pc = 74; return s.tmp_2; }
    }
  case 74:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = null;
    s.tmp_1.arg2 = 0;
    s.callLocIdx = 216; s.pc = 73; return s.tmp_1;
  case 73:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_0.arg0, "data", s.tmp_0.arg1);
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["set/data"];
      if (s.tmp_0.fn === null) { s.tmp_0.arg0.fields["data"] = s.tmp_0.arg1; }
      else if (s.tmp_0.fn === undefined) { failedCast(s.tmp_0.arg0) } 
     else { s.callLocIdx = 217; s.pc = 72; return s.tmp_0; }
    }
  case 72:
    r0 = s.retval;
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    s.tmp_0.arg1 = "Content-Type: application/json\r\n";
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 218; s.pc = 75; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 218; s.pc = 75; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 218; s.pc = 75; return s.tmp_0;; }
     else { s.callLocIdx = 218; s.pc = 75; return s.tmp_0; }
    }
  case 75:
    r0 = s.retval;
  case 21:
  case 22:
    s.tmp_0 = net_dataAsBuffer__P1202_mk(s);
    s.tmp_1 = if_data_1_mk(s);
    s.tmp_1.arg0 = s.arg2;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "data");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["data"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["data"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 219; s.pc = 77; return s.tmp_1; }
    }
  case 77:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 220; s.pc = 76; return s.tmp_0;
  case 76:
    r0 = s.retval;
    s.dataBuf___10088 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.dataBuf___10088);
    if (!r0) { step = 23; continue; }
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    r0 = pxsim.BufferMethods.length(s.dataBuf___10088);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 79);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 79:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("Content-Length: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "\r\n");
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 221; s.pc = 78; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 221; s.pc = 78; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 221; s.pc = 78; return s.tmp_0;; }
     else { s.callLocIdx = 221; s.pc = 78; return s.tmp_0; }
    }
  case 78:
    r0 = s.retval;
  case 23:
  case 24:
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    s.tmp_0.arg1 = "\r\n";
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 222; s.pc = 80; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 222; s.pc = 80; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 222; s.pc = 80; return s.tmp_0;; }
     else { s.callLocIdx = 222; s.pc = 80; return s.tmp_0; }
    }
  case 80:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.dataBuf___10088);
    if (!r0) { step = 25; continue; }
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    s.tmp_0.arg1 = s.dataBuf___10088;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 223; s.pc = 81; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 223; s.pc = 81; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 223; s.pc = 81; return s.tmp_0;; }
     else { s.callLocIdx = 223; s.pc = 81; return s.tmp_0; }
    }
  case 81:
    r0 = s.retval;
  case 25:
  case 26:
    s.tmp_0 = if_readLine_1_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "readLine"), 1);
      s.callLocIdx = 224; s.pc = 82; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["readLine"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["readLine"], 1); s.callLocIdx = 224; s.pc = 82; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 224; s.pc = 82; return s.tmp_0;; }
     else { s.callLocIdx = 224; s.pc = 82; return s.tmp_0; }
    }
  case 82:
    r0 = s.retval;
    s.line___10108 = (r0);
    s.tmp_0 = net_pysplit__P2258_mk(s);
    s.tmp_0.arg0 = s.line___10108;
    s.tmp_0.arg1 = " ";
    s.tmp_0.arg2 = 2;
    s.callLocIdx = 225; s.pc = 83; return s.tmp_0;
  case 83:
    r0 = s.retval;
    s.line2___10111 = (r0);
    s.tmp_0 = parseInt__P97_mk(s);
    r0 = pxsim_Array__getAt(s.line2___10111, 1);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 226; s.pc = 84; return s.tmp_0;
  case 84:
    r0 = s.retval;
    s.status___10114 = (r0);
    r0 = pxsim_String_.mkEmpty();
    s.reason___10118 = (r0);
    r0 = pxsim_Array__length(s.line2___10111);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    r0 = pxsim_Array__getAt(s.line2___10111, 2);
    s.reason___10118 = (r0);
  case 27:
  case 28:
  case 29:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 38; continue; }
    s.tmp_0 = if_readLine_1_mk(s);
    s.tmp_0.arg0 = s.sock___9997;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "readLine"), 1);
      s.callLocIdx = 227; s.pc = 85; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["readLine"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["readLine"], 1); s.callLocIdx = 227; s.pc = 85; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 227; s.pc = 85; return s.tmp_0;; }
     else { s.callLocIdx = 227; s.pc = 85; return s.tmp_0; }
    }
  case 85:
    r0 = s.retval;
    s.line___10108 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.line___10108);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 30; continue; }
    r0 = s.tmp_0;
    { step = 31; continue; }
  case 30:
    r0 = (s.line___10108 == "\r\n");
  case 31:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 32; continue; }
    { step = 38; continue; }
  case 32:
  case 33:
    s.tmp_3 = net_pysplit__P2258_mk(s);
    s.tmp_3.arg0 = s.line___10108;
    s.tmp_3.arg1 = ": ";
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 228; s.pc = 86; return s.tmp_3;
  case 86:
    r0 = s.retval;
    s.tmp___10133 = (r0);
    r0 = pxsim_Array__getAt(s.tmp___10133, 0);
    s.title___10137 = (r0);
    r0 = pxsim_Array__getAt(s.tmp___10133, 1);
    s.content___10139 = (r0);
    s.tmp_0 = r0 = s.title___10137;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 34; continue; }
    r0 = s.tmp_0;
    { step = 35; continue; }
  case 34:
    r0 = s.content___10139;
  case 35:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
    r0 = s.resp___10010.fields["headers"];
    s.tmp_2 = r0;
    s.tmp_4 = helpers_stringToLowerCase__P121_mk(s);
    s.tmp_4.arg0 = s.title___10137;
    s.callLocIdx = 229; s.pc = 87; return s.tmp_4;
  case 87:
    r0 = s.retval;
    s.tmp_3 = r0;
    s.tmp_6 = helpers_stringToLowerCase__P121_mk(s);
    s.tmp_6.arg0 = s.content___10139;
    s.callLocIdx = 230; s.pc = 88; return s.tmp_6;
  case 88:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_2, s.tmp_3, s.tmp_5);
  case 36:
  case 37:
    { step = 29; continue; }
  case 38:
    r0 = s.resp___10010.fields["headers"];
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "transfer-encoding");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 39; continue; }
    r0 = s.tmp_0;
    { step = 40; continue; }
  case 39:
    r0 = pxsim_String_.mkEmpty();
  case 40:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_2, "chunked", undefined);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 >= 0);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 41; continue; }
    s.tmp_5 = control_fail__P331_mk(s);
    s.tmp_5.arg0 = "not supported chunked encoding";
    s.callLocIdx = 231; s.pc = 89; return s.tmp_5;
  case 89:
    r0 = s.retval;
  case 41:
  case 42:
    r0 = (s.resp___10010).fields["status_code"] = (s.status___10114);
    r0 = (s.resp___10010).fields["reason"] = (s.reason___10118);
    r0 = s.resp___10010;
    return leave(s, r0)
  default: oops()
} } }
net_internalRequest__P2259.info = {"start":4094,"length":3102,"line":140,"column":4,"endLine":245,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"internalRequest","argumentNames":["method","url","options"]}

function net_internalRequest__P2259_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_internalRequest__P2259, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp___9954: undefined,
  proto___9958: undefined,
  host___9960: undefined,
  path___9962: undefined,
  port___9966: undefined,
  tmp___9985: undefined,
  sock___9997: undefined,
  resp___10010: undefined,
  k___10052: undefined,
  unnamed112___U9: undefined,
  unnamed113___U10: undefined,
  dataBuf___10088: undefined,
  line___10108: undefined,
  line2___10111: undefined,
  status___10114: undefined,
  reason___10118: undefined,
  tmp___10133: undefined,
  title___10137: undefined,
  content___10139: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_dataAsBuffer__P1202(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = null;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == "string");
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    { step = 5; continue; }
  case 3:
  case 4:
    r0 = s.arg0;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
net_dataAsBuffer__P1202.info = {"start":2530,"length":228,"line":90,"column":4,"endLine":96,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"dataAsBuffer","argumentNames":["data"]}

function net_dataAsBuffer__P1202_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_dataAsBuffer__P1202, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function control_assert__P330(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = control_fail__P331_mk(s);
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("Assertion failed, code=", s.tmp_3);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 39; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_assert__P330.info = {"start":2193,"length":141,"line":71,"column":4,"endLine":75,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"assert","argumentNames":["cond","code"]}

function control_assert__P330_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_assert__P330, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_fail__P331(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = "Fatal failure: ";
    s.callLocIdx = 40; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 41; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = pxsim.control.dmesg(s.arg0);
    r0 = pxsim_pxtrt.panic(108);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_fail__P331.info = {"start":2340,"length":155,"line":77,"column":4,"endLine":82,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"fail","argumentNames":["message"]}

function control_fail__P331_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_fail__P331, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function net_pysplit__P2258(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.arr___10202 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = helpers_stringSplit__P122_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 179; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.arr___10202 = (r0);
    r0 = pxsim_Array__length(s.arr___10202);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    s.tmp_4 = helpers_arrayJoin__P103_mk(s);
    s.tmp_5 = helpers_arraySlice__P115_mk(s);
    s.tmp_5.arg0 = s.arr___10202;
    s.tmp_5.arg1 = s.arg2;
    s.tmp_5.arg2 = undefined;
    s.callLocIdx = 181; s.pc = 6; return s.tmp_5;
  case 6:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.arg1;
    s.callLocIdx = 182; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_3);
    s.tmp_6 = helpers_arrayConcat__P113_mk(s);
    s.tmp_7 = helpers_arraySlice__P115_mk(s);
    s.tmp_7.arg0 = s.arr___10202;
    s.tmp_7.arg1 = 0;
    s.tmp_7.arg2 = s.arg2;
    s.callLocIdx = 180; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 183; s.pc = 7; return s.tmp_6;
  case 7:
    r0 = s.retval;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
    r0 = s.arr___10202;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
net_pysplit__P2258.info = {"start":2836,"length":261,"line":102,"column":4,"endLine":109,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"pysplit","argumentNames":["str","sep","limit"]}

function net_pysplit__P2258_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_pysplit__P2258, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arr___10202: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arrayConcat__P113(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.out___10226 = undefined;
    s.value___10229 = undefined;
    s.unnamed98___U2 = undefined;
    s.unnamed99___U3 = undefined;
    s.value___10236 = undefined;
    s.unnamed100___U5 = undefined;
    s.unnamed101___U6 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.out___10226 = (r0);
    s.value___10229 = (undefined);
    s.unnamed98___U2 = (s.arg0);
    s.unnamed99___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed99___U3;
    r0 = pxsim_Array__length(s.unnamed98___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed98___U2, s.unnamed99___U3);
    s.value___10229 = (r0);
    r0 = pxsim_Array__push(s.out___10226, s.value___10229);
    r0 = (s.unnamed99___U3 + 1);
    s.unnamed99___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed98___U2 = (undefined);
    s.value___10236 = (undefined);
    s.unnamed100___U5 = (s.arg1);
    s.unnamed101___U6 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed101___U6;
    r0 = pxsim_Array__length(s.unnamed100___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed100___U5, s.unnamed101___U6);
    s.value___10236 = (r0);
    r0 = pxsim_Array__push(s.out___10226, s.value___10236);
    r0 = (s.unnamed101___U6 + 1);
    s.unnamed101___U6 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed100___U5 = (undefined);
    r0 = s.out___10226;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayConcat__P113.info = {"start":8639,"length":264,"line":288,"column":4,"endLine":297,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayConcat","argumentNames":["arr","otherArr"]}

function helpers_arrayConcat__P113_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayConcat__P113, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  out___10226: undefined,
  value___10229: undefined,
  unnamed98___U2: undefined,
  unnamed99___U3: undefined,
  value___10236: undefined,
  unnamed100___U5: undefined,
  unnamed101___U6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Response_constructor__P1190(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1184_VT)) failedCast(r0);
    r0 = (s.arg0).fields["socket"] = (s.arg1);
    r0 = (s.arg0).fields["_cached"] = (null);
    r0 = (s.arg0).fields["status_code"] = (null);
    r0 = (s.arg0).fields["reason"] = (null);
    r0 = (s.arg0).fields["_read_so_far"] = (0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["headers"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Response_constructor__P1190.info = {"start":776,"length":210,"line":30,"column":8,"endLine":36,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"inline","argumentNames":["this","socket"]}

function net_Response_constructor__P1190_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_constructor__P1190, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_log__P1149(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1148;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("net:", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 162; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_log__P1149.info = {"start":238,"length":88,"line":11,"column":4,"endLine":13,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"log","argumentNames":["msg"]}

function net_log__P1149_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_log__P1149, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device_serviceClassLength__P1807(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 2);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_serviceClassLength__P1807.info = {"start":33741,"length":81,"line":1029,"column":8,"endLine":1031,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceClassLength","argumentNames":["this"]}
jacdac_Device_serviceClassLength__P1807.isGetter = true;

function jacdac_Device_serviceClassLength__P1807_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_serviceClassLength__P1807, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_twins_ServiceTwin_process__P2635(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.rspec___10282 = undefined;
    s.v___10294 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2630_VT)) failedCast(r0);
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1382_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 1004; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    s.tmp_4 = jacdac_JDPacket_regCode__P1383_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 1005; s.pc = 8; return s.tmp_4;
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 257);
  case 4:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 5; continue; }
    s.tmp_6 = helpers_arrayFind__P111_mk(s);
    s.tmp_7 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_7.arg0 = r0;
    if (!s.tmp_7.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_7.arg0, "registers");
    } else {
      s.tmp_7.fn = s.tmp_7.arg0.vtable.iface["registers"];
      if (s.tmp_7.fn == null) { s.retval = s.tmp_7.arg0.fields["registers"]; }
      else if (!s.tmp_7.fn.isGetter) { s.retval = bind(s.tmp_7); }
     else { s.callLocIdx = 1006; s.pc = 10; return s.tmp_7; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = rspec_inline__P10284;
    s.callLocIdx = 1008; s.pc = 9; return s.tmp_6;
  case 9:
    r0 = s.retval;
    s.rspec___10282 = (r0);
    s.tmp_1 = jacdac_jdunpack__P1407_mk(s);
    r0 = s.arg1.fields["_data"];
    s.tmp_1.arg0 = r0;
    s.tmp_2 = if_packf_1_mk(s);
    s.tmp_2.arg0 = s.rspec___10282;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "packf");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["packf"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["packf"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 1010; s.pc = 12; return s.tmp_2; }
    }
  case 12:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 1011; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.v___10294 = (r0);
    r0 = s.arg0.fields["readings"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.v___10294);
    r0 = s.arg0.fields["timestamps"];
    s.tmp_0 = r0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = (globals.pendingReadings___2623 + 1);
    globals.pendingReadings___2623 = (r0);
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_process__P2635.info = {"start":4331,"length":509,"line":137,"column":8,"endLine":151,"endColumn":9,"fileName":"twins.ts","functionName":"process","argumentNames":["this","pkt"]}

function jacdac_twins_ServiceTwin_process__P2635_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_process__P2635, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  rspec___10282: undefined,
  v___10294: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function rspec_inline__P10284(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = if_code_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "code");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["code"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["code"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 1007; s.pc = 1; return s.tmp_1; }
    }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 257);
    return leave(s, r0)
  default: oops()
} } }
rspec_inline__P10284.info = {"start":4578,"length":32,"line":144,"column":20,"endLine":144,"endColumn":52,"fileName":"twins.ts","functionName":"inline","argumentNames":["r"]}

function rspec_inline__P10284_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: rspec_inline__P10284, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_EventSource_on__P1831(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1829_VT)) failedCast(r0);
    s.tmp_0 = jacdac_EventSource_addListenerInternal__P2361_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = false;
    s.callLocIdx = 950; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = s.arg0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_on__P1831.info = {"start":619,"length":144,"line":22,"column":8,"endLine":25,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"on","argumentNames":["this","eventName","handler"]}

function jacdac_EventSource_on__P1831_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_on__P1831, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_EventSource_addListenerInternal__P2361(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.previous___10330 = undefined;
    s.listener___10347 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1829_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_pxtcore_mkAction(2, previous_inline__P10332);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_4, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_4, 1, s.arg2);
    s.tmp_5 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["listeners"];
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = s.tmp_4;
    s.callLocIdx = 951; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
    s.previous___10330 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.previous___10330);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_EventListener__C1826_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_EventListener_constructor__P1827_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = s.arg3;
    s.callLocIdx = 952; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.listener___10347 = (s.tmp_0);
    r0 = s.arg0.fields["listeners"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.listener___10347);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_addListenerInternal__P2361.info = {"start":1055,"length":596,"line":36,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"addListenerInternal","argumentNames":["this","eventName","handler","once"]}

function jacdac_EventSource_addListenerInternal__P2361_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_addListenerInternal__P2361, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  previous___10330: undefined,
  listener___10347: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function previous_inline__P10332(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["key"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["handler"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
previous_inline__P10332.info = {"start":1367,"length":49,"line":47,"column":16,"endLine":47,"endColumn":65,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["l"]}

function previous_inline__P10332_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: previous_inline__P10332, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_EventListener_constructor__P1827(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventListener__C1826_VT)) failedCast(r0);
    r0 = (s.arg0).fields["key"] = (s.arg1);
    r0 = (s.arg0).fields["handler"] = (s.arg2);
    r0 = (s.arg0).fields["once"] = (s.arg3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventListener_constructor__P1827.info = {"start":178,"length":204,"line":5,"column":8,"endLine":10,"endColumn":12,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["this","key","handler","once"]}

function jacdac_EventListener_constructor__P1827_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventListener_constructor__P1827, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function helpers_arraySome__P107(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___10361 = undefined;
    s.i___10364 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___10361 = (r0);
    s.i___10364 = (0);
  case 1:
    r0 = (s.i___10364 < s.len___10361);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_2 = lambda_3_mk(s);
    s.tmp_2.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___10364);
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.i___10364;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.callLocIdx = 5; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = true;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___10364 + 1);
    s.i___10364 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = false;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySome__P107.info = {"start":6833,"length":296,"line":238,"column":4,"endLine":244,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySome","argumentNames":["arr","callbackfn"]}

function helpers_arraySome__P107_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySome__P107, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  len___10361: undefined,
  i___10364: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function setInterval__P422(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Math_max__P130_mk(s);
    s.tmp_0.arg0 = 10;
    r0 = (s.arg1 | 0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 108; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.arg1 = (r0);
    s.tmp_0 = control_setInterval__P352_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 109; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
setInterval__P422.info = {"start":125,"length":178,"line":6,"column":0,"endLine":9,"endColumn":1,"fileName":"pxt_modules/base/scheduling.ts","functionName":"setInterval","argumentNames":["func","delay"]}

function setInterval__P422_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: setInterval__P422, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_connect__P1297(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___10386 = undefined;
    s.start___10392 = undefined;
    s.tmp_0 = azureiot_mqttClient__P1294_mk(s);
    s.callLocIdx = 425; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.c___10386 = (r0);
    r0 = s.c___10386.fields["connected"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = pxsim.control.millis();
    s.start___10392 = (r0);
  case 1:
    r0 = s.c___10386.fields["connected"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim.control.millis();
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.start___10392);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 < 30000);
  case 3:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 4; continue; }
    s.tmp_6 = pause__P411_mk(s);
    s.tmp_6.arg0 = 1000;
    s.callLocIdx = 426; s.pc = 10; return s.tmp_6;
  case 10:
    r0 = s.retval;
    { step = 1; continue; }
  case 4:
    r0 = s.c___10386.fields["connected"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.throwValue("connection failed");
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_connect__P1297.info = {"start":4288,"length":407,"line":130,"column":4,"endLine":142,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"connect","argumentNames":[]}

function azureiot_connect__P1297_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_connect__P1297, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  c___10386: undefined,
  start___10392: undefined,
} }





function net_instance__P1175(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = globals.net_Net_instance___1170;
    return leave(s, r0)
  default: oops()
} } }
net_instance__P1175.info = {"start":2869,"length":72,"line":99,"column":4,"endLine":101,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"instance","argumentNames":[]}

function net_instance__P1175_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_instance__P1175, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function net_Net_controller__P1171(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Net__C1168_VT)) failedCast(r0);
    r0 = s.arg0.fields["_controller"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = net_log__P1149_mk(s);
    s.tmp_2.arg0 = "init controller";
    s.callLocIdx = 163; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_factory_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "factory"), 1);
      s.callLocIdx = 164; s.pc = 6; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["factory"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["factory"], 1); s.callLocIdx = 164; s.pc = 6; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 164; s.pc = 6; return s.tmp_2;; }
     else { s.callLocIdx = 164; s.pc = 6; return s.tmp_2; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_controller"] = (s.tmp_1);
    r0 = s.arg0.fields["_controller"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = net_log__P1149_mk(s);
    s.tmp_3.arg0 = "controller not found";
    s.callLocIdx = 165; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    r0 = (s.arg0).fields["_controller"] = (null);
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = s.arg0.fields["_controller"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Net_controller__P1171.info = {"start":1536,"length":395,"line":55,"column":8,"endLine":65,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"controller","argumentNames":["this"]}
net_Net_controller__P1171.isGetter = true;

function net_Net_controller__P1171_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Net_controller__P1171, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function net_Controller_connect__P1114(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_connect__P1114.info = {"start":939,"length":19,"line":35,"column":8,"endLine":35,"endColumn":27,"fileName":"pxt_modules/net/controller.ts","functionName":"connect","argumentNames":["this"]}

function net_Controller_connect__P1114_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_connect__P1114, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_WifiController_constructor__P1918(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = undefined;
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_inline__P10442);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim._wifi.eventID();
    s.tmp_1 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, 1, s.tmp_0, 16);
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_inline__P10450);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim._wifi.eventID();
    s.tmp_1 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, 3, s.tmp_0, 16);
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_inline__P10460);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim._wifi.eventID();
    s.tmp_1 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, 2, s.tmp_0, 16);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_constructor__P1918.info = {"start":261,"length":417,"line":9,"column":8,"endLine":18,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":["this"]}

function net_WifiController_constructor__P1918_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_constructor__P1918, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_WifiController_inline__P10442(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_WifiController_scanDone__P2513_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 957; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_inline__P10442.info = {"start":370,"length":21,"line":11,"column":73,"endLine":11,"endColumn":94,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_inline__P10442_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_inline__P10442, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_WifiController_inline__P10450(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (s.caps[0]).fields["_isConnected"] = (false);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_inline__P10450.info = {"start":470,"length":63,"line":12,"column":77,"endLine":14,"endColumn":13,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_inline__P10450_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_inline__P10450, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function net_WifiController_inline__P10460(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (s.caps[0]).fields["_isConnected"] = (true);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_inline__P10460.info = {"start":605,"length":62,"line":15,"column":70,"endLine":17,"endColumn":13,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_inline__P10460_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_inline__P10460, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function net_WifiController_scanDone__P2513(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___10464 = undefined;
    s.i___10476 = undefined;
    s.rssi___10482 = undefined;
    s.authmode___10489 = undefined;
    s.ep___10495 = undefined;
    s.ap___10512 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = pxsim._wifi.scanResults();
    s.buf___10464 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["networks"] = (s.tmp_1);
    r0 = (s.arg0).fields["inScan"] = (false);
    r0 = pxsim_numops_toBoolDecr(s.buf___10464);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 11; continue; }
  case 1:
  case 2:
    s.i___10476 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___10476;
    r0 = pxsim.BufferMethods.length(s.buf___10464);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.tmp_3 = r0 = s.i___10476;
    r0 = (s.tmp_3 + 1);
    s.i___10476 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.buf___10464, 1, s.tmp_3);
    s.rssi___10482 = (r0);
    s.tmp_0 = r0 = s.i___10476;
    r0 = (s.tmp_0 + 1);
    s.i___10476 = (r0);
    r0 = pxsim.BufferMethods.getByte(s.buf___10464, s.tmp_0);
    s.authmode___10489 = (r0);
    s.ep___10495 = (s.i___10476);
  case 4:
    s.tmp_1 = r0 = s.ep___10495;
    r0 = pxsim.BufferMethods.length(s.buf___10464);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = pxsim.BufferMethods.getByte(s.buf___10464, s.ep___10495);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    r0 = (s.ep___10495 + 1);
    s.ep___10495 = (r0);
    { step = 4; continue; }
  case 7:
    s.tmp_1 = r0 = s.ep___10495;
    r0 = pxsim.BufferMethods.length(s.buf___10464);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    { step = 10; continue; }
  case 8:
  case 9:
    r0 = pxsim_pxtcore_mkClassInstance(net_AccessPoint__C1153_VT);
    s.tmp_3 = r0;
    s.tmp_4 = net_AccessPoint_constructor__P1156_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    s.tmp_6 = r0 = s.buf___10464;
    s.tmp_7 = r0 = s.i___10476;
    r0 = (s.ep___10495 - s.i___10476);
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_6, s.tmp_7, s.tmp_8);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_5);
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 958; s.pc = 12; return s.tmp_4;
  case 12:
    r0 = s.retval;
    s.ap___10512 = (s.tmp_3);
    r0 = (s.ap___10512).fields["rssi"] = (s.rssi___10482);
    r0 = (s.ap___10512).fields["encryption"] = (s.authmode___10489);
    r0 = (s.ep___10495 + 1);
    s.i___10476 = (r0);
    r0 = s.arg0.fields["networks"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.ap___10512);
    { step = 3; continue; }
  case 10:
    r0 = pxsim._wifi.eventID();
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 1000);
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_scanDone__P2513.info = {"start":688,"length":891,"line":20,"column":8,"endLine":46,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"scanDone","argumentNames":["this"]}

function net_WifiController_scanDone__P2513_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_scanDone__P2513, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  buf___10464: undefined,
  i___10476: undefined,
  rssi___10482: undefined,
  authmode___10489: undefined,
  ep___10495: undefined,
  ap___10512: undefined,
  arg0: undefined,
} }





function net_AccessPoint_constructor__P1156(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_AccessPoint__C1153_VT)) failedCast(r0);
    r0 = (s.arg0).fields["ssid"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_AccessPoint_constructor__P1156.info = {"start":774,"length":36,"line":30,"column":8,"endLine":30,"endColumn":44,"fileName":"pxt_modules/net/net.ts","functionName":"inline","argumentNames":["this","ssid"]}

function net_AccessPoint_constructor__P1156_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_AccessPoint_constructor__P1156, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_constructor__P1103(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_constructor__P1103.info = {"start":54,"length":17,"line":2,"column":8,"endLine":2,"endColumn":25,"fileName":"pxt_modules/net/controller.ts","functionName":"inline","argumentNames":["this"]}

function net_Controller_constructor__P1103_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_constructor__P1103, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_Net_constructor__P1169(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Net__C1168_VT)) failedCast(r0);
    r0 = (s.arg0).fields["factory"] = (s.arg1);
    globals.net_Net_instance___1170 = (s.arg0);
    r0 = (s.arg0).fields["_controller"] = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Net_constructor__P1169.info = {"start":1333,"length":162,"line":48,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"inline","argumentNames":["this","factory"]}

function net_Net_constructor__P1169_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Net_constructor__P1169, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_start__P1824(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = globals.bus___1748.fields["controlServer"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 9; continue; }
  case 1:
  case 2:
    s.tmp_5 = jacdac_Bus_start__P1737_mk(s);
    s.tmp_5.arg0 = globals.bus___1748;
    s.callLocIdx = 927; s.pc = 10; return s.tmp_5;
  case 10:
    r0 = s.retval;
    s.tmp_0 = jacdac_log__P2461_mk(s);
    s.tmp_0.arg0 = "jacdac starting";
    s.callLocIdx = 928; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtrt.mkMap();
  case 4:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.arg0 = (s.tmp_1);
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_0, 1, jacdac_start_inline__P10566, 16);
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_0, 100, jacdac_start_inline__P10589, 16);
    s.tmp_0 = jacdac_enablePower__P2491_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 936; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.tmp_0 = jacdac_enablePowerFaultPin__P2492_mk(s);
    s.callLocIdx = 937; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.tmp_0 = jacdac_enableIdentityLED__P2493_mk(s);
    s.callLocIdx = 938; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.tmp_3 = if_disableLogger_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableLogger");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableLogger"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableLogger"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 939; s.pc = 15; return s.tmp_3; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_4 = console_addListener__P381_mk(s);
    s.tmp_4.arg0 = jacdac_start_inline__P10600;
    s.callLocIdx = 941; s.pc = 16; return s.tmp_4;
  case 16:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server_start__P1760_mk(s);
    s.tmp_0.arg0 = globals.loggerServer___1581;
    s.callLocIdx = 942; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 5:
  case 6:
    s.tmp_3 = if_disableRoleManager_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableRoleManager");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableRoleManager"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableRoleManager"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 943; s.pc = 18; return s.tmp_3; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_4 = jacdac_Server_start__P1760_mk(s);
    s.tmp_4.arg0 = globals.roleManagerServer___1664;
    s.callLocIdx = 944; s.pc = 19; return s.tmp_4;
  case 19:
    r0 = s.retval;
  case 7:
  case 8:
    s.tmp_0 = jacdac_log__P2461_mk(s);
    s.tmp_0.arg0 = "jacdac started";
    s.callLocIdx = 945; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start__P1824.info = {"start":44767,"length":1338,"line":1338,"column":4,"endLine":1377,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["options"]}

function jacdac_start__P1824_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start__P1824, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_start_inline__P10566(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___10567 = undefined;
    s.pkt___10574 = undefined;
  case 1:
    s.tmp_1 = jacdac___physGetPacket__P1315_mk(s);
    s.callLocIdx = 930; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.buf___10567 = (r0);
    r0 = (null != s.tmp_0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_3 = jacdac_JDPacket_fromBinary__P1361_mk(s);
    s.tmp_3.arg0 = s.buf___10567;
    s.callLocIdx = 931; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.pkt___10574 = (r0);
    s.tmp_0 = r0 = s.pkt___10574;
    s.tmp_2 = jacdac___physGetTimestamp__P1316_mk(s);
    s.callLocIdx = 932; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["timestamp"] = (s.tmp_1);
    s.tmp_0 = jacdac_Bus_processPacket__P1747_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = s.pkt___10574;
    s.callLocIdx = 933; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start_inline__P10566.info = {"start":45222,"length":281,"line":1350,"column":67,"endLine":1357,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_start_inline__P10566_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start_inline__P10566, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buf___10567: undefined,
  pkt___10574: undefined,
} }





function jacdac_start_inline__P10589(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_Bus_queueAnnounce__P1741_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.callLocIdx = 935; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start_inline__P10589.info = {"start":45576,"length":44,"line":1358,"column":71,"endLine":1359,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_start_inline__P10589_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start_inline__P10589, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_start_inline__P10600(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.charAt(s.arg1, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != ":");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_LoggerServer_add__P1580_mk(s);
    s.tmp_2.arg0 = globals.loggerServer___1581;
    s.tmp_2.arg1 = s.arg0;
    s.tmp_2.arg2 = s.arg1;
    s.callLocIdx = 940; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start_inline__P10600.info = {"start":45787,"length":114,"line":1367,"column":32,"endLine":1369,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["pri","msg"]}

function jacdac_start_inline__P10600_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start_inline__P10600, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_constructor__P1659(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1657_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["autoBind"] = (true);
    s.tmp_2 = jacdac_Server_constructor__P1753_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "rolemgr";
    s.tmp_2.arg2 = 508264038;
    s.callLocIdx = 613; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_constructor__P1659.info = {"start":4623,"length":79,"line":126,"column":8,"endLine":128,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_constructor__P1659_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_constructor__P1659, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Server_constructor__P1753(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = (s.arg0).fields["instanceName"] = (s.arg1);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    s.tmp_2 = jacdac_EventSource_constructor__P1830_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 748; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_constructor__P1753.info = {"start":11481,"length":153,"line":322,"column":8,"endLine":327,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","instanceName","serviceClass"]}

function jacdac_Server_constructor__P1753_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_constructor__P1753, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Server_start__P1760(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = (s.arg0).fields["running"] = (true);
    s.tmp_0 = jacdac_start__P1824_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 776; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = globals.bus___1748.fields["hostServices"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["serviceIndex"] = (s.tmp_1);
    r0 = globals.bus___1748.fields["hostServices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    s.tmp_0 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "start";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_start__P1760.info = {"start":17812,"length":255,"line":527,"column":8,"endLine":534,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Server_start__P1760_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_start__P1760, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Server_log__P2386(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dev___10650 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = s.arg0.fields["supressLog"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 7; continue; }
  case 1:
  case 2:
    r0 = (globals.logPriority___1749 < globals.minPriority___373);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    s.tmp_2 = jacdac_Device_toString__P1805_mk(s);
    s.tmp_3 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_3.arg0 = globals.bus___1748;
    s.callLocIdx = 777; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 778; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.dev___10650 = (r0);
    r0 = s.arg0.fields["instanceName"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0.fields["instanceName"];
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(".", s.tmp_1);
    { step = 6; continue; }
  case 5:
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("[", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "]");
  case 6:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    s.tmp_7 = console_add__P374_mk(s);
    s.tmp_7.arg0 = globals.logPriority___1749;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_11 = r0;
    if ((s.dev___10650) && (s.dev___10650).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.dev___10650);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.dev___10650) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = pxsim_String__concat(s.tmp_11, s.tmp_12);
    s.tmp_10 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_10, s.tmp_13);
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, ">");
    s.tmp_8 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_8, s.tmp_14);
    s.tmp_7.arg1 = r0;
    s.callLocIdx = 779; s.pc = 12; return s.tmp_7;
  case 12:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_log__P2386.info = {"start":18273,"length":527,"line":545,"column":8,"endLine":560,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"log","argumentNames":["this","text"]}

function jacdac_Server_log__P2386_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_log__P2386, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  dev___10650: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_LoggerServer_constructor__P1574(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1572_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = (s.arg0).fields["minPriority"] = (4);
    s.tmp_2 = jacdac_Server_constructor__P1753_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "logger";
    s.tmp_2.arg2 = 316415946;
    s.callLocIdx = 587; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_constructor__P1574.info = {"start":164,"length":111,"line":5,"column":8,"endLine":8,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_LoggerServer_constructor__P1574_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_constructor__P1574, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_LoggerServer_add__P1580(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___10727 = undefined;
    s.unnamed136___U1 = undefined;
    s.unnamed137___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1572_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_4;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.length(s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
  case 4:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_7;
    { step = 6; continue; }
  case 5:
    r0 = globals.bus___1748.fields["controlServer"];
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    s.tmp_12 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_12);
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_8);
  case 6:
    // jmp value (already in r0)
    s.tmp_14 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_14);
    if (!r0) { step = 7; continue; }
    { step = 17; continue; }
  case 7:
  case 8:
    r0 = s.arg0.fields["minPriority"];
    s.tmp_16 = r0;
    r0 = (s.arg1 < s.tmp_16);
    s.tmp_15 = r0;
    r0 = pxsim_numops_toBool(s.tmp_15);
    if (!r0) { step = 9; continue; }
    r0 = s.tmp_15;
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_18 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_18);
    s.tmp_17 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_17);
  case 10:
    // jmp value (already in r0)
    s.tmp_19 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_19);
    if (!r0) { step = 11; continue; }
    { step = 17; continue; }
  case 11:
  case 12:
    r0 = pxsim.control.millis();
    s.tmp_22 = r0;
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_23 = r0;
    r0 = (s.tmp_22 - s.tmp_23);
    s.tmp_21 = r0;
    r0 = (s.tmp_21 > 3000);
    s.tmp_20 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_20);
    if (!r0) { step = 13; continue; }
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = (s.arg0).fields["minPriority"] = (4);
    { step = 17; continue; }
  case 13:
  case 14:
    s.buf___10727 = (undefined);
    s.tmp_0 = Buffer_chunkedFromUTF8__P207_mk(s);
    s.tmp_0.arg0 = s.arg2;
    s.tmp_0.arg1 = 236;
    s.callLocIdx = 593; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.unnamed136___U1 = (r0);
    s.unnamed137___U2 = (0);
  case 15:
    s.tmp_0 = r0 = s.unnamed137___U2;
    r0 = pxsim_Array__length(s.unnamed136___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_Array__getAt(s.unnamed136___U1, s.unnamed137___U2);
    s.buf___10727 = (r0);
    s.tmp_2 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_3 = jacdac_JDPacket_from__P1362_mk(s);
    r0 = (128 + s.arg1);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.buf___10727;
    s.callLocIdx = 594; s.pc = 20; return s.tmp_3;
  case 20:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 595; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    r0 = (s.unnamed137___U2 + 1);
    s.unnamed137___U2 = (r0);
    { step = 15; continue; }
  case 16:
    s.unnamed136___U1 = (undefined);
  case 17:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_add__P1580.info = {"start":1898,"length":833,"line":50,"column":8,"endLine":73,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"add","argumentNames":["this","priority","message"]}

function jacdac_LoggerServer_add__P1580_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_add__P1580, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  tmp_23: undefined,
  buf___10727: undefined,
  unnamed136___U1: undefined,
  unnamed137___U2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Buffer_chunkedFromUTF8__P207(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.chunks___10742 = undefined;
    s.pos___10744 = undefined;
    s.len___10750 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 < 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("Oops");
  case 1:
  case 2:
    r0 = pxsim_Array__mk();
    s.chunks___10742 = (r0);
    s.pos___10744 = (0);
  case 3:
    s.tmp_1 = r0 = s.pos___10744;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = Buffer_chunkLen__P2147_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.pos___10744;
    s.tmp_3.arg2 = s.arg1;
    s.callLocIdx = 37; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.len___10750 = (r0);
    s.tmp_0 = r0 = s.chunks___10742;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.pos___10744;
    r0 = (s.pos___10744 + s.len___10750);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 38; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = (s.pos___10744 + s.len___10750);
    s.pos___10744 = (r0);
    { step = 3; continue; }
  case 4:
    r0 = s.chunks___10742;
    return leave(s, r0)
  default: oops()
} } }
Buffer_chunkedFromUTF8__P207.info = {"start":10703,"length":381,"line":379,"column":4,"endLine":390,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"chunkedFromUTF8","argumentNames":["str","maxBytes"]}

function Buffer_chunkedFromUTF8__P207_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_chunkedFromUTF8__P207, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  chunks___10742: undefined,
  pos___10744: undefined,
  len___10750: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Buffer_chunkLen__P2147(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.L___10775 = undefined;
    s.R___10779 = undefined;
    s.m___10797 = undefined;
    s.ll___10806 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.Math_.idiv(s.arg2, 3);
    s.L___10775 = (r0);
    s.R___10779 = (s.arg2);
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    r0 = (s.arg1 + s.R___10779);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 35; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.R___10779;
    { step = 9; continue; }
  case 1:
  case 2:
  case 3:
    r0 = (s.L___10775 < s.R___10779);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 8; continue; }
    r0 = (s.L___10775 + s.R___10779);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 >> 1);
    s.m___10797 = (r0);
    r0 = (s.m___10797 == s.L___10775);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    { step = 8; continue; }
  case 4:
  case 5:
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.arg1;
    r0 = (s.arg1 + s.m___10797);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 36; s.pc = 11; return s.tmp_3;
  case 11:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.ll___10806 = (r0);
    r0 = (s.ll___10806 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.L___10775 = (s.m___10797);
    { step = 7; continue; }
  case 6:
    s.R___10779 = (s.m___10797);
  case 7:
    { step = 3; continue; }
  case 8:
    r0 = s.L___10775;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
Buffer_chunkLen__P2147.info = {"start":10201,"length":496,"line":358,"column":4,"endLine":377,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"chunkLen","argumentNames":["s","off","maxlen"]}

function Buffer_chunkLen__P2147_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_chunkLen__P2147, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  L___10775: undefined,
  R___10779: undefined,
  m___10797: undefined,
  ll___10806: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function console_addListener__P381(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array_.indexOf(globals.listeners___2185, s.arg0, undefined);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > -1);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 5; continue; }
  case 3:
  case 4:
    r0 = pxsim_Array__push(globals.listeners___2185, s.arg0);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_addListener__P381.info = {"start":3558,"length":197,"line":121,"column":4,"endLine":124,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"addListener","argumentNames":["listener"]}

function console_addListener__P381_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_addListener__P381, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_enableIdentityLED__P2493(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.pins.pinByCfg(13);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = jacdac_log__P2461_mk(s);
    s.tmp_1.arg0 = "enabling identity LED";
    s.callLocIdx = 911; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_on__P1831_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = globals.IDENTIFY___1729;
    s.tmp_0.arg2 = jacdac_enableIdentityLED_inline__P10848;
    s.callLocIdx = 917; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED__P2493.info = {"start":43374,"length":515,"line":1293,"column":4,"endLine":1307,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enableIdentityLED","argumentNames":[]}

function jacdac_enableIdentityLED__P2493_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED__P2493, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_enableIdentityLED_inline__P10848(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_runInBackground__P289_mk(s);
    s.tmp_0.arg0 = jacdac_enableIdentityLED_inline__P10850;
    s.callLocIdx = 916; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED_inline__P10848.info = {"start":43521,"length":338,"line":1296,"column":29,"endLine":1304,"endColumn":18,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enableIdentityLED_inline__P10848_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED_inline__P10848, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_enableIdentityLED_inline__P10850(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___10851 = undefined;
    s.i___10851 = (0);
  case 1:
    r0 = (s.i___10851 < 7);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = jacdac_setPinByCfg__P2490_mk(s);
    s.tmp_1.arg0 = 13;
    s.tmp_1.arg1 = true;
    s.callLocIdx = 912; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 50;
    s.callLocIdx = 913; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_setPinByCfg__P2490_mk(s);
    s.tmp_0.arg0 = 13;
    s.tmp_0.arg1 = false;
    s.callLocIdx = 914; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 150;
    s.callLocIdx = 915; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    r0 = (s.i___10851 + 1);
    s.i___10851 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED_inline__P10850.info = {"start":43567,"length":291,"line":1297,"column":40,"endLine":1304,"endColumn":17,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enableIdentityLED_inline__P10850_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED_inline__P10850, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  i___10851: undefined,
} }





function jacdac_setPinByCfg__P2490(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pin___10866 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.pins.pinByCfg(s.arg0);
    s.pin___10866 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.pin___10866);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore.getConfig(s.arg0, 0);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 65536);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.arg1 = (r0);
  case 3:
  case 4:
    r0 = pxsim.DigitalInOutPinMethods.digitalWrite(s.pin___10866, s.arg1);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_setPinByCfg__P2490.info = {"start":41866,"length":247,"line":1256,"column":4,"endLine":1262,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"setPinByCfg","argumentNames":["cfg","val"]}

function jacdac_setPinByCfg__P2490_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_setPinByCfg__P2490, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pin___10866: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_enablePowerFaultPin__P2492(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.faultpin___10884 = undefined;
    r0 = pxsim.pins.pinByCfg(1105);
    s.faultpin___10884 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.faultpin___10884);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = jacdac_log__P2461_mk(s);
    s.tmp_0.arg0 = "enabling power fault pin";
    s.callLocIdx = 904; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = pxsim.DigitalInOutPinMethods.setPull(s.faultpin___10884, 1);
    r0 = pxsim.DigitalInOutPinMethods.digitalRead(s.faultpin___10884);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_enablePowerFaultPin_inline__P10901);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.faultpin___10884);
    s.tmp_1 = jacdac_EventSource_on__P1831_mk(s);
    s.tmp_1.arg0 = globals.bus___1748;
    s.tmp_1.arg1 = globals.SELF_ANNOUNCE___1721;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 910; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin__P2492.info = {"start":42328,"length":1040,"line":1270,"column":4,"endLine":1291,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enablePowerFaultPin","argumentNames":[]}

function jacdac_enablePowerFaultPin__P2492_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin__P2492, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  faultpin___10884: undefined,
} }





function jacdac_enablePowerFaultPin_inline__P10901(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.DigitalInOutPinMethods.digitalRead(s.caps[0]);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == false);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.runInParallel(jacdac_enablePowerFaultPin_inline__P10908);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin_inline__P10901.info = {"start":42758,"length":593,"line":1278,"column":41,"endLine":1289,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enablePowerFaultPin_inline__P10901_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin_inline__P10901, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_enablePowerFaultPin_inline__P10908(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.control.dmesg("jacdac power overload; restarting power");
    s.tmp_0 = jacdac_enablePower__P2491_mk(s);
    s.tmp_0.arg0 = false;
    s.callLocIdx = 905; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_setPinByCfg__P2490_mk(s);
    s.tmp_0.arg0 = 1103;
    s.tmp_0.arg1 = true;
    s.callLocIdx = 906; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 200;
    s.callLocIdx = 907; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_setPinByCfg__P2490_mk(s);
    s.tmp_0.arg0 = 1103;
    s.tmp_0.arg1 = false;
    s.callLocIdx = 908; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_enablePower__P2491_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 909; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin_inline__P10908.info = {"start":42863,"length":455,"line":1280,"column":42,"endLine":1287,"endColumn":21,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enablePowerFaultPin_inline__P10908_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin_inline__P10908, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_enablePower__P2491(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_setPinByCfg__P2490_mk(s);
    s.tmp_0.arg0 = 1104;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 903; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePower__P2491.info = {"start":42119,"length":203,"line":1264,"column":4,"endLine":1268,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enablePower","argumentNames":["enabled"]}

function jacdac_enablePower__P2491_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePower__P2491, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_queueAnnounce__P1741(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ids___10923 = undefined;
    s.buf___10955 = undefined;
    s.i___10961 = undefined;
    s.cl___10987 = undefined;
    s.unnamed152___U4 = undefined;
    s.unnamed153___U5 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    s.tmp_0 = helpers_arrayMap__P106_mk(s);
    r0 = s.arg0.fields["hostServices"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = ids_inline__P10925;
    s.callLocIdx = 684; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.ids___10923 = (r0);
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 15);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["restartCounter"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["restartCounter"] = (s.tmp_3);
  case 1:
  case 2:
    s.tmp_0 = r0 = s.ids___10923;
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 | 2048);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | 256);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 | 512);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 1024);
    s.tmp_1 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, 0, s.tmp_1);
    r0 = pxsim_Array__length(s.ids___10923);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 * 4);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___10955 = (r0);
    s.i___10961 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___10961;
    r0 = pxsim_Array__length(s.ids___10923);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = r0 = s.buf___10955;
    r0 = (s.i___10961 * 4);
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.ids___10923, s.i___10961);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_3, 11, s.tmp_4, s.tmp_5);
    r0 = (s.i___10961 + 1);
    s.i___10961 = (r0);
    { step = 3; continue; }
  case 4:
    s.tmp_0 = jacdac_JDPacket__sendReport__P1398_mk(s);
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 0;
    s.tmp_1.arg1 = s.buf___10955;
    s.callLocIdx = 685; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_2 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 686; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 687; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.SELF_ANNOUNCE___1721;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 688; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
    s.cl___10987 = (undefined);
    r0 = s.arg0.fields["allClients"];
    s.unnamed152___U4 = (r0);
    s.unnamed153___U5 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed153___U5;
    r0 = pxsim_Array__length(s.unnamed152___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed152___U4, s.unnamed153___U5);
    s.cl___10987 = (r0);
    s.tmp_2 = jacdac_Client__C1770_v1_1_mk(s);
    s.tmp_2.arg0 = s.cl___10987;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Client__C1770_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.announceCallback;
    s.pc = 18; return s.tmp_2;
  case 18:
    r0 = s.retval;
    r0 = (s.unnamed153___U5 + 1);
    s.unnamed153___U5 = (r0);
    { step = 5; continue; }
  case 6:
    s.unnamed152___U4 = (undefined);
    s.tmp_0 = jacdac_Bus_gcDevices__P2457_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 689; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    r0 = s.arg0.fields["resetIn"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = s.arg0.fields["resetIn"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    s.tmp_3 = jacdac_JDPacket_sendAsMultiCommand__P1401_mk(s);
    s.tmp_4 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_4.arg0 = 8320;
    s.tmp_5 = jacdac_jdpack__P1408_mk(s);
    s.tmp_5.arg0 = "u32";
    s.tmp_5.arg1 = s.tmp_1;
    s.callLocIdx = 690; s.pc = 22; return s.tmp_5;
  case 22:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 691; s.pc = 21; return s.tmp_4;
  case 21:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 0;
    s.callLocIdx = 692; s.pc = 20; return s.tmp_3;
  case 20:
    r0 = s.retval;
  case 7:
  case 8:
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_checkProxy__P1661_mk(s);
    s.tmp_0.arg0 = globals.roleManagerServer___1664;
    s.callLocIdx = 693; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
    r0 = globals.roleManagerServer___1664.fields["autoBind"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["autoBindCnt"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["autoBindCnt"] = (s.tmp_2);
    r0 = s.arg0.fields["autoBindCnt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = (s.arg0).fields["autoBindCnt"] = (0);
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_bindRoles__P1662_mk(s);
    s.tmp_0.arg0 = globals.roleManagerServer___1664;
    s.callLocIdx = 694; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
  case 9:
  case 10:
  case 11:
  case 12:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_queueAnnounce__P1741.info = {"start":3484,"length":1649,"line":109,"column":8,"endLine":149,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"queueAnnounce","argumentNames":["this"]}

function jacdac_Bus_queueAnnounce__P1741_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_queueAnnounce__P1741, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  ids___10923: undefined,
  buf___10955: undefined,
  i___10961: undefined,
  cl___10987: undefined,
  unnamed152___U4: undefined,
  unnamed153___U5: undefined,
  arg0: undefined,
} }





function ids_inline__P10925(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["serviceClass"];
    { step = 2; continue; }
  case 1:
    r0 = -1;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
ids_inline__P10925.info = {"start":3548,"length":52,"line":110,"column":46,"endLine":111,"endColumn":47,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["h"]}

function ids_inline__P10925_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: ids_inline__P10925, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles__P1662(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.bindings___11044 = undefined;
    s.wraps___11046 = undefined;
    s.cl___11057 = undefined;
    s.unnamed142___U3 = undefined;
    s.unnamed143___U4 = undefined;
    s.b___11066 = undefined;
    s.w___11086 = undefined;
    s.unnamed144___U7 = undefined;
    s.unnamed145___U8 = undefined;
    s.servers___11105 = undefined;
    s.b___11108 = undefined;
    s.unnamed146___U11 = undefined;
    s.unnamed147___U12 = undefined;
    s.hn___11110 = undefined;
    s.h___11114 = undefined;
    s.h___11152 = undefined;
    s.d___11174 = undefined;
    s.unnamed148___U17 = undefined;
    s.unnamed149___U18 = undefined;
    s.dev___11182 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1657_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 29; continue; }
  case 1:
  case 2:
    r0 = globals.bus___1748.fields["unattachedClients"];
    s.tmp_5 = r0;
    r0 = pxsim_Array__length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == 0);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    s.tmp_6 = jacdac__rolemgr_RoleManagerServer_checkChanges__P2451_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.callLocIdx = 652; s.pc = 30; return s.tmp_6;
  case 30:
    r0 = s.retval;
    { step = 29; continue; }
  case 3:
  case 4:
    s.tmp_0 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = globals.bus___1748.fields["devices"];
    s.tmp_5 = r0;
    r0 = pxsim_Array__length(s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 32);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 32:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("autobind: devs=", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " clients=");
    s.tmp_1 = r0;
    r0 = globals.bus___1748.fields["unattachedClients"];
    s.tmp_8 = r0;
    r0 = pxsim_Array__length(s.tmp_8);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 33);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 33:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_6);
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    s.bindings___11044 = (r0);
    s.tmp_0 = helpers_arrayMap__P106_mk(s);
    r0 = globals.bus___1748.fields["devices"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = wraps_inline__P11048;
    s.callLocIdx = 654; s.pc = 34; return s.tmp_0;
  case 34:
    r0 = s.retval;
    s.wraps___11046 = (r0);
    s.cl___11057 = (undefined);
    r0 = globals.bus___1748.fields["allClients"];
    s.unnamed142___U3 = (r0);
    s.unnamed143___U4 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed143___U4;
    r0 = pxsim_Array__length(s.unnamed142___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_Array__getAt(s.unnamed142___U3, s.unnamed143___U4);
    s.cl___11057 = (r0);
    r0 = s.cl___11057.fields["broadcast"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 6:
    r0 = s.cl___11057.fields["role"];
  case 7:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 14; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_RoleBinding__C2440_VT);
    s.tmp_6 = r0;
    s.tmp_7 = jacdac__rolemgr_RoleBinding_constructor__P2443_mk(s);
    s.tmp_7.arg0 = s.tmp_6;
    r0 = s.cl___11057.fields["role"];
    s.tmp_7.arg1 = r0;
    r0 = s.cl___11057.fields["serviceClass"];
    s.tmp_7.arg2 = r0;
    s.callLocIdx = 655; s.pc = 35; return s.tmp_7;
  case 35:
    r0 = s.retval;
    s.b___11066 = (s.tmp_6);
    r0 = s.cl___11057.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = s.cl___11057.fields["device"];
    s.tmp_1 = r0;
    r0 = (s.b___11066).fields["boundToDev"] = (s.tmp_1);
    r0 = s.cl___11057.fields["serviceIndex"];
    s.tmp_0 = r0;
    r0 = (s.b___11066).fields["boundToServiceIdx"] = (s.tmp_0);
    s.w___11086 = (undefined);
    s.unnamed144___U7 = (s.wraps___11046);
    s.unnamed145___U8 = (0);
  case 8:
    s.tmp_0 = r0 = s.unnamed145___U8;
    r0 = pxsim_Array__length(s.unnamed144___U7);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(s.unnamed144___U7, s.unnamed145___U8);
    s.w___11086 = (r0);
    r0 = s.w___11086.fields["device"];
    s.tmp_3 = r0;
    r0 = s.cl___11057.fields["device"];
    s.tmp_4 = r0;
    r0 = (s.tmp_3 == s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 9; continue; }
    r0 = s.w___11086.fields["bindings"];
    s.tmp_5 = r0;
    r0 = s.cl___11057.fields["serviceIndex"];
    s.tmp_6 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_5, s.tmp_6, s.b___11066);
    { step = 11; continue; }
  case 9:
  case 10:
    r0 = (s.unnamed145___U8 + 1);
    s.unnamed145___U8 = (r0);
    { step = 8; continue; }
  case 11:
    s.unnamed144___U7 = (undefined);
  case 12:
  case 13:
    r0 = pxsim_Array__push(s.bindings___11044, s.b___11066);
  case 14:
  case 15:
    r0 = (s.unnamed143___U4 + 1);
    s.unnamed143___U4 = (r0);
    { step = 5; continue; }
  case 16:
    s.unnamed142___U3 = (undefined);
    r0 = pxsim_Array__mk();
    s.servers___11105 = (r0);
    s.b___11108 = (undefined);
    s.unnamed146___U11 = (s.bindings___11044);
    s.unnamed147___U12 = (0);
  case 17:
    s.tmp_0 = r0 = s.unnamed147___U12;
    r0 = pxsim_Array__length(s.unnamed146___U11);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 20; continue; }
    r0 = pxsim_Array__getAt(s.unnamed146___U11, s.unnamed147___U12);
    s.b___11108 = (r0);
    s.tmp_2 = jacdac__rolemgr_RoleBinding_host__P2441_mk(s);
    s.tmp_2.arg0 = s.b___11108;
    s.callLocIdx = 656; s.pc = 36; return s.tmp_2;
  case 36:
    r0 = s.retval;
    s.hn___11110 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, h_inline__P11117);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.hn___11110);
    s.tmp_1 = helpers_arrayFind__P111_mk(s);
    s.tmp_1.arg0 = s.servers___11105;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 657; s.pc = 37; return s.tmp_1;
  case 37:
    r0 = s.retval;
    s.h___11114 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.h___11114);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_ServerBindings__C2444_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac__rolemgr_ServerBindings_constructor__P2447_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.hn___11110;
    s.callLocIdx = 658; s.pc = 38; return s.tmp_3;
  case 38:
    r0 = s.retval;
    s.h___11114 = (s.tmp_2);
    r0 = pxsim_Array__push(s.servers___11105, s.h___11114);
  case 18:
  case 19:
    r0 = s.h___11114.fields["bindings"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.b___11108);
    r0 = (s.unnamed147___U12 + 1);
    s.unnamed147___U12 = (r0);
    { step = 17; continue; }
  case 20:
    s.unnamed146___U11 = (undefined);
    s.tmp_0 = helpers_arrayFilter__P110_mk(s);
    s.tmp_0.arg0 = s.servers___11105;
    s.tmp_0.arg1 = jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11143;
    s.callLocIdx = 660; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
    s.servers___11105 = (r0);
  case 21:
    r0 = pxsim_Array__length(s.servers___11105);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 28; continue; }
    s.tmp_2 = jacdac__rolemgr_maxIn__P2448_mk(s);
    s.tmp_2.arg0 = s.servers___11105;
    s.tmp_2.arg1 = h_inline__P11156;
    s.callLocIdx = 661; s.pc = 40; return s.tmp_2;
  case 40:
    r0 = s.retval;
    s.h___11152 = (r0);
    s.d___11174 = (undefined);
    s.unnamed148___U17 = (s.wraps___11046);
    s.unnamed149___U18 = (0);
  case 22:
    s.tmp_0 = r0 = s.unnamed149___U18;
    r0 = pxsim_Array__length(s.unnamed148___U17);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 23; continue; }
    r0 = pxsim_Array__getAt(s.unnamed148___U17, s.unnamed149___U18);
    s.d___11174 = (r0);
    s.tmp_2 = r0 = s.d___11174;
    s.tmp_4 = jacdac__rolemgr_ServerBindings_scoreFor__P2446_mk(s);
    s.tmp_4.arg0 = s.h___11152;
    s.tmp_4.arg1 = s.d___11174;
    s.tmp_4.arg2 = false;
    s.callLocIdx = 662; s.pc = 41; return s.tmp_4;
  case 41:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["score"] = (s.tmp_3);
    r0 = (s.unnamed149___U18 + 1);
    s.unnamed149___U18 = (r0);
    { step = 22; continue; }
  case 23:
    s.unnamed148___U17 = (undefined);
    s.tmp_0 = jacdac__rolemgr_maxIn__P2448_mk(s);
    s.tmp_0.arg0 = s.wraps___11046;
    s.tmp_0.arg1 = dev_inline__P11186;
    s.callLocIdx = 663; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
    s.dev___11182 = (r0);
    r0 = s.dev___11182.fields["score"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
    r0 = pxsim_Array_.removeElement(s.servers___11105, s.h___11152);
    { step = 21; continue; }
  case 24:
  case 25:
    s.tmp_0 = helpers_arraySort__P105_mk(s);
    r0 = s.h___11152.fields["bindings"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11213;
    s.callLocIdx = 664; s.pc = 43; return s.tmp_0;
  case 43:
    r0 = s.retval;
    s.tmp_0 = jacdac__rolemgr_ServerBindings_scoreFor__P2446_mk(s);
    s.tmp_0.arg0 = s.h___11152;
    s.tmp_0.arg1 = s.dev___11182;
    s.tmp_0.arg2 = true;
    s.callLocIdx = 665; s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
    s.tmp_1 = jacdac__rolemgr_ServerBindings_fullyBound__P2445_mk(s);
    s.tmp_1.arg0 = s.h___11152;
    s.callLocIdx = 666; s.pc = 45; return s.tmp_1;
  case 45:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 26; continue; }
    r0 = pxsim_Array_.removeElement(s.servers___11105, s.h___11152);
    { step = 27; continue; }
  case 26:
    r0 = pxsim_pxtcore_mkAction(1, jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11237);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.dev___11182);
    s.tmp_1 = r0 = s.h___11152;
    s.tmp_3 = helpers_arrayFilter__P110_mk(s);
    r0 = s.h___11152.fields["bindings"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 667; s.pc = 46; return s.tmp_3;
  case 46:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["bindings"] = (s.tmp_2);
  case 27:
    { step = 21; continue; }
  case 28:
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_checkChanges__P2451_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 668; s.pc = 47; return s.tmp_0;
  case 47:
    r0 = s.retval;
  case 29:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles__P1662.info = {"start":9956,"length":3415,"line":265,"column":8,"endLine":353,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"bindRoles","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles__P1662_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles__P1662, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  bindings___11044: undefined,
  wraps___11046: undefined,
  cl___11057: undefined,
  unnamed142___U3: undefined,
  unnamed143___U4: undefined,
  b___11066: undefined,
  w___11086: undefined,
  unnamed144___U7: undefined,
  unnamed145___U8: undefined,
  servers___11105: undefined,
  b___11108: undefined,
  unnamed146___U11: undefined,
  unnamed147___U12: undefined,
  hn___11110: undefined,
  h___11114: undefined,
  h___11152: undefined,
  d___11174: undefined,
  unnamed148___U17: undefined,
  unnamed149___U18: undefined,
  dev___11182: undefined,
  arg0: undefined,
} }





function wraps_inline__P11048(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_DeviceWrapper__C2438_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac__rolemgr_DeviceWrapper_constructor__P2439_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.callLocIdx = 653; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
wraps_inline__P11048.info = {"start":10369,"length":25,"line":276,"column":42,"endLine":276,"endColumn":67,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["d"]}

function wraps_inline__P11048_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: wraps_inline__P11048, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function h_inline__P11117(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["host"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
h_inline__P11117.info = {"start":11249,"length":17,"line":299,"column":37,"endLine":299,"endColumn":54,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["h"]}

function h_inline__P11117_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P11117, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11143(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_2 = jacdac__rolemgr_ServerBindings_fullyBound__P2445_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 659; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11143.info = {"start":11546,"length":18,"line":308,"column":37,"endLine":308,"endColumn":55,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["h"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11143_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11143, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function h_inline__P11156(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["bindings"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = s.arg1.fields["bindings"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__length(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 - s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg1.fields["host"];
    s.tmp_5 = r0;
    r0 = s.arg0.fields["host"];
    s.tmp_6 = r0;
    r0 = pxsim_String_.compare(s.tmp_5, s.tmp_6);
  case 2:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
    return leave(s, r0)
  default: oops()
} } }
h_inline__P11156.info = {"start":11899,"length":121,"line":315,"column":20,"endLine":317,"endColumn":46,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function h_inline__P11156_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P11156, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P11186(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["score"];
    s.tmp_1 = r0;
    r0 = s.arg1.fields["score"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg1.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_3 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_4 = r0;
    r0 = pxsim_String_.compare(s.tmp_3, s.tmp_4);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P11186.info = {"start":12186,"length":123,"line":324,"column":20,"endLine":326,"endColumn":68,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function dev_inline__P11186_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P11186, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11213(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["role"];
    s.tmp_0 = r0;
    r0 = s.arg1.fields["role"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.compare(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11213.info = {"start":12714,"length":32,"line":337,"column":32,"endLine":337,"endColumn":64,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11213_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11213, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11237(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_0 = r0;
    r0 = s.caps[0].fields["device"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 != s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11237.info = {"start":13244,"length":31,"line":348,"column":24,"endLine":348,"endColumn":55,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["b"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11237_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P11237, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function helpers_arraySort__P105(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 1);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    s.arg1 = (helpers_arraySort_inline__P11254);
  case 3:
  case 4:
    s.tmp_0 = helpers_sortHelper__P2128_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 3; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySort__P105.info = {"start":5663,"length":859,"line":207,"column":4,"endLine":227,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySort","argumentNames":["arr","callbackfn"]}

function helpers_arraySort__P105_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySort__P105, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arraySort_inline__P11254(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.aIsUndef___11257 = undefined;
    s.bIsUndef___11261 = undefined;
    s.aIsNull___11272 = undefined;
    s.bIsNull___11276 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 === undefined);
    s.aIsUndef___11257 = (r0);
    r0 = (s.arg1 === undefined);
    s.bIsUndef___11261 = (r0);
    s.tmp_0 = r0 = s.aIsUndef___11257;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.bIsUndef___11261;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = 0;
    { step = 17; continue; }
    { step = 8; continue; }
  case 3:
    r0 = pxsim_numops_toBoolDecr(s.aIsUndef___11257);
    if (!r0) { step = 4; continue; }
    r0 = 1;
    { step = 17; continue; }
    { step = 7; continue; }
  case 4:
    r0 = pxsim_numops_toBoolDecr(s.bIsUndef___11261);
    if (!r0) { step = 5; continue; }
    r0 = -1;
    { step = 17; continue; }
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = (s.arg0 === null);
    s.aIsNull___11272 = (r0);
    r0 = (s.arg1 === null);
    s.bIsNull___11276 = (r0);
    s.tmp_0 = r0 = s.aIsNull___11272;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = s.tmp_0;
    { step = 10; continue; }
  case 9:
    r0 = s.bIsNull___11276;
  case 10:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = 0;
    { step = 17; continue; }
    { step = 16; continue; }
  case 11:
    r0 = pxsim_numops_toBoolDecr(s.aIsNull___11272);
    if (!r0) { step = 12; continue; }
    r0 = 1;
    { step = 17; continue; }
    { step = 15; continue; }
  case 12:
    r0 = pxsim_numops_toBoolDecr(s.bIsNull___11276);
    if (!r0) { step = 13; continue; }
    r0 = -1;
    { step = 17; continue; }
  case 13:
  case 14:
  case 15:
  case 16:
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = pxsim_String_.compare(s.tmp_2, s.tmp_5);
  case 17:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySort_inline__P11254.info = {"start":5826,"length":636,"line":209,"column":25,"endLine":224,"endColumn":13,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"inline","argumentNames":["a","b"]}

function helpers_arraySort_inline__P11254_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySort_inline__P11254, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  aIsUndef___11257: undefined,
  bIsUndef___11261: undefined,
  aIsNull___11272: undefined,
  bIsNull___11276: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_sortHelper__P2128(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___11311 = undefined;
    s.i___11314 = undefined;
    s.j___11320 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0;
    { step = 11; continue; }
  case 3:
  case 4:
    r0 = pxsim_Array__length(s.arg0);
    s.len___11311 = (r0);
    s.i___11314 = (0);
  case 5:
    s.tmp_1 = r0 = s.i___11314;
    r0 = (s.len___11311 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = (s.i___11314 + 1);
    s.j___11320 = (r0);
  case 6:
    r0 = (s.j___11320 < s.len___11311);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___11314);
    s.tmp_3.arg0 = r0;
    r0 = pxsim_Array__getAt(s.arg0, s.j___11320);
    s.tmp_3.arg1 = r0;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 1; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    s.tmp_4 = helpers_swap__P2127_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.i___11314;
    s.tmp_4.arg2 = s.j___11320;
    s.callLocIdx = 2; s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.j___11320 + 1);
    s.j___11320 = (r0);
    { step = 6; continue; }
  case 9:
    r0 = (s.i___11314 + 1);
    s.i___11314 = (r0);
    { step = 5; continue; }
  case 10:
    r0 = s.arg0;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_sortHelper__P2128.info = {"start":5176,"length":481,"line":191,"column":4,"endLine":205,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"sortHelper","argumentNames":["arr","callbackfn"]}

function helpers_sortHelper__P2128_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_sortHelper__P2128, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___11311: undefined,
  i___11314: undefined,
  j___11320: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_swap__P2127(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.temp___11349 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__getAt(s.arg0, s.arg1);
    s.temp___11349 = (r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.tmp_1, s.tmp_2);
    r0 = pxsim_Array_.setAt(s.arg0, s.arg2, s.temp___11349);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_swap__P2127.info = {"start":5030,"length":140,"line":185,"column":4,"endLine":189,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"swap","argumentNames":["arr","i","j"]}

function helpers_swap__P2127_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_swap__P2127, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  temp___11349: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_ServerBindings_scoreFor__P2446(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numBound___11364 = undefined;
    s.numPossible___11365 = undefined;
    s.dev___11366 = undefined;
    s.missing___11369 = undefined;
    s.b___11372 = undefined;
    s.unnamed138___U5 = undefined;
    s.unnamed139___U6 = undefined;
    s.sbuf___11387 = undefined;
    s.idx___11390 = undefined;
    s.serviceIndex___11396 = undefined;
    s.serviceClass___11402 = undefined;
    s.i___11408 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C2444_VT)) failedCast(r0);
    s.numBound___11364 = (0);
    s.numPossible___11365 = (0);
    r0 = s.arg1.fields["device"];
    s.dev___11366 = (r0);
    r0 = pxsim_Array__mk();
    s.missing___11369 = (r0);
    s.b___11372 = (undefined);
    r0 = s.arg0.fields["bindings"];
    s.unnamed138___U5 = (r0);
    s.unnamed139___U6 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed139___U6;
    r0 = pxsim_Array__length(s.unnamed138___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed138___U5, s.unnamed139___U6);
    s.b___11372 = (r0);
    r0 = s.b___11372.fields["boundToDev"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = s.b___11372.fields["boundToDev"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.dev___11366);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 2; continue; }
    r0 = (s.numBound___11364 + 1);
    s.numBound___11364 = (r0);
  case 2:
  case 3:
    { step = 5; continue; }
  case 4:
    r0 = pxsim_Array__push(s.missing___11369, s.b___11372);
  case 5:
    r0 = (s.unnamed139___U6 + 1);
    s.unnamed139___U6 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed138___U5 = (undefined);
    r0 = s.dev___11366.fields["services"];
    s.sbuf___11387 = (r0);
    s.idx___11390 = (4);
  case 7:
    s.tmp_1 = r0 = s.idx___11390;
    r0 = pxsim.BufferMethods.length(s.sbuf___11387);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    r0 = (s.idx___11390 >> 2);
    s.serviceIndex___11396 = (r0);
    r0 = s.arg1.fields["bindings"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_1, s.serviceIndex___11396);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    { step = 16; continue; }
  case 8:
  case 9:
    r0 = pxsim.BufferMethods.getNumber(s.sbuf___11387, 11, s.idx___11390);
    s.serviceClass___11402 = (r0);
    s.i___11408 = (0);
  case 10:
    s.tmp_1 = r0 = s.i___11408;
    r0 = pxsim_Array__length(s.missing___11369);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = pxsim_Array__getAt(s.missing___11369, s.i___11408);
    r0 = r0.fields["serviceClass"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.serviceClass___11402);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 13; continue; }
    r0 = (s.numPossible___11365 + 1);
    s.numPossible___11365 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 11; continue; }
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1749;
    r0 = pxsim_Array__getAt(s.missing___11369, s.i___11408);
    r0 = r0.fields["role"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat("autobind: ", s.tmp_9);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " -> ");
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_5 = r0;
    s.tmp_13 = jacdac_Device_shortId__P1804_mk(s);
    s.tmp_13.arg0 = s.dev___11366;
    s.callLocIdx = 608; s.pc = 25; return s.tmp_13;
  case 25:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_11);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ":");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_1 = r0;
    if ((s.serviceIndex___11396) && (s.serviceIndex___11396).vtable) {
    setupResume(s, 29);
    pxsim_String__stringConv(s.serviceIndex___11396);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.serviceIndex___11396) + ""; }
  case 29:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_14);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 609; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.tmp_0 = jacdac__rolemgr_RoleBinding_select__P2442_mk(s);
    r0 = pxsim_Array__getAt(s.missing___11369, s.i___11408);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.serviceIndex___11396;
    s.callLocIdx = 610; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
  case 11:
  case 12:
    s.tmp_0 = helpers_arraySplice__P100_mk(s);
    s.tmp_0.arg0 = s.missing___11369;
    s.tmp_0.arg1 = s.i___11408;
    s.tmp_0.arg2 = 1;
    s.callLocIdx = 611; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
    { step = 15; continue; }
  case 13:
  case 14:
    r0 = (s.i___11408 + 1);
    s.i___11408 = (r0);
    { step = 10; continue; }
  case 15:
  case 16:
    r0 = (s.idx___11390 + 4);
    s.idx___11390 = (r0);
    { step = 7; continue; }
  case 17:
    r0 = (s.numPossible___11365 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = 0;
    { step = 20; continue; }
  case 18:
  case 19:
    r0 = (s.numBound___11364 << 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | s.numPossible___11365);
  case 20:
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_scoreFor__P2446.info = {"start":2090,"length":2158,"line":61,"column":8,"endLine":111,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"scoreFor","argumentNames":["this","devwrap","select"]}

function jacdac__rolemgr_ServerBindings_scoreFor__P2446_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_scoreFor__P2446, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  numBound___11364: undefined,
  numPossible___11365: undefined,
  dev___11366: undefined,
  missing___11369: undefined,
  b___11372: undefined,
  unnamed138___U5: undefined,
  unnamed139___U6: undefined,
  sbuf___11387: undefined,
  idx___11390: undefined,
  serviceIndex___11396: undefined,
  serviceClass___11402: undefined,
  i___11408: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_RoleBinding_select__P2442(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dev___11476 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C2440_VT)) failedCast(r0);
    r0 = s.arg1.fields["device"];
    s.dev___11476 = (r0);
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_1 = r0;
    r0 = (s.dev___11476 == s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["boundToServiceIdx"];
    s.tmp_2 = r0;
    r0 = (s.arg2 == s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    s.tmp_5 = jacdac__rolemgr_setRole__P1656_mk(s);
    r0 = s.arg0.fields["boundToDev"];
    r0 = r0.fields["deviceId"];
    s.tmp_5.arg0 = r0;
    r0 = s.arg0.fields["boundToServiceIdx"];
    s.tmp_5.arg1 = r0;
    s.tmp_5.arg2 = null;
    s.callLocIdx = 605; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = s.arg1.fields["bindings"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.arg2, s.arg0);
    s.tmp_0 = jacdac__rolemgr_setRole__P1656_mk(s);
    r0 = s.dev___11476.fields["deviceId"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg2;
    r0 = s.arg0.fields["role"];
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 606; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = (s.arg0).fields["boundToDev"] = (s.dev___11476);
    r0 = (s.arg0).fields["boundToServiceIdx"] = (s.arg2);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_select__P2442.info = {"start":1114,"length":504,"line":37,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"select","argumentNames":["this","devwrap","serviceIdx"]}

function jacdac__rolemgr_RoleBinding_select__P2442_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_select__P2442, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  dev___11476: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_setRole__P1656(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.key___11516 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    if ((globals.roleSettingPrefix___2437) && (globals.roleSettingPrefix___2437).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(globals.roleSettingPrefix___2437);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.roleSettingPrefix___2437) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_6);
    s.key___11516 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = settings_writeString__P1082_mk(s);
    s.tmp_0.arg0 = s.key___11516;
    s.tmp_0.arg1 = s.arg2;
    s.callLocIdx = 601; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_0 = settings_remove__P1090_mk(s);
    s.tmp_0.arg0 = s.key___11516;
    s.callLocIdx = 602; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 2:
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1740_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.callLocIdx = 603; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_setRole__P1656.info = {"start":364,"length":261,"line":12,"column":4,"endLine":17,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"setRole","argumentNames":["devid","servIdx","role"]}

function jacdac__rolemgr_setRole__P1656_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_setRole__P1656, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  key___11516: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_remove__P1090(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._remove(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_remove__P1090.info = {"start":3702,"length":64,"line":148,"column":4,"endLine":150,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"remove","argumentNames":["key"]}

function settings_remove__P1090_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_remove__P1090, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac__rolemgr_maxIn__P2448(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.maxElt___11544 = undefined;
    s.i___11546 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__getAt(s.arg0, 0);
    s.maxElt___11544 = (r0);
    s.i___11546 = (1);
  case 1:
    s.tmp_1 = r0 = s.i___11546;
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_5 = lambda_3_mk(s);
    s.tmp_5.argL = s.arg1;
    s.tmp_5.arg0 = s.maxElt___11544;
    r0 = pxsim_Array__getAt(s.arg0, s.i___11546);
    s.tmp_5.arg1 = r0;
    setupLambda(s.tmp_5, s.tmp_5.argL);
    s.callLocIdx = 612; s.pc = 5; return s.tmp_5;
  case 5:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 < 0);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___11546);
    s.maxElt___11544 = (r0);
  case 2:
  case 3:
    r0 = (s.i___11546 + 1);
    s.i___11546 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = s.maxElt___11544;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_maxIn__P2448.info = {"start":4260,"length":228,"line":114,"column":4,"endLine":120,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"maxIn","argumentNames":["arr","cmp"]}

function jacdac__rolemgr_maxIn__P2448_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_maxIn__P2448, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  maxElt___11544: undefined,
  i___11546: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_ServerBindings_fullyBound__P2445(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C2444_VT)) failedCast(r0);
    s.tmp_0 = helpers_arrayEvery__P108_mk(s);
    r0 = s.arg0.fields["bindings"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac__rolemgr_ServerBindings_fullyBound_inline__P11569;
    s.callLocIdx = 607; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_fullyBound__P2445.info = {"start":1743,"length":94,"line":54,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"fullyBound","argumentNames":["this"]}
jacdac__rolemgr_ServerBindings_fullyBound__P2445.isGetter = true;

function jacdac__rolemgr_ServerBindings_fullyBound__P2445_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_fullyBound__P2445, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_ServerBindings_fullyBound_inline__P11569(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 != null);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_fullyBound_inline__P11569.info = {"start":1801,"length":25,"line":55,"column":39,"endLine":55,"endColumn":64,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["b"]}

function jacdac__rolemgr_ServerBindings_fullyBound_inline__P11569_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_fullyBound_inline__P11569, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_arrayEvery__P108(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___11577 = undefined;
    s.i___11580 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___11577 = (r0);
    s.i___11580 = (0);
  case 1:
    r0 = (s.i___11580 < s.len___11577);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_4 = lambda_3_mk(s);
    s.tmp_4.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___11580);
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.i___11580;
    setupLambda(s.tmp_4, s.tmp_4.argL);
    s.callLocIdx = 6; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = false;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___11580 + 1);
    s.i___11580 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = true;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayEvery__P108.info = {"start":7135,"length":298,"line":246,"column":4,"endLine":252,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayEvery","argumentNames":["arr","callbackfn"]}

function helpers_arrayEvery__P108_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayEvery__P108, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___11577: undefined,
  i___11580: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_ServerBindings_constructor__P2447(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C2444_VT)) failedCast(r0);
    r0 = (s.arg0).fields["host"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["bindings"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_constructor__P2447.info = {"start":1698,"length":35,"line":52,"column":8,"endLine":52,"endColumn":43,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","host"]}

function jacdac__rolemgr_ServerBindings_constructor__P2447_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_constructor__P2447, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleBinding_host__P2441(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.slashIdx___11597 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C2440_VT)) failedCast(r0);
    r0 = s.arg0.fields["role"];
    s.tmp_0 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_0, "/", undefined);
    s.slashIdx___11597 = (r0);
    r0 = (s.slashIdx___11597 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["role"];
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["role"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    r0 = (s.slashIdx___11597 - 1);
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 604; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_host__P2441.info = {"start":930,"length":174,"line":31,"column":8,"endLine":35,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"host","argumentNames":["this"]}

function jacdac__rolemgr_RoleBinding_host__P2441_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_host__P2441, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  slashIdx___11597: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleBinding_constructor__P2443(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C2440_VT)) failedCast(r0);
    r0 = (s.arg0).fields["role"] = (s.arg1);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_constructor__P2443.info = {"start":856,"length":64,"line":29,"column":8,"endLine":29,"endColumn":72,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","role","serviceClass"]}

function jacdac__rolemgr_RoleBinding_constructor__P2443_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_constructor__P2443, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_DeviceWrapper_constructor__P2439(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_DeviceWrapper__C2438_VT)) failedCast(r0);
    r0 = (s.arg0).fields["device"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["bindings"] = (s.tmp_1);
    r0 = (s.arg0).fields["score"] = (-1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_DeviceWrapper_constructor__P2439.info = {"start":717,"length":37,"line":22,"column":8,"endLine":22,"endColumn":45,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","device"]}

function jacdac__rolemgr_DeviceWrapper_constructor__P2439_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_DeviceWrapper_constructor__P2439, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_checkChanges__P2451(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.newHash___11619 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1657_VT)) failedCast(r0);
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_bindingHash__P2450_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 669; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.newHash___11619 = (r0);
    r0 = s.arg0.fields["_oldBindingsHash"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.newHash___11619);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["_oldBindingsHash"] = (s.newHash___11619);
    s.tmp_0 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "roles: bindings changed";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server_sendChangeEvent__P2376_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 670; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_checkChanges__P2451.info = {"start":13381,"length":416,"line":355,"column":8,"endLine":365,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"checkChanges","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_checkChanges__P2451_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_checkChanges__P2451, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  newHash___11619: undefined,
  arg0: undefined,
} }





function jacdac_Server_sendChangeEvent__P2376(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_sendEvent__P2375_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 3;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 761; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___1716;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 762; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendChangeEvent__P2376.info = {"start":13341,"length":122,"line":385,"column":8,"endLine":388,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendChangeEvent","argumentNames":["this"]}

function jacdac_Server_sendChangeEvent__P2376_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendChangeEvent__P2376, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Server_sendEvent__P2375(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pkt___11642 = undefined;
    s.now___11654 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.control.createBuffer(0);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_2 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_3 = jacdac_Bus_mkEventCmd__P1739_mk(s);
    s.tmp_3.arg0 = globals.bus___1748;
    s.tmp_3.arg1 = s.arg1;
    s.callLocIdx = 756; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_1;
    s.callLocIdx = 757; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.pkt___11642 = (r0);
    s.tmp_0 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.pkt___11642;
    s.callLocIdx = 758; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = pxsim.control.millis();
    s.now___11654 = (r0);
    s.tmp_0 = jacdac_delayedSend__P1453_mk(s);
    s.tmp_0.arg0 = s.pkt___11642;
    r0 = (s.now___11654 + 20);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 759; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.tmp_0 = jacdac_delayedSend__P1453_mk(s);
    s.tmp_0.arg0 = s.pkt___11642;
    r0 = (s.now___11654 + 100);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 760; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendEvent__P2375.info = {"start":12976,"length":355,"line":374,"column":8,"endLine":383,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendEvent","argumentNames":["this","eventCode","data"]}

function jacdac_Server_sendEvent__P2375_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendEvent__P2375, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  pkt___11642: undefined,
  now___11654: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_delayedSend__P1453(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dp___11676 = undefined;
    s.i___11681 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(globals.delayedPackets___2402);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    globals.delayedPackets___2402 = (r0);
    r0 = pxsim.control.runInParallel(jacdac_processDelayedPackets__P2405);
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_DelayedPacket__C2403_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_DelayedPacket_constructor__P2404_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg0;
    s.callLocIdx = 583; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.dp___11676 = (s.tmp_0);
    s.i___11681 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___11681;
    r0 = pxsim_Array__length(globals.delayedPackets___2402);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(globals.delayedPackets___2402, s.i___11681);
    r0 = r0.fields["timestamp"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 > s.arg1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array_.insertAt(globals.delayedPackets___2402, s.i___11681, s.dp___11676);
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = (s.i___11681 + 1);
    s.i___11681 = (r0);
    { step = 3; continue; }
  case 6:
    r0 = pxsim_Array__push(globals.delayedPackets___2402, s.dp___11676);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_delayedSend__P1453.info = {"start":252,"length":495,"line":13,"column":4,"endLine":26,"endColumn":5,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"delayedSend","argumentNames":["pkt","timestamp"]}

function jacdac_delayedSend__P1453_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_delayedSend__P1453, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  dp___11676: undefined,
  i___11681: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_DelayedPacket_constructor__P2404(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_DelayedPacket__C2403_VT)) failedCast(r0);
    r0 = (s.arg0).fields["timestamp"] = (s.arg1);
    r0 = (s.arg0).fields["pkt"] = (s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_DelayedPacket_constructor__P2404.info = {"start":126,"length":114,"line":7,"column":8,"endLine":10,"endColumn":12,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"inline","argumentNames":["this","timestamp","pkt"]}

function jacdac_DelayedPacket_constructor__P2404_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_DelayedPacket_constructor__P2404, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_processDelayedPackets__P2405(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___11710 = undefined;
    s.curr___11714 = undefined;
  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 10; continue; }
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 10;
    s.callLocIdx = 584; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    r0 = pxsim.control.millis();
    s.now___11710 = (r0);
  case 2:
    r0 = pxsim_Array__getAt(globals.delayedPackets___2402, 0);
    s.curr___11714 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.curr___11714);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = s.curr___11714.fields["timestamp"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > s.now___11710);
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    r0 = pxsim_Array_.removeAt(globals.delayedPackets___2402, 0);
    s.tmp_0 = jacdac_JDPacket__sendCore__P1397_mk(s);
    r0 = s.curr___11714.fields["pkt"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 586; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    { step = 2; continue; }
  case 7:
    r0 = pxsim_Array__length(globals.delayedPackets___2402);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    globals.delayedPackets___2402 = (null);
    { step = 11; continue; }
  case 8:
  case 9:
    { step = 1; continue; }
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_processDelayedPackets__P2405.info = {"start":753,"length":470,"line":28,"column":4,"endLine":43,"endColumn":5,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"processDelayedPackets","argumentNames":[]}

function jacdac_processDelayedPackets__P2405_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_processDelayedPackets__P2405, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  now___11710: undefined,
  curr___11714: undefined,
} }





function helpers_arrayShift__P102(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array_.removeAt(s.arg0, 0);
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayShift__P102.info = {"start":4045,"length":82,"line":153,"column":4,"endLine":155,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayShift","argumentNames":["arr"]}

function helpers_arrayShift__P102_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayShift__P102, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_mkEventCmd__P1739(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["_eventCounter"] = (0);
  case 1:
  case 2:
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 127);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_eventCounter"] = (s.tmp_1);
    r0 = (s.arg1 >> 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.throwValue("invalid evcode");
  case 3:
  case 4:
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 << 8);
    s.tmp_2 = r0;
    r0 = (32768 | s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | s.arg1);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_mkEventCmd__P1739.info = {"start":2754,"length":404,"line":89,"column":8,"endLine":99,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"mkEventCmd","argumentNames":["this","evCode"]}

function jacdac_Bus_mkEventCmd__P1739_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_mkEventCmd__P1739, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindingHash__P2450(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___11767 = undefined;
    s.n___11768 = undefined;
    s.i___11772 = undefined;
    s.client___11777 = undefined;
    s.buf___11817 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1657_VT)) failedCast(r0);
    r0 = pxsim_String_.mkEmpty();
    s.r___11767 = (r0);
    r0 = globals.bus___1748.fields["allClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__length(s.tmp_0);
    s.n___11768 = (r0);
    s.i___11772 = (0);
  case 1:
    r0 = (s.i___11772 < s.n___11768);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = globals.bus___1748.fields["allClients"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_1, s.i___11772);
    s.client___11777 = (r0);
    r0 = s.client___11777.fields["role"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim_String_.mkEmpty();
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.client___11777.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 4:
    r0 = s.client___11777.fields["device"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_3;
    { step = 6; continue; }
  case 5:
    r0 = s.client___11777.fields["device"];
    r0 = r0.fields["deviceId"];
  case 6:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 7:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_5;
    { step = 9; continue; }
  case 8:
    r0 = pxsim_String_.mkEmpty();
  case 9:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    if ((s.r___11767) && (s.r___11767).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.r___11767);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___11767) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_14 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = pxsim_String__concat(s.tmp_14, s.tmp_15);
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_13, ":");
    s.tmp_12 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_12, s.tmp_16);
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_11, ":");
    s.tmp_10 = r0;
    r0 = s.client___11777.fields["serviceIndex"];
    s.tmp_18 = r0;
    if ((s.tmp_18) && (s.tmp_18).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_18);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_18) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_17 = r0;
    r0 = pxsim_String__concat(s.tmp_10, s.tmp_17);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_8);
    s.r___11767 = (r0);
    r0 = (s.i___11772 + 1);
    s.i___11772 = (r0);
    { step = 1; continue; }
  case 10:
    r0 = pxsim.control.createBufferFromUTF8(s.r___11767);
    s.buf___11817 = (r0);
    r0 = pxsim.BufferMethods.hash(s.buf___11817, 32);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindingHash__P2450.info = {"start":8190,"length":510,"line":218,"column":8,"endLine":231,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"bindingHash","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_bindingHash__P2450_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindingHash__P2450, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  r___11767: undefined,
  n___11768: undefined,
  i___11772: undefined,
  client___11777: undefined,
  buf___11817: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_checkProxy__P1661(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___11828 = undefined;
    s.self___11831 = undefined;
    s.devs___11834 = undefined;
    s.device___11868 = undefined;
    s.unnamed140___U4 = undefined;
    s.unnamed141___U5 = undefined;
    s.uptime___11870 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1657_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 11; continue; }
  case 1:
  case 2:
    r0 = pxsim.control.micros();
    s.now___11828 = (r0);
    s.tmp_0 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.callLocIdx = 644; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.self___11831 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, devs_inline__P11836);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.self___11831);
    s.tmp_1 = helpers_arrayFilter__P110_mk(s);
    r0 = globals.bus___1748.fields["devices"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 646; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.devs___11834 = (r0);
    r0 = pxsim_Array__length(s.devs___11834);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    { step = 11; continue; }
  case 3:
  case 4:
    s.tmp_3 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_3.arg0 = s.arg0;
    r0 = (s.now___11828 / 100000);
    s.tmp_8 = r0;
    r0 = (s.tmp_8 | 0);
    s.tmp_7 = r0;
    r0 = (s.tmp_7 / 10);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("check proxy self ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "s");
    s.tmp_3.arg1 = r0;
    if (!checkSubtype(s.tmp_3.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.log;
    s.pc = 14; return s.tmp_3;
  case 14:
    r0 = s.retval;
    s.device___11868 = (undefined);
    s.unnamed140___U4 = (s.devs___11834);
    s.unnamed141___U5 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed141___U5;
    r0 = pxsim_Array__length(s.unnamed140___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_Array__getAt(s.unnamed140___U4, s.unnamed141___U5);
    s.device___11868 = (r0);
    s.tmp_2 = jacdac_Device_uptime__P1811_mk(s);
    s.tmp_2.arg0 = s.device___11868;
    s.callLocIdx = 647; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.uptime___11870 = (r0);
    r0 = (s.uptime___11870 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_5 = jacdac_Device_shortId__P1804_mk(s);
    s.tmp_5.arg0 = s.device___11868;
    s.callLocIdx = 648; s.pc = 18; return s.tmp_5;
  case 18:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("check proxy ", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ": no uptime");
    s.tmp_1.arg1 = r0;
    if (!checkSubtype(s.tmp_1.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.log;
    s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    s.tmp_0 = jacdac_Device_sendCtrlCommand__P1817_mk(s);
    s.tmp_0.arg0 = s.device___11868;
    s.tmp_0.arg1 = 4486;
    s.tmp_0.arg2 = null;
    s.callLocIdx = 649; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    { step = 9; continue; }
  case 6:
    s.tmp_0 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_6 = jacdac_Device_shortId__P1804_mk(s);
    s.tmp_6.arg0 = s.device___11868;
    s.callLocIdx = 650; s.pc = 22; return s.tmp_6;
  case 22:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("check proxy ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ": ");
    s.tmp_2 = r0;
    r0 = (s.uptime___11870 / 100000);
    s.tmp_10 = r0;
    r0 = (s.tmp_10 | 0);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 / 10);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_7);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "s");
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    r0 = (s.now___11828 > s.uptime___11870);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_1 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "reset into proxy mode";
    if (!checkSubtype(s.tmp_1.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.log;
    s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.tmp_0 = settings_writeNumber__P1083_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING___1823;
    s.tmp_0.arg1 = 1;
    s.callLocIdx = 651; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
    setupResume(s, 27);
    pxsim.control.reset();
    checkResumeConsumed();
    return;
  case 27:
    r0 = s.retval;
  case 7:
  case 8:
  case 9:
    r0 = (s.unnamed141___U5 + 1);
    s.unnamed141___U5 = (r0);
    { step = 5; continue; }
  case 10:
    s.unnamed140___U4 = (undefined);
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_checkProxy__P1661.info = {"start":8710,"length":1236,"line":233,"column":8,"endLine":263,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"checkProxy","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_checkProxy__P1661_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_checkProxy__P1661, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  now___11828: undefined,
  self___11831: undefined,
  devs___11834: undefined,
  device___11868: undefined,
  unnamed140___U4: undefined,
  unnamed141___U5: undefined,
  uptime___11870: undefined,
  arg0: undefined,
} }





function devs_inline__P11836(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 !== s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["services"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 0);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 & 2048);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
    return leave(s, r0)
  default: oops()
} } }
devs_inline__P11836.info = {"start":8919,"length":110,"line":238,"column":16,"endLine":240,"endColumn":71,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["d"]}

function devs_inline__P11836_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: devs_inline__P11836, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function settings_writeNumber__P1083(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = settings_writeBuffer__P1081_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_2 = msgpack_packNumberArray__P182_mk(s);
    s.tmp_2.arg0 = s.tmp_0;
    s.callLocIdx = 122; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 123; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeNumber__P1083.info = {"start":2087,"length":122,"line":82,"column":4,"endLine":84,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"writeNumber","argumentNames":["key","value"]}

function settings_writeNumber__P1083_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeNumber__P1083, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function msgpack_packNumberArray__P182(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.off___11924 = undefined;
    s.n___11926 = undefined;
    s.unnamed102___U2 = undefined;
    s.unnamed103___U3 = undefined;
    s.buf___11936 = undefined;
    s.n___11942 = undefined;
    s.unnamed104___U6 = undefined;
    s.unnamed105___U7 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.off___11924 = (0);
    s.n___11926 = (undefined);
    s.unnamed102___U2 = (s.arg0);
    s.unnamed103___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed103___U3;
    r0 = pxsim_Array__length(s.unnamed102___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed102___U2, s.unnamed103___U3);
    s.n___11926 = (r0);
    s.tmp_2 = r0 = s.off___11924;
    s.tmp_4 = msgpack_packNumberCore__P2144_mk(s);
    s.tmp_4.arg0 = null;
    s.tmp_4.arg1 = s.off___11924;
    s.tmp_4.arg2 = s.n___11926;
    s.callLocIdx = 26; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.off___11924 = (r0);
    r0 = (s.unnamed103___U3 + 1);
    s.unnamed103___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed102___U2 = (undefined);
    r0 = pxsim.control.createBuffer(s.off___11924);
    s.buf___11936 = (r0);
    s.off___11924 = (0);
    s.n___11942 = (undefined);
    s.unnamed104___U6 = (s.arg0);
    s.unnamed105___U7 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed105___U7;
    r0 = pxsim_Array__length(s.unnamed104___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed104___U6, s.unnamed105___U7);
    s.n___11942 = (r0);
    s.tmp_2 = r0 = s.off___11924;
    s.tmp_4 = msgpack_packNumberCore__P2144_mk(s);
    s.tmp_4.arg0 = s.buf___11936;
    s.tmp_4.arg1 = s.off___11924;
    s.tmp_4.arg2 = s.n___11942;
    s.callLocIdx = 27; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.off___11924 = (r0);
    r0 = (s.unnamed105___U7 + 1);
    s.unnamed105___U7 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed104___U6 = (undefined);
    r0 = s.buf___11936;
    return leave(s, r0)
  default: oops()
} } }
msgpack_packNumberArray__P182.info = {"start":3427,"length":330,"line":117,"column":4,"endLine":128,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"packNumberArray","argumentNames":["nums"]}

function msgpack_packNumberArray__P182_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_packNumberArray__P182, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  off___11924: undefined,
  n___11926: undefined,
  unnamed102___U2: undefined,
  unnamed103___U3: undefined,
  buf___11936: undefined,
  n___11942: undefined,
  unnamed104___U6: undefined,
  unnamed105___U7: undefined,
  arg0: undefined,
} }





function msgpack_packNumberCore__P2144(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tag___11956 = undefined;
    s.fmt___11999 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tag___11956 = (203);
    s.tmp_1 = r0 = s.arg2;
    r0 = (s.arg2 << 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = r0 = s.arg2;
    r0 = (s.arg2 >>> 0);
    s.tmp_4 = r0;
    r0 = (s.tmp_3 == s.tmp_4);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 19; continue; }
    r0 = (-31 <= s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_6;
    { step = 4; continue; }
  case 3:
    r0 = (s.arg2 <= 127);
  case 4:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim.BufferMethods.setByte(s.arg0, s.arg1, s.arg2);
  case 5:
  case 6:
    r0 = 1;
    { step = 23; continue; }
    { step = 18; continue; }
  case 7:
    r0 = (0 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = (s.arg2 <= 255);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
    s.tag___11956 = (204);
    { step = 11; continue; }
  case 8:
    r0 = (s.arg2 <= 65535);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tag___11956 = (205);
    { step = 10; continue; }
  case 9:
    s.tag___11956 = (206);
  case 10:
  case 11:
    { step = 17; continue; }
  case 12:
    r0 = (-127 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tag___11956 = (208);
    { step = 16; continue; }
  case 13:
    r0 = (-32767 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tag___11956 = (209);
    { step = 15; continue; }
  case 14:
    s.tag___11956 = (210);
  case 15:
  case 16:
  case 17:
  case 18:
  case 19:
  case 20:
    s.tmp_0 = msgpack_tagFormat__P2143_mk(s);
    s.tmp_0.arg0 = s.tag___11956;
    s.callLocIdx = 22; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.fmt___11999 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 21; continue; }
    r0 = pxsim.BufferMethods.setByte(s.arg0, s.arg1, s.tag___11956);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.fmt___11999;
    r0 = (s.arg1 + 1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.arg2);
  case 21:
  case 22:
    s.tmp_1 = pins_sizeOf__P173_mk(s);
    s.tmp_1.arg0 = s.fmt___11999;
    s.callLocIdx = 23; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
  case 23:
    return leave(s, r0)
  default: oops()
} } }
msgpack_packNumberCore__P2144.info = {"start":1632,"length":951,"line":56,"column":4,"endLine":86,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"packNumberCore","argumentNames":["buf","offset","num"]}

function msgpack_packNumberCore__P2144_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_packNumberCore__P2144, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tag___11956: undefined,
  fmt___11999: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function pins_sizeOf__P173(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Buffer_sizeOfNumberFormat__P213_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 19; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
pins_sizeOf__P173.info = {"start":42,"length":101,"line":2,"column":4,"endLine":4,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"sizeOf","argumentNames":["format"]}

function pins_sizeOf__P173_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_sizeOf__P173, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function msgpack_tagFormat__P2143(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(203, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(204, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(205, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(206, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(208, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(209, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(210, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 1:
    r0 = 16;
    { step = 9; continue; }
  case 2:
    r0 = 7;
    { step = 9; continue; }
  case 3:
    r0 = 9;
    { step = 9; continue; }
  case 4:
    r0 = 12;
    { step = 9; continue; }
  case 5:
    r0 = 6;
    { step = 9; continue; }
  case 6:
    r0 = 8;
    { step = 9; continue; }
  case 7:
    r0 = 10;
    { step = 9; continue; }
  case 8:
    r0 = null;
    { step = 9; continue; }
    r0 = undefined;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
msgpack_tagFormat__P2143.info = {"start":1145,"length":481,"line":42,"column":4,"endLine":54,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"tagFormat","argumentNames":["tag"]}

function msgpack_tagFormat__P2143_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_tagFormat__P2143, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_uptime__P1811(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.q___12037 = undefined;
    s.up___12043 = undefined;
    s.offset___12049 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1795_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Device_query__P1810_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 390;
    s.tmp_0.arg2 = 60000;
    s.tmp_0.arg3 = 0;
    s.callLocIdx = 855; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_Device_lookupQuery__P2473_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 390;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 856; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.q___12037 = (r0);
    r0 = s.q___12037.fields["value"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.q___12037.fields["value"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, 0);
    s.up___12043 = (r0);
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = s.q___12037.fields["lastReport"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 * 1000);
    s.offset___12049 = (r0);
    r0 = (s.up___12043 + s.offset___12049);
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = undefined;
  case 3:
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_uptime__P1811.info = {"start":34968,"length":415,"line":1066,"column":8,"endLine":1076,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"uptime","argumentNames":["this"]}
jacdac_Device_uptime__P1811.isGetter = true;

function jacdac_Device_uptime__P1811_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_uptime__P1811, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  q___12037: undefined,
  up___12043: undefined,
  offset___12049: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_sendAsMultiCommand__P1401(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 5);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 3, s.tmp_1);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 4, s.arg1);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 8, 0);
    s.tmp_0 = jacdac_JDPacket__sendCore__P1397_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 526; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_sendAsMultiCommand__P1401.info = {"start":7885,"length":349,"line":256,"column":8,"endLine":263,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"sendAsMultiCommand","argumentNames":["this","serviceClass"]}

function jacdac_JDPacket_sendAsMultiCommand__P1401_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_sendAsMultiCommand__P1401, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_gcDevices__P2457(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___12084 = undefined;
    s.cutoff___12087 = undefined;
    s.numdel___12093 = undefined;
    s.i___12094 = undefined;
    s.dev___12101 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = pxsim.control.millis();
    s.now___12084 = (r0);
    r0 = (s.now___12084 - 2000);
    s.cutoff___12087 = (r0);
    s.tmp_1 = jacdac_Bus_selfDevice__P1738_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 677; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.now___12084);
    s.numdel___12093 = (0);
    s.i___12094 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___12094;
    r0 = s.arg0.fields["devices"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = s.arg0.fields["devices"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_4, s.i___12094);
    s.dev___12101 = (r0);
    r0 = s.dev___12101.fields["lastSeen"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < s.cutoff___12087);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_2 = helpers_arraySplice__P100_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.i___12094;
    s.tmp_2.arg2 = 1;
    s.callLocIdx = 678; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    r0 = (s.i___12094 - 1);
    s.i___12094 = (r0);
    s.tmp_0 = jacdac_Device__destroy__P1818_mk(s);
    s.tmp_0.arg0 = s.dev___12101;
    s.callLocIdx = 679; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = (s.numdel___12093 + 1);
    s.numdel___12093 = (r0);
  case 2:
  case 3:
    r0 = (s.i___12094 + 1);
    s.i___12094 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = pxsim_numops_toBoolDecr(s.numdel___12093);
    if (!r0) { step = 5; continue; }
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_CHANGE___1719;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 680; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___1716;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 681; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_gcDevices__P2457.info = {"start":1732,"length":639,"line":55,"column":8,"endLine":74,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"gcDevices","argumentNames":["this"]}

function jacdac_Bus_gcDevices__P2457_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_gcDevices__P2457, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  now___12084: undefined,
  cutoff___12087: undefined,
  numdel___12093: undefined,
  i___12094: undefined,
  dev___12101: undefined,
  arg0: undefined,
} }





function jacdac_Client_announceCallback__P1793(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_announceCallback__P1793.info = {"start":31368,"length":21,"line":949,"column":8,"endLine":949,"endColumn":29,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"announceCallback","argumentNames":["this"]}

function jacdac_Client_announceCallback__P1793_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_announceCallback__P1793, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac___physGetTimestamp__P1316(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.recvQ___2295);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim.control.millis();
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac___physGetTimestamp__P1316.info = {"start":1523,"length":121,"line":52,"column":4,"endLine":55,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physGetTimestamp","argumentNames":[]}

function jacdac___physGetTimestamp__P1316_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physGetTimestamp__P1316, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_JDPacket_fromBinary__P1361(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___12137 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C1357_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P2322_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 481; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.p___12137 = (s.tmp_0);
    s.tmp_0 = r0 = s.p___12137;
    r0 = pxsim.BufferMethods.slice(s.arg0, 0, 16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_header"] = (s.tmp_1);
    s.tmp_0 = r0 = s.p___12137;
    s.tmp_2 = r0 = s.arg0;
    r0 = s.p___12137.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 12);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 16, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_data"] = (s.tmp_1);
    r0 = s.p___12137;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_fromBinary__P1361.info = {"start":1477,"length":230,"line":45,"column":8,"endLine":50,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"fromBinary","argumentNames":["buf"]}

function jacdac_JDPacket_fromBinary__P1361_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_fromBinary__P1361, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  p___12137: undefined,
  arg0: undefined,
} }





function jacdac___physGetPacket__P1315(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.recvQ___2295);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_Array_.removeAt(globals.recvQ___2295, 0);
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac___physGetPacket__P1315.info = {"start":1286,"length":115,"line":43,"column":4,"endLine":46,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physGetPacket","argumentNames":[]}

function jacdac___physGetPacket__P1315_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physGetPacket__P1315, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac___physId__P1313(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = 30;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physId__P1313.info = {"start":139,"length":59,"line":7,"column":4,"endLine":9,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physId","argumentNames":[]}

function jacdac___physId__P1313_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physId__P1313, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_Bus_start__P1737(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ControlServer__C1819_VT);
    s.tmp_5 = r0;
    s.tmp_6 = jacdac_ControlServer_constructor__P1820_mk(s);
    s.tmp_6.arg0 = s.tmp_5;
    s.callLocIdx = 674; s.pc = 4; return s.tmp_6;
  case 4:
    r0 = s.retval;
    r0 = (s.arg0).fields["controlServer"] = (s.tmp_5);
    s.tmp_0 = jacdac_Server_start__P1760_mk(s);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 675; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = jacdac_ControlServer_sendUptime__P1821_mk(s);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 676; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_start__P1737.info = {"start":1529,"length":193,"line":47,"column":8,"endLine":53,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Bus_start__P1737_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_start__P1737, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }





function jacdac_ControlServer_sendUptime__P1821(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___12174 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1819_VT)) failedCast(r0);
    r0 = pxsim.control.createBuffer(4);
    s.buf___12174 = (r0);
    s.tmp_0 = r0 = s.buf___12174;
    r0 = pxsim.control.micros();
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 0, s.tmp_1);
    s.tmp_0 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 4486;
    s.tmp_1.arg1 = s.buf___12174;
    s.callLocIdx = 884; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 885; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_sendUptime__P1821.info = {"start":38750,"length":216,"line":1170,"column":8,"endLine":1174,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendUptime","argumentNames":["this"]}

function jacdac_ControlServer_sendUptime__P1821_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_sendUptime__P1821, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  buf___12174: undefined,
  arg0: undefined,
} }





function jacdac_ControlServer_constructor__P1820(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1819_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P1753_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "ctrl";
    s.tmp_2.arg2 = 0;
    s.callLocIdx = 883; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_constructor__P1820.info = {"start":38686,"length":54,"line":1166,"column":8,"endLine":1168,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_ControlServer_constructor__P1820_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_constructor__P1820, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Bus_running__P1736(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_running__P1736.info = {"start":1454,"length":65,"line":43,"column":8,"endLine":45,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"running","argumentNames":["this"]}
jacdac_Bus_running__P1736.isGetter = true;

function jacdac_Bus_running__P1736_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_running__P1736, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_startProxy__P2494(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.settings._exists(globals.JACDAC_PROXY_SETTING___1823);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    s.tmp_3 = jacdac_log__P2461_mk(s);
    s.tmp_3.arg0 = "jacdac starting proxy";
    s.callLocIdx = 919; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_0 = settings_remove__P1090_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING___1823;
    s.callLocIdx = 920; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_0, 1, jacdac_startProxy_inline__P12209, 16);
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = globals.STATUS_EVENT___1728;
    s.tmp_0.arg2 = 200;
    s.callLocIdx = 924; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 3:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 4; continue; }
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 925; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    { step = 3; continue; }
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startProxy__P2494.info = {"start":43952,"length":760,"line":1310,"column":4,"endLine":1333,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"startProxy","argumentNames":[]}

function jacdac_startProxy__P2494_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startProxy__P2494, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function jacdac_startProxy_inline__P12209(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___12210 = undefined;
  case 1:
    s.tmp_1 = jacdac___physGetPacket__P1315_mk(s);
    s.callLocIdx = 922; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.buf___12210 = (r0);
    r0 = (null != s.tmp_0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_3 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_3.arg0 = globals.bus___1748;
    s.tmp_3.arg1 = globals.STATUS_EVENT___1728;
    s.tmp_3.arg2 = 201;
    s.callLocIdx = 923; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startProxy_inline__P12209.info = {"start":44303,"length":201,"line":1319,"column":67,"endLine":1324,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_startProxy_inline__P12209_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startProxy_inline__P12209, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buf___12210: undefined,
} }





function settings_exists__P1091(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._exists(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_exists__P1091.info = {"start":3828,"length":71,"line":155,"column":4,"endLine":157,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"exists","argumentNames":["key"]}

function settings_exists__P1091_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_exists__P1091, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac___physStart__P1318(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (globals.recvQ___2295 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_Array__mk();
    globals.recvQ___2295 = (r0);
    s.tmp_0 = control_simmessages_onReceived__P433_mk(s);
    s.tmp_0.arg0 = "jacdac";
    s.tmp_0.arg1 = jacdac___physStart_inline__P12236;
    s.callLocIdx = 478; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = pxsim.control.runInParallel(jacdac___physStart_inline__P12337);
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart__P1318.info = {"start":1919,"length":1277,"line":69,"column":4,"endLine":102,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physStart","argumentNames":[]}

function jacdac___physStart__P1318_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart__P1318, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac___physStart_inline__P12236(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.crc___12262 = undefined;
    s.num___12278 = undefined;
    s.b0___12279 = undefined;
    s.tmp___12289 = undefined;
    s.nextoff___12301 = undefined;
    s.skip___12320 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 != s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.BufferMethods.toHex(s.arg0);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("bad size in sim jdpkt: ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim.control.dmesg(s.tmp_4);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 0, s.tmp_1);
    s.arg0 = (r0);
  case 1:
  case 2:
    s.tmp_0 = jacdac_jdCrc16__P2296_mk(s);
    r0 = pxsim.BufferMethods.slice(s.arg0, 2, -1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 476; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.crc___12262 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.arg0, 4, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != s.crc___12262);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim.control.dmesg("bad crc in sim");
    { step = 8; continue; }
  case 3:
    s.num___12278 = (0);
    r0 = pxsim.BufferMethods.slice(s.arg0, 0, -1);
    s.b0___12279 = (r0);
  case 4:
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg0, 12);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 16);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 0, s.tmp_3);
    s.tmp___12289 = (r0);
    r0 = pxsim_Array__push(globals.recvQ___2295, s.tmp___12289);
    r0 = pxsim.BufferMethods.getByte(s.arg0, 12);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 16);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 + 3);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & -4);
    s.nextoff___12301 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.arg0, s.nextoff___12301, -1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 12, s.tmp_1);
    r0 = (s.nextoff___12301 - 12);
    s.skip___12320 = (r0);
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.skip___12320);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 2);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.skip___12320);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, 2, s.tmp_3);
    { step = 4; continue; }
  case 7:
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 1);
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart_inline__P12236.info = {"start":2063,"length":901,"line":72,"column":49,"endLine":94,"endColumn":9,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"inline","argumentNames":["buf"]}

function jacdac___physStart_inline__P12236_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart_inline__P12236, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  crc___12262: undefined,
  num___12278: undefined,
  b0___12279: undefined,
  tmp___12289: undefined,
  nextoff___12301: undefined,
  skip___12320: undefined,
  arg0: undefined,
} }





function jacdac___physStart_inline__P12337(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 2; continue; }
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 100);
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 500;
    s.callLocIdx = 480; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart_inline__P12337.info = {"start":3046,"length":143,"line":96,"column":30,"endLine":101,"endColumn":9,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"inline","argumentNames":[]}

function jacdac___physStart_inline__P12337_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart_inline__P12337, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function control_simmessages_onReceived__P433(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim_numops_toBoolDecr(globals.handlers___2213);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtrt.mkMap();
    globals.handlers___2213 = (r0);
  case 3:
  case 4:
    r0 = pxsim_pxtrt.mapSetGeneric(globals.handlers___2213, s.arg0, s.arg1);
    s.tmp_0 = control_onEvent__P389_mk(s);
    s.tmp_0.arg0 = 2999;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = control_simmessages_consumeMessages__P2214;
    s.tmp_0.arg3 = 16;
    s.callLocIdx = 113; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_simmessages_onReceived__P433.info = {"start":1063,"length":293,"line":32,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/base/controlmessage.ts","functionName":"onReceived","argumentNames":["channel","handler"]}

function control_simmessages_onReceived__P433_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_simmessages_onReceived__P433, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_simmessages_consumeMessages__P2214(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.channel___12359 = undefined;
    s.msg___12364 = undefined;
    s.handler___12367 = undefined;
  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.peekMessageChannel();
    s.channel___12359 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.channel___12359);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    { step = 8; continue; }
  case 2:
  case 3:
    r0 = pxsim_pxtcore.readMessageData();
    s.msg___12364 = (r0);
    s.tmp_0 = r0 = globals.handlers___2213;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    r0 = pxsim_pxtrt.mapGetGeneric(globals.handlers___2213, s.channel___12359);
  case 5:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.handler___12367 = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.handler___12367);
    if (!r0) { step = 6; continue; }
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___12367;
    s.tmp_0.arg0 = s.msg___12364;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 112; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 6:
  case 7:
    { step = 1; continue; }
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_simmessages_consumeMessages__P2214.info = {"start":564,"length":414,"line":15,"column":4,"endLine":27,"endColumn":5,"fileName":"pxt_modules/base/controlmessage.ts","functionName":"consumeMessages","argumentNames":[]}

function control_simmessages_consumeMessages__P2214_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_simmessages_consumeMessages__P2214, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  channel___12359: undefined,
  msg___12364: undefined,
  handler___12367: undefined,
} }





function control_onEvent__P389(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ctx___12379 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = control_eventContext__P406_mk(s);
    s.callLocIdx = 103; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.ctx___12379 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.ctx___12379);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.internalOnEvent(s.arg0, s.arg1, s.arg2, s.arg3);
    { step = 2; continue; }
  case 1:
    s.tmp_0 = control_EventContext_registerHandler__P403_mk(s);
    s.tmp_0.arg0 = s.ctx___12379;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = s.arg2;
    s.tmp_0.arg4 = s.arg3;
    s.callLocIdx = 104; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_onEvent__P389.info = {"start":336,"length":325,"line":9,"column":4,"endLine":15,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"onEvent","argumentNames":["src","value","handler","flags"]}

function control_onEvent__P389_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_onEvent__P389, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  ctx___12379: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function control_EventContext_registerHandler__P403(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___12402 = undefined;
    s.unnamed110___U1 = undefined;
    s.unnamed111___U2 = undefined;
    s.hn___12425 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventContext__C393_VT)) failedCast(r0);
    s.h___12402 = (undefined);
    r0 = s.arg0.fields["handlers"];
    s.unnamed110___U1 = (r0);
    s.unnamed111___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed111___U2;
    r0 = pxsim_Array__length(s.unnamed110___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed110___U1, s.unnamed111___U2);
    s.h___12402 = (r0);
    r0 = s.h___12402.fields["src"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = s.h___12402.fields["value"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.arg2);
  case 3:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 4; continue; }
    r0 = (s.h___12402).fields["flags"] = (s.arg4);
    r0 = (s.h___12402).fields["handler"] = (s.arg3);
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = (s.unnamed111___U2 + 1);
    s.unnamed111___U2 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed110___U1 = (undefined);
    r0 = pxsim_pxtcore_mkClassInstance(control_EventHandler__C2199_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_EventHandler_constructor__P2202_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = s.arg3;
    s.tmp_1.arg4 = s.arg4;
    s.callLocIdx = 106; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.hn___12425 = (s.tmp_0);
    r0 = s.arg0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.hn___12425);
    s.tmp_0 = control_EventHandler_register__P2200_mk(s);
    s.tmp_0.arg0 = s.hn___12425;
    s.callLocIdx = 107; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventContext_registerHandler__P403.info = {"start":5573,"length":525,"line":169,"column":8,"endLine":182,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"registerHandler","argumentNames":["this","src","value","handler","flags"]}

function control_EventContext_registerHandler__P403_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventContext_registerHandler__P403, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  h___12402: undefined,
  unnamed110___U1: undefined,
  unnamed111___U2: undefined,
  hn___12425: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function control_EventHandler_register__P2200(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventHandler__C2199_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkAction(1, control_EventHandler_register_inline__P12446);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = s.arg0.fields["src"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["value"];
    s.tmp_2 = r0;
    r0 = s.arg0.fields["flags"];
    s.tmp_3 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, s.tmp_2, s.tmp_0, s.tmp_3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_register__P2200.info = {"start":961,"length":165,"line":30,"column":8,"endLine":34,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"register","argumentNames":["this"]}

function control_EventHandler_register__P2200_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_register__P2200, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function control_EventHandler_register_inline__P12446(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = s.caps[0].fields["handler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = if_handler_1_mk(s);
    s.tmp_1.arg0 = s.caps[0];
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "handler"), 1);
      s.callLocIdx = 105; s.pc = 3; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["handler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["handler"], 1); s.callLocIdx = 105; s.pc = 3; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 105; s.pc = 3; return s.tmp_1;; }
     else { s.callLocIdx = 105; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_register_inline__P12446.info = {"start":1032,"length":71,"line":31,"column":58,"endLine":33,"endColumn":13,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":[]}

function control_EventHandler_register_inline__P12446_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_register_inline__P12446, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function control_EventHandler_constructor__P2202(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventHandler__C2199_VT)) failedCast(r0);
    r0 = (s.arg0).fields["src"] = (s.arg1);
    r0 = (s.arg0).fields["value"] = (s.arg2);
    r0 = (s.arg0).fields["handler"] = (s.arg3);
    r0 = (s.arg0).fields["flags"] = (s.arg4);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_constructor__P2202.info = {"start":786,"length":165,"line":23,"column":8,"endLine":28,"endColumn":13,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":["this","src","value","handler","flags"]}

function control_EventHandler_constructor__P2202_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_constructor__P2202, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function control_eventContext__P406(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.eventContexts___2207);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = r0 = globals.eventContexts___2207;
    r0 = pxsim_Array__length(globals.eventContexts___2207);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 1);
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, s.tmp_1);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
control_eventContext__P406.info = {"start":6907,"length":136,"line":209,"column":4,"endLine":211,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"eventContext","argumentNames":[]}

function control_eventContext__P406_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_eventContext__P406, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function jacdac___physIsRunning__P1317(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (globals.recvQ___2295 != null);
    return leave(s, r0)
  default: oops()
} } }
jacdac___physIsRunning__P1317.info = {"start":1743,"length":79,"line":61,"column":4,"endLine":63,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physIsRunning","argumentNames":[]}

function jacdac___physIsRunning__P1317_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physIsRunning__P1317, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_Bus_constructor__P1735(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1730_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["hostServices"] = (s.tmp_3);
    s.tmp_4 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["devices"] = (s.tmp_5);
    r0 = (s.arg0).fields["restartCounter"] = (0);
    r0 = (s.arg0).fields["resetIn"] = (2000000);
    r0 = (s.arg0).fields["autoBindCnt"] = (0);
    r0 = (s.arg0).fields["_eventCounter"] = (0);
    s.tmp_6 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_7 = r0;
    r0 = (s.tmp_6).fields["unattachedClients"] = (s.tmp_7);
    s.tmp_8 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_9 = r0;
    r0 = (s.tmp_8).fields["allClients"] = (s.tmp_9);
    s.tmp_10 = jacdac_EventSource_constructor__P1830_mk(s);
    s.tmp_10.arg0 = s.arg0;
    s.callLocIdx = 672; s.pc = 1; return s.tmp_10;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_constructor__P1735.info = {"start":1399,"length":45,"line":39,"column":8,"endLine":41,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_Bus_constructor__P1735_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_constructor__P1735, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  arg0: undefined,
} }





function settings_initScopes__P2240(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.rn___12468 = undefined;
    s.tmp_1 = settings_runNumber__P1079_mk(s);
    s.callLocIdx = 117; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
    s.rn___12468 = (r0);
    s.tmp_0 = settings_writeNumber__P1083_mk(s);
    s.tmp_0.arg0 = globals.RUN_KEY___2228;
    s.tmp_0.arg1 = s.rn___12468;
    s.callLocIdx = 118; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = pxsim.control.deviceSerialNumber();
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2147483647);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.seedAddRandom(s.tmp_0);
    r0 = pxsim_pxtcore.seedAddRandom(s.rn___12468);
    s.tmp_0 = settings_setScope__P2239_mk(s);
    r0 = pxsim_pxtcore.programName();
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 119; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_initScopes__P2240.info = {"start":1104,"length":230,"line":41,"column":4,"endLine":49,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"initScopes","argumentNames":[]}

function settings_initScopes__P2240_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_initScopes__P2240, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  rn___12468: undefined,
} }





function settings_setScope__P2239(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.currScope___12497 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 100);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtrt.panic(922);
  case 3:
  case 4:
    s.tmp_0 = settings_readString__P1086_mk(s);
    s.tmp_0.arg0 = globals.SCOPE_KEY___2229;
    s.callLocIdx = 115; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.currScope___12497 = (r0);
    r0 = (s.currScope___12497 != s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim.settings._userClean();
    s.tmp_0 = settings_writeString__P1082_mk(s);
    s.tmp_0.arg0 = globals.SCOPE_KEY___2229;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 116; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_setScope__P2239.info = {"start":826,"length":272,"line":31,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"setScope","argumentNames":["scope"]}

function settings_setScope__P2239_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_setScope__P2239, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  currScope___12497: undefined,
  arg0: undefined,
} }





function settings_runNumber__P1079(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_1 = settings_readNumber__P1087_mk(s);
    s.tmp_1.arg0 = globals.RUN_KEY___2228;
    s.callLocIdx = 114; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
settings_runNumber__P1079.info = {"start":745,"length":75,"line":27,"column":4,"endLine":29,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"runNumber","argumentNames":[]}

function settings_runNumber__P1079_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_runNumber__P1079, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function settings_readNumber__P1087(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___12515 = undefined;
    s.nums___12522 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._get(s.arg0);
    s.buf___12515 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.buf___12515);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 7; continue; }
    { step = 6; continue; }
  case 1:
    s.tmp_2 = msgpack_unpackNumberArray__P181_mk(s);
    s.tmp_2.arg0 = s.buf___12515;
    s.tmp_2.arg1 = 0;
    s.callLocIdx = 126; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.nums___12522 = (r0);
    s.tmp_0 = r0 = s.nums___12522;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim_Array__length(s.nums___12522);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 1);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.nums___12522, 0);
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = undefined;
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
settings_readNumber__P1087.info = {"start":2887,"length":313,"line":114,"column":4,"endLine":124,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readNumber","argumentNames":["key"]}

function settings_readNumber__P1087_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readNumber__P1087, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___12515: undefined,
  nums___12522: undefined,
  arg0: undefined,
} }





function msgpack_unpackNumberArray__P181(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___12535 = undefined;
    s.fmt___12542 = undefined;
    s.v___12551 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___12535 = (r0);
  case 1:
    s.tmp_1 = r0 = s.arg1;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.tmp_3 = r0 = s.arg1;
    r0 = (s.tmp_3 + 1);
    s.arg1 = (r0);
    s.tmp_4 = msgpack_tagFormat__P2143_mk(s);
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.tmp_3);
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 24; s.pc = 12; return s.tmp_4;
  case 12:
    r0 = s.retval;
    s.fmt___12542 = (r0);
    r0 = (s.fmt___12542 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = (s.arg1 - 1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 6, s.tmp_2);
    s.v___12551 = (r0);
    r0 = (-31 <= s.v___12551);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.v___12551 <= 127);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__push(s.res___12535, s.v___12551);
    { step = 5; continue; }
  case 4:
    r0 = null;
    { step = 11; continue; }
  case 5:
    { step = 7; continue; }
  case 6:
    s.tmp_0 = r0 = s.res___12535;
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt___12542, s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_0 = r0 = s.arg1;
    s.tmp_2 = pins_sizeOf__P173_mk(s);
    s.tmp_2.arg0 = s.fmt___12542;
    s.callLocIdx = 25; s.pc = 13; return s.tmp_2;
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.arg1 = (r0);
  case 7:
  case 8:
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === 193);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = (s.arg1 + 1);
    s.arg1 = (r0);
    { step = 8; continue; }
  case 9:
    { step = 1; continue; }
  case 10:
    r0 = s.res___12535;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
msgpack_unpackNumberArray__P181.info = {"start":2650,"length":669,"line":91,"column":4,"endLine":111,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"unpackNumberArray","argumentNames":["buf","offset"]}

function msgpack_unpackNumberArray__P181_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_unpackNumberArray__P181, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  res___12535: undefined,
  fmt___12542: undefined,
  v___12551: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_EventContext_constructor__P397(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventContext__C393_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handlers"] = (s.tmp_1);
    r0 = (s.arg0).fields["framesInSample"] = (0);
    r0 = (s.arg0).fields["timeInSample"] = (0);
    r0 = (s.arg0).fields["deltaTimeMillis"] = (0);
    r0 = (s.arg0).fields["frameWorker"] = (0);
    r0 = (s.arg0).fields["idleCallbacks"] = (undefined);
    r0 = pxsim_numops_toBoolDecr(globals.control_EventContext_lastStats___395);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_String_.mkEmpty();
    globals.control_EventContext_lastStats___395 = (r0);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventContext_constructor__P397.info = {"start":1740,"length":347,"line":58,"column":8,"endLine":68,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":["this"]}

function control_EventContext_constructor__P397_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventContext_constructor__P397, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_ControlServer_handlePacketOuter__P1822(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1819_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1382_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 892; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = jacdac_JDPacket_regCode__P1383_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 893; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtcore.switch_eq(390, s.tmp_2);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(384, s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 1:
    s.tmp_4 = jacdac_ControlServer_sendUptime__P1821_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 894; s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
    { step = 3; continue; }
  case 2:
    s.tmp_0 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1.arg0 = r0;
    r0 = pxsim_pxtcore.programName();
    s.tmp_3 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_3);
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 896; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 897; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
  case 3:
    { step = 10; continue; }
  case 4:
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 5:
    s.tmp_2 = jacdac_Bus_queueAnnounce__P1741_mk(s);
    s.tmp_2.arg0 = globals.bus___1748;
    s.callLocIdx = 899; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    { step = 9; continue; }
  case 6:
    s.tmp_0 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "identify";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = globals.IDENTIFY___1729;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 900; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P1834_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.tmp_0.arg1 = globals.STATUS_EVENT___1728;
    s.tmp_0.arg2 = 202;
    s.callLocIdx = 901; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    { step = 9; continue; }
  case 7:
    s.tmp_0 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "reset requested";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    setupResume(s, 21);
    pxsim.control.reset();
    checkResumeConsumed();
    return;
  case 21:
    r0 = s.retval;
    { step = 9; continue; }
  case 8:
    s.tmp_0 = jacdac_Server__C1750_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "flood";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1750_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    s.tmp_0 = jacdac_ControlServer_handleFloodPing__P2476_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 902; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
  case 9:
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_handlePacketOuter__P1822.info = {"start":39955,"length":1430,"line":1201,"column":8,"endLine":1238,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_ControlServer_handlePacketOuter__P1822_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_handlePacketOuter__P1822, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ControlServer_handleFloodPing__P2476(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numResponses___12661 = undefined;
    s.counter___12662 = undefined;
    s.size___12663 = undefined;
    s.payload___12664 = undefined;
    s.i___12670 = undefined;
    s.queuePing___12684 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1819_VT)) failedCast(r0);
    r0 = pxsim_pxtrt.mklocRef();
    s.numResponses___12661 = (r0);
    s.tmp_0 = r0 = s.numResponses___12661;
    s.tmp_3 = jacdac_JDPacket_jdunpack__P1389_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = "u32 u32 u8";
    s.callLocIdx = 886; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_Array__getAt(s.tmp_2, 0);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    r0 = pxsim_pxtrt.mklocRef();
    s.counter___12662 = (r0);
    s.tmp_4 = r0 = s.counter___12662;
    r0 = pxsim_Array__getAt(s.tmp_2, 1);
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_4, s.tmp_5);
    r0 = pxsim_Array__getAt(s.tmp_2, 2);
    s.size___12663 = (r0);
    r0 = (4 + s.size___12663);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.payload___12664 = (r0);
    s.i___12670 = (0);
  case 1:
    r0 = (s.i___12670 < s.size___12663);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.payload___12664;
    r0 = (4 + s.i___12670);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.i___12670);
    r0 = (s.i___12670 + 1);
    s.i___12670 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = pxsim_pxtcore_mkAction(4, queuePing_inline__P12685);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.numResponses___12661);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.payload___12664);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.counter___12662);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 3, s.arg0);
    s.queuePing___12684 = (s.tmp_0);
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_0, 101, s.queuePing___12684, 16);
    s.tmp_0 = lambda_1_mk(s);
    s.tmp_0.argL = s.queuePing___12684;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 891; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_handleFloodPing__P2476.info = {"start":38976,"length":969,"line":1176,"column":8,"endLine":1199,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleFloodPing","argumentNames":["this","pkt"]}

function jacdac_ControlServer_handleFloodPing__P2476_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_handleFloodPing__P2476, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  numResponses___12661: undefined,
  counter___12662: undefined,
  size___12663: undefined,
  payload___12664: undefined,
  i___12670: undefined,
  queuePing___12684: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function queuePing_inline__P12685(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 30;
    s.tmp_2 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_2, 101, jacdac_doNothing__P2474, 16);
    { step = 2; continue; }
  case 1:
    s.tmp_0 = r0 = s.caps[1];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[2]);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 0, s.tmp_1);
    s.tmp_0 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_0.arg0 = s.caps[3];
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 131;
    s.tmp_1.arg1 = s.caps[1];
    s.callLocIdx = 888; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 889; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0 = s.caps[0];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 1);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    s.tmp_0 = r0 = s.caps[2];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[2]);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
queuePing_inline__P12685.info = {"start":39278,"length":553,"line":1181,"column":30,"endLine":1196,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function queuePing_inline__P12685_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: queuePing_inline__P12685, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function jacdac_doNothing__P2474(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_doNothing__P2474.info = {"start":38605,"length":23,"line":1163,"column":4,"endLine":1163,"endColumn":27,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"doNothing","argumentNames":[]}

function jacdac_doNothing__P2474_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_doNothing__P2474, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket__P1660(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.name___12756 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1657_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegBool__P2382_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 128;
    r0 = s.arg0.fields["autoBind"];
    s.tmp_2.arg3 = r0;
    s.callLocIdx = 614; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["autoBind"] = (s.tmp_1);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(4481, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(128, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(132, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_0;
    { step = 15; continue; }
  case 1:
    s.tmp_3 = helpers_arrayEvery__P108_mk(s);
    r0 = globals.bus___1748.fields["allClients"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12743;
    s.callLocIdx = 616; s.pc = 17; return s.tmp_3;
  case 17:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = 1;
    { step = 3; continue; }
  case 2:
    r0 = 0;
  case 3:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_Array__mk();
    s.tmp_5 = r0;
    r0 = pxsim_Array__push(s.tmp_5, s.tmp_4);
    s.tmp_6 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.tmp_7 = jacdac_JDPacket_jdpacked__P1364_mk(s);
    s.tmp_7.arg0 = 4481;
    s.tmp_7.arg1 = "u8";
    s.tmp_7.arg2 = s.tmp_5;
    s.callLocIdx = 617; s.pc = 19; return s.tmp_7;
  case 19:
    r0 = s.retval;
    s.tmp_6.arg1 = r0;
    s.callLocIdx = 618; s.pc = 18; return s.tmp_6;
  case 18:
    r0 = s.retval;
    { step = 15; continue; }
  case 4:
    r0 = s.arg1.fields["_data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 9);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_4 = jacdac__rolemgr_getRole__P1655_mk(s);
    r0 = s.arg1.fields["_data"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_6, 0, 8);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_5);
    s.tmp_4.arg0 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_7, 8);
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 622; s.pc = 20; return s.tmp_4;
  case 20:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_3;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_String_.mkEmpty();
  case 6:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    s.name___12756 = (s.tmp_8);
    s.tmp_0 = jacdac_Server_sendReport__P2374_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P1362_mk(s);
    s.tmp_1.arg0 = 128;
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    r0 = s.arg1.fields["_data"];
    s.tmp_2.arg0 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.name___12756);
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 624; s.pc = 23; return s.tmp_2;
  case 23:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 625; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 626; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
  case 7:
  case 8:
    { step = 15; continue; }
  case 9:
    r0 = s.arg1.fields["_data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 9);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.tmp_3 = jacdac__rolemgr_setRole__P1656_mk(s);
    r0 = s.arg1.fields["_data"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_5, 0, 8);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_4);
    s.tmp_3.arg0 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_6, 8);
    s.tmp_3.arg1 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_8, 9, -1);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_7);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 631; s.pc = 24; return s.tmp_3;
  case 24:
    r0 = s.retval;
  case 10:
  case 11:
    { step = 15; continue; }
  case 12:
    s.tmp_0 = jacdac_OutPipe_respondForEach__P1432_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = settings_list__P1089_mk(s);
    s.tmp_1.arg0 = globals.roleSettingPrefix___2437;
    s.callLocIdx = 632; s.pc = 26; return s.tmp_1;
  case 26:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12801;
    s.callLocIdx = 639; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
    { step = 15; continue; }
  case 13:
    s.tmp_0 = jacdac_OutPipe_respondForEach__P1432_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = globals.bus___1748.fields["allClients"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = packName__P12833;
    s.callLocIdx = 640; s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
    { step = 15; continue; }
  case 14:
    s.tmp_0 = jacdac__rolemgr_clearRoles__P1654_mk(s);
    s.callLocIdx = 641; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
  case 15:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket__P1660.info = {"start":4712,"length":3468,"line":130,"column":8,"endLine":216,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket__P1660_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket__P1660, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  name___12756: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12743(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["broadcast"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["device"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12743.info = {"start":5394,"length":30,"line":146,"column":36,"endLine":146,"endColumn":66,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["c"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12743_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12743, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12801(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.name___12803 = undefined;
    s.len___12807 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = settings_readString__P1086_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 633; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.name___12803 = (r0);
    r0 = pxsim_String_.length(globals.roleSettingPrefix___2437);
    s.len___12807 = (r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    s.tmp_2 = Buffer_fromHex__P204_mk(s);
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.len___12807;
    r0 = (s.len___12807 + 16);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 634; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 635; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_5 = parseInt__P97_mk(s);
    s.tmp_6 = helpers_stringSlice__P119_mk(s);
    s.tmp_6.arg0 = s.arg0;
    r0 = (s.len___12807 + 16);
    s.tmp_6.arg1 = r0;
    s.tmp_6.arg2 = undefined;
    s.callLocIdx = 636; s.pc = 5; return s.tmp_6;
  case 5:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = undefined;
    s.callLocIdx = 637; s.pc = 4; return s.tmp_5;
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_4);
    r0 = pxsim_Array__push(s.tmp_0, s.name___12803);
    s.tmp_7 = jacdac_jdpack__P1408_mk(s);
    s.tmp_7.arg0 = "b[8] u8 s";
    s.tmp_7.arg1 = s.tmp_0;
    s.callLocIdx = 638; s.pc = 6; return s.tmp_7;
  case 6:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12801.info = {"start":6863,"length":420,"line":181,"column":24,"endLine":189,"endColumn":25,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["k"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12801_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P12801, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  name___12803: undefined,
  len___12807: undefined,
  arg0: undefined,
} }





function packName__P12833(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.devid___12836 = undefined;
    s.servidx___12846 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = Buffer_fromHex__P204_mk(s);
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 642; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.control.createBuffer(8);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.devid___12836 = (s.tmp_2);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["serviceIndex"];
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.servidx___12846 = (s.tmp_1);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.devid___12836);
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = pxsim_Array__push(s.tmp_0, s.servidx___12846);
    r0 = s.arg0.fields["role"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_2);
    s.tmp_3 = jacdac_jdpack__P1408_mk(s);
    s.tmp_3.arg0 = "b[8] u32 u8 s";
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 643; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
packName__P12833.info = {"start":7742,"length":428,"line":204,"column":12,"endLine":215,"endColumn":13,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"packName","argumentNames":["c"]}

function packName__P12833_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: packName__P12833, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  devid___12836: undefined,
  servidx___12846: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_clearRoles__P1654(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = helpers_arrayForEach__P109_mk(s);
    s.tmp_1 = settings_list__P1089_mk(s);
    s.tmp_1.arg0 = globals.roleSettingPrefix___2437;
    s.callLocIdx = 597; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = settings_remove__P1090;
    s.callLocIdx = 598; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1740_mk(s);
    s.tmp_0.arg0 = globals.bus___1748;
    s.callLocIdx = 599; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_clearRoles__P1654.info = {"start":71,"length":140,"line":3,"column":4,"endLine":6,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"clearRoles","argumentNames":[]}

function jacdac__rolemgr_clearRoles__P1654_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_clearRoles__P1654, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function settings_list__P1089(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_String_.mkEmpty();
    s.arg0 = (r0);
  case 1:
  case 2:
    r0 = pxsim.settings._list(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_list__P1089.info = {"start":3544,"length":107,"line":140,"column":4,"endLine":143,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"list","argumentNames":["prefix"]}

function settings_list__P1089_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_list__P1089, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_respondForEach__P1432(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkAction(3, jacdac_OutPipe_respondForEach_inline__P12878);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.arg2);
    r0 = pxsim.control.runInParallel(s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_respondForEach__P1432.info = {"start":3112,"length":408,"line":113,"column":8,"endLine":123,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"respondForEach","argumentNames":["pkt","inp","f"]}

function jacdac_OutPipe_respondForEach__P1432_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_respondForEach__P1432, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_OutPipe_respondForEach_inline__P12878(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.outp___12880 = undefined;
    s.e___12885 = undefined;
    s.unnamed134___U2 = undefined;
    s.unnamed135___U3 = undefined;
    s.e___12893 = undefined;
    r0 = pxsim_pxtcore.beginTry(3);
    s.tmp_0 = jacdac_OutPipe_from__P1431_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 572; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.outp___12880 = (r0);
    s.e___12885 = (undefined);
    s.unnamed134___U2 = (s.caps[1]);
    s.unnamed135___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed135___U3;
    r0 = pxsim_Array__length(s.unnamed134___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed134___U2, s.unnamed135___U3);
    s.e___12885 = (r0);
    s.tmp_2 = jacdac_OutPipe_write__P1434_mk(s);
    s.tmp_2.arg0 = s.outp___12880;
    s.tmp_3 = lambda_2_mk(s);
    s.tmp_3.argL = s.caps[2];
    s.tmp_3.arg0 = s.e___12885;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 573; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 574; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    r0 = (s.unnamed135___U3 + 1);
    s.unnamed135___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed134___U2 = (undefined);
    s.tmp_0 = jacdac_OutPipe_close__P1436_mk(s);
    s.tmp_0.arg0 = s.outp___12880;
    s.callLocIdx = 575; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___12893 = (r0);
    s.tmp_0 = console_error__P377_mk(s);
    if ((s.e___12893) && (s.e___12893).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.e___12893);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.e___12893) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("respondForEach ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 576; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_respondForEach_inline__P12878.info = {"start":3219,"length":290,"line":114,"column":34,"endLine":122,"endColumn":13,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"inline","argumentNames":[]}

function jacdac_OutPipe_respondForEach_inline__P12878_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_respondForEach_inline__P12878, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  outp___12880: undefined,
  e___12885: undefined,
  unnamed134___U2: undefined,
  unnamed135___U3: undefined,
  e___12893: undefined,
} }





function console_error__P377(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = 3;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 58; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_error__P377.info = {"start":1132,"length":82,"line":46,"column":4,"endLine":48,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"error","argumentNames":["text"]}

function console_error__P377_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_error__P377, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_close__P1436(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1429_VT)) failedCast(r0);
    s.tmp_0 = jacdac_OutPipe_writeAndClose__P1435_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 582; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_close__P1436.info = {"start":4333,"length":68,"line":154,"column":8,"endLine":156,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"close","argumentNames":["this"]}

function jacdac_OutPipe_close__P1436_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_close__P1436, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_writeAndClose__P1435(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1429_VT)) failedCast(r0);
    s.tmp_0 = jacdac_OutPipe_writeEx__P2398_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 32;
    s.callLocIdx = 581; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_writeAndClose__P1435.info = {"start":4243,"length":80,"line":150,"column":8,"endLine":152,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"writeAndClose","argumentNames":["this","buf"]}

function jacdac_OutPipe_writeAndClose__P1435_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_writeAndClose__P1435, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_OutPipe_writeEx__P2398(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pkt___12920 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1429_VT)) failedCast(r0);
    r0 = s.arg0.fields["port"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 7; continue; }
  case 1:
  case 2:
    s.tmp_3 = jacdac_JDPacket_from__P1362_mk(s);
    r0 = s.arg0.fields["nextCnt"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 31);
    s.tmp_5 = r0;
    r0 = s.arg0.fields["port"];
    s.tmp_8 = r0;
    r0 = (s.tmp_8 << 7);
    s.tmp_7 = r0;
    r0 = (s.tmp_5 | s.tmp_7);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | s.arg2);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.arg1;
    s.callLocIdx = 577; s.pc = 8; return s.tmp_3;
  case 8:
    r0 = s.retval;
    s.pkt___12920 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["nextCnt"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextCnt"] = (s.tmp_1);
    r0 = (s.arg2 & 32);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = (s.arg0).fields["port"] = (null);
  case 3:
  case 4:
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1374_mk(s);
    s.tmp_0.arg0 = s.pkt___12920;
    s.tmp_0.arg1 = 62;
    s.callLocIdx = 578; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.tmp_3 = jacdac_JDPacket__sendWithAck__P1402_mk(s);
    s.tmp_3.arg0 = s.pkt___12920;
    r0 = s.arg0.fields["deviceId"];
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 579; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = (s.arg0).fields["port"] = (null);
    r0 = pxsim_pxtcore.throwValue("out pipe error: no ACK");
  case 5:
  case 6:
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_writeEx__P2398.info = {"start":3595,"length":565,"line":129,"column":8,"endLine":144,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"writeEx","argumentNames":["this","buf","flags"]}

function jacdac_OutPipe_writeEx__P2398_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_writeEx__P2398, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  pkt___12920: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket__sendWithAck__P1402(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.aw___12978 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = false;
    { step = 7; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_requiresAck__P1372_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = true;
    s.callLocIdx = 527; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmdId__P1400_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 528; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(globals.ackAwaiters___2319);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_Array__mk();
    globals.ackAwaiters___2319 = (r0);
    r0 = pxsim.control.runInParallel(jacdac_JDPacket__sendWithAck_inline__P12972);
  case 3:
  case 4:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_AckAwaiter__C2323_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_AckAwaiter_constructor__P2324_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.callLocIdx = 531; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    s.aw___12978 = (s.tmp_0);
    r0 = pxsim_Array__push(globals.ackAwaiters___2319, s.aw___12978);
  case 5:
    r0 = s.aw___12978.fields["nextRetry"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.aw___12978.fields["eventId"];
    s.tmp_2 = r0;
    setupResume(s, 11);
    pxsim.control.waitForEvent(1023, s.tmp_2);
    checkResumeConsumed();
    return;
  case 11:
    r0 = s.retval;
    { step = 5; continue; }
  case 6:
    r0 = s.aw___12978.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 0);
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendWithAck__P1402.info = {"start":8291,"length":675,"line":266,"column":8,"endLine":286,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendWithAck","argumentNames":["this","devId"]}

function jacdac_JDPacket__sendWithAck__P1402_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendWithAck__P1402, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  aw___12978: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendWithAck_inline__P12972(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

  case 1:
    r0 = pxsim_numops_toBoolDecr(1);
    if (!r0) { step = 2; continue; }
    s.tmp_0 = pause__P411_mk(s);
    r0 = pxsim.Math_.randomRange(20, 50);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 529; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_checkAckAwaiters__P2325_mk(s);
    s.callLocIdx = 530; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendWithAck_inline__P12972.info = {"start":8533,"length":178,"line":273,"column":38,"endLine":278,"endColumn":17,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":[]}

function jacdac_JDPacket__sendWithAck_inline__P12972_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendWithAck_inline__P12972, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_AckAwaiter_constructor__P2324(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_AckAwaiter__C2323_VT)) failedCast(r0);
    r0 = (s.arg0).fields["pkt"] = (s.arg1);
    r0 = (s.arg0).fields["srcId"] = (s.arg2);
    r0 = (s.arg0).fields["numTries"] = (1);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg1.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["crc"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 40);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextRetry"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["eventId"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_AckAwaiter_constructor__P2324.info = {"start":9114,"length":265,"line":294,"column":8,"endLine":301,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["this","pkt","srcId"]}

function jacdac_AckAwaiter_constructor__P2324_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_AckAwaiter_constructor__P2324, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_checkAckAwaiters__P2325(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___13015 = undefined;
    s.toRetry___13018 = undefined;
    s.a___13032 = undefined;
    s.unnamed126___U3 = undefined;
    s.unnamed127___U4 = undefined;
    r0 = pxsim.control.millis();
    s.now___13015 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, toRetry_inline__P13020);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.now___13015);
    s.tmp_1 = helpers_arrayFilter__P110_mk(s);
    s.tmp_1.arg0 = globals.ackAwaiters___2319;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 533; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.toRetry___13018 = (r0);
    r0 = pxsim_Array__length(s.toRetry___13018);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 10; continue; }
  case 1:
  case 2:
    s.a___13032 = (undefined);
    s.unnamed126___U3 = (s.toRetry___13018);
    s.unnamed127___U4 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed127___U4;
    r0 = pxsim_Array__length(s.unnamed126___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed126___U3, s.unnamed127___U4);
    s.a___13032 = (r0);
    r0 = s.a___13032.fields["nextRetry"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    { step = 8; continue; }
  case 4:
  case 5:
    r0 = s.a___13032.fields["numTries"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 >= 4);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 6; continue; }
    r0 = (s.a___13032).fields["nextRetry"] = (-1);
    r0 = s.a___13032.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0);
    { step = 7; continue; }
  case 6:
    s.tmp_0 = r0 = s.a___13032;
    r0 = s.tmp_0.fields["numTries"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["numTries"] = (s.tmp_1);
    s.tmp_0 = r0 = s.a___13032;
    s.tmp_2 = r0 = s.now___13015;
    r0 = s.a___13032.fields["numTries"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 * 40);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextRetry"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDPacket__sendCore__P1397_mk(s);
    r0 = s.a___13032.fields["pkt"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 534; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.unnamed127___U4 + 1);
    s.unnamed127___U4 = (r0);
    { step = 3; continue; }
  case 9:
    s.unnamed126___U3 = (undefined);
    s.tmp_0 = helpers_arrayFilter__P110_mk(s);
    s.tmp_0.arg0 = globals.ackAwaiters___2319;
    s.tmp_0.arg1 = jacdac_checkAckAwaiters_inline__P13067;
    s.callLocIdx = 535; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    globals.ackAwaiters___2319 = (r0);
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_checkAckAwaiters__P2325.info = {"start":9391,"length":646,"line":304,"column":4,"endLine":320,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"checkAckAwaiters","argumentNames":[]}

function jacdac_checkAckAwaiters__P2325_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_checkAckAwaiters__P2325, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  now___13015: undefined,
  toRetry___13018: undefined,
  a___13032: undefined,
  unnamed126___U3: undefined,
  unnamed127___U4: undefined,
} }





function toRetry_inline__P13020(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.caps[0] > s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
toRetry_inline__P13020.info = {"start":9501,"length":22,"line":306,"column":43,"endLine":306,"endColumn":65,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function toRetry_inline__P13020_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: toRetry_inline__P13020, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_checkAckAwaiters_inline__P13067(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_checkAckAwaiters_inline__P13067.info = {"start":10010,"length":20,"line":319,"column":41,"endLine":319,"endColumn":61,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function jacdac_checkAckAwaiters_inline__P13067_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_checkAckAwaiters_inline__P13067, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_write__P1434(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1429_VT)) failedCast(r0);
    s.tmp_0 = jacdac_OutPipe_writeEx__P2398_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 580; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_write__P1434.info = {"start":4170,"length":63,"line":146,"column":8,"endLine":148,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"write","argumentNames":["this","buf"]}

function jacdac_OutPipe_write__P1434_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_write__P1434, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_OutPipe_from__P1431(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idbuf___13081 = undefined;
    s.port___13082 = undefined;
    s.id___13083 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = jacdac_jdunpack__P1407_mk(s);
    r0 = s.arg0.fields["_data"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = "b[8] u16";
    s.callLocIdx = 570; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.idbuf___13081 = (r0);
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s.port___13082 = (r0);
    r0 = pxsim.BufferMethods.toHex(s.idbuf___13081);
    s.id___13083 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_OutPipe__C1429_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_OutPipe_constructor__P1430_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.id___13083;
    s.tmp_1.arg2 = s.port___13082;
    s.callLocIdx = 571; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_from__P1431.info = {"start":2857,"length":245,"line":104,"column":8,"endLine":111,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"from","argumentNames":["pkt"]}

function jacdac_OutPipe_from__P1431_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_from__P1431, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  idbuf___13081: undefined,
  port___13082: undefined,
  id___13083: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_constructor__P1430(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1429_VT)) failedCast(r0);
    r0 = (s.arg0).fields["deviceId"] = (s.arg1);
    r0 = (s.arg0).fields["port"] = (s.arg2);
    r0 = (s.arg0).fields["nextCnt"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_constructor__P1430.info = {"start":2778,"length":69,"line":102,"column":8,"endLine":102,"endColumn":77,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"inline","argumentNames":["this","deviceId","port"]}

function jacdac_OutPipe_constructor__P1430_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_constructor__P1430, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Server_handleRegBool__P2382(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___13096 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1750_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_Server_handleRegValue__P2381_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = "u8";
    s.tmp_1.arg4 = s.tmp_0;
    s.callLocIdx = 774; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.res___13096 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.res___13096);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegBool__P2382.info = {"start":15887,"length":326,"line":464,"column":8,"endLine":476,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegBool","argumentNames":["this","pkt","register","current"]}

function jacdac_Server_handleRegBool__P2382_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegBool__P2382, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  res___13096: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_LoggerServer_log__P1577(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1572_VT)) failedCast(r0);
    s.tmp_0 = jacdac_LoggerServer_add__P1580_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 591; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_log__P1577.info = {"start":1576,"length":95,"line":40,"column":8,"endLine":42,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"log","argumentNames":["this","message"]}

function jacdac_LoggerServer_log__P1577_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_log__P1577, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_LoggerServer_handlePacket__P1575(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___13127 = undefined;
    s.d___13130 = undefined;
    s.elapsed___13135 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1572_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P2381_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 128;
    s.tmp_2.arg3 = "u8";
    r0 = s.arg0.fields["minPriority"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 588; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["minPriority"] = (s.tmp_1);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(8320, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 1:
    r0 = pxsim.control.millis();
    s.now___13127 = (r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P1389_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = "u8";
    s.callLocIdx = 590; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.d___13130 = (r0);
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_0 = r0;
    r0 = (s.now___13127 - s.tmp_0);
    s.elapsed___13135 = (r0);
    r0 = s.arg0.fields["minPriority"];
    s.tmp_1 = r0;
    r0 = (s.d___13130 <= s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.elapsed___13135 > 1500);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = (s.arg0).fields["minPriority"] = (s.d___13130);
    r0 = (s.arg0).fields["_lastListenerTime"] = (s.now___13127);
  case 4:
  case 5:
    r0 = s.arg0.fields["minPriority"];
    s.tmp_1 = r0;
    r0 = (globals.minPriority___373 > s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.arg0.fields["minPriority"];
    globals.minPriority___373 = (r0);
  case 6:
  case 7:
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_handlePacket__P1575.info = {"start":285,"length":1173,"line":10,"column":8,"endLine":35,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_LoggerServer_handlePacket__P1575_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_handlePacket__P1575, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  now___13127: undefined,
  d___13130: undefined,
  elapsed___13135: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Response_toString__P1195(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1184_VT)) failedCast(r0);
    r0 = s.arg0.fields["_cached"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_cached"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    { step = 2; continue; }
  case 1:
    r0 = -1;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.arg0.fields["status_code"];
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat("HTTP ", s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, "; ");
    s.tmp_6 = r0;
    r0 = s.arg0.fields["headers"];
    s.tmp_13 = r0;
    r0 = pxsim_pxtrt.keysOf(s.tmp_13);
    s.tmp_12 = r0;
    r0 = pxsim_Array__length(s.tmp_12);
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_10);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, " headers; ");
    s.tmp_4 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_14);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " bytes content");
    return leave(s, r0)
  default: oops()
} } }
net_Response_toString__P1195.info = {"start":2123,"length":178,"line":77,"column":8,"endLine":79,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"toString","argumentNames":["this"]}

function net_Response_toString__P1195_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_toString__P1195, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  arg0: undefined,
} }





function net_Response_close__P1191(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1184_VT)) failedCast(r0);
    r0 = s.arg0.fields["socket"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = if_close_1_mk(s);
    r0 = s.arg0.fields["socket"];
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "close"), 1);
      s.callLocIdx = 172; s.pc = 3; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["close"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["close"], 1); s.callLocIdx = 172; s.pc = 3; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 172; s.pc = 3; return s.tmp_1;; }
     else { s.callLocIdx = 172; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
    r0 = (s.arg0).fields["socket"] = (null);
  case 1:
  case 2:
    r0 = (s.arg0).fields["_cached"] = (null);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Response_close__P1191.info = {"start":1077,"length":174,"line":41,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"close","argumentNames":["this"]}

function net_Response_close__P1191_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_close__P1191, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_constructor__P2467(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2462_VT)) failedCast(r0);
    r0 = (s.arg0).fields["parent"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pkts"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_constructor__P2467.info = {"start":18883,"length":46,"line":566,"column":8,"endLine":566,"endColumn":54,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","parent"]}

function jacdac_ClientPacketQueue_constructor__P2467_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_constructor__P2467, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ClientPacketQueue_send__P2465(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2462_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isRegSet__P1381_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 783; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["serviceIndex"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == null);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    s.tmp_4 = jacdac_ClientPacketQueue_updateQueue__P2463_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    s.callLocIdx = 784; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
    s.tmp_0 = jacdac_Client_sendCommand__P1787_mk(s);
    r0 = s.arg0.fields["parent"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 785; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_send__P2465.info = {"start":19400,"length":176,"line":583,"column":8,"endLine":587,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"send","argumentNames":["this","pkt"]}

function jacdac_ClientPacketQueue_send__P2465_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_send__P2465, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ClientPacketQueue_updateQueue__P2463(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cmd___13221 = undefined;
    s.i___13224 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2462_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 14);
    s.cmd___13221 = (r0);
    s.i___13224 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___13224;
    r0 = s.arg0.fields["pkts"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = s.arg0.fields["pkts"];
    s.tmp_7 = r0;
    r0 = pxsim_Array__getAt(s.tmp_7, s.i___13224);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 2);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == s.cmd___13221);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 2; continue; }
    r0 = s.arg0.fields["pkts"];
    s.tmp_8 = r0;
    s.tmp_9 = r0 = s.i___13224;
    s.tmp_11 = jacdac_JDPacket_withFrameStripped__P1391_mk(s);
    s.tmp_11.arg0 = s.arg1;
    s.callLocIdx = 781; s.pc = 6; return s.tmp_11;
  case 6:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_8, s.tmp_9, s.tmp_10);
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___13224 + 1);
    s.i___13224 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = s.arg0.fields["pkts"];
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_JDPacket_withFrameStripped__P1391_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 782; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_updateQueue__P2463.info = {"start":18939,"length":395,"line":568,"column":8,"endLine":577,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"updateQueue","argumentNames":["this","pkt"]}

function jacdac_ClientPacketQueue_updateQueue__P2463_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_updateQueue__P2463, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  cmd___13221: undefined,
  i___13224: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_withFrameStripped__P1391(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 12, 4);
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 506; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_withFrameStripped__P1391.info = {"start":6238,"length":95,"line":201,"column":8,"endLine":203,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"withFrameStripped","argumentNames":["this"]}

function jacdac_JDPacket_withFrameStripped__P1391_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_withFrameStripped__P1391, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isRegSet__P1381(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 12);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 2);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isRegSet__P1381.info = {"start":4732,"length":92,"line":145,"column":8,"endLine":147,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isRegSet","argumentNames":["this"]}
jacdac_JDPacket_isRegSet__P1381.isGetter = true;

function jacdac_JDPacket_isRegSet__P1381_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isRegSet__P1381, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_RegisterClient_constructor__P1763(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C1762_VT)) failedCast(r0);
    r0 = (s.arg0).fields["service"] = (s.arg1);
    r0 = (s.arg0).fields["code"] = (s.arg2);
    r0 = (s.arg0).fields["packFormat"] = (s.arg3);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = jacdac_EventSource_constructor__P1830_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 790; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg4;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_1 = jacdac_jdpack__P1408_mk(s);
    r0 = s.arg0.fields["packFormat"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.arg4;
    s.callLocIdx = 791; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    r0 = pxsim.control.createBuffer(0);
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = (s.arg0).fields["data"] = (s.tmp_3);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_constructor__P1763.info = {"start":20473,"length":403,"line":618,"column":8,"endLine":629,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","service","code","packFormat","defaultValue"]}

function jacdac_RegisterClient_constructor__P1763_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_constructor__P1763, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_Client_constructor__P1776(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1770_VT)) failedCast(r0);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg1);
    r0 = (s.arg0).fields["role"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["systemActive"] = (false);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["registers"] = (s.tmp_3);
    s.tmp_4 = jacdac_EventSource_constructor__P1830_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 799; s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["eventId"] = (s.tmp_1);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ClientPacketQueue__C2462_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_ClientPacketQueue_constructor__P2467_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.callLocIdx = 800; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    r0 = (s.arg0).fields["config"] = (s.tmp_0);
    r0 = s.arg0.fields["role"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("no role");
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_constructor__P1776.info = {"start":22859,"length":257,"line":692,"column":8,"endLine":697,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","serviceClass","role"]}

function jacdac_Client_constructor__P1776_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_constructor__P1776, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket_toString__P1396(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.msg___13305 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_8 = r0;
    s.tmp_11 = jacdac_shortDeviceId__P1794_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_13 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_13, 4, 8);
    s.tmp_12 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_12);
    s.tmp_11.arg0 = r0;
    s.callLocIdx = 510; s.pc = 3; return s.tmp_11;
  case 3:
    r0 = s.retval;
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_8, s.tmp_9);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, "/");
    s.tmp_6 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_17 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_17, 13);
    s.tmp_16 = r0;
    r0 = (s.tmp_16 & 63);
    s.tmp_15 = r0;
    if ((s.tmp_15) && (s.tmp_15).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_15);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_15) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_14);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "[");
    s.tmp_4 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_20 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_20, 3);
    s.tmp_19 = r0;
    if ((s.tmp_19) && (s.tmp_19).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_19);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_19) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_18);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "]: ");
    s.tmp_2 = r0;
    s.tmp_23 = jacdac_hexNum__P2321_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_24 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_24, 4, 14);
    s.tmp_23.arg0 = r0;
    s.tmp_23.arg1 = 4;
    s.callLocIdx = 514; s.pc = 7; return s.tmp_23;
  case 7:
    r0 = s.retval;
    s.tmp_22 = r0;
    if ((s.tmp_22) && (s.tmp_22).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_22);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_22) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_21 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_21);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " sz=");
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_27 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_27, 12);
    s.tmp_26 = r0;
    if ((s.tmp_26) && (s.tmp_26).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_26);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_26) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_25 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_25);
    s.msg___13305 = (r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 12);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 20);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    if ((s.msg___13305) && (s.msg___13305).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.msg___13305);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.msg___13305) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_8);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(": ", s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.msg___13305 = (r0);
    { step = 2; continue; }
  case 1:
    if ((s.msg___13305) && (s.msg___13305).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.msg___13305);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.msg___13305) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_8, 0, 20);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_7);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(": ", s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.msg___13305 = (r0);
  case 2:
    r0 = s.msg___13305;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_toString__P1396.info = {"start":6758,"length":411,"line":221,"column":8,"endLine":230,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_JDPacket_toString__P1396_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_toString__P1396, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  tmp_23: undefined,
  tmp_24: undefined,
  tmp_25: undefined,
  tmp_26: undefined,
  tmp_27: undefined,
  msg___13305: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_size__P1370(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1357_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 12);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_size__P1370.info = {"start":3207,"length":66,"line":96,"column":8,"endLine":98,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"size","argumentNames":["this"]}
jacdac_JDPacket_size__P1370.isGetter = true;

function jacdac_JDPacket_size__P1370_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_size__P1370, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_hexNum__P2321(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.hex___13370 = undefined;
    s.r___13372 = undefined;
    s.i___13373 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.hex___13370 = ("0123456789abcdef");
    s.r___13372 = ("0x");
    s.i___13373 = (0);
  case 1:
    r0 = (s.i___13373 < s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    if ((s.r___13372) && (s.r___13372).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.r___13372);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___13372) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_4 = r0 = s.hex___13370;
    s.tmp_7 = r0 = s.arg0;
    r0 = (s.arg1 - 1);
    s.tmp_10 = r0;
    r0 = (s.tmp_10 - s.i___13373);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 * 4);
    s.tmp_8 = r0;
    r0 = (s.tmp_7 >>> s.tmp_8);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 15);
    s.tmp_5 = r0;
    r0 = pxsim_String_.charAt(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_2);
    s.r___13372 = (r0);
    r0 = (s.i___13373 + 1);
    s.i___13373 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.r___13372;
    return leave(s, r0)
  default: oops()
} } }
jacdac_hexNum__P2321.info = {"start":1051,"length":226,"line":27,"column":4,"endLine":34,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"hexNum","argumentNames":["n","len"]}

function jacdac_hexNum__P2321_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_hexNum__P2321, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  hex___13370: undefined,
  r___13372: undefined,
  i___13373: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_close__P1146(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_closed"] = (true);
    r0 = (s.arg0).fields["_buffer"] = (_hex13405);
    s.tmp_0 = net_Controller__C1102_v6_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.socketClose;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = s.arg0.fields["_closeHandler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = if__closeHandler_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_closeHandler"), 1);
      s.callLocIdx = 161; s.pc = 4; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_closeHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_closeHandler"], 1); s.callLocIdx = 161; s.pc = 4; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 161; s.pc = 4; return s.tmp_1;; }
     else { s.callLocIdx = 161; s.pc = 4; return s.tmp_1; }
    }
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_close__P1146.info = {"start":6809,"length":221,"line":179,"column":8,"endLine":185,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"close","argumentNames":["this"]}

function net_ControllerSocket_close__P1146_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_close__P1146, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }

const _hex13405 = pxsim.BufferMethods.createBufferFromHex("")




function net_Controller_socketClose__P1110(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketClose__P1110.info = {"start":678,"length":56,"line":27,"column":8,"endLine":28,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketClose","argumentNames":["this","socket_num"]}

function net_Controller_socketClose__P1110_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketClose__P1110, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_read__P1144(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.avail___13424 = undefined;
    s.ret___13445 = undefined;
    s.stamp___13453 = undefined;
    s.to_read___13455 = undefined;
    s.received___13461 = undefined;
    s.avail___13466 = undefined;
    s.recv___13478 = undefined;
    s.ret___13519 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = (s.arg1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.arg0.fields["_buffer"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
    s.tmp_4 = Math_min__P131_mk(s);
    s.tmp_5 = net_Controller__C1102_v4_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_5.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_5.arg1 = r0;
    if (!checkSubtype(s.tmp_5.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_5.arg0);
    s.tmp_5.fn = s.tmp_5.arg0.vtable.methods.socketAvailable;
    s.pc = 23; return s.tmp_5;
  case 23:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = 4000;
    s.callLocIdx = 151; s.pc = 22; return s.tmp_4;
  case 22:
    r0 = s.retval;
    s.avail___13424 = (r0);
    r0 = (s.avail___13424 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = net_Controller__C1102_v5_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = s.avail___13424;
    if (!checkSubtype(s.tmp_3.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.socketRead;
    s.pc = 24; return s.tmp_3;
  case 24:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["_buffer"] = (s.tmp_2);
  case 1:
  case 2:
    r0 = (s.avail___13424 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = net_ControllerSocket_close__P1146_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 152; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
  case 3:
  case 4:
  case 5:
  case 6:
    r0 = s.arg0.fields["_buffer"];
    s.ret___13445 = (r0);
    r0 = (s.arg0).fields["_buffer"] = (_hex13451);
    r0 = s.ret___13445;
    { step = 21; continue; }
  case 7:
  case 8:
    r0 = pxsim.control.millis();
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 1000);
    s.stamp___13453 = (r0);
    s.tmp_0 = r0 = s.arg1;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.to_read___13455 = (r0);
    r0 = pxsim_Array__mk();
    s.received___13461 = (r0);
  case 9:
    r0 = (s.to_read___13455 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    s.tmp_1 = Math_min__P131_mk(s);
    s.tmp_2 = net_Controller__C1102_v4_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_2.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_2.arg1 = r0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.socketAvailable;
    s.pc = 27; return s.tmp_2;
  case 27:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 4000;
    s.callLocIdx = 154; s.pc = 26; return s.tmp_1;
  case 26:
    r0 = s.retval;
    s.avail___13466 = (r0);
    r0 = (s.avail___13466 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_1 / 1000);
    s.stamp___13453 = (r0);
    s.tmp_0 = net_Controller__C1102_v5_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    s.tmp_1 = Math_min__P131_mk(s);
    s.tmp_1.arg0 = s.to_read___13455;
    s.tmp_1.arg1 = s.avail___13466;
    s.callLocIdx = 156; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.socketRead;
    s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    s.recv___13478 = (r0);
    r0 = pxsim_Array__push(s.received___13461, s.recv___13478);
    s.tmp_0 = r0 = s.to_read___13455;
    r0 = pxsim.BufferMethods.length(s.recv___13478);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.to_read___13455 = (r0);
    { step = 11; continue; }
  case 10:
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 20;
    s.callLocIdx = 157; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
  case 11:
    r0 = (s.avail___13466 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = s.tmp_0;
    { step = 15; continue; }
  case 12:
    r0 = s.arg0.fields["_timeout"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_1;
    { step = 14; continue; }
  case 13:
    r0 = pxsim.control.millis();
    s.tmp_5 = r0;
    r0 = (s.tmp_5 / 1000);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.stamp___13453);
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_timeout"];
    s.tmp_6 = r0;
    r0 = (s.tmp_3 > s.tmp_6);
  case 14:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 15:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 16; continue; }
    { step = 18; continue; }
  case 16:
  case 17:
    { step = 9; continue; }
  case 18:
    s.tmp_9 = helpers_arrayUnshift__P104_mk(s);
    s.tmp_9.arg0 = s.received___13461;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_9.arg1 = r0;
    s.callLocIdx = 159; s.pc = 31; return s.tmp_9;
  case 31:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = pins_concatBuffers__P179_mk(s);
    s.tmp_2.arg0 = s.received___13461;
    s.callLocIdx = 160; s.pc = 32; return s.tmp_2;
  case 32:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_buffer"] = (s.tmp_1);
    s.ret___13519 = (null);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
    r0 = s.arg0.fields["_buffer"];
    s.ret___13519 = (r0);
    r0 = (s.arg0).fields["_buffer"] = (_hex13532);
    { step = 20; continue; }
  case 19:
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 0, s.arg1);
    s.ret___13519 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, s.arg1, -1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_buffer"] = (s.tmp_1);
  case 20:
    r0 = s.ret___13519;
  case 21:
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_read__P1144.info = {"start":4744,"length":1826,"line":123,"column":8,"endLine":171,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"read","argumentNames":["this","size"]}

function net_ControllerSocket_read__P1144_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_read__P1144, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  avail___13424: undefined,
  ret___13445: undefined,
  stamp___13453: undefined,
  to_read___13455: undefined,
  received___13461: undefined,
  avail___13466: undefined,
  recv___13478: undefined,
  ret___13519: undefined,
  arg0: undefined,
  arg1: undefined,
} }

const _hex13451 = pxsim.BufferMethods.createBufferFromHex("")
const _hex13532 = pxsim.BufferMethods.createBufferFromHex("")




function pins_concatBuffers__P179(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Buffer_concat__P209_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 21; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
pins_concatBuffers__P179.info = {"start":863,"length":88,"line":32,"column":4,"endLine":34,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"concatBuffers","argumentNames":["bufs"]}

function pins_concatBuffers__P179_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_concatBuffers__P179, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function Buffer_concat__P209(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___13552 = undefined;
    s.b___13554 = undefined;
    s.unnamed106___U2 = undefined;
    s.unnamed107___U3 = undefined;
    s.r___13561 = undefined;
    s.b___13567 = undefined;
    s.unnamed108___U6 = undefined;
    s.unnamed109___U7 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.len___13552 = (0);
    s.b___13554 = (undefined);
    s.unnamed106___U2 = (s.arg0);
    s.unnamed107___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed107___U3;
    r0 = pxsim_Array__length(s.unnamed106___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed106___U2, s.unnamed107___U3);
    s.b___13554 = (r0);
    s.tmp_2 = r0 = s.len___13552;
    r0 = pxsim.BufferMethods.length(s.b___13554);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.len___13552 = (r0);
    r0 = (s.unnamed107___U3 + 1);
    s.unnamed107___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed106___U2 = (undefined);
    r0 = pxsim.control.createBuffer(s.len___13552);
    s.r___13561 = (r0);
    s.len___13552 = (0);
    s.b___13567 = (undefined);
    s.unnamed108___U6 = (s.arg0);
    s.unnamed109___U7 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed109___U7;
    r0 = pxsim_Array__length(s.unnamed108___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed108___U6, s.unnamed109___U7);
    s.b___13567 = (r0);
    r0 = pxsim.BufferMethods.write(s.r___13561, s.len___13552, s.b___13567);
    s.tmp_0 = r0 = s.len___13552;
    r0 = pxsim.BufferMethods.length(s.b___13567);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.len___13552 = (r0);
    r0 = (s.unnamed109___U7 + 1);
    s.unnamed109___U7 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed108___U6 = (undefined);
    r0 = s.r___13561;
    return leave(s, r0)
  default: oops()
} } }
Buffer_concat__P209.info = {"start":11474,"length":297,"line":406,"column":4,"endLine":417,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"concat","argumentNames":["buffers"]}

function Buffer_concat__P209_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_concat__P209, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  len___13552: undefined,
  b___13554: undefined,
  unnamed106___U2: undefined,
  unnamed107___U3: undefined,
  r___13561: undefined,
  b___13567: undefined,
  unnamed108___U6: undefined,
  unnamed109___U7: undefined,
  arg0: undefined,
} }





function helpers_arrayUnshift__P104(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array_.insertAt(s.arg0, 0, s.arg1);
    r0 = pxsim_Array__length(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayUnshift__P104.info = {"start":4898,"length":126,"line":180,"column":4,"endLine":183,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayUnshift","argumentNames":["arr","value"]}

function helpers_arrayUnshift__P104_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayUnshift__P104, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_monotonic__P1152(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.control.millis();
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 1000);
    return leave(s, r0)
  default: oops()
} } }
net_monotonic__P1152.info = {"start":598,"length":85,"line":23,"column":4,"endLine":25,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"monotonic","argumentNames":[]}

function net_monotonic__P1152_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_monotonic__P1152, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_Controller_socketRead__P1109(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketRead__P1109.info = {"start":567,"length":101,"line":23,"column":8,"endLine":25,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketRead","argumentNames":["this","socket_num","size"]}

function net_Controller_socketRead__P1109_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketRead__P1109, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_Controller_socketAvailable__P1108(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketAvailable__P1108.info = {"start":472,"length":85,"line":19,"column":8,"endLine":21,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketAvailable","argumentNames":["this","socket_num"]}

function net_Controller_socketAvailable__P1108_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketAvailable__P1108, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function Math_min__P131(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_min__P131.info = {"start":16779,"length":105,"line":565,"column":4,"endLine":568,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"min","argumentNames":["a","b"]}

function Math_min__P131_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_min__P131, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_readLine__P1143(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.stamp___13607 = undefined;
    s.avail___13617 = undefined;
    s.pos___13654 = undefined;
    s.pref___13661 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = pxsim.control.millis();
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 1000);
    s.stamp___13607 = (r0);
  case 1:
    s.tmp_2 = helpers_bufferIndexOf__P186_mk(s);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = _hex13612;
    s.callLocIdx = 144; s.pc = 11; return s.tmp_2;
  case 11:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.tmp_3 = Math_min__P131_mk(s);
    s.tmp_4 = net_Controller__C1102_v4_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_4.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_4.arg1 = r0;
    if (!checkSubtype(s.tmp_4.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.socketAvailable;
    s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 4000;
    s.callLocIdx = 145; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.avail___13617 = (r0);
    r0 = (s.avail___13617 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = helpers_bufferConcat__P184_mk(s);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_3.arg0 = r0;
    s.tmp_4 = net_Controller__C1102_v5_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_4.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_4.arg1 = r0;
    s.tmp_4.arg2 = s.avail___13617;
    if (!checkSubtype(s.tmp_4.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.socketRead;
    s.pc = 15; return s.tmp_4;
  case 15:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 146; s.pc = 14; return s.tmp_3;
  case 14:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["_buffer"] = (s.tmp_2);
    { step = 9; continue; }
  case 2:
    r0 = (s.avail___13617 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 3:
    r0 = s.arg0.fields["_timeout"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 5; continue; }
  case 4:
    r0 = pxsim.control.millis();
    s.tmp_5 = r0;
    r0 = (s.tmp_5 / 1000);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.stamp___13607);
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_timeout"];
    s.tmp_6 = r0;
    r0 = (s.tmp_3 > s.tmp_6);
  case 5:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 6:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 7; continue; }
    s.tmp_9 = net_ControllerSocket_close__P1146_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.callLocIdx = 148; s.pc = 16; return s.tmp_9;
  case 16:
    r0 = s.retval;
    r0 = pxsim_pxtcore.throwValue("Didn't receive full response, failing out");
    { step = 8; continue; }
  case 7:
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 20;
    s.callLocIdx = 149; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 8:
  case 9:
    { step = 1; continue; }
  case 10:
    s.tmp_0 = helpers_bufferIndexOf__P186_mk(s);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = _hex13656;
    s.callLocIdx = 150; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.pos___13654 = (r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 0, s.pos___13654);
    s.pref___13661 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = (s.pos___13654 + 2);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, s.tmp_3, -1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_buffer"] = (s.tmp_1);
    r0 = pxsim.BufferMethods.toString(s.pref___13661);
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_readLine__P1143.info = {"start":3440,"length":1145,"line":99,"column":8,"endLine":120,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"readLine","argumentNames":["this"]}

function net_ControllerSocket_readLine__P1143_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_readLine__P1143, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  stamp___13607: undefined,
  avail___13617: undefined,
  pos___13654: undefined,
  pref___13661: undefined,
  arg0: undefined,
} }

const _hex13612 = pxsim.BufferMethods.createBufferFromHex("0d0a")
const _hex13656 = pxsim.BufferMethods.createBufferFromHex("0d0a")




function helpers_bufferIndexOf__P186(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___13682 = undefined;
    s.j___13696 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.i___13682 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___13682;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_4 = r0;
    r0 = (s.tmp_3 - s.tmp_4);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 <= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___13682);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, 0);
    s.tmp_7 = r0;
    r0 = (s.tmp_6 == s.tmp_7);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 8; continue; }
    s.j___13696 = (0);
  case 2:
    s.tmp_1 = r0 = s.j___13696;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_5 = r0 = s.arg0;
    r0 = (s.i___13682 + s.j___13696);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.j___13696);
    s.tmp_7 = r0;
    r0 = (s.tmp_4 != s.tmp_7);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 5; continue; }
  case 3:
  case 4:
    r0 = (s.j___13696 + 1);
    s.j___13696 = (r0);
    { step = 2; continue; }
  case 5:
    s.tmp_1 = r0 = s.j___13696;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.i___13682;
    { step = 11; continue; }
  case 6:
  case 7:
  case 8:
  case 9:
    r0 = (s.i___13682 + 1);
    s.i___13682 = (r0);
    { step = 1; continue; }
  case 10:
    r0 = -1;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferIndexOf__P186.info = {"start":4259,"length":433,"line":149,"column":4,"endLine":163,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferIndexOf","argumentNames":["a","b"]}

function helpers_bufferIndexOf__P186_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferIndexOf__P186, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  i___13682: undefined,
  j___13696: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onMessage__P1142(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.src___13728 = undefined;
    s.value___13735 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = s.arg0.fields["_messageHandler"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = net_Controller__C1102_v9_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_2.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_2.arg1 = r0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.dataAvailableSrc;
    s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.src___13728 = (r0);
    s.tmp_0 = net_Controller__C1102_v10_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.dataAvailableValue;
    s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.value___13735 = (r0);
    r0 = (s.src___13728 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.value___13735 > 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = net_ControllerSocket_flushReadBuffer__P2254_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 139; s.pc = 11; return s.tmp_2;
  case 11:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, net_ControllerSocket_onMessage_inline__P13753);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.control.internalOnEvent(s.src___13728, s.value___13735, s.tmp_0, 16);
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore_mkAction(1, net_ControllerSocket_onMessage_inline__P13757);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.control.runInParallel(s.tmp_0);
  case 4:
  case 5:
  case 6:
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = null;
  case 8:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["_messageHandler"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onMessage__P1142.info = {"start":2553,"length":789,"line":79,"column":8,"endLine":96,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onMessage","argumentNames":["this","handler"]}

function net_ControllerSocket_onMessage__P1142_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onMessage__P1142, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  src___13728: undefined,
  value___13735: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onMessage_inline__P13753(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_ControllerSocket_flushReadBuffer__P2254_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 140; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onMessage_inline__P13753.info = {"start":2957,"length":28,"line":85,"column":56,"endLine":85,"endColumn":84,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"inline","argumentNames":[]}

function net_ControllerSocket_onMessage_inline__P13753_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onMessage_inline__P13753, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_ControllerSocket_onMessage_inline__P13757(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

  case 1:
    r0 = s.caps[0].fields["_closed"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_3 = net_ControllerSocket_flushReadBuffer__P2254_mk(s);
    s.tmp_3.arg0 = s.caps[0];
    s.callLocIdx = 141; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 200;
    s.callLocIdx = 142; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onMessage_inline__P13757.info = {"start":3054,"length":193,"line":87,"column":42,"endLine":92,"endColumn":21,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"inline","argumentNames":[]}

function net_ControllerSocket_onMessage_inline__P13757_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onMessage_inline__P13757, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function net_ControllerSocket_flushReadBuffer__P2254(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___13777 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
  case 1:
    r0 = s.arg0.fields["_closed"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = s.arg0.fields["_messageHandler"];
  case 3:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
    s.tmp_4 = net_ControllerSocket_read__P1144_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = 0;
    s.callLocIdx = 137; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.buf___13777 = (r0);
    r0 = pxsim.BufferMethods.length(s.buf___13777);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_1 = if__messageHandler_2_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.buf___13777;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_messageHandler"), 2);
      s.callLocIdx = 138; s.pc = 8; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_messageHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_messageHandler"], 2); s.callLocIdx = 138; s.pc = 8; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 138; s.pc = 8; return s.tmp_1;; }
     else { s.callLocIdx = 138; s.pc = 8; return s.tmp_1; }
    }
  case 8:
    r0 = s.retval;
    { step = 5; continue; }
  case 4:
    { step = 6; continue; }
  case 5:
    { step = 1; continue; }
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_flushReadBuffer__P2254.info = {"start":2243,"length":300,"line":68,"column":8,"endLine":77,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"flushReadBuffer","argumentNames":["this"]}

function net_ControllerSocket_flushReadBuffer__P2254_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_flushReadBuffer__P2254, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  buf___13777: undefined,
  arg0: undefined,
} }





function net_Controller_dataAvailableValue__P1119(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_dataAvailableValue__P1119.info = {"start":1263,"length":68,"line":42,"column":8,"endLine":42,"endColumn":76,"fileName":"pxt_modules/net/controller.ts","functionName":"dataAvailableValue","argumentNames":["this","socket_num"]}

function net_Controller_dataAvailableValue__P1119_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_dataAvailableValue__P1119, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_dataAvailableSrc__P1118(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_dataAvailableSrc__P1118.info = {"start":1188,"length":66,"line":41,"column":8,"endLine":41,"endColumn":74,"fileName":"pxt_modules/net/controller.ts","functionName":"dataAvailableSrc","argumentNames":["this","socket_num"]}

function net_Controller_dataAvailableSrc__P1118_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_dataAvailableSrc__P1118, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onError__P1141(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_errorHandler"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onError__P1141.info = {"start":2134,"length":99,"line":64,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onError","argumentNames":["this","handler"]}

function net_ControllerSocket_onError__P1141_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onError__P1141, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onClose__P1140(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_closeHandler"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onClose__P1140.info = {"start":2037,"length":88,"line":61,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onClose","argumentNames":["this","handler"]}

function net_ControllerSocket_onClose__P1140_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onClose__P1140, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onOpen__P1139(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_openHandler"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onOpen__P1139.info = {"start":1942,"length":86,"line":58,"column":8,"endLine":60,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onOpen","argumentNames":["this","handler"]}

function net_ControllerSocket_onOpen__P1139_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onOpen__P1139, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_send__P1138(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    s.tmp_0 = net_Controller__C1102_v3_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    s.tmp_1 = net_dataAsBuffer__P1202_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 135; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.socketWrite;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_send__P1138.info = {"start":1637,"length":171,"line":48,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"send","argumentNames":["this","data"]}

function net_ControllerSocket_send__P1138_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_send__P1138, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_socketWrite__P1107(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketWrite__P1107.info = {"start":390,"length":72,"line":16,"column":8,"endLine":17,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketWrite","argumentNames":["this","socket_num","buffer"]}

function net_Controller_socketWrite__P1107_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketWrite__P1107, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_ControllerSocket_connect__P1137(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    s.tmp_3 = net_Controller__C1102_v2_5_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_3.arg1 = r0;
    r0 = s.arg0.fields["host"];
    s.tmp_3.arg2 = r0;
    r0 = s.arg0.fields["port"];
    s.tmp_3.arg3 = r0;
    r0 = s.arg0.fields["conntype"];
    s.tmp_3.arg4 = r0;
    if (!checkSubtype(s.tmp_3.arg0, net_Controller__C1102_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.socketConnect;
    s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = net_ControllerSocket_error__P2253_mk(s);
    s.tmp_4.arg0 = s.arg0;
    r0 = s.arg0.fields["host"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("failed to connect to ", s.tmp_5);
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 133; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = (s.arg0).fields["_buffer"] = (_hex13842);
    r0 = s.arg0.fields["_openHandler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = if__openHandler_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_openHandler"), 1);
      s.callLocIdx = 134; s.pc = 9; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_openHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_openHandler"], 1); s.callLocIdx = 134; s.pc = 9; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 134; s.pc = 9; return s.tmp_1;; }
     else { s.callLocIdx = 134; s.pc = 9; return s.tmp_1; }
    }
  case 9:
    r0 = s.retval;
  case 3:
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_connect__P1137.info = {"start":1244,"length":339,"line":35,"column":8,"endLine":45,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"connect","argumentNames":["this"]}

function net_ControllerSocket_connect__P1137_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_connect__P1137, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }

const _hex13842 = pxsim.BufferMethods.createBufferFromHex("")




function net_ControllerSocket_error__P2253(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1127_VT)) failedCast(r0);
    r0 = s.arg0.fields["_errorHandler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = if__errorHandler_2_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_errorHandler"), 2);
      s.callLocIdx = 136; s.pc = 3; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_errorHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_errorHandler"], 2); s.callLocIdx = 136; s.pc = 3; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 136; s.pc = 3; return s.tmp_1;; }
     else { s.callLocIdx = 136; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_error__P2253.info = {"start":1818,"length":114,"line":53,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"error","argumentNames":["this","msg"]}

function net_ControllerSocket_error__P2253_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_error__P2253, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_socketConnect__P1106(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = false;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketConnect__P1106.info = {"start":234,"length":146,"line":12,"column":8,"endLine":14,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketConnect","argumentNames":["this","socket_num","dest","port","conn_mode"]}

function net_Controller_socketConnect__P1106_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketConnect__P1106, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function net_WifiController_connect__P1930(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.wifis___13863 = undefined;
    s.ssids___13866 = undefined;
    s.i___13870 = undefined;
    s.networks___13874 = undefined;
    s.network___13890 = undefined;
    s.unnamed168___U5 = undefined;
    s.unnamed169___U6 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    s.tmp_1 = net_WifiController__C1917_v7_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_1.arg0, net_WifiController__C1917_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.isConnected;
    s.pc = 12; return s.tmp_1;
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 11; continue; }
  case 1:
  case 2:
    r0 = pxsim.control.deviceDalVersion();
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "sim");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    s.tmp_4 = net_WifiController_connectAP__P1920_mk(s);
    s.tmp_4.arg0 = s.arg0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4.arg1 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 964; s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
    r0 = true;
    { step = 11; continue; }
  case 3:
  case 4:
    s.tmp_0 = net_knownAccessPoints__P1176_mk(s);
    s.callLocIdx = 965; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.wifis___13863 = (r0);
    r0 = pxsim_pxtrt.keysOf(s.wifis___13863);
    s.ssids___13866 = (r0);
    s.i___13870 = (0);
  case 5:
    r0 = (s.i___13870 < 100);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_pxtcore_mkAction(1, networks_inline__P13876);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_1, 0, s.ssids___13866);
    s.tmp_2 = helpers_arrayFilter__P110_mk(s);
    s.tmp_3 = net_WifiController__C1917_v0_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_3.arg0, net_WifiController__C1917_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.scanNetworks;
    s.pc = 16; return s.tmp_3;
  case 16:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_1;
    s.callLocIdx = 966; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    s.networks___13874 = (r0);
    s.network___13890 = (undefined);
    s.unnamed168___U5 = (s.networks___13874);
    s.unnamed169___U6 = (0);
  case 6:
    s.tmp_0 = r0 = s.unnamed169___U6;
    r0 = pxsim_Array__length(s.unnamed168___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed168___U5, s.unnamed169___U6);
    s.network___13890 = (r0);
    s.tmp_3 = net_WifiController_connectAP__P1920_mk(s);
    s.tmp_3.arg0 = s.arg0;
    r0 = s.network___13890.fields["ssid"];
    s.tmp_3.arg1 = r0;
    r0 = s.network___13890.fields["ssid"];
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.wifis___13863, s.tmp_4);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 967; s.pc = 17; return s.tmp_3;
  case 17:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 7; continue; }
    r0 = true;
    { step = 11; continue; }
  case 7:
  case 8:
    r0 = (s.unnamed169___U6 + 1);
    s.unnamed169___U6 = (r0);
    { step = 6; continue; }
  case 9:
    s.unnamed168___U5 = (undefined);
    s.tmp_5 = net_log__P1149_mk(s);
    if ((s.i___13870) && (s.i___13870).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.i___13870);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.i___13870) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat("re-trying scan, attempt ", s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, "...");
    s.tmp_5.arg0 = r0;
    s.callLocIdx = 968; s.pc = 18; return s.tmp_5;
  case 18:
    r0 = s.retval;
    r0 = (s.i___13870 + 1);
    s.i___13870 = (r0);
    { step = 5; continue; }
  case 10:
    s.tmp_0 = net_log__P1149_mk(s);
    s.tmp_0.arg0 = "connection failed";
    s.callLocIdx = 969; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    r0 = false;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_connect__P1930.info = {"start":4014,"length":891,"line":116,"column":8,"endLine":141,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"connect","argumentNames":["this"]}

function net_WifiController_connect__P1930_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_connect__P1930, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  wifis___13863: undefined,
  ssids___13866: undefined,
  i___13870: undefined,
  networks___13874: undefined,
  network___13890: undefined,
  unnamed168___U5: undefined,
  unnamed169___U6: undefined,
  arg0: undefined,
} }





function networks_inline__P13876(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["ssid"];
    s.tmp_1 = r0;
    r0 = pxsim_Array_.indexOf(s.caps[0], s.tmp_1, undefined);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > -1);
    return leave(s, r0)
  default: oops()
} } }
networks_inline__P13876.info = {"start":4443,"length":43,"line":129,"column":28,"endLine":129,"endColumn":71,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":["network"]}

function networks_inline__P13876_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: networks_inline__P13876, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_WifiController_scanNetworks__P1919(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = s.arg0.fields["inScan"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["inScan"] = (true);
    r0 = pxsim._wifi.scanStart();
  case 1:
  case 2:
    r0 = pxsim._wifi.eventID();
    s.tmp_0 = r0;
    setupResume(s, 3);
    pxsim.control.waitForEvent(s.tmp_0, 1000);
    checkResumeConsumed();
    return;
  case 3:
    r0 = s.retval;
    r0 = s.arg0.fields["networks"];
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_scanNetworks__P1919.info = {"start":1589,"length":268,"line":48,"column":8,"endLine":55,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"scanNetworks","argumentNames":["this"]}

function net_WifiController_scanNetworks__P1919_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_scanNetworks__P1919, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function net_knownAccessPoints__P1176(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_1 = settings_SecretStore_readSecret__P1096_mk(s);
    s.tmp_1.arg0 = globals.deviceSecrets___1099;
    s.tmp_1.arg1 = globals.AP_SECRETS_KEY___2257;
    s.tmp_1.arg2 = false;
    s.callLocIdx = 168; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
net_knownAccessPoints__P1176.info = {"start":3044,"length":126,"line":107,"column":4,"endLine":109,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"knownAccessPoints","argumentNames":[]}

function net_knownAccessPoints__P1176_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_knownAccessPoints__P1176, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function net_WifiController_connectAP__P1920(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___13944 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("connecting to [", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "]...");
    s.tmp_0 = r0;
    r0 = pxsim.control.dmesg(s.tmp_0);
    r0 = pxsim._wifi.connect(s.arg1, s.arg2);
    s.res___13944 = (r0);
    r0 = (s.res___13944 != 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = false;
    { step = 7; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_connectAP_inline__P13952);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_1, 0, s.arg0);
    s.tmp_2 = pauseUntil__P365_mk(s);
    s.tmp_2.arg0 = s.tmp_1;
    s.tmp_2.arg1 = 15000;
    s.callLocIdx = 959; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1 = net_WifiController__C1917_v7_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_1.arg0, net_WifiController__C1917_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.isConnected;
    s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_String_.mkEmpty();
    { step = 4; continue; }
  case 3:
    r0 = "not ";
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, "connected to [");
    s.tmp_5 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_9);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "]");
    s.tmp_3 = r0;
    r0 = pxsim.control.dmesg(s.tmp_3);
    s.tmp_1 = net_WifiController__C1917_v7_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_1.arg0, net_WifiController__C1917_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.isConnected;
    s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = (s.arg0).fields["_ssid"] = (s.arg1);
  case 5:
  case 6:
    s.tmp_0 = net_WifiController__C1917_v7_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, net_WifiController__C1917_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isConnected;
    s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_connectAP__P1920.info = {"start":1867,"length":460,"line":57,"column":8,"endLine":67,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"connectAP","argumentNames":["this","ssid","pass"]}

function net_WifiController_connectAP__P1920_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_connectAP__P1920, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  res___13944: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_connectAP_inline__P13952(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_WifiController__C1917_v7_1_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    if (!checkSubtype(s.tmp_0.arg0, net_WifiController__C1917_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isConnected;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_connectAP_inline__P13952.info = {"start":2098,"length":22,"line":62,"column":23,"endLine":62,"endColumn":45,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_connectAP_inline__P13952_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_connectAP_inline__P13952, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function pauseUntil__P365(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_2 = lambda_1_mk(s);
    s.tmp_2.argL = s.arg0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.callLocIdx = 54; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    s.arg1 = (0);
  case 5:
  case 6:
    s.tmp_0 = control___queuePollEvent__P364_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 55; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
pauseUntil__P365.info = {"start":2224,"length":227,"line":73,"column":0,"endLine":77,"endColumn":1,"fileName":"pxt_modules/base/poll.ts","functionName":"pauseUntil","argumentNames":["condition","timeOut"]}

function pauseUntil__P365_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pauseUntil__P365, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control___queuePollEvent__P364(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ev___13989 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(control_PollEvent__C2178_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_PollEvent_constructor__P2179_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = 1023;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1.arg2 = r0;
    r0 = pxsim.control.millis();
    s.tmp_1.arg3 = r0;
    s.tmp_1.arg4 = s.arg0;
    s.tmp_1.arg5 = s.arg1;
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1.arg6 = r0;
    s.callLocIdx = 52; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.ev___13989 = (s.tmp_0);
    r0 = pxsim_numops_toBoolDecr(globals._pollEventQueue___2181);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.ev___13989);
    globals._pollEventQueue___2181 = (s.tmp_2);
    r0 = pxsim.control.runInParallel(control_pollEvents__P2182);
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array__push(globals._pollEventQueue___2181, s.ev___13989);
  case 2:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = control_onEvent__P389_mk(s);
    r0 = s.ev___13989.fields["eid"];
    s.tmp_0.arg0 = r0;
    r0 = s.ev___13989.fields["vid"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = 16;
    s.callLocIdx = 53; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    r0 = s.ev___13989.fields["eid"];
    s.tmp_0 = r0;
    r0 = s.ev___13989.fields["vid"];
    s.tmp_1 = r0;
    setupResume(s, 7);
    pxsim.control.waitForEvent(s.tmp_0, s.tmp_1);
    checkResumeConsumed();
    return;
  case 7:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control___queuePollEvent__P364.info = {"start":1262,"length":758,"line":39,"column":4,"endLine":64,"endColumn":5,"fileName":"pxt_modules/base/poll.ts","functionName":"__queuePollEvent","argumentNames":["timeOut","condition","handler"]}

function control___queuePollEvent__P364_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control___queuePollEvent__P364, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  ev___13989: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function control_pollEvents__P2182(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___14032 = undefined;
    s.i___14035 = undefined;
    s.ev___14041 = undefined;
  case 1:
    r0 = pxsim_Array__length(globals._pollEventQueue___2181);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = pxsim.control.millis();
    s.now___14032 = (r0);
    s.i___14035 = (0);
  case 2:
    s.tmp_1 = r0 = s.i___14035;
    r0 = pxsim_Array__length(globals._pollEventQueue___2181);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(globals._pollEventQueue___2181, s.i___14035);
    s.ev___14041 = (r0);
    s.tmp_1 = if_condition_1_mk(s);
    s.tmp_1.arg0 = s.ev___14041;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "condition"), 1);
      s.callLocIdx = 49; s.pc = 13; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["condition"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["condition"], 1); s.callLocIdx = 49; s.pc = 13; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 49; s.pc = 13; return s.tmp_1;; }
     else { s.callLocIdx = 49; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 3:
    r0 = s.ev___14041.fields["timeOut"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 > 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.ev___14041.fields["start"];
    s.tmp_5 = r0;
    r0 = (s.now___14032 - s.tmp_5);
    s.tmp_4 = r0;
    r0 = s.ev___14041.fields["timeOut"];
    s.tmp_6 = r0;
    r0 = (s.tmp_4 > s.tmp_6);
  case 5:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 6:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 9; continue; }
    r0 = s.ev___14041.fields["eid"];
    s.tmp_9 = r0;
    r0 = s.ev___14041.fields["vid"];
    s.tmp_10 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_9, s.tmp_10);
    r0 = s.ev___14041.fields["once"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_1 = helpers_arraySplice__P100_mk(s);
    s.tmp_1.arg0 = globals._pollEventQueue___2181;
    s.tmp_1.arg1 = s.i___14035;
    s.tmp_1.arg2 = 1;
    s.callLocIdx = 50; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    r0 = (s.i___14035 - 1);
    s.i___14035 = (r0);
  case 7:
  case 8:
  case 9:
  case 10:
    r0 = (s.i___14035 + 1);
    s.i___14035 = (r0);
    { step = 2; continue; }
  case 11:
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 50;
    s.callLocIdx = 51; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    { step = 1; continue; }
  case 12:
    globals._pollEventQueue___2181 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_pollEvents__P2182.info = {"start":618,"length":638,"line":20,"column":4,"endLine":37,"endColumn":5,"fileName":"pxt_modules/base/poll.ts","functionName":"pollEvents","argumentNames":[]}

function control_pollEvents__P2182_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_pollEvents__P2182, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  now___14032: undefined,
  i___14035: undefined,
  ev___14041: undefined,
} }





function control_PollEvent_constructor__P2179(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.arg5 = (s.lambdaArgs[5]);
      s.arg6 = (s.lambdaArgs[6]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_PollEvent__C2178_VT)) failedCast(r0);
    r0 = (s.arg0).fields["eid"] = (s.arg1);
    r0 = (s.arg0).fields["vid"] = (s.arg2);
    r0 = (s.arg0).fields["start"] = (s.arg3);
    r0 = (s.arg0).fields["timeOut"] = (s.arg4);
    r0 = (s.arg0).fields["condition"] = (s.arg5);
    r0 = (s.arg0).fields["once"] = (s.arg6);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_PollEvent_constructor__P2179.info = {"start":239,"length":316,"line":8,"column":8,"endLine":15,"endColumn":9,"fileName":"pxt_modules/base/poll.ts","functionName":"inline","argumentNames":["this","eid","vid","start","timeOut","condition","once"]}

function control_PollEvent_constructor__P2179_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_PollEvent_constructor__P2179, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
  arg5: undefined,
  arg6: undefined,
} }





function net_WifiController_isConnected__P1929(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = s.arg0.fields["_isConnected"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_WifiController_isConnected__P1929.info = {"start":3949,"length":56,"line":115,"column":8,"endLine":115,"endColumn":64,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"isConnected","argumentNames":["this"]}
net_WifiController_isConnected__P1929.isGetter = true;

function net_WifiController_isConnected__P1929_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_isConnected__P1929, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_WifiController_socket__P1921(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = pxsim._wifi.socketAlloc();
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socket__P1921.info = {"start":2337,"length":74,"line":69,"column":8,"endLine":71,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socket","argumentNames":["this"]}

function net_WifiController_socket__P1921_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socket__P1921, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_WifiController_dataAvailableValue__P1935(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = (1000 + s.arg1);
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_dataAvailableValue__P1935.info = {"start":5184,"length":83,"line":147,"column":8,"endLine":147,"endColumn":91,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"dataAvailableValue","argumentNames":["this","socket_num"]}

function net_WifiController_dataAvailableValue__P1935_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_dataAvailableValue__P1935, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_dataAvailableSrc__P1934(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = pxsim._wifi.eventID();
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_dataAvailableSrc__P1934.info = {"start":5096,"length":79,"line":146,"column":8,"endLine":146,"endColumn":87,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"dataAvailableSrc","argumentNames":["this","socket_num"]}

function net_WifiController_dataAvailableSrc__P1934_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_dataAvailableSrc__P1934, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_isConnected__P1113(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = false;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Controller_isConnected__P1113.info = {"start":886,"length":44,"line":34,"column":8,"endLine":34,"endColumn":52,"fileName":"pxt_modules/net/controller.ts","functionName":"isConnected","argumentNames":["this"]}
net_Controller_isConnected__P1113.isGetter = true;

function net_Controller_isConnected__P1113_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_isConnected__P1113, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_WifiController_socketClose__P1926(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    s.tmp_0 = net_WifiController_logError__P2514_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "close";
    r0 = pxsim._wifi.socketClose(s.arg1);
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 963; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketClose__P1926.info = {"start":3676,"length":122,"line":107,"column":8,"endLine":109,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketClose","argumentNames":["this","socket_num"]}

function net_WifiController_socketClose__P1926_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketClose__P1926, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_logError__P2514(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("sock ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " failed: ");
    s.tmp_2 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim.control.dmesg(s.tmp_1);
    r0 = false;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = true;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_logError__P2514.info = {"start":2421,"length":208,"line":73,"column":8,"endLine":79,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"logError","argumentNames":["this","lbl","res"]}

function net_WifiController_logError__P2514_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_logError__P2514, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_socketRead__P1925(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___14150 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    (function(cb) { pxsim._wifi.socketRead(s.arg1, s.arg2).then(cb) })(buildResume(s, 4));
    checkResumeConsumed();
    return;
  case 4:
    r0 = s.retval;
    s.r___14150 = (r0);
    r0 = pxsim_pxtcore.typeOf(s.r___14150);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "number");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = net_WifiController_logError__P2514_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "read";
    s.tmp_2.arg2 = s.r___14150;
    s.callLocIdx = 962; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
    r0 = s.r___14150;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketRead__P1925.info = {"start":3345,"length":321,"line":97,"column":8,"endLine":105,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketRead","argumentNames":["this","socket_num","size"]}

function net_WifiController_socketRead__P1925_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketRead__P1925, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___14150: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_socketAvailable__P1924(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = pxsim._wifi.socketBytesAvailable(s.arg1);
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketAvailable__P1924.info = {"start":3215,"length":120,"line":93,"column":8,"endLine":95,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketAvailable","argumentNames":["this","socket_num"]}

function net_WifiController_socketAvailable__P1924_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketAvailable__P1924, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_socketWrite__P1923(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    s.tmp_0 = net_WifiController_logError__P2514_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "write";
    (function(cb) { pxsim._wifi.socketWrite(s.arg1, s.arg2).then(cb) })(buildResume(s, 2));
    checkResumeConsumed();
    return;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 961; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketWrite__P1923.info = {"start":3059,"length":146,"line":89,"column":8,"endLine":91,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketWrite","argumentNames":["this","socket_num","buffer"]}

function net_WifiController_socketWrite__P1923_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketWrite__P1923, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_socketConnect__P1922(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1917_VT)) failedCast(r0);
    r0 = (s.arg4 != 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("only TLS supported for now");
  case 1:
  case 2:
    r0 = pxsim_pxtcore.typeOf(s.arg2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != "string");
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.throwValue("connection by IP not supported in TLS mode");
  case 3:
  case 4:
    s.tmp_3 = net_WifiController_logError__P2514_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = "connect";
    (function(cb) { pxsim._wifi.socketConnectTLS(s.arg1, s.arg2, s.arg3).then(cb) })(buildResume(s, 6));
    checkResumeConsumed();
    return;
  case 6:
    r0 = s.retval;
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 960; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketConnect__P1922.info = {"start":2639,"length":410,"line":81,"column":8,"endLine":87,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketConnect","argumentNames":["this","socket_num","dest","port","conn_mode"]}

function net_WifiController_socketConnect__P1922_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketConnect__P1922, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function net_Controller_scanNetworks__P1104(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1102_VT)) failedCast(r0);
    r0 = pxsim_Array__mk();
    return leave(s, r0)
  default: oops()
} } }
net_Controller_scanNetworks__P1104.info = {"start":81,"length":75,"line":4,"column":8,"endLine":6,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"scanNetworks","argumentNames":["this"]}

function net_Controller_scanNetworks__P1104_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_scanNetworks__P1104, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }




function lambda_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1102_v8_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_clientId_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_send_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function lambda_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function lambda_4_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }


function if_topic_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_content_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_host_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_port_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_onOpen_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_onMessage_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_onError_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_onClose_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_connect_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_handler_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_qos_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_pid_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_func_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_pid_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_will_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_message_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_username_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_password_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_retain_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1102_v1_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_close_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function lambda_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_port_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_clientId_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_qos_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_retain_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_registers_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_code_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_name_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_packf_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C1750_v0_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_Client__C1770_v0_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if__onConnected_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if__onDisconnected_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C1750_v1_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_flags_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_fields_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_headers_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_headers_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_read_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_setTimeout_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_timeout_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_json_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_data_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_data_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_readLine_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_factory_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableLogger_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableRoleManager_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C1750_v2_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_Client__C1770_v1_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_handler_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1102_v6_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if__closeHandler_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1102_v4_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1102_v5_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function net_Controller__C1102_v9_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1102_v10_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if__messageHandler_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1102_v3_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function net_Controller__C1102_v2_5_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }


function if__openHandler_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if__errorHandler_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_WifiController__C1917_v7_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_WifiController__C1917_v0_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_condition_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }

const jacdac_EventSource__C1829_VT = mkVTable({
  name: "EventSource",
  numFields: 1,
  classNo: 16,
  lastSubtypeNo: 24,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const jacdac_Bus__C1730_VT = mkVTable({
  name: "Bus",
  numFields: 11,
  classNo: 17,
  lastSubtypeNo: 17,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "hostServices": null,
    "set/hostServices": null,
    "devices": null,
    "set/devices": null,
    "_myDevice": null,
    "set/_myDevice": null,
    "restartCounter": null,
    "set/restartCounter": null,
    "resetIn": null,
    "set/resetIn": null,
    "autoBindCnt": null,
    "set/autoBindCnt": null,
    "_eventCounter": null,
    "set/_eventCounter": null,
    "controlServer": null,
    "set/controlServer": null,
    "unattachedClients": null,
    "set/unattachedClients": null,
    "allClients": null,
    "set/allClients": null,
    "running": jacdac_Bus_running__P1736,
    "start": jacdac_Bus_start__P1737,
    "gcDevices": jacdac_Bus_gcDevices__P2457,
    "selfDevice": jacdac_Bus_selfDevice__P1738,
    "mkEventCmd": jacdac_Bus_mkEventCmd__P1739,
    "clearAttachCache": jacdac_Bus_clearAttachCache__P1740,
    "queueAnnounce": jacdac_Bus_queueAnnounce__P1741,
    "detachClient": jacdac_Bus_detachClient__P1742,
    "attachClient": jacdac_Bus_attachClient__P1743,
    "startClient": jacdac_Bus_startClient__P1744,
    "reattach": jacdac_Bus_reattach__P1746,
    "processPacket": jacdac_Bus_processPacket__P1747,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const net_Net__C1168_VT = mkVTable({
  name: "Net",
  numFields: 2,
  classNo: 25,
  lastSubtypeNo: 25,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_controller": null,
    "set/_controller": null,
    "factory": null,
    "set/factory": null,
    "controller": net_Net_controller__P1171,
    "createSocket": net_Net_createSocket__P1173,
  },
});
const net_Controller__C1102_VT = mkVTable({
  name: "Controller",
  numFields: 0,
  classNo: 26,
  lastSubtypeNo: 27,
  maxBgInstances: null,
  methods: {
    "scanNetworks": net_Controller_scanNetworks__P1104,
    "socket": net_Controller_socket__P1105,
    "socketConnect": net_Controller_socketConnect__P1106,
    "socketWrite": net_Controller_socketWrite__P1107,
    "socketAvailable": net_Controller_socketAvailable__P1108,
    "socketRead": net_Controller_socketRead__P1109,
    "socketClose": net_Controller_socketClose__P1110,
    "isConnected": net_Controller_isConnected__P1113,
    "connect": net_Controller_connect__P1114,
    "dataAvailableSrc": net_Controller_dataAvailableSrc__P1118,
    "dataAvailableValue": net_Controller_dataAvailableValue__P1119,
  },
  iface: {
    "scanNetworks": net_Controller_scanNetworks__P1104,
    "socket": net_Controller_socket__P1105,
    "socketConnect": net_Controller_socketConnect__P1106,
    "socketWrite": net_Controller_socketWrite__P1107,
    "socketAvailable": net_Controller_socketAvailable__P1108,
    "socketRead": net_Controller_socketRead__P1109,
    "socketClose": net_Controller_socketClose__P1110,
    "isConnected": net_Controller_isConnected__P1113,
    "connect": net_Controller_connect__P1114,
    "dataAvailableSrc": net_Controller_dataAvailableSrc__P1118,
    "dataAvailableValue": net_Controller_dataAvailableValue__P1119,
  },
});
const net_WifiController__C1917_VT = mkVTable({
  name: "WifiController",
  numFields: 4,
  classNo: 27,
  lastSubtypeNo: 27,
  maxBgInstances: null,
  methods: {
    "scanNetworks": net_WifiController_scanNetworks__P1919,
    "socket": net_WifiController_socket__P1921,
    "socketConnect": net_WifiController_socketConnect__P1922,
    "socketWrite": net_WifiController_socketWrite__P1923,
    "socketAvailable": net_WifiController_socketAvailable__P1924,
    "socketRead": net_WifiController_socketRead__P1925,
    "socketClose": net_WifiController_socketClose__P1926,
    "isConnected": net_WifiController_isConnected__P1929,
    "connect": net_WifiController_connect__P1930,
    "dataAvailableSrc": net_WifiController_dataAvailableSrc__P1934,
    "dataAvailableValue": net_WifiController_dataAvailableValue__P1935,
  },
  iface: {
    "networks": null,
    "set/networks": null,
    "inScan": null,
    "set/inScan": null,
    "_isConnected": null,
    "set/_isConnected": null,
    "_ssid": null,
    "set/_ssid": null,
    "scanDone": net_WifiController_scanDone__P2513,
    "scanNetworks": net_WifiController_scanNetworks__P1919,
    "connectAP": net_WifiController_connectAP__P1920,
    "socket": net_WifiController_socket__P1921,
    "logError": net_WifiController_logError__P2514,
    "socketConnect": net_WifiController_socketConnect__P1922,
    "socketWrite": net_WifiController_socketWrite__P1923,
    "socketAvailable": net_WifiController_socketAvailable__P1924,
    "socketRead": net_WifiController_socketRead__P1925,
    "socketClose": net_WifiController_socketClose__P1926,
    "isConnected": net_WifiController_isConnected__P1929,
    "connect": net_WifiController_connect__P1930,
    "dataAvailableSrc": net_WifiController_dataAvailableSrc__P1934,
    "dataAvailableValue": net_WifiController_dataAvailableValue__P1935,
  },
});
const jacdac_twins_DeviceTwin__C2639_VT = mkVTable({
  name: "DeviceTwin",
  numFields: 3,
  classNo: 28,
  lastSubtypeNo: 28,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "id": null,
    "set/id": null,
    "services": null,
    "set/services": null,
    "device": null,
    "set/device": null,
    "applyTwinUpdate": jacdac_twins_DeviceTwin_applyTwinUpdate__P2640,
    "tick": jacdac_twins_DeviceTwin_tick__P2641,
    "computeReadings": jacdac_twins_DeviceTwin_computeReadings__P2642,
    "computeTwin": jacdac_twins_DeviceTwin_computeTwin__P2643,
  },
});
const mqtt_EventEmitter__C1273_VT = mkVTable({
  name: "EventEmitter",
  numFields: 1,
  classNo: 29,
  lastSubtypeNo: 30,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "handlers": null,
    "set/handlers": null,
    "on": mqtt_EventEmitter_on__P1275,
    "emit": mqtt_EventEmitter_emit__P2266,
  },
});
const mqtt_Client__C1276_VT = mkVTable({
  name: "Client",
  numFields: 10,
  classNo: 30,
  lastSubtypeNo: 30,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "handlers": null,
    "set/handlers": null,
    "logPriority": null,
    "set/logPriority": null,
    "opt": null,
    "set/opt": null,
    "net": null,
    "set/net": null,
    "sct": null,
    "set/sct": null,
    "wdId": null,
    "set/wdId": null,
    "piId": null,
    "set/piId": null,
    "buf": null,
    "set/buf": null,
    "connected": null,
    "set/connected": null,
    "mqttHandlers": null,
    "set/mqttHandlers": null,
    "log": mqtt_Client_log__P2270,
    "describe": mqtt_Client_describe__P2271,
    "disconnect": mqtt_Client_disconnect__P1281,
    "connect": mqtt_Client_connect__P1282,
    "publish": mqtt_Client_publish__P1283,
    "subscribeCore": mqtt_Client_subscribeCore__P2272,
    "subscribe": mqtt_Client_subscribe__P1284,
    "send": mqtt_Client_send__P2273,
    "handleMessage": mqtt_Client_handleMessage__P2274,
    "ping": mqtt_Client_ping__P2275,
    "on": mqtt_EventEmitter_on__P1275,
    "emit": mqtt_EventEmitter_emit__P2266,
  },
});
const control_Interval__C2173_VT = mkVTable({
  name: "Interval",
  numFields: 4,
  classNo: 31,
  lastSubtypeNo: 31,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "id": null,
    "set/id": null,
    "func": null,
    "set/func": null,
    "delay": null,
    "set/delay": null,
    "mode": null,
    "set/mode": null,
    "work": control_Interval_work__P2174,
    "cancel": control_Interval_cancel__P2175,
  },
});
const net_ControllerSocket__C1127_VT = mkVTable({
  name: "ControllerSocket",
  numFields: 12,
  classNo: 32,
  lastSubtypeNo: 32,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_buffer": null,
    "set/_buffer": null,
    "_socknum": null,
    "set/_socknum": null,
    "_timeout": null,
    "set/_timeout": null,
    "_closed": null,
    "set/_closed": null,
    "_openHandler": null,
    "set/_openHandler": null,
    "_closeHandler": null,
    "set/_closeHandler": null,
    "_errorHandler": null,
    "set/_errorHandler": null,
    "_messageHandler": null,
    "set/_messageHandler": null,
    "controller": null,
    "set/controller": null,
    "host": null,
    "set/host": null,
    "port": null,
    "set/port": null,
    "conntype": null,
    "set/conntype": null,
    "connect": net_ControllerSocket_connect__P1137,
    "send": net_ControllerSocket_send__P1138,
    "error": net_ControllerSocket_error__P2253,
    "onOpen": net_ControllerSocket_onOpen__P1139,
    "onClose": net_ControllerSocket_onClose__P1140,
    "onError": net_ControllerSocket_onError__P1141,
    "flushReadBuffer": net_ControllerSocket_flushReadBuffer__P2254,
    "onMessage": net_ControllerSocket_onMessage__P1142,
    "readLine": net_ControllerSocket_readLine__P1143,
    "read": net_ControllerSocket_read__P1144,
    "setTimeout": net_ControllerSocket_setTimeout__P1145,
    "close": net_ControllerSocket_close__P1146,
  },
});
const settings_SecretStore__C1092_VT = mkVTable({
  name: "SecretStore",
  numFields: 1,
  classNo: 33,
  lastSubtypeNo: 33,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "key": null,
    "set/key": null,
    "readSecret": settings_SecretStore_readSecret__P1096,
    "readSecrets": settings_SecretStore_readSecrets__P1098,
  },
});
const JSON_Parser__C2186_VT = mkVTable({
  name: "Parser",
  numFields: 3,
  classNo: 34,
  lastSubtypeNo: 34,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "ptr": null,
    "set/ptr": null,
    "s": null,
    "set/s": null,
    "errorMsg": null,
    "set/errorMsg": null,
    "error": JSON_Parser_error__P2187,
    "skipWS": JSON_Parser_skipWS__P2188,
    "nextChar": JSON_Parser_nextChar__P2189,
    "doString": JSON_Parser_doString__P2190,
    "doArray": JSON_Parser_doArray__P2191,
    "doObject": JSON_Parser_doObject__P2192,
    "doNumber": JSON_Parser_doNumber__P2193,
    "checkKw": JSON_Parser_checkKw__P2194,
    "value": JSON_Parser_value__P2195,
  },
});
const jacdac_twins_ServiceTwin__C2630_VT = mkVTable({
  name: "ServiceTwin",
  numFields: 7,
  classNo: 35,
  lastSubtypeNo: 35,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "id": null,
    "set/id": null,
    "enabled": null,
    "set/enabled": null,
    "readings": null,
    "set/readings": null,
    "timestamps": null,
    "set/timestamps": null,
    "parent": null,
    "set/parent": null,
    "serviceIdx": null,
    "set/serviceIdx": null,
    "spec": null,
    "set/spec": null,
    "extract": jacdac_twins_ServiceTwin_extract__P2631,
    "tick": jacdac_twins_ServiceTwin_tick__P2632,
    "applyTwinUpdate": jacdac_twins_ServiceTwin_applyTwinUpdate__P2633,
    "computeTwin": jacdac_twins_ServiceTwin_computeTwin__P2634,
    "process": jacdac_twins_ServiceTwin_process__P2635,
  },
});
const jacdac_JDPacket__C1357_VT = mkVTable({
  name: "JDPacket",
  numFields: 3,
  classNo: 36,
  lastSubtypeNo: 36,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_header": null,
    "set/_header": null,
    "_data": null,
    "set/_data": null,
    "timestamp": null,
    "set/timestamp": null,
    "fromBinary": jacdac_JDPacket_fromBinary__P1361,
    "from": jacdac_JDPacket_from__P1362,
    "onlyHeader": jacdac_JDPacket_onlyHeader__P1363,
    "jdpacked": jacdac_JDPacket_jdpacked__P1364,
    "deviceIdentifier": jacdac_JDPacket_deviceIdentifier__P1366,
    "set/deviceIdentifier": jacdac_JDPacket_deviceIdentifier__P1367,
    "packetFlags": jacdac_JDPacket_packetFlags__P1368,
    "multicommandClass": jacdac_JDPacket_multicommandClass__P1369,
    "size": jacdac_JDPacket_size__P1370,
    "requiresAck": jacdac_JDPacket_requiresAck__P1371,
    "set/requiresAck": jacdac_JDPacket_requiresAck__P1372,
    "serviceIndex": jacdac_JDPacket_serviceIndex__P1373,
    "set/serviceIndex": jacdac_JDPacket_serviceIndex__P1374,
    "crc": jacdac_JDPacket_crc__P1375,
    "serviceCommand": jacdac_JDPacket_serviceCommand__P1376,
    "set/serviceCommand": jacdac_JDPacket_serviceCommand__P1377,
    "isEvent": jacdac_JDPacket_isEvent__P1378,
    "eventCode": jacdac_JDPacket_eventCode__P1379,
    "eventCounter": jacdac_JDPacket_eventCounter__P1380,
    "isRegSet": jacdac_JDPacket_isRegSet__P1381,
    "isRegGet": jacdac_JDPacket_isRegGet__P1382,
    "regCode": jacdac_JDPacket_regCode__P1383,
    "data": jacdac_JDPacket_data__P1384,
    "set/data": jacdac_JDPacket_data__P1385,
    "intData": jacdac_JDPacket_intData__P1386,
    "jdunpack": jacdac_JDPacket_jdunpack__P1389,
    "compress": jacdac_JDPacket_compress__P1390,
    "withFrameStripped": jacdac_JDPacket_withFrameStripped__P1391,
    "isCommand": jacdac_JDPacket_isCommand__P1394,
    "isReport": jacdac_JDPacket_isReport__P1395,
    "toString": jacdac_JDPacket_toString__P1396,
    "_sendCore": jacdac_JDPacket__sendCore__P1397,
    "_sendReport": jacdac_JDPacket__sendReport__P1398,
    "_sendCmd": jacdac_JDPacket__sendCmd__P1399,
    "_sendCmdId": jacdac_JDPacket__sendCmdId__P1400,
    "sendAsMultiCommand": jacdac_JDPacket_sendAsMultiCommand__P1401,
    "_sendWithAck": jacdac_JDPacket__sendWithAck__P1402,
  },
  toStringMethod: jacdac_JDPacket_toString__P1396,
});
const jacdac_Server__C1750_VT = mkVTable({
  name: "Server",
  numFields: 8,
  classNo: 18,
  lastSubtypeNo: 21,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1756,
    "handlePacket": jacdac_Server_handlePacket__P1757,
    "log": jacdac_Server_log__P2386,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1756,
    "handlePacket": jacdac_Server_handlePacket__P1757,
    "advertisementData": jacdac_Server_advertisementData__P1759,
    "sendReport": jacdac_Server_sendReport__P2374,
    "sendEvent": jacdac_Server_sendEvent__P2375,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2376,
    "handleAnnounce": jacdac_Server_handleAnnounce__P2377,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2378,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2379,
    "handleRegValue": jacdac_Server_handleRegValue__P2381,
    "handleRegBool": jacdac_Server_handleRegBool__P2382,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2384,
    "start": jacdac_Server_start__P1760,
    "log": jacdac_Server_log__P2386,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const jacdac_Device__C1795_VT = mkVTable({
  name: "Device",
  numFields: 9,
  classNo: 22,
  lastSubtypeNo: 22,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "lastSeen": null,
    "set/lastSeen": null,
    "clients": null,
    "set/clients": null,
    "_eventCounter": null,
    "set/_eventCounter": null,
    "_shortId": null,
    "set/_shortId": null,
    "queries": null,
    "set/queries": null,
    "_score": null,
    "set/_score": null,
    "deviceId": null,
    "set/deviceId": null,
    "services": null,
    "set/services": null,
    "announceflags": jacdac_Device_announceflags__P1800,
    "resetCount": jacdac_Device_resetCount__P1801,
    "shortId": jacdac_Device_shortId__P1804,
    "toString": jacdac_Device_toString__P1805,
    "matchesRoleAt": jacdac_Device_matchesRoleAt__P1806,
    "lookupQuery": jacdac_Device_lookupQuery__P2473,
    "serviceClassLength": jacdac_Device_serviceClassLength__P1807,
    "serviceClassAt": jacdac_Device_serviceClassAt__P1808,
    "query": jacdac_Device_query__P1810,
    "uptime": jacdac_Device_uptime__P1811,
    "processPacket": jacdac_Device_processPacket__P1814,
    "sendCtrlCommand": jacdac_Device_sendCtrlCommand__P1817,
    "_destroy": jacdac_Device__destroy__P1818,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
  toStringMethod: jacdac_Device_toString__P1805,
});
const jacdac_Client__C1770_VT = mkVTable({
  name: "Client",
  numFields: 17,
  classNo: 23,
  lastSubtypeNo: 23,
  maxBgInstances: null,
  methods: {
    "handlePacket": jacdac_Client_handlePacket__P1784,
    "announceCallback": jacdac_Client_announceCallback__P1793,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "device": null,
    "set/device": null,
    "currentDevice": null,
    "set/currentDevice": null,
    "eventId": null,
    "set/eventId": null,
    "broadcast": null,
    "set/broadcast": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "supressLog": null,
    "set/supressLog": null,
    "started": null,
    "set/started": null,
    "advertisementData": null,
    "set/advertisementData": null,
    "handlers": null,
    "set/handlers": null,
    "systemActive": null,
    "set/systemActive": null,
    "_onConnected": null,
    "set/_onConnected": null,
    "_onDisconnected": null,
    "set/_onDisconnected": null,
    "config": null,
    "set/config": null,
    "registers": null,
    "set/registers": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "role": null,
    "set/role": null,
    "handlePacketOuter": jacdac_Client_handlePacketOuter__P1783,
    "handlePacket": jacdac_Client_handlePacket__P1784,
    "_attach": jacdac_Client__attach__P1785,
    "handleConnected": jacdac_Client_handleConnected__P2364,
    "connectedBlink": jacdac_Client_connectedBlink__P2365,
    "_detach": jacdac_Client__detach__P1786,
    "onAttach": jacdac_Client_onAttach__P2366,
    "onDetach": jacdac_Client_onDetach__P2367,
    "sendCommand": jacdac_Client_sendCommand__P1787,
    "raiseEvent": jacdac_Client_raiseEvent__P2368,
    "start": jacdac_Client_start__P1791,
    "announceCallback": jacdac_Client_announceCallback__P1793,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const jacdac_RegisterClient__C1762_VT = mkVTable({
  name: "RegisterClient",
  numFields: 6,
  classNo: 24,
  lastSubtypeNo: 24,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "data": null,
    "set/data": null,
    "_localTime": null,
    "set/_localTime": null,
    "service": null,
    "set/service": null,
    "code": null,
    "set/code": null,
    "packFormat": null,
    "set/packFormat": null,
    "handlePacket": jacdac_RegisterClient_handlePacket__P1769,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const jacdac_ClientPacketQueue__C2462_VT = mkVTable({
  name: "ClientPacketQueue",
  numFields: 2,
  classNo: 37,
  lastSubtypeNo: 37,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "pkts": null,
    "set/pkts": null,
    "parent": null,
    "set/parent": null,
    "updateQueue": jacdac_ClientPacketQueue_updateQueue__P2463,
    "send": jacdac_ClientPacketQueue_send__P2465,
    "resend": jacdac_ClientPacketQueue_resend__P2466,
  },
});
const jacdac_TokenParser__C2354_VT = mkVTable({
  name: "TokenParser",
  numFields: 9,
  classNo: 38,
  lastSubtypeNo: 38,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "c0": null,
    "set/c0": null,
    "size": null,
    "set/size": null,
    "div": null,
    "set/div": null,
    "fp": null,
    "set/fp": null,
    "nfmt": null,
    "set/nfmt": null,
    "nfmt2": null,
    "set/nfmt2": null,
    "word": null,
    "set/word": null,
    "isArray": null,
    "set/isArray": null,
    "fmt": null,
    "set/fmt": null,
    "parse": jacdac_TokenParser_parse__P2355,
  },
});
const mqtt_MQTTHandler__C2267_VT = mkVTable({
  name: "MQTTHandler",
  numFields: 3,
  classNo: 39,
  lastSubtypeNo: 39,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "status": null,
    "set/status": null,
    "topic": null,
    "set/topic": null,
    "handler": null,
    "set/handler": null,
  },
});
const azureiot_ValueAwaiter__C1302_VT = mkVTable({
  name: "ValueAwaiter",
  numFields: 2,
  classNo: 40,
  lastSubtypeNo: 40,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "evid": null,
    "set/evid": null,
    "value": null,
    "set/value": null,
    "setValue": azureiot_ValueAwaiter_setValue__P1304,
    "wait": azureiot_ValueAwaiter_wait__P1305,
  },
});
const JSON_Stringifier__C2196_VT = mkVTable({
  name: "Stringifier",
  numFields: 3,
  classNo: 41,
  lastSubtypeNo: 41,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "currIndent": null,
    "set/currIndent": null,
    "indentStep": null,
    "set/indentStep": null,
    "indent": null,
    "set/indent": null,
    "doString": JSON_Stringifier_doString__P2197,
    "go": JSON_Stringifier_go__P2198,
  },
});
const jacdac_RegQuery__C2470_VT = mkVTable({
  name: "RegQuery",
  numFields: 5,
  classNo: 42,
  lastSubtypeNo: 42,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "lastQuery": null,
    "set/lastQuery": null,
    "lastReport": null,
    "set/lastReport": null,
    "value": null,
    "set/value": null,
    "reg": null,
    "set/reg": null,
    "serviceIdx": null,
    "set/serviceIdx": null,
  },
});
const net_Response__C1184_VT = mkVTable({
  name: "Response",
  numFields: 6,
  classNo: 43,
  lastSubtypeNo: 43,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_cached": null,
    "set/_cached": null,
    "status_code": null,
    "set/status_code": null,
    "reason": null,
    "set/reason": null,
    "_read_so_far": null,
    "set/_read_so_far": null,
    "headers": null,
    "set/headers": null,
    "socket": null,
    "set/socket": null,
    "close": net_Response_close__P1191,
    "content": net_Response_content__P1192,
    "text": net_Response_text__P1193,
    "json": net_Response_json__P1194,
    "toString": net_Response_toString__P1195,
  },
  toStringMethod: net_Response_toString__P1195,
});
const jacdac_EventListener__C1826_VT = mkVTable({
  name: "EventListener",
  numFields: 3,
  classNo: 44,
  lastSubtypeNo: 44,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "key": null,
    "set/key": null,
    "handler": null,
    "set/handler": null,
    "once": null,
    "set/once": null,
  },
});
const net_AccessPoint__C1153_VT = mkVTable({
  name: "AccessPoint",
  numFields: 3,
  classNo: 45,
  lastSubtypeNo: 45,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "rssi": null,
    "set/rssi": null,
    "encryption": null,
    "set/encryption": null,
    "ssid": null,
    "set/ssid": null,
  },
});
const jacdac_LoggerServer__C1572_VT = mkVTable({
  name: "LoggerServer",
  numFields: 10,
  classNo: 19,
  lastSubtypeNo: 19,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1756,
    "handlePacket": jacdac_LoggerServer_handlePacket__P1575,
    "log": jacdac_LoggerServer_log__P1577,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "_lastListenerTime": null,
    "set/_lastListenerTime": null,
    "minPriority": null,
    "set/minPriority": null,
    "handlePacket": jacdac_LoggerServer_handlePacket__P1575,
    "log": jacdac_LoggerServer_log__P1577,
    "add": jacdac_LoggerServer_add__P1580,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1756,
    "advertisementData": jacdac_Server_advertisementData__P1759,
    "sendReport": jacdac_Server_sendReport__P2374,
    "sendEvent": jacdac_Server_sendEvent__P2375,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2376,
    "handleAnnounce": jacdac_Server_handleAnnounce__P2377,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2378,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2379,
    "handleRegValue": jacdac_Server_handleRegValue__P2381,
    "handleRegBool": jacdac_Server_handleRegBool__P2382,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2384,
    "start": jacdac_Server_start__P1760,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const jacdac__rolemgr_RoleManagerServer__C1657_VT = mkVTable({
  name: "RoleManagerServer",
  numFields: 10,
  classNo: 20,
  lastSubtypeNo: 20,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1756,
    "handlePacket": jacdac__rolemgr_RoleManagerServer_handlePacket__P1660,
    "log": jacdac_Server_log__P2386,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "_oldBindingsHash": null,
    "set/_oldBindingsHash": null,
    "autoBind": null,
    "set/autoBind": null,
    "handlePacket": jacdac__rolemgr_RoleManagerServer_handlePacket__P1660,
    "bindingHash": jacdac__rolemgr_RoleManagerServer_bindingHash__P2450,
    "checkProxy": jacdac__rolemgr_RoleManagerServer_checkProxy__P1661,
    "bindRoles": jacdac__rolemgr_RoleManagerServer_bindRoles__P1662,
    "checkChanges": jacdac__rolemgr_RoleManagerServer_checkChanges__P2451,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1756,
    "advertisementData": jacdac_Server_advertisementData__P1759,
    "sendReport": jacdac_Server_sendReport__P2374,
    "sendEvent": jacdac_Server_sendEvent__P2375,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2376,
    "handleAnnounce": jacdac_Server_handleAnnounce__P2377,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2378,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2379,
    "handleRegValue": jacdac_Server_handleRegValue__P2381,
    "handleRegBool": jacdac_Server_handleRegBool__P2382,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2384,
    "start": jacdac_Server_start__P1760,
    "log": jacdac_Server_log__P2386,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const jacdac__rolemgr_DeviceWrapper__C2438_VT = mkVTable({
  name: "DeviceWrapper",
  numFields: 3,
  classNo: 46,
  lastSubtypeNo: 46,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "bindings": null,
    "set/bindings": null,
    "score": null,
    "set/score": null,
    "device": null,
    "set/device": null,
  },
});
const jacdac__rolemgr_RoleBinding__C2440_VT = mkVTable({
  name: "RoleBinding",
  numFields: 4,
  classNo: 47,
  lastSubtypeNo: 47,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "boundToDev": null,
    "set/boundToDev": null,
    "boundToServiceIdx": null,
    "set/boundToServiceIdx": null,
    "role": null,
    "set/role": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "host": jacdac__rolemgr_RoleBinding_host__P2441,
    "select": jacdac__rolemgr_RoleBinding_select__P2442,
  },
});
const jacdac__rolemgr_ServerBindings__C2444_VT = mkVTable({
  name: "ServerBindings",
  numFields: 2,
  classNo: 48,
  lastSubtypeNo: 48,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "bindings": null,
    "set/bindings": null,
    "host": null,
    "set/host": null,
    "fullyBound": jacdac__rolemgr_ServerBindings_fullyBound__P2445,
    "scoreFor": jacdac__rolemgr_ServerBindings_scoreFor__P2446,
  },
});
const jacdac_DelayedPacket__C2403_VT = mkVTable({
  name: "DelayedPacket",
  numFields: 2,
  classNo: 49,
  lastSubtypeNo: 49,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "timestamp": null,
    "set/timestamp": null,
    "pkt": null,
    "set/pkt": null,
  },
});
const jacdac_ControlServer__C1819_VT = mkVTable({
  name: "ControlServer",
  numFields: 8,
  classNo: 21,
  lastSubtypeNo: 21,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_ControlServer_handlePacketOuter__P1822,
    "handlePacket": jacdac_Server_handlePacket__P1757,
    "log": jacdac_Server_log__P2386,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "sendUptime": jacdac_ControlServer_sendUptime__P1821,
    "handleFloodPing": jacdac_ControlServer_handleFloodPing__P2476,
    "handlePacketOuter": jacdac_ControlServer_handlePacketOuter__P1822,
    "handlePacket": jacdac_Server_handlePacket__P1757,
    "advertisementData": jacdac_Server_advertisementData__P1759,
    "sendReport": jacdac_Server_sendReport__P2374,
    "sendEvent": jacdac_Server_sendEvent__P2375,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2376,
    "handleAnnounce": jacdac_Server_handleAnnounce__P2377,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2378,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2379,
    "handleRegValue": jacdac_Server_handleRegValue__P2381,
    "handleRegBool": jacdac_Server_handleRegBool__P2382,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2384,
    "start": jacdac_Server_start__P1760,
    "log": jacdac_Server_log__P2386,
    "on": jacdac_EventSource_on__P1831,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2361,
    "emit": jacdac_EventSource_emit__P1834,
  },
});
const control_EventContext__C393_VT = mkVTable({
  name: "EventContext",
  numFields: 9,
  classNo: 50,
  lastSubtypeNo: 50,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "handlers": null,
    "set/handlers": null,
    "frameCallbacks": null,
    "set/frameCallbacks": null,
    "frameWorker": null,
    "set/frameWorker": null,
    "framesInSample": null,
    "set/framesInSample": null,
    "timeInSample": null,
    "set/timeInSample": null,
    "deltaTimeMillis": null,
    "set/deltaTimeMillis": null,
    "prevTimeMillis": null,
    "set/prevTimeMillis": null,
    "idleCallbacks": null,
    "set/idleCallbacks": null,
    "runningCallbacks": null,
    "set/runningCallbacks": null,
    "registerHandler": control_EventContext_registerHandler__P403,
  },
});
const control_EventHandler__C2199_VT = mkVTable({
  name: "EventHandler",
  numFields: 4,
  classNo: 51,
  lastSubtypeNo: 51,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "src": null,
    "set/src": null,
    "value": null,
    "set/value": null,
    "handler": null,
    "set/handler": null,
    "flags": null,
    "set/flags": null,
    "register": control_EventHandler_register__P2200,
  },
});
const jacdac_OutPipe__C1429_VT = mkVTable({
  name: "OutPipe",
  numFields: 3,
  classNo: 52,
  lastSubtypeNo: 52,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "nextCnt": null,
    "set/nextCnt": null,
    "deviceId": null,
    "set/deviceId": null,
    "port": null,
    "set/port": null,
    "from": jacdac_OutPipe_from__P1431,
    "respondForEach": jacdac_OutPipe_respondForEach__P1432,
    "writeEx": jacdac_OutPipe_writeEx__P2398,
    "write": jacdac_OutPipe_write__P1434,
    "writeAndClose": jacdac_OutPipe_writeAndClose__P1435,
    "close": jacdac_OutPipe_close__P1436,
  },
});
const jacdac_AckAwaiter__C2323_VT = mkVTable({
  name: "AckAwaiter",
  numFields: 6,
  classNo: 53,
  lastSubtypeNo: 53,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "nextRetry": null,
    "set/nextRetry": null,
    "numTries": null,
    "set/numTries": null,
    "crc": null,
    "set/crc": null,
    "eventId": null,
    "set/eventId": null,
    "pkt": null,
    "set/pkt": null,
    "srcId": null,
    "set/srcId": null,
  },
});
const control_PollEvent__C2178_VT = mkVTable({
  name: "PollEvent",
  numFields: 6,
  classNo: 54,
  lastSubtypeNo: 54,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "eid": null,
    "set/eid": null,
    "vid": null,
    "set/vid": null,
    "start": null,
    "set/start": null,
    "timeOut": null,
    "set/timeOut": null,
    "condition": null,
    "set/condition": null,
    "once": null,
    "set/once": null,
  },
});

const breakpoints = setupDebugger(1, ["streamingIntervalSpec___2626","twins___2619","exclusions___2620","lastReadingsSent___2624","currTwin___2621","pendingReadings___2623"])

return _main___P2120
})
